2026-01-12T11:35:40.430+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:40.430+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-12T11:35:40.432+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-12T11:35:40.432+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-12T11:35:40.443+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:40.466+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 5(Long)
2026-01-12T11:35:40.447+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-12T11:35:40.454+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.462+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/my-approvals
2026-01-12T11:35:40.463+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.468+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-12T11:35:40.474+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:40.481+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-12T11:35:40.482+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:40.490+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-12T11:35:40.491+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-12T11:35:40.491+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-12T11:35:40.491+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:40.491+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:40.493+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-12T11:35:40.494+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:40.497+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.497+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-12T11:35:40.527+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.498+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:40.517+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:40.519+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7543691c]
2026-01-12T11:35:40.519+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cb46a71]
2026-01-12T11:35:40.519+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a0647ae] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.528+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47dbe18e] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.529+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:40.530+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:40.530+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:40.530+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.531+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1178514017 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:40.533+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1150525483 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:40.538+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:40.533+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:40.534+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:40.535+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-12T11:35:40.535+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3056b7ee] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.536+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.551+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-12T11:35:40.551+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.562+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a525ebd] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.553+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.553+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.561+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877910647 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:40.561+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.563+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1622238321 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:40.563+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3828ad60] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.569+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-12T11:35:40.575+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.577+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.576+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:40.577+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1424065343 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:40.579+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-12T11:35:40.583+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-12T11:35:40.584+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.584+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-12T11:35:40.590+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47dbe18e]
2026-01-12T11:35:40.584+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:40.585+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-12T11:35:40.586+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.589+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a0647ae]
2026-01-12T11:35:40.592+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.593+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-12T11:35:40.593+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-12T11:35:40.593+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3056b7ee]
2026-01-12T11:35:40.595+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.595+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480d394e] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.596+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 5
2026-01-12T11:35:40.596+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-12T11:35:40.598+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.598+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-12T11:35:40.599+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728c1901] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.599+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1346532944 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:40.600+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a525ebd]
2026-01-12T11:35:40.600+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.600+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7513264b] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.600+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3828ad60]
2026-01-12T11:35:40.601+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1781468105 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:40.601+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.602+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.610+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f6e39c0] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.611+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1732322598 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:40.614+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.603+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d83ca7] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.604+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1895761600 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:40.608+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.609+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.609+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.615+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.615+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@581044640 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:40.616+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:40.616+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ed707f1] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.616+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.618+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-12T11:35:40.619+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.619+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.621+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:40.623+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@594141926 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:40.625+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 5(Long)
2026-01-12T11:35:40.626+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f6e39c0]
2026-01-12T11:35:40.626+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480d394e]
2026-01-12T11:35:40.628+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:40.631+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:40.631+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.632+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:40.633+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.634+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:40.634+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-12T11:35:40.636+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.634+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e7c9e11] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.635+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7513264b]
2026-01-12T11:35:40.635+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728c1901]
2026-01-12T11:35:40.645+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-12T11:35:40.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-12T11:35:40.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603936217 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:40.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.657+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.679+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef2d90] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.658+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:40.661+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/my-approvals
2026-01-12T11:35:40.665+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d83ca7]
2026-01-12T11:35:40.669+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:40.679+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a22bb0] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.680+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389642301 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:40.680+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ed707f1]
2026-01-12T11:35:40.689+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-12T11:35:40.690+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:40.690+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 37(Long), 34(Long), 32(Long), 25(Long), 1(Long)
2026-01-12T11:35:40.701+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74410385 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:40.701+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:40.701+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:40.708+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-12T11:35:40.708+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-12T11:35:40.709+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:40.711+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:40.713+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:40.713+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-12T11:35:40.714+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.724+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:40.727+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.731+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 9
2026-01-12T11:35:40.731+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.734+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:40.740+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:40.742+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e7c9e11]
2026-01-12T11:35:40.742+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e8e97b] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.744+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:40.747+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:40.747+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:40.747+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.747+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1150370105 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:40.748+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef2d90]
2026-01-12T11:35:40.748+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:40.748+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:40.749+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd5e2cc] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.750+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:40.750+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.750+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:40.751+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:40.751+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203991409 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:40.752+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:40.756+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-12T11:35:40.757+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54b0da05] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.757+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:40.758+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:40.758+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.758+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a22bb0]
2026-01-12T11:35:40.759+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@676331182 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:40.759+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.759+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.761+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.762+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.763+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.763+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d48a5e9] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.764+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@259f92ec] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.764+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e7ab92] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.764+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-12T11:35:40.765+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.766+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2091381291 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:40.766+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.767+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@507627041 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:40.767+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1507982229 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:40.767+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e8e97b]
2026-01-12T11:35:40.768+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:40.768+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd5e2cc]
2026-01-12T11:35:40.769+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:40.769+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.769+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.769+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.770+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-12T11:35:40.770+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:40.773+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-12T11:35:40.773+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.773+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430658be] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.773+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54b0da05]
2026-01-12T11:35:40.774+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterI (truncated)...]
2026-01-12T11:35:40.778+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711325844 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:40.779+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.780+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.780+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.780+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2324dd1f] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.782+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.782+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.782+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 5
2026-01-12T11:35:40.783+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 5
2026-01-12T11:35:40.789+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1905675148 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:40.792+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e7ab92]
2026-01-12T11:35:40.793+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@259f92ec]
2026-01-12T11:35:40.793+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d48a5e9]
2026-01-12T11:35:40.795+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:40.795+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.796+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.796+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.796+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.797+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:40.797+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430658be]
2026-01-12T11:35:40.798+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f5c58a2] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.798+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee9a90] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.798+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea6e003] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.799+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.800+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123734496 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:40.800+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1581211763 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:40.801+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1983474643 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:40.801+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8af8] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.802+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:40.802+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:40.802+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.802+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.804+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904796137 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:40.806+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:40.806+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2324dd1f]
2026-01-12T11:35:40.807+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.807+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.808+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:40.810+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.811+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 37(Long), 34(Long), 32(Long), 25(Long), 1(Long)
2026-01-12T11:35:40.812+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e20c598] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.813+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199834982 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:40.814+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.814+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:40.814+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:40.814+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea6e003]
2026-01-12T11:35:40.815+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f5c58a2]
2026-01-12T11:35:40.815+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.815+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 9
2026-01-12T11:35:40.817+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:40.818+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:40.818+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.818+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee9a90]
2026-01-12T11:35:40.818+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8af8]
2026-01-12T11:35:40.818+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-12T11:35:40.818+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bf5e6c8] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.819+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:40.822+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.823+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.823+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1724984412 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:40.831+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.824+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-12T11:35:40.824+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcbcd0a] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.833+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.834+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:40.841+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.842+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534262081 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:40.843+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e20c598]
2026-01-12T11:35:40.846+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.848+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.849+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.849+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356a32bf] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.851+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1039019407 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:40.853+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.856+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:40.856+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.856+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.857+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bf5e6c8]
2026-01-12T11:35:40.857+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fcbcd0a]
2026-01-12T11:35:40.858+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:40.858+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:40.858+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-12T11:35:40.858+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterI (truncated)...]
2026-01-12T11:35:40.859+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.864+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:40.866+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:40.873+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356a32bf]
2026-01-12T11:35:40.874+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.874+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ed1a2d] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.875+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442195813 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:40.883+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:40.885+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:40.899+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:40.901+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ed1a2d]
2026-01-12T11:35:40.902+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:40.903+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b21e92] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:40.903+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1322734139 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:40.919+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:40.947+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:41.084+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:41.148+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b21e92]
2026-01-12T11:35:41.235+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:41.312+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-12T11:35:41.395+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:41.395+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:41.397+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:41.397+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:41.431+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:41.531+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:41.575+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:41.579+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:41.580+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:41.580+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:41.589+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:41.581+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:41.587+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:41.590+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:41.591+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:41.594+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:41.594+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:41.594+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:41.594+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:41.595+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:41.595+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:41.596+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:41.596+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:41.596+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a3e03bc] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:41.597+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:41.598+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:41.598+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:41.599+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:41.599+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:41.607+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a39c6b6] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:41.606+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc19e7c] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:41.606+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:41.611+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42765ef0] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:41.614+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@251435797 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:41.615+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@846488318 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:41.615+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@251399006 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:41.615+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:41.616+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:41.616+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@338080920 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:41.617+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:41.618+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-12T11:35:41.619+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-12T11:35:41.619+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:41.623+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-12T11:35:41.625+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-12T11:35:41.644+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-12T11:35:41.644+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 5
2026-01-12T11:35:41.644+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-12T11:35:41.645+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 5
2026-01-12T11:35:41.647+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42765ef0]
2026-01-12T11:35:41.647+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a3e03bc]
2026-01-12T11:35:41.648+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a39c6b6]
2026-01-12T11:35:41.648+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc19e7c]
2026-01-12T11:35:41.649+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:41.649+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:41.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:41.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:41.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@541215f8] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:41.651+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40cf8d94] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:41.651+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71c7c08b] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:41.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c342347] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:41.655+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@508970904 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:41.658+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@942634267 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:41.659+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1536772501 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:41.659+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1145647095 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:41.660+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:41.660+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:41.661+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:41.662+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:41.664+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:41.664+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:41.665+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:41.666+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-12T11:35:41.669+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:41.670+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:41.671+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:41.671+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:41.673+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@541215f8]
2026-01-12T11:35:41.674+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c342347]
2026-01-12T11:35:41.674+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71c7c08b]
2026-01-12T11:35:41.678+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40cf8d94]
2026-01-12T11:35:41.679+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:41.679+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:41.680+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:41.680+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:41.680+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:41.680+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-12T11:35:41.681+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:41.681+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterId= (truncated)...]
2026-01-12T11:35:41.682+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:41.682+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:41.682+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:41.682+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:42.034+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-12T11:35:42.040+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-12T11:35:42.044+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/logout
2026-01-12T11:35:42.045+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-12T11:35:42.045+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-12T11:35:42.046+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-12T11:35:42.046+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI1IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-12T11:35:42.048+09:00  INFO 18628 --- [http-nio-8080-exec-5] SECURITY                                 : LOGOUT userId=5
2026-01-12T11:35:42.050+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:42.051+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-12T11:35:42.052+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:45.266+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-12T11:35:45.272+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-12T11:35:45.275+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-12T11:35:45.279+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-12T11:35:45.279+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-12T11:35:45.332+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-12T11:35:45.376+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-12T11:35:45.394+09:00  INFO 18628 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-12T11:35:45.397+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:45.398+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6696b8c9] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:45.400+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@380526548 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:45.400+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-12T11:35:45.401+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-12T11:35:45.402+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-12T11:35:45.403+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6696b8c9]
2026-01-12T11:35:45.485+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:45.485+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b613bb8] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:45.485+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840941595 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:45.486+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:45.487+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:45.490+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:45.491+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b613bb8]
2026-01-12T11:35:45.492+09:00  INFO 18628 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 1
2026-01-12T11:35:45.492+09:00  INFO 18628 --- [http-nio-8080-exec-6] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-12T11:35:45.493+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:45.493+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-12T11:35:45.494+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:45.882+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-12T11:35:45.885+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-12T11:35:45.887+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-12T11:35:45.890+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-12T11:35:45.892+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-12T11:35:45.897+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-12T11:35:45.897+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:45.898+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e6c1f8d] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:45.901+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1316937438 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:45.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-12T11:35:45.910+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-12T11:35:45.942+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-12T11:35:45.944+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e6c1f8d]
2026-01-12T11:35:45.946+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:45.947+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-12T11:35:45.950+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.309+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:46.312+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:46.316+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-12T11:35:46.316+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:46.321+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:46.322+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-12T11:35:46.328+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-12T11:35:46.334+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-12T11:35:46.330+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-12T11:35:46.330+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-12T11:35:46.343+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:46.331+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:46.332+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:46.351+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-12T11:35:46.335+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-12T11:35:46.339+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-12T11:35:46.344+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:46.348+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:46.357+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:46.359+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-12T11:35:46.365+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-12T11:35:46.361+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:46.363+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:46.367+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:46.364+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-12T11:35:46.364+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:46.368+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:46.369+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:46.373+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.365+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:46.366+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-12T11:35:46.367+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:46.367+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:46.375+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:46.369+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-12T11:35:46.374+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270c2a66] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.375+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:46.375+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-12T11:35:46.375+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:46.377+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.377+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-12T11:35:46.378+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:46.378+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.379+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:46.380+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6b77af] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.380+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-12T11:35:46.380+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@764476909 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.380+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:46.380+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1daaa94] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.381+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:46.382+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-12T11:35:46.382+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:46.383+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.383+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.389+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a81edd3] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.385+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.386+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1776629545 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:46.386+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1706083363 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:46.387+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:46.388+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18038f10] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.391+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b834ff5] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.391+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-12T11:35:46.392+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:46.392+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1416412628 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:46.392+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1232188039 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:46.394+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:46.395+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-12T11:35:46.395+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1885887389 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:46.397+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.395+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:46.395+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:46.396+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:46.396+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270c2a66]
2026-01-12T11:35:46.397+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.398+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-12T11:35:46.399+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:46.401+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:46.401+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:46.401+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.402+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1daaa94]
2026-01-12T11:35:46.403+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6b77af]
2026-01-12T11:35:46.403+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.406+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5e5449] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.407+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.407+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.407+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b834ff5]
2026-01-12T11:35:46.408+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-12T11:35:46.408+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:46.409+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@146838362 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.409+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-12T11:35:46.409+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d366b3c] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.409+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.416+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7706f5c8] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.410+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18038f10]
2026-01-12T11:35:46.410+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a81edd3]
2026-01-12T11:35:46.411+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.411+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.416+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089935075 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:46.417+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1236475820 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:46.430+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.417+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.418+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.418+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.418+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:46.428+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-12T11:35:46.431+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.432+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76566670] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.432+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18dcfc5f] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.434+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:46.435+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-12T11:35:46.436+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1915296933 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:46.439+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220257393 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:46.439+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-12T11:35:46.440+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.441+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:46.442+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-12T11:35:46.442+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.442+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.443+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:46.444+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-12T11:35:46.444+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:46.444+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.446+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7706f5c8]
2026-01-12T11:35:46.445+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5e5449]
2026-01-12T11:35:46.445+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-12T11:35:46.445+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d366b3c]
2026-01-12T11:35:46.447+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.449+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.447+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.448+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:46.448+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.449+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-12T11:35:46.449+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2217c3ef] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.449+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:46.449+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterId= (truncated)...]
2026-01-12T11:35:46.449+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18dcfc5f]
2026-01-12T11:35:46.450+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76566670]
2026-01-12T11:35:46.450+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.451+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660930768 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:46.451+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.451+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.458+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.465+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:46.459+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.467+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.459+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e91f7c] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.459+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:46.462+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:46.472+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:46.463+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:46.467+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterId= (truncated)...]
2026-01-12T11:35:46.491+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:46.468+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277885453 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:46.470+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:46.475+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:46.476+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-12T11:35:46.491+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.492+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:46.494+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-12T11:35:46.498+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:46.499+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-12T11:35:46.500+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-12T11:35:46.500+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:46.501+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-12T11:35:46.501+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:46.503+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-12T11:35:46.513+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-12T11:35:46.513+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:46.514+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.515+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-12T11:35:46.516+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-12T11:35:46.515+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-12T11:35:46.515+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.515+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74481629] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.517+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-12T11:35:46.517+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-12T11:35:46.518+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a644ca2] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.520+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938411708 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:46.520+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:46.523+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-12T11:35:46.523+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-12T11:35:46.524+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-12T11:35:46.524+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1472684722 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:46.525+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:46.526+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2217c3ef]
2026-01-12T11:35:46.526+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.526+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.527+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-12T11:35:46.527+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:46.529+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:46.529+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.529+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1518cf35] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.530+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4d0305] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.531+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:46.531+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-12T11:35:46.531+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600be835] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.532+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1519687301 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.534+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948345276 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:46.534+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-12T11:35:46.534+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-12T11:35:46.535+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082424672 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:46.535+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-12T11:35:46.536+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:46.537+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:46.538+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74481629]
2026-01-12T11:35:46.539+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e91f7c]
2026-01-12T11:35:46.539+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.539+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-12(LocalDate)
2026-01-12T11:35:46.540+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:46.540+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a644ca2]
2026-01-12T11:35:46.541+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.541+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.542+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.543+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.543+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a54ffd1] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.545+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-12T11:35:46.546+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-12T11:35:46.548+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1518cf35]
2026-01-12T11:35:46.546+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:46.574+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4d0305]
2026-01-12T11:35:46.547+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@517c8f21] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.547+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1855542252 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:46.548+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.548+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.562+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.575+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.576+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@696633584 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:46.585+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:46.576+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.582+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600be835]
2026-01-12T11:35:46.584+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-12T11:35:46.584+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-12T11:35:46.585+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-12T11:35:46.586+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:46.586+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.586+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.591+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-12T11:35:46.592+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.596+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.600+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c4fa37] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.600+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-12T11:35:46.601+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-12T11:35:46.612+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-12T11:35:46.617+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-12T11:35:46.618+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1798433498 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:46.619+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-12T11:35:46.623+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-12T11:35:46.623+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:46.623+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.624+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-12T11:35:46.624+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:46.625+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-12T11:35:46.625+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-12T11:35:46.625+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@517c8f21]
2026-01-12T11:35:46.625+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a54ffd1]
2026-01-12T11:35:46.626+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.626+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.627+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3451f] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.626+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:46.626+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-12T11:35:46.626+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-12T11:35:46.627+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.627+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:46.630+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterId= (truncated)...]
2026-01-12T11:35:46.628+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@783721910 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.629+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-12T11:35:46.630+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-12T11:35:46.631+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.631+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:46.632+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.632+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.640+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.633+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-12T11:35:46.635+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-12T11:35:46.635+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c4fa37]
2026-01-12T11:35:46.646+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-12T11:35:46.647+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-12T11:35:46.648+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.648+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.649+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.649+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.649+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d78b33] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.649+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@139fcee7] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@724682588 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:46.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e3451f]
2026-01-12T11:35:46.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b635edc] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@300575176 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:46.651+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:46.651+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.651+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1956804075 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:46.651+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-12T11:35:46.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bbd41b7] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:46.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-12T11:35:46.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-12T11:35:46.653+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912990818 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.653+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-12(LocalDate)
2026-01-12T11:35:46.657+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.658+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:46.660+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.662+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d78b33]
2026-01-12T11:35:46.662+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.663+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-12T11:35:46.663+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-12T11:35:46.663+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e74edeb] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.663+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b635edc]
2026-01-12T11:35:46.664+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-12T11:35:46.665+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.665+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520334597 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:46.666+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.667+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bbd41b7]
2026-01-12T11:35:46.667+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.668+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-12T11:35:46.668+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.668+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.669+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-12T11:35:46.669+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.674+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae7e5a9] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.675+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-12T11:35:46.681+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1259781563 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.681+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@139fcee7]
2026-01-12T11:35:46.682+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:46.683+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.684+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.685+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:46.685+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e74edeb]
2026-01-12T11:35:46.686+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-12T11:35:46.688+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.689+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.691+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24274c5e] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.695+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034286724 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:46.696+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:46.697+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:46.699+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:46.700+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:46.701+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae7e5a9]
2026-01-12T11:35:46.701+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24274c5e]
2026-01-12T11:35:46.701+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.701+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.701+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544a0bcf] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.702+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e613fa] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.702+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1630893634 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.702+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2000549668 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:46.702+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.702+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.703+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.703+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.707+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.707+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.707+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544a0bcf]
2026-01-12T11:35:46.707+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e613fa]
2026-01-12T11:35:46.708+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.708+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.708+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346eb463] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.709+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-12T11:35:46.709+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822007122 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.710+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:46.710+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.714+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:46.727+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:46.730+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346eb463]
2026-01-12T11:35:46.731+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.732+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62be8cb1] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.732+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590541097 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.732+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:46.743+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:46.748+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:46.750+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62be8cb1]
2026-01-12T11:35:46.751+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.751+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66322ff] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.752+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@279903622 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.755+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.758+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.760+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.760+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66322ff]
2026-01-12T11:35:46.761+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.761+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e0f6d68] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.763+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@367875663 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.764+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:46.765+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:46.774+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:46.777+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e0f6d68]
2026-01-12T11:35:46.778+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.778+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57734de2] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.778+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@315760201 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:46.779+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.779+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.781+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.781+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57734de2]
2026-01-12T11:35:46.781+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.783+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-12T11:35:46.784+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.900+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:46.901+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:46.905+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:46.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:46.917+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:46.918+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:46.918+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:46.926+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:46.922+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:46.922+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:46.926+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:46.926+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:46.933+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:46.933+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:46.933+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:46.934+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:46.934+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:46.934+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:46.935+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:46.940+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:46.935+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:46.943+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.935+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:46.936+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:46.943+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.943+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61df3062] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.944+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.945+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:46.945+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cdfb248] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.946+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1893406523 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:46.946+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79324994] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.946+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.948+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904766581 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:46.949+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:46.949+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1275249684 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:46.956+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:46.950+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d84d83c] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.950+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:46.956+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:46.958+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:46.959+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2137150061 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:46.961+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:46.962+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:46.965+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:46.965+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-12T11:35:46.965+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-12T11:35:46.966+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:46.967+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79324994]
2026-01-12T11:35:46.967+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61df3062]
2026-01-12T11:35:46.968+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cdfb248]
2026-01-12T11:35:46.968+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.969+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.973+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.973+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@510af439] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.973+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f830ed] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.974+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45878877] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.974+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@983529829 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:46.975+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.975+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@272387504 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:46.975+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:46.975+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:46.975+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@876294013 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:46.976+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:46.975+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.976+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:46.976+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d84d83c]
2026-01-12T11:35:46.980+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:46.978+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:46.981+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f157573] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:46.982+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.982+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@340461973 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:46.983+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:46.985+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@510af439]
2026-01-12T11:35:46.985+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:46.986+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f830ed]
2026-01-12T11:35:46.986+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:46.986+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.989+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:46.990+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.992+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45878877]
2026-01-12T11:35:46.992+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterId= (truncated)...]
2026-01-12T11:35:46.993+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterId= (truncated)...]
2026-01-12T11:35:46.994+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:46.995+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:46.997+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:47.001+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:47.017+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:47.027+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:47.032+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f157573]
2026-01-12T11:35:47.033+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:47.033+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:47.034+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:47.144+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-12T11:35:47.145+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-12T11:35:47.147+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-12T11:35:47.147+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-12T11:35:47.147+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:47.168+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-12T11:35:47.173+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-12T11:35:47.200+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-12T11:35:47.201+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-12T11:35:47.201+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-12T11:35:47.202+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-12T11:35:47.183+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-12T11:35:47.184+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-12T11:35:47.214+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-12T11:35:47.216+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-12T11:35:47.216+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-12T11:35:47.193+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:47.198+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-12T11:35:47.212+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-12T11:35:47.215+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-12T11:35:47.217+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-12T11:35:47.222+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:47.230+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-12T11:35:47.230+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-12T11:35:47.231+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-12T11:35:47.231+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-12T11:35:47.240+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:47.241+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-12T11:35:47.242+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:47.242+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-12T11:35:47.243+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-12T11:35:47.245+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:47.246+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-12T11:35:47.246+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1168ed51] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:47.247+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-12T11:35:47.248+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:47.250+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-12T11:35:47.248+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:47.249+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-12T11:35:47.249+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390428793 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:47.250+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@269602b2] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:47.250+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-12T11:35:47.251+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:47.251+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-12T11:35:47.251+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-12T11:35:47.254+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1864380885 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:47.255+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:47.256+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1739f81] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:47.256+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712efd7d] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:47.256+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:47.256+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-12T11:35:47.256+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-12T11:35:47.257+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2018409448 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:47.258+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-12T11:35:47.257+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1429516486 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:47.257+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@732ad850] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:47.258+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-12T11:35:47.259+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:47.259+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@876128283 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:47.260+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-12T11:35:47.261+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:47.261+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-12T11:35:47.262+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-12T11:35:47.281+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-12T11:35:47.281+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-12T11:35:47.281+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-12T11:35:47.281+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@732ad850]
2026-01-12T11:35:47.281+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@269602b2]
2026-01-12T11:35:47.282+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:47.282+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1168ed51]
2026-01-12T11:35:47.282+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:47.282+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:47.282+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712efd7d]
2026-01-12T11:35:47.283+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:47.283+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=2093783, totalCo (truncated)...]
2026-01-12T11:35:47.283+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=APPROVED, count=20, tota (truncated)...]
2026-01-12T11:35:47.283+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:47.284+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-12T11:35:47.285+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:47.286+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:47.285+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:47.285+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e6d52a8] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:47.288+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1479448845 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:47.289+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:47.290+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:47.292+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 7
2026-01-12T11:35:47.293+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1739f81]
2026-01-12T11:35:47.294+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:47.294+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-12T11:35:47.296+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:47.325+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:47.347+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e6d52a8]
2026-01-12T11:35:47.353+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:47.359+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:47.360+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:48.808+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:48.810+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-12T11:35:48.810+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:48.811+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/41
2026-01-12T11:35:48.814+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-12T11:35:48.817+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:48.817+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-12T11:35:48.817+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:48.818+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/41
2026-01-12T11:35:48.825+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/41
2026-01-12T11:35:48.819+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-12T11:35:48.819+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/41
2026-01-12T11:35:48.824+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:48.825+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-12T11:35:48.830+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-12T11:35:48.831+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-12T11:35:48.825+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:48.826+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/41
2026-01-12T11:35:48.828+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:48.831+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-12T11:35:48.832+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:48.836+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-12T11:35:48.847+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/41", parameters={}
2026-01-12T11:35:48.849+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-12T11:35:48.849+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me/signatures
2026-01-12T11:35:48.850+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.848+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:48.848+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.850+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:48.848+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:48.850+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-12T11:35:48.850+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74b2ee0f] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.850+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fac4831] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.851+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.851+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:48.851+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-12T11:35:48.851+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156b689c] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.852+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.856+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e8ad45] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.852+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-12T11:35:48.857+09:00  INFO 18628 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 1, companyId: 1
2026-01-12T11:35:48.858+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.858+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb7c60f] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.860+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-12T11:35:48.863+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me/signatures
2026-01-12T11:35:48.863+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-12T11:35:48.864+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-12T11:35:48.864+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-12T11:35:48.864+09:00  INFO 18628 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 1, companyId: 1
2026-01-12T11:35:48.865+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.865+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa71acf] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.866+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671266782 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:48.866+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1707217670 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:48.866+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1790806523 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:48.866+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093653574 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:48.866+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-12T11:35:48.866+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-12T11:35:48.866+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:48.866+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:48.867+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:48.867+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:48.867+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:48.868+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:48.876+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@5514437 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:48.876+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1675732412 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:48.876+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-12T11:35:48.876+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:48.876+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-12T11:35:48.877+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:48.877+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e8ad45]
2026-01-12T11:35:48.877+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-12T11:35:48.877+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-12T11:35:48.877+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:48.878+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.878+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156b689c]
2026-01-12T11:35:48.878+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fac4831]
2026-01-12T11:35:48.879+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d694fb7] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.879+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.879+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:48.879+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410120284 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:48.879+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2b0e94] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.880+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-12T11:35:48.880+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:48.880+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@442136634 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:48.880+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:48.880+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:48.881+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:48.886+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:48.890+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/41
2026-01-12T11:35:48.893+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/41
2026-01-12T11:35:48.894+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/41
2026-01-12T11:35:48.894+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/41", parameters={}
2026-01-12T11:35:48.894+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-12T11:35:48.895+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74b2ee0f]
2026-01-12T11:35:48.895+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.895+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625caf9f] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.895+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-12T11:35:48.896+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@346715022 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:48.896+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-12T11:35:48.896+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.896+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:48.896+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31e36c5e] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.898+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@552742965 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:48.898+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-12T11:35:48.898+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:48.902+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:48.903+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:48.902+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-12T11:35:48.903+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-12T11:35:48.903+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d694fb7]
2026-01-12T11:35:48.903+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2b0e94]
2026-01-12T11:35:48.905+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625caf9f]
2026-01-12T11:35:48.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb7c60f]
2026-01-12T11:35:48.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:48.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:48.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.907+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:48.907+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:48.907+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterId= (truncated)...]
2026-01-12T11:35:48.907+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e198ad] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.908+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=8, userId=1, si (truncated)...]
2026-01-12T11:35:48.908+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:48.908+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:48.910+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1078388633 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:48.912+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:48.916+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-12T11:35:48.918+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-12T11:35:48.918+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:48.918+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31e36c5e]
2026-01-12T11:35:48.919+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.919+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646fa2d7] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.920+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1321509784 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:48.923+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-12T11:35:48.925+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:48.926+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-12T11:35:48.927+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa71acf]
2026-01-12T11:35:48.927+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:48.927+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=8, userId=1, si (truncated)...]
2026-01-12T11:35:48.928+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:48.961+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-12T11:35:48.968+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646fa2d7]
2026-01-12T11:35:48.976+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-12T11:35:48.977+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.978+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e198ad]
2026-01-12T11:35:48.980+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e073ba] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.980+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.981+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@536876875 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:48.981+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72bdbfe2] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.981+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-12T11:35:48.982+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@970094056 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:48.982+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:48.982+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-12T11:35:48.985+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:48.986+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-12T11:35:48.989+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e073ba]
2026-01-12T11:35:48.991+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.991+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f70102] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.992+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1018224581 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:48.993+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-12T11:35:48.993+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-12T11:35:48.994+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72bdbfe2]
2026-01-12T11:35:48.994+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:48.994+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:48.997+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7701f399] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:48.999+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1750859828 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:48.999+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:48.999+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:49.000+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-12T11:35:49.000+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f70102]
2026-01-12T11:35:49.000+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:49.002+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:49.002+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8af04a] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:49.002+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7701f399]
2026-01-12T11:35:49.003+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959466760 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:49.003+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:49.003+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:49.006+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=41, drafterId=2, r (truncated)...]
2026-01-12T11:35:49.007+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:49.009+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:49.019+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:49.034+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8af04a]
2026-01-12T11:35:49.035+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:49.043+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=41, drafterId=2, r (truncated)...]
2026-01-12T11:35:49.045+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:50.873+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/41/approve
2026-01-12T11:35:50.891+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/41/approve
2026-01-12T11:35:50.893+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/41/approve
2026-01-12T11:35:50.894+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/41/approve
2026-01-12T11:35:50.900+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/41/approve", parameters={}
2026-01-12T11:35:50.903+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#approveExpense(Long, ApprovalLineDto)
2026-01-12T11:35:50.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ApprovalLineDto(approvalLineId=null, expenseReportId=null, approverId=1, stepOrder=null, status=null (truncated)...]
2026-01-12T11:35:50.909+09:00  INFO 18628 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 결재 승인 요청 - expenseId: 41, approverId: 1
2026-01-12T11:35:50.964+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:50.965+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f]
2026-01-12T11:35:50.966+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1886720472 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will be managed by Spring
2026-01-12T11:35:50.967+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-12T11:35:50.968+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:50.982+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-12T11:35:50.983+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f]
2026-01-12T11:35:50.984+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f] from current transaction
2026-01-12T11:35:50.986+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.updateApprovalLine             : ==>  Preparing: UPDATE approval_line_tb SET status = 'APPROVED', signature_data = ?, approval_date = NOW() WHERE expense_report_id = ? AND approver_id = ? AND company_id = ?
2026-01-12T11:35:50.992+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.updateApprovalLine             : ==> Parameters: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAADICAYAAADFjnuPAAAQAElEQVR4AeydPagVRx+Hl5BYhEBChCBJIEkhViGFhaCgFmppISIWIgiKnSBqpRYiFoKVVoIoWImFhY2Fil8I2ghqIWLhVbDwo7CwEBXe9/5OMsfZOefcc/ZjdufjEffuzuzuzP//zOW5c+fsPeebT58+/Y8NBnwP8D3A90B43wPfFPyDAAQgAIEgCSDoIIeFoCAAgakEMrgAQWcwyKQIAQjESQBBxzluRA0BCGRAAEFnMMikmCMBck6BAIJOYRTJAQIQSJIAgk5yWEkKAhBIgQCCTmEUyaEqAa6HQBQEEHQUw0SQEIBAjgQQdI6jTs4QgEAUBBB0FMPUbZD0BgEIhEEAQYcxDkQBAQhAYIQAgh5BQgUEIACBMAgg6KrjwPUQgAAEOiKAoDsCTTcQgAAEqhJA0FWJcT0EIACBjgi0LOiOoqYbCEAAAhkQQNAZDDIpQgACcRJA0HGOG1FDAAItEwixOQQd4qgQEwQgAIF5Agh6HgL/IQABCIRIAEGHOCrEBIHQCBBPLwQQdC/Y6RQCEIDAdAIIejojroAABCDQCwEE3Qt2Ok2LANlAwA8BBO2HK61CAAIQaEwAQTdGSAMQgAAE/BBA0H640upXAhxBAAI1CSDomuC4DQIQgIBvAgjaN2HahwAEIFCTAIKuCa6t22gHAhCAwCQCCHoSGeohAAEI9EwAQfc8AHQPAQhAYBKBsAU9KWrqIQABCGRAAEFnMMikCAEIxEkAQcc5bkQNAQiETaCV6BB0KxhpBAIQgED7BBB0+0xpEQIQgEArBBB0KxhpBAIQqEKAa2cjgKBn48RVEIAABDongKA7R06HEIAABGYjgKBn48RVEOiOAD1B4D8CCPo/EOzaJfDixYvi/Pnzxa1bt9ptmNYgkBEBBJ3RYHeR6tGjR4uff/65WLp0abFz585i/fr1xaJFi4ZlnVe95G1vBf8gAIERAgh6BAkVdQlIxhLwhw8fRpowM2qdl5glaXuT0LXp/MWLF0fu/1rBEQTyIYCg8xlrr5lKrE2WMyRwbWpn27ZtxV9//TVYIvEaNI1DIHACCDrwAYolPInVjXX79u2FtjVr1rinppZfvXpVqE1tUy/mAggkSgBBpzWwvWQzbuZ89erV4syZM4NNx8+ePSu0HT9+fFhnzmsvkbvBmxm1lkTcc5QhkAMBBJ3DKHvOUSK1u/jjjz8Kd9asOm179+4dzqolZbNJ0hL4jh07Cl1XWP+0Vs26tAWEw2wIIOhshtpfoq6g//zzz1qdScynT58url27NiJ4rUuPm6nX6oibIBAJgawEHcmYRBfmw4cPSzH/+OOPpXLVgkStGbV7n54SQdIuFcopE0DQKY9uR7n9888/pZ7qzqDtRiTpmzdvFosXL7arB89VuzP20gUUIJAQAQSd0GD2lcrt27dLXTedQZvGVq5cWdy7d6+QrE2d9jzZIQpsORD4KugcsiXHTgi4Qm3SqdrSmrT2ph091cEs2tBgnzIBBJ3y6PaUmy3TNkJQe4cPHy41NTc3VypTgECKBBB0iqPacU59yPLBgwcdZ0l3ARNINjQEnezQ9peYj+UH97lq98XD/rKlZwj4I4Cg/bHNtmUtSfhO3hW27/5oHwJ9EEDQfVBPrM8uZKkXBm1sXfwQsPuL+ZjY4yWAoOMdu2Aj97HEYT9ah5yDHXoCa5kAgm4ZaI7N+RamLWfx1ft3aM8GgdQJIOjUR7iD/FavXl3qpW1h24JW2+4jd6XOqxa4HgIBE0DQAQ9OLKG9fv26FKpbLp2sWLDlrFuRsyiw5UIAQecy0h7z/PjxY6l1t1w6WbFgC1qzZ5Y3KgLk8qgJIOioh8938P22f/DgwVIAzJ5LOChkQABBZzDIvlPUzNZHH/ab9C9ZsmTwRv8++qFNCIRKAEGHOjIRxeXrsTq73V27dkVEhFAh0A4BBF2fI3dOINB0Ri0xu2vPLG9MgE110gQQdNLD201yTYXsRrl06dJS1bhPVyldQAECiRJA0IkObJ9pfffdd7W71wfE2jdLzl38KbndJ8cQCIWAN0GHkiBxdE/g8+fPtTrV5w3a77mxbNkyXhisRZKbUiGAoFMZyR7zcD+D0C3PEprWnfWhsPa1jx8/toscQyA7Agg6uyEPM+F169YNA9Oa9tWrV4dlDiDQLYFwekPQ4YxFtJFoaaJJ8Jo5awZt2mDd2ZBgnzsBBJ37d0DP+WvN+e7du8MokPMQBQcQKBA03wSNCWhJok4jmnnrqY0vX74Mbt+0aRMvCg5IBP2F4DokgKA7hJ1LV3Nzc1NT1ZKG5Gwu1KN0Fy5cMEX2EIDAPAEEPQ+B/80IuE9tSL7TWpSczXWagWtpY9o9nIdAbgQQdG4j7iFfCVabafr27dvmcOxectbyhjkpOdv3m/oY98QMgTYJIOg2adLWgMDTp08H+3Ff9u/fX+iFQXNOj9NpecOU2UMAAl8JIOivLDhqQGDjxo3Du+/fv1+Y5Yth5fyBHqc7efLk/NG//zVzRs7/suArBMYRQNDjqFBXmcDvv/9eusd+oVCylpxv3bo1vEZy5tNRhjg4gMBYAgh6LBYqqxLQI3L2PZKyylpr1l8Jaq+yNuQsCmwQmE4AQU9nxBUzENCLfNrMpXqhUFLWzNnIWuf0vs7MnEWCDQLTCSDo6Yw6uiKtbq5cuVJIznZWmjlL0HYdxxCAwGQCCHoyG85UJLB8+fLhHW/fvh0e60BPazBzFgk2CMxOAEHPzoorpxBYsWLF2CskZ57WGIuGSggsSCAWQS+YBCf7J6B15rNnz5YC+fbbb4ubN28WyLmEhQIEZiaAoGdGxYWTCEjOa9euLdw/UNGbIF2/fn3SbdRDAAJTCCDoKYA4vTABPamhD3l99erV8MLvv/9+eKxP57548eKwzAEEsiPQIGEE3QBe7rdKzu6TGlqH3rdvXwnNtm3bCl1bqqQAAQhMJYCgpyLignEEtKzhyllrzXfu3Cn0KJ37Dnd6gyTdM66t2OuUl35TEA/9NqHj2HMi/jAIIOgwxiGqKCQkicgOWnLW0xqmzj5Wne5x/6JQ9TFtykGbfhuQhPVDZ9GiRYVYqKx6nbffDCqm/PqJlV4XIoCgF6LDuRECEpCEZJ9w5axz+qvCZ8+e6XC46V5JTSIbVgZ8oHglXsX866+/DkSs3DVTVv04EStv/QYRcFqEFhEBBB3RYPUdqqQkQdlxSEjubNmc1zn99aApay/pSXjj5KbzfW+KT3kqRuWqY8X67t27iaEpT0lZP5C08Qc5E1FxoiIBBF0RWK6Xm1mjnf9vv/1WSEh2nXssWUledr0kKAHabz1qn+/rWDK2pbxQHEbKnz59GjBQjqpb6J4a57glcwIIOvNvgFnS1wzSXZbQssbz589nuX3woqE7k9aN7pv3q66Pbffu3YPlCwl6Wv8//fRToVz0g0lSnnY95yHQhACCbkIvk3s12zWpapYoQU1a1jDXuXvNpCU1t15tzyJG976mZc3i1a9e5Dt37tzYDxiw+1DeEvKbN28K5WKf4xgCvgggaF9kE2lXArVTkZzrCkqS059+2+3pWKJ0+1H9tK3OeYlZfZmljEltKFblKSnbyxiTrqceAj4IIGgfVBNqU0Kz09HShl2uerxy5crBmq0EaN+rZRSff3Go9iVlbTq2+9bxkiVLhksx+u1As339MJKgdZ4NAn0QQNB9UI+oT3vtuamcTdqS87Vr10beREl/cej+QDD31NmrLc3OtYyhWbPKdjuKQwLWDPnly5cDQWvW3Faedl8cQ6AOAQRdh1oM93iIcW5urrVWJUfNUFetWlVqc9zstnTBlIIkLCnrqRPNlnXs3mL61ixZgnbPU4ZAKAQQdCgjEUEckp+2tkKVKG/cuFHocT3TpoRapQ9dq1m+7tNM2UhZdaZN7dWXZCwpa9NMWfVsEAiZAIIOeXQCiE1is8NocxZt2j1y5Ig5HOxduQ4qrS86LyGbWbL2KluXDA4l/h07dpQei3PzGVzIFwgESiBTQQc6GgGG5b7pkWasbYfpSvPUqVOlLtSnBCwRa5asvcoSdenC+YLaMjNlPad9+vRpHoub58L/OAkg6DjHrbOoJTy7s0ePHtnFVo71otzixYuHbT18+LDYvHlzoRf2zHtgLCRkLVdIynqxT8sXOnbjHjbOAQQiIoCgIxqsPkLdsGFDqdv379+Xym0Vfvnll1JTly9fLvSCof0eGJKuNglYmxGyXmxUudQABQgkQGCcoBNIixTaIrBly5a2miq1Y5YtNEvWssWTJ09K51X44YcfBo/inThxojDPJpsZMkIWIbbUCSDo1Ee4hfw0azXNaN1XcjVl7d2y6txN12hGrKUKCdk8baE691pT1rLHoUOHij179gxEberZQyAXAgg6l5FukKfWeM3tEu3ff/9dbN26dfAGQ0a2Zq8X8DQrloi1V9mcU1n1pi3tJX+tQWtGrNmx6symvnSPKbOHwFQCiV2AoBMbUB/pSJ4SqWn748ePxaVLl0beYEhC1Qxbs2KJWHuVzX3aqx0jZLNsob3pw/5hoOvVJpIWCbYcCSDoHEe9Rs6a3eoDYd1bJVw9b7xs2bLBMoTkqzqzSbx6gyRJ2Lyop2PV61q3PdXrXrteotdTHXYdxxDIgQCCzmGUW8pRHwgr2ZqnJiRtbXre+PHjx4MX8iRf1ZlNwtUbJI2T8biwJGe9T4d7Tk91aLlEM2r3HOVZCXBdbAQQdGwj1nO8kq2WISReydRHOGpXPwTctrVcsm7dukLLJ+45yhBIkQCCTnFUE8hJPwQOHDgwkolm0BK0ngIZOUkFBBIjgKATG9CU0jl27NjgLUDH5SRRa0Y97lzNOm6DQHAEEHRwQ0JANgEtpWg9e9wa9rg6+16OIRA7AQQd+whmEL/WpM2Lj1qbNtLOIHVSzJwAgs78G2DW9EO4TqLW2rQEreMQYiIGCPgkgKB90qVtCEAAAg0IIOgG8LgVAhCAgE8CCLoNurQBAQhAwAMBBO0BKk1CAAIQaIMAgm6DIm1AAAIQ8ECgA0F7iJomIQABCGRAAEFnMMikCAEIxEkAQcc5bkQNAQh0QKDvLhB03yNA/xCAAAQmEEDQE8BQDQEIQKBvAgi67xGgfwjESoC4vRNA0N4R0wEEIACBegQQdD1u3AUBCEDAOwEE7R0xHeRJgKwh0JwAgm7OkBYgAAEIeCGAoL1gpVEIQAACzQkg6OYMaaE6Ae6AAARmIICgZ4DEJRCAAAT6IICg+6BOnxCAAARmIICgZ4DU9SX0BwEIQEAEELQosEEAAhAIkACCDnBQCAkCEICACMQnaEXNBgEIQCADAgg6g0EmRQhAIE4CCDrOcSNqCEAgPgKVI0bQlZFxAwQgAIFuCCDobjjTCwQgAIHKBBB0ZWTcAAEI+CBAm6MEEPQoE2ogAAEIBEEAQQcxDAQBAQhAYJQAgh5lQg0EwiNARFkSQNBZDjtJQwACMRBA0DGMEjFCAAJZEkDQWQ57akmTP/8f7gAAAjFJREFUDwTSJICg0xxXsoIABBIggKATGERSgAAE0iSAoNMcVzsrjiEAgUgJIOhIB46wIQCB9Akg6PTHmAwhAIFICWQv6EjHjbAhAIEMCCDoDAaZFCEAgTgJIOg4x42oIQCBDAgsLOgMAJAiBCAAgVAJIOhQR4a4IACB7Akg6Oy/BQAAgSQJJJEUgk5iGEkCAhBIkQCCTnFUyQkCEEiCAIJOYhhJAgLVCHB1HAQQdBzjRJQQgECGBBB0hoNOyhCAQBwEEHQc40SUXRKgLwgEQgBBBzIQhAEBCEDAJYCgXSKUIQABCARCAEEHMhDxhEGkEIBAVwQQdFek6QcCEIBARQIIuiIwLocABCDQFQEE3S5pWoMABCDQGgEE3RpKGoIABCDQLgEE3S5PWoMABCDQGoFOBd1a1DQEAQhAIAMCCDqDQSZFCEAgTgIIOs5xI2oIQKBTAv10hqD74U6vEIAABKYSQNBTEXEBBCAAgX4IIOh+uNMrBFIiQC6eCCBoT2BpFgIQgEBTAgi6KUHuhwAEIOCJAIL2BJZmIWAIsIdAXQIIui457oMABCDgmQCC9gyY5iEAAQjUJYCg65LjvnYI0AoEIDCRAIKeiIYTEIAABPolgKD75U/vEIAABCYSQNAT0YRwghggAIGcCSDonEef3CEAgaAJIOigh4fgIACBnAnELOicx43cIQCBDAgg6AwGmRQhAIE4CSDoOMeNqCEAgZgJzBg7gp4RFJdBAAIQ6JrA/wEAAP//mY3erwAAAAZJREFUAwDH2qFgJ0jhxwAAAABJRU5ErkJggg==(String), 41(Long), 1(Long), 1(Long)
2026-01-12T11:35:51.077+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.updateApprovalLine             : <==    Updates: 1
2026-01-12T11:35:51.079+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f]
2026-01-12T11:35:51.080+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f] from current transaction
2026-01-12T11:35:51.082+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-12T11:35:51.082+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:51.089+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-12T11:35:51.090+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f]
2026-01-12T11:35:51.093+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f] from current transaction
2026-01-12T11:35:51.093+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-12T11:35:51.094+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:51.098+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-12T11:35:51.101+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f]
2026-01-12T11:35:51.108+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f] from current transaction
2026-01-12T11:35:51.110+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.updateExpenseReportStatus      : ==>  Preparing: UPDATE expense_report_tb SET status = ? WHERE expense_report_id = ? AND company_id = ?
2026-01-12T11:35:51.114+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.updateExpenseReportStatus      : ==> Parameters: APPROVED(String), 41(Long), 1(Long)
2026-01-12T11:35:51.130+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.m.E.updateExpenseReportStatus      : <==    Updates: 1
2026-01-12T11:35:51.130+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f]
2026-01-12T11:35:51.130+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f]
2026-01-12T11:35:51.130+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f]
2026-01-12T11:35:51.131+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c372d0f]
2026-01-12T11:35:51.146+09:00  INFO 18628 --- [http-nio-8080-exec-5] c.i.b.controller.ExpenseController       : 결재 승인 완료 - expenseId: 41
2026-01-12T11:35:51.146+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:51.147+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결제 승인 완료, data=null)]
2026-01-12T11:35:51.147+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:51.154+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/41
2026-01-12T11:35:51.171+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/41
2026-01-12T11:35:51.177+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/41
2026-01-12T11:35:51.179+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/41
2026-01-12T11:35:51.180+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/41", parameters={}
2026-01-12T11:35:51.180+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-12T11:35:51.181+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:51.182+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3aceba] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:51.184+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813860291 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:51.185+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-12T11:35:51.186+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:51.193+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-12T11:35:51.193+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3aceba]
2026-01-12T11:35:51.193+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:51.194+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c315dd0] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:51.194+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989453289 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:51.194+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-12T11:35:51.195+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:51.196+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-12T11:35:51.197+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c315dd0]
2026-01-12T11:35:51.198+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:51.198+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2297ea] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:51.199+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066448451 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:51.199+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-12T11:35:51.200+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:51.202+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-12T11:35:51.202+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2297ea]
2026-01-12T11:35:51.202+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:51.205+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eba31fd] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:51.206+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@664692743 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:51.207+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-12T11:35:51.209+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 41(Long), 1(Long)
2026-01-12T11:35:51.212+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-12T11:35:51.212+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eba31fd]
2026-01-12T11:35:51.213+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:51.213+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ac1ed6] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:51.213+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2035737639 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:51.213+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:51.214+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:51.215+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:51.216+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ac1ed6]
2026-01-12T11:35:51.216+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:51.217+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=41, drafterId=2, r (truncated)...]
2026-01-12T11:35:51.218+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.248+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:55.248+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:55.249+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-12T11:35:55.250+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-12T11:35:55.252+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:55.264+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:55.254+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-12T11:35:55.262+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-12T11:35:55.265+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:55.265+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-12T11:35:55.266+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-12T11:35:55.268+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:55.273+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:55.273+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-12T11:35:55.300+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-12T11:35:55.300+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:55.302+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:55.302+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:55.302+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-12T11:35:55.302+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-12T11:35:55.313+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-12T11:35:55.316+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-12T11:35:55.322+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-12T11:35:55.318+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:55.319+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:55.319+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-12T11:35:55.319+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-12T11:35:55.322+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-12T11:35:55.323+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-12T11:35:55.323+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:55.324+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:55.326+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-12T11:35:55.327+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-12T11:35:55.329+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-12T11:35:55.330+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-12T11:35:55.331+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:55.331+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:55.331+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-12T11:35:55.338+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-12T11:35:55.340+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.341+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@491094ab] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.331+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-12T11:35:55.342+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-12T11:35:55.332+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-12T11:35:55.335+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-12T11:35:55.336+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:55.336+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:55.344+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.347+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-12T11:35:55.349+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.351+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@223b294c] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.349+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.350+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.350+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a65d95d] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.351+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.355+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b232c7b] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.351+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@332eca6] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.352+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b446abb] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.352+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1368817508 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:55.358+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-12T11:35:55.363+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:55.367+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@476688631 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:55.368+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855139249 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:55.368+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@796062583 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:55.368+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@857106729 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:55.368+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@103344292 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:55.380+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.380+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-12T11:35:55.380+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:55.380+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:55.381+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:55.381+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:55.381+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.381+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@491094ab]
2026-01-12T11:35:55.411+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.382+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:55.398+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:55.399+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:55.401+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:55.411+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-12T11:35:55.425+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.429+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:55.441+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:55.443+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.443+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:55.444+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-12T11:35:55.447+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:55.449+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a65d95d]
2026-01-12T11:35:55.449+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@223b294c]
2026-01-12T11:35:55.450+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@332eca6]
2026-01-12T11:35:55.452+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.457+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 7
2026-01-12T11:35:55.457+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b232c7b]
2026-01-12T11:35:55.458+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.458+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5c878e] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.450+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:55.450+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.451+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.456+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:55.457+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15b2eca1] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.459+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285242855 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:55.459+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:55.462+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac3e409] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.463+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-12T11:35:55.463+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b446abb]
2026-01-12T11:35:55.463+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@831552569 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:55.463+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.464+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.464+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716735657 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:55.465+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.465+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.465+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.466+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.467+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@935dc2b] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.467+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.468+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e2fe65] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.470+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:55.475+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.479+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@971496955 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:55.480+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.481+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@185810329 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:55.488+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:55.482+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:55.482+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:55.483+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.489+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:55.489+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:55.490+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:55.491+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.491+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5c878e]
2026-01-12T11:35:55.492+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:55.492+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.496+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:55.496+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15b2eca1]
2026-01-12T11:35:55.496+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.498+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4083165c] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.497+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:55.497+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac3e409]
2026-01-12T11:35:55.497+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e2fe65]
2026-01-12T11:35:55.497+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-12T11:35:55.498+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.498+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1808304437 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:55.499+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.499+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.499+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.499+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@935dc2b]
2026-01-12T11:35:55.499+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-12T11:35:55.499+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:55.502+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3456e057] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.502+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a64bc0c] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.502+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:55.503+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.505+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.510+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 39(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-12T11:35:55.510+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1460826108 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:55.512+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@534965477 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:55.512+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.512+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7865c688] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.515+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-12T11:35:55.517+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:55.523+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:55.525+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603705131 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:55.526+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 9
2026-01-12T11:35:55.533+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-12T11:35:55.535+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-12T11:35:55.536+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:55.540+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:55.541+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.541+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4083165c]
2026-01-12T11:35:55.542+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-12T11:35:55.542+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-12T11:35:55.544+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.546+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.546+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-12T11:35:55.546+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:55.546+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-12T11:35:55.547+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:55.547+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10d057bf] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.548+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-12T11:35:55.548+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3456e057]
2026-01-12T11:35:55.549+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.549+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-12T11:35:55.549+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a64bc0c]
2026-01-12T11:35:55.550+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220121103 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:55.550+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.550+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.551+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7865c688]
2026-01-12T11:35:55.551+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-12T11:35:55.551+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.551+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.552+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.551+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f54f0db] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.551+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3112daf2] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.552+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.552+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3122df09] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.552+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.555+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1853456893 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:55.552+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7558bed0] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.556+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@222107353 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:55.553+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1264442435 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:55.553+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@851824863 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:55.554+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-12T11:35:55.556+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.557+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.558+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-12T11:35:55.558+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.558+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:55.558+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.558+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.559+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.562+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:55.563+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10d057bf]
2026-01-12T11:35:55.563+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:55.565+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-12T11:35:55.569+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.574+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.574+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-12T11:35:55.575+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.577+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-12T11:35:55.577+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterI (truncated)...]
2026-01-12T11:35:55.577+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3122df09]
2026-01-12T11:35:55.577+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:55.577+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f54f0db]
2026-01-12T11:35:55.578+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7558bed0]
2026-01-12T11:35:55.579+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-12T11:35:55.579+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.580+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.581+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3112daf2]
2026-01-12T11:35:55.590+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.583+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.583+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.594+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-12T11:35:55.583+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-12T11:35:55.584+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4314fb04] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.585+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:55.592+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:55.592+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d540be0] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.595+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.600+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-12T11:35:55.601+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693040376 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:55.602+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.602+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:55.607+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@759863460 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:55.622+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.610+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:55.611+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.612+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:55.616+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-12T11:35:55.616+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:55.623+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.624+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@514da129] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.624+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:55.625+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:55.628+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-12T11:35:55.630+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:55.632+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1337373148 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:55.636+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:55.633+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:55.643+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:55.644+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:55.635+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-12T11:35:55.636+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:55.639+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.642+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:55.645+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.645+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-12T11:35:55.646+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.646+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d540be0]
2026-01-12T11:35:55.647+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac07dfb] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.648+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:55.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-12T11:35:55.650+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31632398] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.651+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1209358310 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:55.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4314fb04]
2026-01-12T11:35:55.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 7
2026-01-12T11:35:55.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.653+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371709633 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:55.653+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad9d45e] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.655+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:55.655+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.656+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@514da129]
2026-01-12T11:35:55.657+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f5947f] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.658+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:55.659+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@930076142 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:55.660+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:55.660+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e17c70] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.661+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.664+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe0fff5] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.661+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@255019218 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:55.662+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:55.663+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:55.664+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1657371507 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:55.664+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588796361 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:55.664+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-12T11:35:55.669+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-12T11:35:55.669+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-12T11:35:55.669+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:55.672+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:55.674+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.675+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:55.675+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31632398]
2026-01-12T11:35:55.675+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac07dfb]
2026-01-12T11:35:55.677+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:55.677+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.679+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.681+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.682+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6e78b5] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.683+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19135e9e] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.683+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1127872931 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:55.690+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358284770 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:55.691+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.691+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.692+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.694+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.695+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-12T11:35:55.696+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:55.700+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f5947f]
2026-01-12T11:35:55.700+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad9d45e]
2026-01-12T11:35:55.702+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.702+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.702+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-12T11:35:55.703+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2093115e] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.714+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1680628278 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:55.704+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.712+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.712+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.713+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.713+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:55.715+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.719+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:55.726+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19135e9e]
2026-01-12T11:35:55.727+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe0fff5]
2026-01-12T11:35:55.730+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.730+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38524c0f] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.727+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6e78b5]
2026-01-12T11:35:55.727+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e17c70]
2026-01-12T11:35:55.728+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.729+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.729+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:55.731+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@542446503 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:55.732+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:55.733+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.735+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-12T11:35:55.735+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:55.740+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:55.742+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-12T11:35:55.742+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6087e907] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.743+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.744+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:55.748+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 39(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-12T11:35:55.748+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:55.751+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829243803 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:55.767+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:55.751+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.769+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2093115e]
2026-01-12T11:35:55.755+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:55.763+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:55.769+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:55.773+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.775+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.775+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:55.775+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c1d934f] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.777+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65b0d4ee] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:55.778+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:55.779+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@339504755 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:55.782+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@867639126 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:55.782+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:55.783+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:55.783+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:55.784+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:55.784+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:55.784+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 9
2026-01-12T11:35:55.785+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:55.882+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:55.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:55.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6087e907]
2026-01-12T11:35:55.906+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38524c0f]
2026-01-12T11:35:56.032+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:56.119+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:56.122+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5622b4c5] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.123+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.124+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.125+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c1d934f]
2026-01-12T11:35:56.125+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65b0d4ee]
2026-01-12T11:35:56.127+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1155365905 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:56.127+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fcbcbf7] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.127+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4991bf7a] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.128+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.128+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.128+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:56.148+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:56.129+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@551275224 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:56.130+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669963891 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:56.131+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16f9307b] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.146+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf75b4a] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.173+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@797176222 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:56.151+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:56.162+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:56.169+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1455312384 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:56.174+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:56.174+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:56.175+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:56.175+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-12T11:35:56.179+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-12T11:35:56.180+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:56.182+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-12T11:35:56.182+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5622b4c5]
2026-01-12T11:35:56.189+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.192+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:56.193+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:56.193+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e613b36] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.193+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4991bf7a]
2026-01-12T11:35:56.194+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fcbcbf7]
2026-01-12T11:35:56.194+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1571172515 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:56.194+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:56.194+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.194+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:56.195+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-12T11:35:56.195+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:56.196+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=41, drafterI (truncated)...]
2026-01-12T11:35:56.196+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f76132] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.196+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf75b4a]
2026-01-12T11:35:56.196+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16f9307b]
2026-01-12T11:35:56.196+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:56.197+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009242728 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa60969] will not be managed by Spring
2026-01-12T11:35:56.197+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:56.199+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:56.199+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.202+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@831cc61] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.200+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:56.202+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:56.203+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1460948980 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:56.203+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:56.208+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:56.208+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:56.209+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:56.212+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e613b36]
2026-01-12T11:35:56.212+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:56.214+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:56.214+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-12T11:35:56.216+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:56.220+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:56.221+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:56.225+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@831cc61]
2026-01-12T11:35:56.225+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f76132]
2026-01-12T11:35:56.227+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.227+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:56.228+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65045a08] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.229+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-12T11:35:56.231+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1666240525 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:56.232+09:00 DEBUG 18628 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:56.234+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-12T11:35:56.243+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-12T11:35:56.249+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 39
2026-01-12T11:35:56.251+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65045a08]
2026-01-12T11:35:56.268+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.269+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@131f9bf8] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.273+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410094985 wrapping com.mysql.cj.jdbc.ConnectionImpl@51e09f1f] will not be managed by Spring
2026-01-12T11:35:56.274+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:56.275+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:56.277+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:56.277+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@131f9bf8]
2026-01-12T11:35:56.278+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:56.278+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-12T11:35:56.279+09:00 DEBUG 18628 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:56.582+09:00 DEBUG 18628 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:56.583+09:00 DEBUG 18628 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:56.585+09:00 DEBUG 18628 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-12T11:35:56.586+09:00 DEBUG 18628 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-12T11:35:56.603+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:56.610+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:56.611+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-12T11:35:56.612+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-12T11:35:56.617+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:56.614+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-12T11:35:56.614+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:56.618+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-12T11:35:56.618+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:56.619+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-12T11:35:56.619+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:56.619+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-12T11:35:56.626+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:56.628+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:56.627+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-12T11:35:56.627+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:56.628+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-12T11:35:56.629+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.629+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-12T11:35:56.630+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:56.630+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-12T11:35:56.630+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@603c6802] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.632+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.635+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761d68bf] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.633+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.635+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.652+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@373a6814] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.635+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375870020 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:56.644+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7dc3fa] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.664+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538271054 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:56.664+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:56.666+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052309280 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:56.675+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:56.666+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-12T11:35:56.668+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:56.678+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:56.679+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-12T11:35:56.681+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658197406 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:56.698+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-12T11:35:56.701+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-12T11:35:56.728+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-12T11:35:56.729+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:56.730+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-12T11:35:56.735+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@603c6802]
2026-01-12T11:35:56.736+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@373a6814]
2026-01-12T11:35:56.736+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761d68bf]
2026-01-12T11:35:56.738+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.739+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.739+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.739+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa505e5] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.740+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192c9adc] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.740+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340ce58a] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.741+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702158027 wrapping com.mysql.cj.jdbc.ConnectionImpl@1398201d] will not be managed by Spring
2026-01-12T11:35:56.742+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2108828453 wrapping com.mysql.cj.jdbc.ConnectionImpl@44c7d4aa] will not be managed by Spring
2026-01-12T11:35:56.742+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-12T11:35:56.742+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@710172887 wrapping com.mysql.cj.jdbc.ConnectionImpl@6440ba31] will not be managed by Spring
2026-01-12T11:35:56.743+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:56.744+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:56.745+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7dc3fa]
2026-01-12T11:35:56.745+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-12T11:35:56.747+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:56.747+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:56.748+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-12T11:35:56.751+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-12T11:35:56.752+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7563fc0e] was not registered for synchronization because synchronization is not active
2026-01-12T11:35:56.766+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@634487627 wrapping com.mysql.cj.jdbc.ConnectionImpl@472176cc] will not be managed by Spring
2026-01-12T11:35:56.767+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-12T11:35:56.769+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:56.769+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:56.769+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-12T11:35:56.770+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-12T11:35:56.773+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340ce58a]
2026-01-12T11:35:56.775+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192c9adc]
2026-01-12T11:35:56.775+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa505e5]
2026-01-12T11:35:56.776+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:56.776+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:56.779+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:56.781+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-12T11:35:56.781+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:56.782+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-12T11:35:56.782+09:00 DEBUG 18628 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:56.783+09:00 DEBUG 18628 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:56.785+09:00 DEBUG 18628 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:35:56.807+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-12T11:35:56.816+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7563fc0e]
2026-01-12T11:35:56.816+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-12T11:35:56.817+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-12T11:35:56.819+09:00 DEBUG 18628 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-12T11:36:05.562+09:00  INFO 24360 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 24360 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-12T11:36:05.568+09:00 DEBUG 24360 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-12T11:36:05.574+09:00  INFO 24360 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-12T11:36:07.623+09:00 DEBUG 24360 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-12T11:36:07.625+09:00 DEBUG 24360 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-12T11:36:08.032+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-12T11:36:08.034+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-12T11:36:08.036+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-12T11:36:08.037+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-12T11:36:08.038+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-12T11:36:08.039+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-12T11:36:08.040+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-12T11:36:08.041+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-12T11:36:08.042+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-12T11:36:08.043+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-12T11:36:08.044+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-12T11:36:08.045+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-12T11:36:08.046+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-12T11:36:08.048+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-12T11:36:08.054+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-12T11:36:08.055+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-12T11:36:08.059+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-12T11:36:08.062+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-12T11:36:08.072+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-12T11:36:08.080+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-12T11:36:08.083+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-12T11:36:08.088+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-12T11:36:08.093+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-12T11:36:08.094+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-12T11:36:08.097+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-12T11:36:08.102+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-12T11:36:08.105+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-12T11:36:08.109+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-12T11:36:08.110+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-12T11:36:08.112+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-12T11:36:08.114+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-12T11:36:08.115+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-12T11:36:08.117+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-12T11:36:08.118+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-12T11:36:08.121+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-12T11:36:08.122+09:00 DEBUG 24360 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-12T11:36:09.118+09:00  INFO 24360 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-12T11:36:09.151+09:00  INFO 24360 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-12T11:36:09.163+09:00  INFO 24360 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-12T11:36:09.417+09:00  INFO 24360 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-12T11:36:09.424+09:00  INFO 24360 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3747 ms
2026-01-12T11:36:09.545+09:00 DEBUG 24360 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-12T11:36:09.557+09:00 DEBUG 24360 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-12T11:36:10.102+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-12T11:36:10.131+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-12T11:36:10.170+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-12T11:36:10.189+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-12T11:36:10.217+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-12T11:36:10.255+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-12T11:36:10.293+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-12T11:36:10.363+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-12T11:36:10.478+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-12T11:36:10.585+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-12T11:36:10.594+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-12T11:36:10.611+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-12T11:36:10.632+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-12T11:36:10.642+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-12T11:36:10.660+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-12T11:36:10.678+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-12T11:36:10.707+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-12T11:36:10.735+09:00 DEBUG 24360 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-12T11:36:11.684+09:00 DEBUG 24360 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 153 mappings in 'requestMappingHandlerMapping'
2026-01-12T11:36:11.836+09:00 DEBUG 24360 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-12T11:36:11.870+09:00  WARN 24360 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 27413e0e-dd1f-4745-b166-04393e3d7a86

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-12T11:36:11.882+09:00  INFO 24360 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-12T11:36:12.066+09:00 DEBUG 24360 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-12T11:36:12.261+09:00 DEBUG 24360 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-12T11:36:12.382+09:00 DEBUG 24360 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-12T11:36:12.397+09:00 DEBUG 24360 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-12T11:36:12.882+09:00  INFO 24360 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-12T11:36:12.920+09:00  INFO 24360 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 8.296 seconds (process running for 9.05)
