2026-01-08T16:47:54.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:47:54.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945104770 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:47:54.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:47:54.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:47:54.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:47:55.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d91cfbb]
2026-01-08T16:47:55.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728a2f5] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1685981326 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:47:55.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:47:55.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:47:55.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761b4f32]
2026-01-08T16:47:55.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:47:55.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f24962] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1606220529 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:47:55.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:47:55.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:47:55.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728a2f5]
2026-01-08T16:47:55.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:47:55.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b264690] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702250507 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:47:55.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:47:55.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:47:55.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:47:55.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f24962]
2026-01-08T16:47:55.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b83e1bf] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2061173492 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:47:55.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:47:55.091+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:47:55.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b264690]
2026-01-08T16:47:55.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:47:55.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53529e99] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169427109 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:47:55.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:47:55.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:47:55.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b83e1bf]
2026-01-08T16:47:55.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:47:55.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a881f53] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235051428 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:47:55.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:47:55.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:47:55.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:47:55.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53529e99]
2026-01-08T16:47:55.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cef611c] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@730762318 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:47:55.196+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:47:55.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:47:55.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:47:55.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a881f53]
2026-01-08T16:47:55.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec7bee7] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1686068971 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:47:55.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:47:55.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:47:55.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:47:55.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cef611c]
2026-01-08T16:47:55.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:47:55.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:47:55.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:47:55.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:47:55.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec7bee7]
2026-01-08T16:47:55.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:47:55.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:47:55.294+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:47:55.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:47:55.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:47:55.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:47:55.393+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:47:55.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:47:55.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:47:55.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:47:55.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:47:55.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:47:55.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:47:55.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:47:55.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:47:55.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221e39d4] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:47:55.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@243800426 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:47:55.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3712f867] was not registered for synchronization because synchronization is not active
2026-01-08T16:47:55.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:47:55.406+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:47:55.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1231541268 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:47:55.407+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:47:55.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:47:55.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:47:55.456+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221e39d4]
2026-01-08T16:47:55.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:47:55.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:47:55.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:47:55.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3712f867]
2026-01-08T16:47:55.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:47:55.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:47:55.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:47:55.471+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:02.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:48:02.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:48:02.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:02.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:48:02.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:48:02.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:48:02.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:48:02.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:02.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:48:02.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:48:02.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:02.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:02.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:48:02.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:48:02.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:48:02.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:48:02.688+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:48:02.694+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:48:02.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:48:02.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:48:02.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:48:02.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:48:02.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:48:02.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:02.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:02.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:48:02.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:48:02.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:48:02.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:48:02.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:48:02.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:48:02.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:48:02.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:48:02.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:48:02.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:48:02.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:48:02.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ec7fc5a] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:48:02.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:48:02.734+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.742+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.744+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bd9b44c] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.756+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162231da] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc3e898] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.754+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@142b7f4c] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1137288532 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:48:02.762+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@213418361 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:48:02.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715d3b32] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1008206469 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:48:02.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:48:02.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:48:02.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:48:02.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211679862 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:48:02.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:48:02.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:48:02.775+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:48:02.775+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1689270048 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:48:02.775+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:48:02.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1252147936 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:48:02.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:48:02.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:48:02.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:48:02.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:48:02.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:48:02.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:48:02.788+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:48:02.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ec7fc5a]
2026-01-08T16:48:02.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162231da]
2026-01-08T16:48:02.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:02.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:48:02.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:48:02.795+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:48:02.795+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:48:02.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:02.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:48:02.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@142b7f4c]
2026-01-08T16:48:02.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc3e898]
2026-01-08T16:48:02.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715d3b32]
2026-01-08T16:48:02.805+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bd9b44c]
2026-01-08T16:48:02.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:48:02.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:02.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:02.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:02.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:02.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:48:02.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:02.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:02.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:48:02.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7dfbab] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:48:02.839+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:02.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:02.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:02.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:48:02.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598523284 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:48:02.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:02.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:48:02.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:48:02.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:02.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:48:02.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:02.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:48:02.858+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:48:02.858+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:48:02.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:48:02.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:02.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110ed247] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8392cc8] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108963579 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:48:02.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@798437004 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:48:02.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:48:02.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:48:02.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:48:02.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:48:02.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:48:02.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:48:02.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:48:02.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7dfbab]
2026-01-08T16:48:02.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110ed247]
2026-01-08T16:48:02.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8392cc8]
2026-01-08T16:48:02.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:02.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:02.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:02.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:48:02.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:48:02.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1800ab51] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:02.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:02.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:02.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1503566837 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:48:02.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:48:02.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:48:02.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:48:02.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1800ab51]
2026-01-08T16:48:02.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:02.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:48:02.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:03.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:48:03.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:03.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:48:03.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:48:03.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:48:03.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:48:03.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:03.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:03.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:48:03.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:48:03.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:48:03.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:48:03.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:48:03.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:48:03.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:48:03.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:03.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:03.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:48:03.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:48:03.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:48:03.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:48:03.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:48:03.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:48:03.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:48:03.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:03.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6007bf] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:03.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:03.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:03.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:03.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152655677 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:48:03.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c8e081] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:03.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@774c287f] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:03.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10052f5f] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:03.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:48:03.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@447391408 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:48:03.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:48:03.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1128157124 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:48:03.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@605109847 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:48:03.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:48:03.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:48:03.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:48:03.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:48:03.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:48:03.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:48:03.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:48:03.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6007bf]
2026-01-08T16:48:03.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:03.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:48:03.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:48:03.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:48:03.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10052f5f]
2026-01-08T16:48:03.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c8e081]
2026-01-08T16:48:03.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:03.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:03.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:03.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:48:03.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:48:03.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@774c287f]
2026-01-08T16:48:03.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:48:03.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:03.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:03.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:03.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a7391c] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:03.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@582938663 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:48:03.258+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:48:03.258+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:48:03.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:48:03.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a7391c]
2026-01-08T16:48:03.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:03.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:48:03.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:03.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:48:03.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:48:03.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:48:03.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:48:03.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:03.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:48:03.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:48:03.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:48:03.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:03.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:48:03.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:48:03.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:48:03.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:48:03.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:48:03.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:48:03.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:48:03.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:48:03.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:48:03.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:48:03.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:48:03.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:48:03.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:03.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:48:03.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:48:03.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:48:03.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:03.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:48:03.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:03.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:48:03.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@353c90f8] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:03.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:03.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:48:03.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:03.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f4089b] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:48:03.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:48:04.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:48:03.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25fa328c] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:48:04.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:04.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@948550144 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:48:04.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:48:04.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1059861881 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:48:04.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:48:04.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:48:04.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@366033552 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:48:04.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:48:04.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:48:04.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:48:04.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:48:04.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:48:04.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:48:04.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:48:04.008+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:48:04.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:48:04.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:48:04.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:48:04.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:48:04.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.022+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@353c90f8]
2026-01-08T16:48:04.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f4089b]
2026-01-08T16:48:04.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c06f25b] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:48:04.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a9184a] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:48:04.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1151114178 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:48:04.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:48:04.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65cf6ccb] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25fa328c]
2026-01-08T16:48:04.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:48:04.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:48:04.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:48:04.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.042+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.042+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:48:04.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1454092820 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:48:04.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437223876 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:48:04.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:48:04.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:48:04.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:48:04.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:48:04.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c06f25b]
2026-01-08T16:48:04.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:48:04.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:48:04.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:04.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:48:04.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:48:04.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:48:04.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:48:04.073+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:48:04.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:48:04.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:48:04.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:48:04.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:48:04.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65cf6ccb]
2026-01-08T16:48:04.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:04.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a9184a]
2026-01-08T16:48:04.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:48:04.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.091+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70531cd1] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.094+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:48:04.094+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:48:04.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250c6d20] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@540210339 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:48:04.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1faab33] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1115103020 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:48:04.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:48:04.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:48:04.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:48:04.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@943461252 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:48:04.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:48:04.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:48:04.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.114+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.110+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:48:04.110+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:48:04.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1dc1cb] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:48:04.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755165793 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:48:04.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@159a220b] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:48:04.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:48:04.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:48:04.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:48:04.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70531cd1]
2026-01-08T16:48:04.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250c6d20]
2026-01-08T16:48:04.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1293054621 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:48:04.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:48:04.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:48:04.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:48:04.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:48:04.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1faab33]
2026-01-08T16:48:04.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:48:04.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:48:04.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.143+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1dc1cb]
2026-01-08T16:48:04.143+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:48:04.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50204994] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084479938 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:48:04.159+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:48:04.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:48:04.176+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:48:04.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@159a220b]
2026-01-08T16:48:04.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:48:04.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:48:04.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50204994]
2026-01-08T16:48:04.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:48:04.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:48:04.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:48:04.534+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:04.534+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:48:04.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:48:04.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:48:04.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:04.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:48:04.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:48:04.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:48:04.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:48:04.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:48:04.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:48:04.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:48:04.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:48:04.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.557+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:48:04.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:48:04.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.558+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.558+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:48:04.558+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:48:04.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c86c927] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:48:04.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:48:04.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d63ad6] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@410079415 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:48:04.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1777880869 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:48:04.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:48:04.572+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:48:04.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:48:04.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:48:04.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ec17c6] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:48:04.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@456206590 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:48:04.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@580c9de] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:48:04.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:48:04.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1134805283 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:48:04.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c86c927]
2026-01-08T16:48:04.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:48:04.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:48:04.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:48:04.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d63ad6]
2026-01-08T16:48:04.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:48:04.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:48:04.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:48:04.609+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:48:04.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ec17c6]
2026-01-08T16:48:04.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:48:04.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:48:04.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@580c9de]
2026-01-08T16:48:04.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:48:04.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:48:04.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61457dc1] was not registered for synchronization because synchronization is not active
2026-01-08T16:48:04.623+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1653114382 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:48:04.623+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:48:04.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:48:04.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:48:04.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61457dc1]
2026-01-08T16:48:04.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:48:04.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:48:04.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:06.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:06.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:49:06.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:49:06.356+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:49:06.258+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T16:49:06.340+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:06.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:06.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:49:06.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:06.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:06.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:49:06.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:49:06.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:06.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:49:06.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:06.410+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:49:06.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:49:06.408+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:49:06.408+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:49:06.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:06.410+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:06.411+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:49:06.411+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:49:06.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:49:06.415+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.415+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:06.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:06.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:49:06.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:49:06.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:49:06.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:49:06.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:06.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:06.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:49:06.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:49:06.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:49:06.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:49:06.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4645a1c9] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad8e3b5] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1822951269 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:06.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.440+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77de8a95] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.440+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.440+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:06.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@106289300 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:06.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b50d4d8] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6240d64b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a08d8b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:06.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:06.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@961720315 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:06.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1464613239 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:06.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963636247 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:06.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:06.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:49:06.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:49:06.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:49:06.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:49:06.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:49:06.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1718595341 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:06.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:49:06.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:06.470+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:06.472+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:06.473+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad8e3b5]
2026-01-08T16:49:06.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:49:06.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:49:06.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4645a1c9]
2026-01-08T16:49:06.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:49:06.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b50d4d8]
2026-01-08T16:49:06.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77de8a95]
2026-01-08T16:49:06.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:49:06.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:06.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:06.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6240d64b]
2026-01-08T16:49:06.490+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:49:06.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:49:06.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:49:06.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.502+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a08d8b]
2026-01-08T16:49:06.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T16:49:06.523+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:49:06.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:06.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.527+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:06.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-08T16:49:06.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:49:06.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5531dc1b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:06.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:06.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T16:49:06.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:49:06.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:49:06.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1344472437 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:06.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:06.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:06.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T16:49:06.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:49:06.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:49:06.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:49:06.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:06.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:49:06.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:06.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T16:49:06.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:49:06.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:06.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:06.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.558+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:49:06.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f7c1bc] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:49:06.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.572+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5e1adf] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e3cb37] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1011017652 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:06.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5531dc1b]
2026-01-08T16:49:06.572+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f687156] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.572+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31b6803f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1011590808 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:06.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:49:06.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283300712 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:06.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@35826922 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:06.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T16:49:06.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971959823 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:06.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:49:06.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:06.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:06.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 12(Long)
2026-01-08T16:49:06.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:49:06.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:49:06.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:06.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:06.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:49:06.590+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.592+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:49:06.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-08T16:49:06.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31b6803f]
2026-01-08T16:49:06.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:06.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:06.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f7c1bc]
2026-01-08T16:49:06.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e3cb37]
2026-01-08T16:49:06.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5e1adf]
2026-01-08T16:49:06.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:49:06.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:49:06.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:49:06.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:06.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T16:49:06.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f687156]
2026-01-08T16:49:06.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:06.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:49:06.610+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.610+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:49:06.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:49:06.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.623+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.623+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:49:06.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:49:06.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78b4b4f3] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@220673040 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:06.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:06.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:49:06.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee7c944] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@615382143 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:06.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:49:06.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:49:06.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78b4b4f3]
2026-01-08T16:49:06.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:49:06.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.639+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7c5a69] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@892292085 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:06.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:49:06.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:49:06.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee7c944]
2026-01-08T16:49:06.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:49:06.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:49:06.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:49:06.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7c5a69]
2026-01-08T16:49:06.651+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:49:06.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:06.707+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:06.707+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:49:06.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:49:06.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:06.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:06.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:49:06.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:06.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:06.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:06.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:49:06.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:06.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:06.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:49:06.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:49:06.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:06.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:06.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5701fd8f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1209441618 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:06.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:06.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:06.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:49:06.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:49:06.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:49:06.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:06.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:49:06.744+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.739+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:49:06.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:49:06.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:49:06.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:49:06.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13659150] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.759+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:49:06.775+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:49:06.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:49:06.761+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:06.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1870377131 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:06.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7209bcf6] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5701fd8f]
2026-01-08T16:49:06.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc8b9e4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:06.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@853866010 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:06.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:06.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a942d3] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1878076669 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:06.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:49:06.788+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1622980824 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:06.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:06.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:06.790+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:06.790+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:49:06.790+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:49:06.790+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1076275b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.792+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:49:06.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13659150]
2026-01-08T16:49:06.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:49:06.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1266475082 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:06.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:49:06.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:49:06.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:06.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:49:06.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7209bcf6]
2026-01-08T16:49:06.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:49:06.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:49:06.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:49:06.858+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc8b9e4]
2026-01-08T16:49:06.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:06.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:49:06.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:49:06.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:49:06.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56c978df] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:06.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:49:06.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:49:06.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a942d3]
2026-01-08T16:49:06.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331162235 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:06.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:49:06.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:06.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:49:06.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:49:06.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:49:06.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:49:06.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:49:06.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:06.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:49:06.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:49:06.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:49:06.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:06.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:49:06.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1076275b]
2026-01-08T16:49:06.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:49:06.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.940+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:06.940+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:49:07.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:06.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:07.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:49:06.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:49:07.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56c978df]
2026-01-08T16:49:06.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-08T16:49:07.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-08T16:49:07.009+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:07.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:49:07.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:07.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:07.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:07.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:07.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:49:07.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:07.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:07.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d7ae0] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:07.040+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:49:07.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:07.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34beda1e] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:07.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:49:07.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931424093 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:07.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:07.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:07.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1812702339 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:07.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:49:07.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:49:07.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:07.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:49:07.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:07.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:49:07.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a45ad46] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:07.091+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1601665353 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:07.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:07.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:49:07.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:49:07.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:07.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:07.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb3a3e4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:07.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@73620179 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:07.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:49:07.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:49:07.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:49:07.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a45ad46]
2026-01-08T16:49:07.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:07.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e14d1d5] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:07.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164396236 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:07.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:49:07.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34beda1e]
2026-01-08T16:49:07.122+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:49:07.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:49:07.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:07.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d7ae0]
2026-01-08T16:49:07.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-08T16:49:07.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:49:07.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:07.142+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:07.142+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:49:07.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:07.173+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:49:07.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:49:07.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e14d1d5]
2026-01-08T16:49:07.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb3a3e4]
2026-01-08T16:49:07.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:07.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:07.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:49:07.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:49:07.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:07.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:27.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:49:27.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:49:27.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID&taxProcessed=true
2026-01-08T16:49:27.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:49:27.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:49:27.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:49:27.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:49:27.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:49:27.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:49:27.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:49:27.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:49:27.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:49:27.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:49:27.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:27.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:49:27.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID&taxProcessed=true
2026-01-08T16:49:27.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:27.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:27.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:49:27.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:27.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:27.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:27.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID&taxProcessed=true
2026-01-08T16:49:27.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID&taxProcessed=true", parameters={masked}
2026-01-08T16:49:27.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:49:27.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156bdd68] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:27.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:27.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:49:27.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:27.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36db9926] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:27.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:27.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:27.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017284570 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:27.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:49:27.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:27.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:49:27.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:49:27.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebae24e] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:27.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@996466773 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:27.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:49:27.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:27.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:49:27.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:27.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@218643712 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:27.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:49:27.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:49:27.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:27.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:27.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156bdd68]
2026-01-08T16:49:27.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:49:27.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ccb12f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:27.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:27.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1079977100 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:27.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:49:27.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:49:27.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:49:27.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:49:27.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:27.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36db9926]
2026-01-08T16:49:27.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:49:27.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ebae24e]
2026-01-08T16:49:27.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:27.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:27.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:49:27.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8a7761] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:27.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:27.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1742266572 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:27.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) AND r.tax_processed = ? GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:49:27.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String), true(Boolean)
2026-01-08T16:49:27.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:49:27.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ccb12f]
2026-01-08T16:49:27.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:27.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:49:27.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:27.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : <==      Total: 0
2026-01-08T16:49:27.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e8a7761]
2026-01-08T16:49:27.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:27.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[])]
2026-01-08T16:49:27.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:30.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-08T16:49:30.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID&taxProcessed=false
2026-01-08T16:49:30.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-08T16:49:30.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-08T16:49:30.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-08T16:49:30.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-08T16:49:30.756+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-08T16:49:30.759+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-08T16:49:30.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-08T16:49:30.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID&taxProcessed=false
2026-01-08T16:49:30.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-08T16:49:30.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-08T16:49:30.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-08T16:49:30.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID&taxProcessed=false
2026-01-08T16:49:30.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID&taxProcessed=false", parameters={masked}
2026-01-08T16:49:30.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-08T16:49:30.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:30.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-08T16:49:30.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-08T16:49:30.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-08T16:49:30.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:30.772+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:30.773+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:30.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:30.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:30.791+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:30.792+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:30.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-08T16:49:30.798+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:30.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-08T16:49:30.798+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25f0f3aa] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:30.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:30.805+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f7efaf] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:30.805+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-08T16:49:30.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f823e1] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:30.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-08T16:49:30.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:30.809+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:30.810+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1944292974 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:30.810+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@781225499 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:30.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-08T16:49:30.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:30.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:30.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2011591911 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:30.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-08T16:49:30.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3026b8b4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:30.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:49:30.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-08T16:49:30.821+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-08T16:49:30.823+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:49:30.823+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179221210 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:30.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25f0f3aa]
2026-01-08T16:49:30.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-08T16:49:30.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 17
2026-01-08T16:49:30.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f823e1]
2026-01-08T16:49:30.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-08T16:49:30.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:30.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-08T16:49:30.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f7efaf]
2026-01-08T16:49:30.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:30.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-08T16:49:30.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67270490] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:30.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:30.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:30.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1966730755 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:30.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-08T16:49:30.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=34, drafte (truncated)...]
2026-01-08T16:49:30.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) AND r.tax_processed = ? GROUP BY d.category ORDER BY totalAmount DESC
2026-01-08T16:49:30.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3026b8b4]
2026-01-08T16:49:30.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String), false(Boolean)
2026-01-08T16:49:30.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:30.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:30.839+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-08T16:49:30.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:30.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-08T16:49:30.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67270490]
2026-01-08T16:49:30.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:30.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-08T16:49:30.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:38.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:38.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:49:38.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:38.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:38.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:49:38.279+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:38.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:49:38.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:38.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:49:38.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:38.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:38.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:38.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:49:38.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:38.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:49:38.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:38.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:49:38.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:38.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:38.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:49:38.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:38.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:38.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:49:38.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:38.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:38.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:49:38.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:38.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:38.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ec7bb5] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:38.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:38.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:38.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:49:38.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:38.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:38.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:49:38.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:49:38.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:38.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:38.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:49:38.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5799eb43] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.330+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a35019] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.330+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d3fcc5] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214c3f72] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ffc958] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097773695 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:38.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@925626450 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:38.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@709960353 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:38.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945484391 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:38.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2119764914 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:38.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:38.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:38.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:38.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:38.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1747900249 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:38.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:38.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:38.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:38.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:38.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:38.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:38.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:38.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ec7bb5]
2026-01-08T16:49:38.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:38.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:49:38.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:38.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:38.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:38.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5799eb43]
2026-01-08T16:49:38.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ffc958]
2026-01-08T16:49:38.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a35019]
2026-01-08T16:49:38.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214c3f72]
2026-01-08T16:49:38.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d3fcc5]
2026-01-08T16:49:38.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:49:38.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:49:38.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:38.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0756d9] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.356+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:38.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:38.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:49:38.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@30254058 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:38.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:49:38.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.377+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:38.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:49:38.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:38.377+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:49:38.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:38.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:49:38.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.391+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:49:38.391+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:38.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:38.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:49:38.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:49:38.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:38.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:38.406+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.406+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:49:38.407+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:38.408+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:38.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c93a530] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:38.414+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0756d9]
2026-01-08T16:49:38.415+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.415+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376433064 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:38.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643d2aa7] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3007983e] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76187e7] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1005964110 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:38.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5135c59a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@369996121 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:38.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789208230 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:38.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:38.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@837087483 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:38.432+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:38.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:38.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:38.430+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:38.432+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:38.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:38.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:38.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:38.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:38.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c93a530]
2026-01-08T16:49:38.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:38.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:49:38.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3007983e]
2026-01-08T16:49:38.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76187e7]
2026-01-08T16:49:38.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5135c59a]
2026-01-08T16:49:38.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643d2aa7]
2026-01-08T16:49:38.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694ccda9] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:38.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:49:38.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:38.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b7fdf60] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@144134037 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:38.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.456+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68803712 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:38.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.470+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b7fdf60]
2026-01-08T16:49:38.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694ccda9]
2026-01-08T16:49:38.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1983d664] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77119ff3] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@478322411 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:38.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2025796925 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:38.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:38.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:38.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:38.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:38.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:38.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:38.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1983d664]
2026-01-08T16:49:38.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77119ff3]
2026-01-08T16:49:38.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2011e336] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.505+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c013412] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.505+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665199014 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:38.505+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@118805094 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:38.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c013412]
2026-01-08T16:49:38.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2011e336]
2026-01-08T16:49:38.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dacab1a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f44327] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@142123289 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:38.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2069037788 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:38.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:38.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.523+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:38.523+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.526+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54f44327]
2026-01-08T16:49:38.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:49:38.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:38.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.534+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dacab1a]
2026-01-08T16:49:38.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3708a1e4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803485796 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:38.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3708a1e4]
2026-01-08T16:49:38.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d749f64] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1333857967 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:38.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:38.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:38.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:38.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d749f64]
2026-01-08T16:49:38.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:38.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:49:38.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:38.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:38.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:38.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:38.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:38.990+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:38.991+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:38.991+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:38.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:38.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:38.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:38.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:38.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:38.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1116b028] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:38.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:39.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:39.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44554a19] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:39.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@263248581 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:39.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:39.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:39.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@495127709 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:39.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:39.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:39.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:39.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1116b028]
2026-01-08T16:49:39.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:39.073+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:39.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:39.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:39.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44554a19]
2026-01-08T16:49:39.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:39.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:39.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:40.810+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:40.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:40.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/26
2026-01-08T16:49:40.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:49:40.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/26
2026-01-08T16:49:40.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:49:40.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:40.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:40.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/26
2026-01-08T16:49:40.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:40.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:49:40.839+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/26
2026-01-08T16:49:40.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:49:40.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:40.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/26
2026-01-08T16:49:40.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/26
2026-01-08T16:49:40.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:40.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:49:40.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:49:40.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:40.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/26
2026-01-08T16:49:40.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/26
2026-01-08T16:49:40.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:40.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:49:40.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:49:40.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:40.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/26", parameters={}
2026-01-08T16:49:40.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/26", parameters={}
2026-01-08T16:49:40.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:40.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:49:40.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:49:40.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:40.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:49:40.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:49:40.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:49:40.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:49:40.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc6ec08] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278220ef] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.874+09:00  INFO 23448 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:49:40.874+09:00  INFO 23448 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:49:40.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4022b558] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be1388b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@897610043 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:40.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654e6bc0] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:40.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@963457208 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:40.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:40.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a18f569] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:49:40.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1256456117 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:40.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@607780211 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:40.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:49:40.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:40.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:49:40.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:40.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@46635653 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:40.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1200389529 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:40.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:40.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:49:40.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:49:40.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:49:40.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:49:40.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc6ec08]
2026-01-08T16:49:40.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:40.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278220ef]
2026-01-08T16:49:40.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:40.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:40.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:40.923+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:40.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22143c6a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4022b558]
2026-01-08T16:49:40.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:40.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@210498390 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:40.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:40.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:49:40.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:40.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:49:40.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:40.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:49:40.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T16:49:40.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T16:49:40.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be1388b]
2026-01-08T16:49:40.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654e6bc0]
2026-01-08T16:49:40.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a18f569]
2026-01-08T16:49:40.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:40.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:40.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51908bc0] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T16:49:40.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T16:49:40.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:49:40.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@469624452 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:40.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:40.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:40.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22143c6a]
2026-01-08T16:49:40.974+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:49:40.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:49:40.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@772577eb] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959911945 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:40.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:49:40.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:49:40.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:49:40.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51908bc0]
2026-01-08T16:49:40.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:40.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2c6704] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:40.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480008682 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:40.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:49:40.989+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:49:40.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-08T16:49:40.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-08T16:49:40.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2c6704]
2026-01-08T16:49:40.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@772577eb]
2026-01-08T16:49:41.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:41.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:41.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0b5bf8] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:41.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45706926] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:41.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@275842938 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:41.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1730932692 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:41.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:41.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:41.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:49:41.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:49:41.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:41.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:41.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45706926]
2026-01-08T16:49:41.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0b5bf8]
2026-01-08T16:49:41.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:41.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:41.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59a8e48b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:41.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cf22023] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:41.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@525832129 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:41.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671252190 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:41.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:41.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:41.008+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:41.008+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:41.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:41.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:41.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cf22023]
2026-01-08T16:49:41.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59a8e48b]
2026-01-08T16:49:41.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:41.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:41.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=26, drafterId=2, r (truncated)...]
2026-01-08T16:49:41.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=26, drafterId=2, r (truncated)...]
2026-01-08T16:49:41.040+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:41.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:41.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:41.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:41.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:49:41.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:41.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:49:41.974+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:41.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:49:41.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:41.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:49:41.991+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:42.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:42.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:42.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:49:42.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:42.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:42.022+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:49:42.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:42.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:42.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:42.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:42.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:49:42.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:42.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:42.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:49:42.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:42.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:42.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:42.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:49:42.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:42.110+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:49:42.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:42.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:42.122+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:42.122+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:49:42.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:42.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:49:42.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:49:42.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:42.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:42.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:49:42.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67822602] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef53cad] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ac7ee3] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1095a42] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4425a62d] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.141+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f604622] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.159+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772561882 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:42.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197657372 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:42.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2109154684 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:42.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@865335234 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:42.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1731860427 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:42.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667476803 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:42.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:42.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:42.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:42.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:42.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:42.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:42.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:42.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:42.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:42.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:42.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:42.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:42.231+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef53cad]
2026-01-08T16:49:42.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ac7ee3]
2026-01-08T16:49:42.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f604622]
2026-01-08T16:49:42.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1095a42]
2026-01-08T16:49:42.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67822602]
2026-01-08T16:49:42.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4425a62d]
2026-01-08T16:49:42.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:42.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e2d2294] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d1b54c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:42.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:42.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:42.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:42.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1668293747 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:42.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1333345796 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:42.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:42.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:42.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:42.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:42.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:49:42.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.343+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:42.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:49:42.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:49:42.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:49:42.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:49:42.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:49:42.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606f3d90] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@298980332 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:42.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:42.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:42.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:42.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:42.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:42.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:42.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b8d955] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:49:42.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:42.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@414081805 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:42.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:49:42.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:42.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:42.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:42.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:49:42.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:42.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:42.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:49:42.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:49:42.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:42.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e25b95] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.505+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d1b54c]
2026-01-08T16:49:42.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e2d2294]
2026-01-08T16:49:42.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606f3d90]
2026-01-08T16:49:42.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b8d955]
2026-01-08T16:49:42.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dabd025] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.508+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1141411994 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:42.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924228532 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:42.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:42.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1941d81c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ed4e18a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:49:42.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:42.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:42.523+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:42.524+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648453037 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:42.524+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@701123398 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:42.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:42.526+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:42.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:42.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:42.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:42.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:42.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:42.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:42.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e25b95]
2026-01-08T16:49:42.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:42.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:42.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:49:42.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:42.573+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dabd025]
2026-01-08T16:49:42.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ed4e18a]
2026-01-08T16:49:42.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.582+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:49:42.582+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7ad4f8] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:42.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1133224076 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:42.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:42.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1941d81c]
2026-01-08T16:49:42.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7ad4f8]
2026-01-08T16:49:42.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792d77d9] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1849414104 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:42.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e80135d] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308404065 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:42.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:42.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:42.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792d77d9]
2026-01-08T16:49:42.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:42.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149402a1] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e80135d]
2026-01-08T16:49:42.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@110439509 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:42.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.734+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:42.734+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3634ae7c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:42.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@402675996 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:42.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:42.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149402a1]
2026-01-08T16:49:42.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b18866] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3634ae7c]
2026-01-08T16:49:42.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1887701851 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:42.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c6d6ec1] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@523859582 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:42.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b18866]
2026-01-08T16:49:42.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:42.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbcc7d7] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:42.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c6d6ec1]
2026-01-08T16:49:42.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629571774 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:42.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:42.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:49:42.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:42.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:42.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:42.773+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbcc7d7]
2026-01-08T16:49:42.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:42.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:49:42.775+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:43.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:43.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:43.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:43.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:43.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:43.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:43.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:43.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:43.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:43.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f904897] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:43.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:43.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:43.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:43.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1957795613 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:43.091+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:43.091+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:43.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:43.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:43.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64d2a4e3] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:43.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:43.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022439114 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:43.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f904897]
2026-01-08T16:49:43.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:43.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:43.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:43.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:43.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:43.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:43.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64d2a4e3]
2026-01-08T16:49:43.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:43.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:43.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:45.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:45.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:45.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T16:49:45.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-08T16:49:45.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T16:49:45.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T16:49:45.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:45.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:45.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T16:49:45.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-08T16:49:45.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T16:49:45.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:45.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T16:49:46.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:46.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me
2026-01-08T16:49:46.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/companies/pending
2026-01-08T16:49:46.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-08T16:49:46.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-08T16:49:46.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-08T16:49:46.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/companies
2026-01-08T16:49:46.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:46.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me
2026-01-08T16:49:46.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T16:49:46.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T16:49:46.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:46.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T16:49:46.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T16:49:46.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:46.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T16:49:46.113+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:46.116+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T16:49:46.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2bbaa3] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.122+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T16:49:46.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T16:49:46.122+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:46.125+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:49:46.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:46.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T16:49:46.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569545806 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:46.135+09:00  INFO 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:49:46.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f348054] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a13d52] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421b3929] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@420294a6] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:46.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b122a13] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 12(Long), PENDING(String)
2026-01-08T16:49:46.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-08T16:49:46.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1337530750 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:46.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912634340 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:46.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@937591765 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:46.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:46.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@311947194 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:46.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2070322527 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:46.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2bbaa3]
2026-01-08T16:49:46.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:46.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:46.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:49:46.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:46.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:46.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:46.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:46.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:46.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:46.176+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:46.176+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T16:49:46.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:46.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:46.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:46.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:46.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:49:46.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:46.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421b3929]
2026-01-08T16:49:46.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b122a13]
2026-01-08T16:49:46.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@420294a6]
2026-01-08T16:49:46.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f348054]
2026-01-08T16:49:46.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a13d52]
2026-01-08T16:49:46.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:46.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:46.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:46.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a90be0] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@662fdcac] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:46.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=21, userId=12, companyId (truncated)...]
2026-01-08T16:49:46.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:46.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841947753 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:46.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@951264969 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:46.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:46.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:46.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:46.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:46.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:49:46.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:49:46.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-08T16:49:46.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:49:46.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T16:49:46.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a90be0]
2026-01-08T16:49:46.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@662fdcac]
2026-01-08T16:49:46.273+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 12, companyId: 1, role: TAX_ACCOUNTANT
2026-01-08T16:49:46.281+09:00  INFO 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 12, companyId: 1, role: TAX_ACCOUNTANT
2026-01-08T16:49:46.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:46.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:46.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=12, username=test_tax, passwo (truncated)...]
2026-01-08T16:49:46.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=12, username=test_tax, passwo (truncated)...]
2026-01-08T16:49:46.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:46.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:46.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:46.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:46.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:46.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:46.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:46.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:46.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:46.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:46.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:46.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:46.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:46.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:46.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49dc491b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1121303944 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:46.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:46.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:46.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e555069] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:46.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:46.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@496803198 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:46.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:46.505+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:46.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:46.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49dc491b]
2026-01-08T16:49:46.508+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:46.508+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:46.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:46.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:46.526+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e555069]
2026-01-08T16:49:46.526+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:46.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:46.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:50.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:50.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:49:50.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:49:50.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:50.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:50.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:49:50.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:50.734+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:49:50.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:49:50.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:50.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:50.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:49:50.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:49:50.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:50.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:50.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:50.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:50.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:49:50.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:49:50.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:50.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:50.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:50.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:50.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:49:50.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:49:50.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:50.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:50.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:50.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:50.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:49:50.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:49:50.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:50.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:50.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:50.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:50.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:49:50.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:49:50.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2288fb40] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dbaaaae] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9ee27c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606a907c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74306f0e] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3164f86c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@455230502 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:50.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1163785751 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:50.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1831966596 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:49:50.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1503399633 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:50.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@612855848 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:50.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:50.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:50.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:50.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@38180300 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:50.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:50.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:50.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:50.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:50.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:50.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:50.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:50.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:50.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:50.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:50.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:50.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:50.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9ee27c]
2026-01-08T16:49:50.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dbaaaae]
2026-01-08T16:49:50.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:50.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:49:50.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:50.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2288fb40]
2026-01-08T16:49:50.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:50.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:50.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:50.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606a907c]
2026-01-08T16:49:50.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74306f0e]
2026-01-08T16:49:50.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:50.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3164f86c]
2026-01-08T16:49:50.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:50.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:50.858+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:50.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:50.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:49:50.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:49:50.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:50.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e09f42] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:49:50.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:49:50.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534405170 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:50.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:50.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:50.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:49:50.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:49:50.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:49:50.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:50.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:50.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:49:50.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:49:50.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:49:50.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:50.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:49:50.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:50.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:49:50.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:49:50.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:50.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:49:50.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e09f42]
2026-01-08T16:49:50.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:49:50.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:50.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff27157] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e9e0865] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:49:50.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587f2bec] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1915089764 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:50.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1235085794 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:50.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b2b14b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@458133807 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:50.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:50.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:50.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12651301] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1234024599 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:50.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:50.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:50.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:50.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1189596988 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:49:50.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:50.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:50.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:49:50.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:50.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:49:50.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:49:50.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587f2bec]
2026-01-08T16:49:50.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:50.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:50.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:49:50.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e9e0865]
2026-01-08T16:49:50.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:50.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:50.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ff27157]
2026-01-08T16:49:50.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12651301]
2026-01-08T16:49:50.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a652a6] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:49:50.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b2b14b]
2026-01-08T16:49:50.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:50.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1048946679 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:50.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:50.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@348f2fc7] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:49:50.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:50.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:50.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@417040584 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:50.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:50.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:50.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:50.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:50.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@348f2fc7]
2026-01-08T16:49:50.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecd2348] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:50.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@334618177 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:50.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a652a6]
2026-01-08T16:49:50.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:50.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:50.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bfaf9aa] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@968597777 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:50.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:50.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:50.956+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:50.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecd2348]
2026-01-08T16:49:50.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55a1de68] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1656840439 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:50.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:50.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:50.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:50.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:50.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55a1de68]
2026-01-08T16:49:50.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bfaf9aa]
2026-01-08T16:49:50.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c2db69d] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@925136878 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:49:50.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:50.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e2ec5db] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:50.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@579161117 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:50.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:50.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:50.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:50.974+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c2db69d]
2026-01-08T16:49:50.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:50.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:50.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e2ec5db]
2026-01-08T16:49:50.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:49:50.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:50.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c643512] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:50.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@883701592 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:50.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:50.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:50.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:51.022+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:49:51.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c643512]
2026-01-08T16:49:51.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:51.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c504cf3] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:51.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@826353870 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:51.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:51.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:51.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:51.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c504cf3]
2026-01-08T16:49:51.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:51.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f7d16d] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:51.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1026435124 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:51.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:51.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:51.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:51.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f7d16d]
2026-01-08T16:49:51.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:51.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:49:51.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:51.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:51.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:49:51.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:51.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:49:51.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:51.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:51.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:49:51.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:51.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:49:51.294+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:49:51.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:51.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:49:51.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:51.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:51.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@224d8f2a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:51.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2573ef] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:51.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858290590 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:49:51.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1618047368 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:49:51.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:51.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:49:51.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:51.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:49:51.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:51.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:49:51.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@224d8f2a]
2026-01-08T16:49:51.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2573ef]
2026-01-08T16:49:51.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:51.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:49:51.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:51.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:49:51.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:51.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:49:57.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/export/tax-review?format=full
2026-01-08T16:49:57.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/export/tax-review?format=full
2026-01-08T16:49:57.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/export/tax-review
2026-01-08T16:49:57.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/export/tax-review?format=full
2026-01-08T16:49:57.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/export/tax-review?format=full", parameters={masked}
2026-01-08T16:49:57.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#exportTaxReview(String, String, String)
2026-01-08T16:49:57.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.exportTaxReview(java.lang.String,java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:57.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.exportTaxReview(java.lang.String,java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-08T16:49:57.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aae88ed] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872925612 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:49:57.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), PAID(String), 2147483647(Integer), 0(Integer)
2026-01-08T16:49:57.174+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-08T16:49:57.176+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aae88ed]
2026-01-08T16:49:57.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ee7fdd] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@738567627 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:49:57.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:49:57.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:49:57.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ee7fdd]
2026-01-08T16:49:57.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bb10069] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282757717 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:49:57.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long), 6(Long), 8(Long), 13(Long), 14(Long), 16(Long), 17(Long), 18(Long), 19(Long), 20(Long), 24(Long), 25(Long), 27(Long), 31(Long), 32(Long), 33(Long), 34(Long)
2026-01-08T16:49:57.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 25
2026-01-08T16:49:57.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bb10069]
2026-01-08T16:49:57.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da3303b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2129840558 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T16:49:57.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T16:49:57.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da3303b]
2026-01-08T16:49:57.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292ee6b6] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755513664 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 6(Long), 1(Long)
2026-01-08T16:49:57.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T16:49:57.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292ee6b6]
2026-01-08T16:49:57.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c48280e] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1384997991 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 8(Long), 1(Long)
2026-01-08T16:49:57.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:57.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c48280e]
2026-01-08T16:49:57.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21790f7] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1330823395 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 13(Long), 1(Long)
2026-01-08T16:49:57.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:57.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21790f7]
2026-01-08T16:49:57.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ee5148] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1791030026 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 14(Long), 1(Long)
2026-01-08T16:49:57.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:57.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ee5148]
2026-01-08T16:49:57.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0f5299] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254959681 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 16(Long), 1(Long)
2026-01-08T16:49:57.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:57.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0f5299]
2026-01-08T16:49:57.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ff301c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1634877408 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 17(Long), 1(Long)
2026-01-08T16:49:57.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:57.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ff301c]
2026-01-08T16:49:57.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23926b15] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@761516203 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 18(Long), 1(Long)
2026-01-08T16:49:57.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:57.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23926b15]
2026-01-08T16:49:57.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b93a130] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1533650324 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 19(Long), 1(Long)
2026-01-08T16:49:57.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:57.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b93a130]
2026-01-08T16:49:57.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b24ab2] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@819919221 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 20(Long), 1(Long)
2026-01-08T16:49:57.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:57.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b24ab2]
2026-01-08T16:49:57.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b911e4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089429403 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 24(Long), 1(Long)
2026-01-08T16:49:57.258+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 2
2026-01-08T16:49:57.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b911e4]
2026-01-08T16:49:57.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e1c0fd] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@272091444 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 25(Long), 1(Long)
2026-01-08T16:49:57.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T16:49:57.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e1c0fd]
2026-01-08T16:49:57.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456da0df] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1005938343 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-08T16:49:57.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T16:49:57.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456da0df]
2026-01-08T16:49:57.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f416644] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728203819 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 31(Long), 1(Long)
2026-01-08T16:49:57.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T16:49:57.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f416644]
2026-01-08T16:49:57.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48342509] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@567311473 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:49:57.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:49:57.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48342509]
2026-01-08T16:49:57.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50759064] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@964750094 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-08T16:49:57.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T16:49:57.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50759064]
2026-01-08T16:49:57.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12f50022] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862227112 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:49:57.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 34(Long), 1(Long)
2026-01-08T16:49:57.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T16:49:57.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12f50022]
2026-01-08T16:49:57.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42c72fa9] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2013905859 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42c72fa9]
2026-01-08T16:49:57.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 하이퍼링크 삽입 완료: 영수증이미지.jpg -> file:///C:/InnerSignature/backend/uploads/receipts/1/deeb94b7-3a0a-4084-a5b7-5d932145b9fa/receipt_20251224165335_영수증이미지.jpg
2026-01-08T16:49:57.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7491db0e] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@256907346 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7491db0e]
2026-01-08T16:49:57.311+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 하이퍼링크 삽입 완료: 영수증이미지.jpg -> file:///C:/InnerSignature/backend/uploads/receipts/6/9ec8d455-2013-4265-ad6f-1cb61dbd8891/receipt_20251229144842_영수증이미지.jpg
2026-01-08T16:49:57.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69757482] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323394313 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69757482]
2026-01-08T16:49:57.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb01945] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772333525 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb01945]
2026-01-08T16:49:57.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e1c7d18] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.327+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@634206127 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.330+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e1c7d18]
2026-01-08T16:49:57.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481e37e2] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@621246276 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.340+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481e37e2]
2026-01-08T16:49:57.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ee6242e] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671002935 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.343+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ee6242e]
2026-01-08T16:49:57.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a356f98] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@626916772 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a356f98]
2026-01-08T16:49:57.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24883d92] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@90234676 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24883d92]
2026-01-08T16:49:57.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c68e53c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@426320782 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c68e53c]
2026-01-08T16:49:57.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e4f2ed] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.393+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1000253128 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.393+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e4f2ed]
2026-01-08T16:49:57.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffb487f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211088119 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.407+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ffb487f]
2026-01-08T16:49:57.414+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31fe5cc4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74666548 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31fe5cc4]
2026-01-08T16:49:57.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d094bf] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@990641949 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d094bf]
2026-01-08T16:49:57.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604e568b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@482820945 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604e568b]
2026-01-08T16:49:57.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f8214b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1880148369 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:57.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f8214b]
2026-01-08T16:49:57.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 하이퍼링크 삽입 완료: innersign_logo.png -> file:///C:/InnerSignature/backend/uploads/receipts/24/e80c6378-aeb5-4d04-a9d7-223cce401ba9/receipt_20260106105553_innersign_logo.png
2026-01-08T16:49:57.456+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 하이퍼링크 삽입 완료: 영수증이미지.jpg -> file:///C:/InnerSignature/backend/uploads/receipts/24/3f25f205-b742-46a3-9a35-7d5b09247b63/receipt_20260106105554_영수증이미지.jpg
2026-01-08T16:49:57.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2be011ab] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@137465829 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 버거킹(String), 1(Long)
2026-01-08T16:49:57.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2be011ab]
2026-01-08T16:49:57.470+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 하이퍼링크 삽입 완료: 영수증이미지.jpg -> file:///C:/InnerSignature/backend/uploads/receipts/25/1fa40027-cba6-4c79-a196-914b910dc76b/receipt_20260106112533_영수증이미지.jpg
2026-01-08T16:49:57.471+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.471+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76707670] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.472+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572228188 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.472+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.472+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 다이소(String), 1(Long)
2026-01-08T16:49:57.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76707670]
2026-01-08T16:49:57.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bdcbcbf] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241862210 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-08T16:49:57.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bdcbcbf]
2026-01-08T16:49:57.490+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 하이퍼링크 삽입 완료: innersign_logo.png -> file:///C:/InnerSignature/backend/uploads/receipts/27/2d548442-a85c-4c57-bb41-9f25447cdb4e/receipt_20260106161341_innersign_logo.png
2026-01-08T16:49:57.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d648413] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1136915012 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:57.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.502+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d648413]
2026-01-08T16:49:57.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 하이퍼링크 삽입 완료: innersign_logo.png -> file:///C:/InnerSignature/backend/uploads/receipts/31/db5c6970-67aa-40ad-8884-a207fafae6b8/receipt_20260107140701_innersign_logo.png
2026-01-08T16:49:57.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77059aa8] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@238607431 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-08T16:49:57.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77059aa8]
2026-01-08T16:49:57.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42c3c6cc] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432592102 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 123(String), 1(Long)
2026-01-08T16:49:57.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42c3c6cc]
2026-01-08T16:49:57.524+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 하이퍼링크 삽입 완료: innersign_logo.png -> file:///C:/InnerSignature/backend/uploads/receipts/33/14701aae-b2a4-496e-8839-4d8633de7e40/receipt_20260107144205_innersign_logo.png
2026-01-08T16:49:57.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2967d8bf] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.526+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1968086777 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:57.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:57.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2967d8bf]
2026-01-08T16:49:57.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 하이퍼링크 삽입 완료: 영수증이미지.jpg -> file:///C:/InnerSignature/backend/uploads/receipts/34/5dd648c1-e13c-4d51-87cf-f627fcd92a45/receipt_20260108131158_영수증이미지.jpg
2026-01-08T16:49:57.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424d106] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1538017065 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:57.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:57.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424d106]
2026-01-08T16:49:57.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.558+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bdfe0a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1379118586 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-08T16:49:57.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:57.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70bdfe0a]
2026-01-08T16:49:57.664+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.664+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac1fbb6] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1435701578 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ac1fbb6]
2026-01-08T16:49:57.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@861b748] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1295577529 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@861b748]
2026-01-08T16:49:57.677+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba421b5] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@519704190 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.686+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba421b5]
2026-01-08T16:49:57.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.688+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@714cf7a4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.688+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1272957361 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.691+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.692+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@714cf7a4]
2026-01-08T16:49:57.692+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d6ce251] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@722191247 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.703+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.703+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d6ce251]
2026-01-08T16:49:57.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecec376] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82496660 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.707+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecec376]
2026-01-08T16:49:57.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f720ff7] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@655341596 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f720ff7]
2026-01-08T16:49:57.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e8510a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1492841399 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e8510a]
2026-01-08T16:49:57.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da3bad2] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1749468781 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da3bad2]
2026-01-08T16:49:57.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e47648f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858218175 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.734+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e47648f]
2026-01-08T16:49:57.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ebc50f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@86883969 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.739+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.739+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ebc50f]
2026-01-08T16:49:57.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b6246b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064337519 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b6246b]
2026-01-08T16:49:57.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467086b4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1926326125 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@467086b4]
2026-01-08T16:49:57.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110100c4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1401315702 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.754+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110100c4]
2026-01-08T16:49:57.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3935fb0f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.759+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@539741133 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.762+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3935fb0f]
2026-01-08T16:49:57.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46a653bd] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1348281829 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:57.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46a653bd]
2026-01-08T16:49:57.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aff4ace] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774947223 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 버거킹(String), 1(Long)
2026-01-08T16:49:57.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aff4ace]
2026-01-08T16:49:57.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.790+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e78ca3f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.791+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@779180036 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.791+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.792+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 다이소(String), 1(Long)
2026-01-08T16:49:57.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e78ca3f]
2026-01-08T16:49:57.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c095d32] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82337726 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-08T16:49:57.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c095d32]
2026-01-08T16:49:57.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef79e5c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@143762045 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.805+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:57.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef79e5c]
2026-01-08T16:49:57.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c1b197] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@821484269 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-08T16:49:57.818+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.818+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c1b197]
2026-01-08T16:49:57.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba6e2ed] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1684318983 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.821+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 123(String), 1(Long)
2026-01-08T16:49:57.822+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.822+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba6e2ed]
2026-01-08T16:49:57.823+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f29cb7c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@63241214 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:57.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:57.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f29cb7c]
2026-01-08T16:49:57.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@291c8d25] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@982295417 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:57.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:57.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@291c8d25]
2026-01-08T16:49:57.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d7ab05] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@753891263 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-08T16:49:57.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:57.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61d7ab05]
2026-01-08T16:49:57.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493b570] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1489021284 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:57.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493b570]
2026-01-08T16:49:57.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40dca68a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1509798868 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40dca68a]
2026-01-08T16:49:57.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.923+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20309ad0] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.923+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@100503722 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.923+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:57.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20309ad0]
2026-01-08T16:49:57.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6808077b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1288369840 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:57.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6808077b]
2026-01-08T16:49:57.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43110f4a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795881868 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.940+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43110f4a]
2026-01-08T16:49:57.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f704f3a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1146124993 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:57.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f704f3a]
2026-01-08T16:49:57.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:57.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7faa80c7] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:57.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1915623831 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:57.974+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:57.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:57.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7faa80c7]
2026-01-08T16:49:58.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c86ea4f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@922877344 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.008+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c86ea4f]
2026-01-08T16:49:58.009+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fdfa140] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1411446886 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fdfa140]
2026-01-08T16:49:58.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ee445f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1446591011 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.022+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.022+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ee445f]
2026-01-08T16:49:58.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e2b695f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1757479033 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e2b695f]
2026-01-08T16:49:58.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aa84197] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@794600972 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aa84197]
2026-01-08T16:49:58.042+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb26a0e] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1995323062 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb26a0e]
2026-01-08T16:49:58.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646a867] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@456741051 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646a867]
2026-01-08T16:49:58.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c04a5b] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1475793716 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.073+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c04a5b]
2026-01-08T16:49:58.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36390128] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355613990 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36390128]
2026-01-08T16:49:58.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68ee568c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@371206904 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68ee568c]
2026-01-08T16:49:58.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78df759] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@500013842 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78df759]
2026-01-08T16:49:58.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d1b242] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@730772062 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d1b242]
2026-01-08T16:49:58.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38086f1f] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1988467198 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38086f1f]
2026-01-08T16:49:58.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276b7605] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1558222176 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-08T16:49:58.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276b7605]
2026-01-08T16:49:58.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10686ade] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1825570184 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:58.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10686ade]
2026-01-08T16:49:58.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c456f1] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1680471117 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 버거킹(String), 1(Long)
2026-01-08T16:49:58.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c456f1]
2026-01-08T16:49:58.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e7cdf4] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931230855 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.231+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 다이소(String), 1(Long)
2026-01-08T16:49:58.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e7cdf4]
2026-01-08T16:49:58.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2033c651] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1009203150 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-08T16:49:58.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2033c651]
2026-01-08T16:49:58.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a50075] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697982366 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:58.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a50075]
2026-01-08T16:49:58.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e06a074] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1629468009 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-08T16:49:58.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e06a074]
2026-01-08T16:49:58.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23d60a9] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775465882 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.279+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 123(String), 1(Long)
2026-01-08T16:49:58.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-08T16:49:58.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23d60a9]
2026-01-08T16:49:58.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c738458] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@354589527 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:58.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:58.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c738458]
2026-01-08T16:49:58.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf1bc9c] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725659902 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-08T16:49:58.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:58.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf1bc9c]
2026-01-08T16:49:58.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:49:58.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3795f95a] was not registered for synchronization because synchronization is not active
2026-01-08T16:49:58.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1908844136 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:49:58.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-08T16:49:58.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-08T16:49:58.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-08T16:49:58.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3795f95a]
2026-01-08T16:49:58.384+09:00  INFO 23448 --- [http-nio-8080-exec-1] c.i.backend.service.ExpenseService       : 세무 검토 자료 생성 완료 - 파일명: tax_review_923740386184641246.xlsx, 건수: 17
2026-01-08T16:49:58.398+09:00  INFO 23448 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 세무 검토 자료 다운로드 요청 - userId: 12, startDate: null, endDate: null, format: full
2026-01-08T16:49:58.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Found 'Content-Type:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' in response
2026-01-08T16:49:58.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [file [C:\Users\owner\AppData\Local\Temp\tax_review_923740386184641246.xlsx]]
2026-01-08T16:49:58.404+09:00  WARN 23448 --- [http-nio-8080-exec-1] o.apache.coyote.http11.Http11Processor   : The HTTP response header [Content-Disposition] with value [attachment; filename="세무검토_전체_전체.xlsx"] has been removed from the response because it is invalid

java.lang.IllegalArgumentException: The Unicode character [세] at code point [49,464] cannot be encoded as it is outside the permitted range of 0 to 255
	at org.apache.tomcat.util.buf.MessageBytes.toBytesSimple(MessageBytes.java:306) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.buf.MessageBytes.toBytes(MessageBytes.java:279) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.write(Http11OutputBuffer.java:400) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.sendHeader(Http11OutputBuffer.java:379) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.writeHeaders(Http11Processor.java:1067) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1054) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:377) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.Response.action(Response.java:201) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.doWrite(Http11OutputBuffer.java:187) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.Response.doWrite(Response.java:621) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:328) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.flushByteBuffer(OutputBuffer.java:775) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.append(OutputBuffer.java:672) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:375) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:353) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:99) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.write(OnCommittedResponseWrapper.java:639) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.write(StandardServletAsyncWebRequest.java:401) ~[spring-web-6.2.14.jar:6.2.14]
	at java.base/java.io.InputStream.transferTo(InputStream.java:783) ~[na:na]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeContent(ResourceHttpMessageConverter.java:160) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeInternal(ResourceHttpMessageConverter.java:115) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeInternal(ResourceHttpMessageConverter.java:46) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:344) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:263) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ResponseEntityReturnValueHandler.handleReturnValue(ResponseEntityReturnValueHandler.java:79) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:84) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.RateLimitFilter.doFilterInternal(RateLimitFilter.java:87) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2026-01-08T16:49:58.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:38.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:38.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:51:38.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/26
2026-01-08T16:51:38.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:51:38.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:51:38.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/26
2026-01-08T16:51:38.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:38.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:51:38.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:38.073+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/26
2026-01-08T16:51:38.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:51:38.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/26
2026-01-08T16:51:38.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/26
2026-01-08T16:51:38.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:51:38.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/26
2026-01-08T16:51:38.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:51:38.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:38.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:51:38.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/26
2026-01-08T16:51:38.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:51:38.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/26
2026-01-08T16:51:38.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:51:38.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:38.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:38.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1587a985] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:51:38.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/26", parameters={}
2026-01-08T16:51:38.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:51:38.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/26", parameters={}
2026-01-08T16:51:38.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:51:38.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:51:38.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:51:38.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:51:38.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:51:38.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:51:38.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:51:38.120+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:51:38.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.122+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1470556612 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:38.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:38.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:51:38.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@521b222f] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455eb654] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:38.133+09:00  INFO 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:51:38.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a8ea1b] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc5b0a2] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cad97e] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1749724216 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:38.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:51:38.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:38.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858135915 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:38.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:51:38.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1587a985]
2026-01-08T16:51:38.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:51:38.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:38.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:51:38.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:38.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:38.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1787996858 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:51:38.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484914798 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:38.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924793951 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:51:38.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:51:38.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:51:38.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:51:38.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:51:38.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:51:38.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@521b222f]
2026-01-08T16:51:38.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455eb654]
2026-01-08T16:51:38.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:38.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:38.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:51:38.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449936] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f3012f9] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@304840636 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:38.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@749679043 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:38.174+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:51:38.176+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:51:38.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:51:38.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:51:38.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T16:51:38.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:51:38.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T16:51:38.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cad97e]
2026-01-08T16:51:38.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a8ea1b]
2026-01-08T16:51:38.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc5b0a2]
2026-01-08T16:51:38.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:51:38.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:51:38.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:38.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:38.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:38.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f3012f9]
2026-01-08T16:51:38.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449936]
2026-01-08T16:51:38.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T16:51:38.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:51:38.196+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T16:51:38.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:38.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:38.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:38.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df323be] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1cabf1] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@315313955 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:38.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@783621805 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:38.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:51:38.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:51:38.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:51:38.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:51:38.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-08T16:51:38.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df323be]
2026-01-08T16:51:38.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-08T16:51:38.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1cabf1]
2026-01-08T16:51:38.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69281485] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2110928077 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:38.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21846442] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:51:38.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1319633056 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:38.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:51:38.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:51:38.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 26(Long), 1(Long)
2026-01-08T16:51:38.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:51:38.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69281485]
2026-01-08T16:51:38.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8060ef3] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@555986762 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:38.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:38.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:38.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:51:38.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21846442]
2026-01-08T16:51:38.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:38.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:38.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8060ef3]
2026-01-08T16:51:38.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d630c69] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:38.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:38.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2143801843 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:38.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=26, drafterId=2, r (truncated)...]
2026-01-08T16:51:38.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:38.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:38.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:38.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:38.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d630c69]
2026-01-08T16:51:38.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:38.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=26, drafterId=2, r (truncated)...]
2026-01-08T16:51:38.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.596+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:39.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:51:39.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:51:39.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:39.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:51:39.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:51:39.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:51:39.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:51:39.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:39.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:51:39.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:39.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:51:39.623+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:39.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:39.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:51:39.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:51:39.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:51:39.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:39.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:39.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:51:39.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:39.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:39.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:39.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:39.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29369c50] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:39.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd19ac5] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e90048d] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:51:39.639+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:51:39.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:51:39.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:51:39.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:51:39.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:51:39.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:51:39.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:51:39.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9f0bb5] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:51:39.649+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:51:39.649+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.649+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb2fe48] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1233670316 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:39.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@977031748 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:51:39.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:39.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:51:39.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@396178229 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:39.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:39.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1914014722 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:39.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:39.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:51:39.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:51:39.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1136580335 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:39.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:39.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:51:39.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:51:39.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:39.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:51:39.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:39.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:51:39.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d5be99] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:39.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1576684614 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:51:39.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e90048d]
2026-01-08T16:51:39.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:51:39.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9f0bb5]
2026-01-08T16:51:39.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:51:39.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:39.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68191466] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@188927599 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:39.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:39.680+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:39.680+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:39.680+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd19ac5]
2026-01-08T16:51:39.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:39.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:39.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:51:39.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:39.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:51:39.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:39.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb2fe48]
2026-01-08T16:51:39.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29369c50]
2026-01-08T16:51:39.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:51:39.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:51:39.688+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:51:39.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:51:39.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:51:39.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:51:39.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569f5d81] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:51:39.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:51:39.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:51:39.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1956376410 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:51:39.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:51:39.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:51:39.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:39.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:39.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:51:39.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:51:39.707+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cdd1f3] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:51:39.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1751885002 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:39.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c22685d] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:51:39.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:51:39.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1049212761 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:39.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:51:39.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:39.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:39.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@779b0f6b] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445301836 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:39.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:51:39.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:51:39.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68191466]
2026-01-08T16:51:39.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376b7ef8] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@393340503 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:39.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:39.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:39.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:51:39.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:51:39.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:51:39.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d5be99]
2026-01-08T16:51:39.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c22685d]
2026-01-08T16:51:39.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cdd1f3]
2026-01-08T16:51:39.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@779b0f6b]
2026-01-08T16:51:39.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:51:39.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:51:39.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55036e4d] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:51:39.734+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@942436183 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:39.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.734+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:39.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569f5d81]
2026-01-08T16:51:39.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:39.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:39.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55036e4d]
2026-01-08T16:51:39.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376b7ef8]
2026-01-08T16:51:39.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150956ea] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1530274560 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:39.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2daa989a] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:39.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1096462185 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:39.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:39.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2daa989a]
2026-01-08T16:51:39.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a60478] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093744062 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:39.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:39.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:39.772+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:39.773+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@150956ea]
2026-01-08T16:51:39.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4fc73c] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1957587641 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:39.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4fc73c]
2026-01-08T16:51:39.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:39.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a60478]
2026-01-08T16:51:39.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c397bd] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375447262 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:39.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@183500f] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.788+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:39.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@160301443 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:39.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:39.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:39.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c397bd]
2026-01-08T16:51:39.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf33424] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@55717496 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:39.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.839+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.839+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@183500f]
2026-01-08T16:51:39.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3374d6af] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686615526 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:39.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf33424]
2026-01-08T16:51:39.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:39.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66956d5c] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:39.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@595732414 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:39.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:39.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:39.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3374d6af]
2026-01-08T16:51:39.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:39.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66956d5c]
2026-01-08T16:51:39.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:51:39.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:39.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:39.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:51:39.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:40.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:40.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:40.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:40.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:40.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:40.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:40.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:40.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:40.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:40.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:40.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:40.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:40.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:40.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7199e8e0] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:40.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:40.590+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b18e8f3] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:40.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1541288698 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:40.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1343956209 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:40.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:40.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:40.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:40.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:40.686+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:40.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:40.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7199e8e0]
2026-01-08T16:51:40.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b18e8f3]
2026-01-08T16:51:40.691+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:40.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:40.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:40.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:40.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:40.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:42.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:42.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:51:42.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:51:42.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/27
2026-01-08T16:51:42.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:51:42.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/27
2026-01-08T16:51:42.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:42.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:51:42.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:51:42.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/27
2026-01-08T16:51:42.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:51:42.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/27
2026-01-08T16:51:42.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:42.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:42.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:51:42.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:51:42.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/27
2026-01-08T16:51:42.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:51:42.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/27
2026-01-08T16:51:42.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:42.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:51:42.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:51:42.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/27
2026-01-08T16:51:42.956+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:51:42.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/27
2026-01-08T16:51:42.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:42.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:51:42.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:51:42.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/27", parameters={}
2026-01-08T16:51:42.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:51:42.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/27", parameters={}
2026-01-08T16:51:42.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:42.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:51:42.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:51:42.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:51:42.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:51:42.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:51:42.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1503c717] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:42.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:42.976+09:00  INFO 23448 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:51:42.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:42.978+09:00  INFO 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:51:42.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:42.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7f654d] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:42.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:42.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8a0766b] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:42.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:42.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71cad13f] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:42.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bec02] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:42.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0bf8e4] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:42.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@71622169 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:51:42.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1430647742 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:51:42.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283995187 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:42.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1454933844 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:42.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2106946087 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:42.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155412546 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:42.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:42.989+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:51:42.989+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:51:42.990+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:51:42.990+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:51:42.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:51:42.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:42.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:42.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:51:42.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:42.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-08T16:51:42.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-08T16:51:43.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T16:51:43.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:51:43.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:51:43.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0bf8e4]
2026-01-08T16:51:43.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:43.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1503c717]
2026-01-08T16:51:43.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71cad13f]
2026-01-08T16:51:43.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8a0766b]
2026-01-08T16:51:43.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:43.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:43.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:43.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:43.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T16:51:43.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:43.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728bc3dd] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:43.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0df7a2] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:43.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T16:51:43.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:43.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:43.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1426526640 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:43.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1236358314 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:43.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bec02]
2026-01-08T16:51:43.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:51:43.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:51:43.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:43.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-08T16:51:43.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-08T16:51:43.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T16:51:43.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:43.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:51:43.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7f654d]
2026-01-08T16:51:43.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:43.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:51:43.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:43.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:51:43.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:51:43.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0df7a2]
2026-01-08T16:51:43.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728bc3dd]
2026-01-08T16:51:43.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:43.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:43.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12cee4a9] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:43.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b093272] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:43.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@301834677 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:43.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120621541 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:43.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:51:43.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:51:43.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 27(Long), 1(Long)
2026-01-08T16:51:43.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 27(Long), 1(Long)
2026-01-08T16:51:43.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-08T16:51:43.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-08T16:51:43.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b093272]
2026-01-08T16:51:43.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12cee4a9]
2026-01-08T16:51:43.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:43.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:43.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43805cb8] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:43.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18e73ad3] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:43.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561544216 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:43.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2112450250 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:43.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:51:43.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:51:43.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-08T16:51:43.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-08T16:51:43.040+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T16:51:43.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43805cb8]
2026-01-08T16:51:43.040+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T16:51:43.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:43.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18e73ad3]
2026-01-08T16:51:43.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7494f683] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:43.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:43.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1a840] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:43.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@892342581 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:43.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658586603 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:43.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:43.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:43.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:43.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:43.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:43.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:43.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7494f683]
2026-01-08T16:51:43.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1a840]
2026-01-08T16:51:43.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:43.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:43.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=27, drafterId=2, r (truncated)...]
2026-01-08T16:51:43.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=27, drafterId=2, r (truncated)...]
2026-01-08T16:51:43.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:43.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:52.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:51:52.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:51:52.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:51:52.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:52.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:51:52.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:51:52.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:52.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:51:52.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:51:52.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:51:52.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:52.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:51:52.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:51:52.073+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:52.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:51:52.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:51:52.114+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:52.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:52.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:51:52.124+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:51:52.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:52.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:51:52.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:51:52.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:52.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:51:52.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:51:52.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:52.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:51:52.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:51:52.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:52.142+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:51:52.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:51:52.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:52.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:52.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:51:52.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:51:52.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce71a47] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:51:52.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:51:52.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b6733b] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:51:52.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42107a9b] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@991812870 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:52.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@200468349 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:51:52.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2283199f] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1afb2ade] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:51:52.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cca69a3] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:52.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@406355741 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:52.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:51:52.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@707244190 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:51:52.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@370893946 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:52.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:52.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40889554 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:52.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:52.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:52.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:51:52.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:52.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:52.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:51:52.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:51:52.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58b6733b]
2026-01-08T16:51:52.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:52.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:52.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42107a9b]
2026-01-08T16:51:52.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce71a47]
2026-01-08T16:51:52.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:51:52.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:52.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:51:52.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:52.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:51:52.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:51:52.231+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2283199f]
2026-01-08T16:51:52.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1afb2ade]
2026-01-08T16:51:52.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:52.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:51:52.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cca69a3]
2026-01-08T16:51:52.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:51:52.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:51:52.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:52.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6884f39a] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:51:52.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:51:52.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:52.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:52.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:51:52.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:51:52.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2117566108 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:52.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:51:52.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:52.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:51:52.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:51:52.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:51:52.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69effa14] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a88ee7b] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:51:52.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:51:52.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588744461 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:52.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1571019358 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:52.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e51f1a] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:51:52.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:52.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1272409367 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:51:52.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:51:52.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:52.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:52.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:51:52.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:52.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68061971] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194415224 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:51:52.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:51:52.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6884f39a]
2026-01-08T16:51:52.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:51:52.330+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b56b0c1] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@612468242 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:52.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:52.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:51:52.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:52.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a88ee7b]
2026-01-08T16:51:52.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69effa14]
2026-01-08T16:51:52.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e51f1a]
2026-01-08T16:51:52.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:51:52.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:52.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68061971]
2026-01-08T16:51:52.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:52.356+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13ff07ae] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.356+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:51:52.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@89551007 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:52.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:51:52.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:52.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b56b0c1]
2026-01-08T16:51:52.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@458d3079] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.391+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@461586609 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:52.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13ff07ae]
2026-01-08T16:51:52.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a40a22] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2030943663 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:52.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:52.430+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:52.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@458d3079]
2026-01-08T16:51:52.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:52.513+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.513+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a40a22]
2026-01-08T16:51:52.513+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3e46f9] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59b320e] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084014079 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:52.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@928828805 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:52.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:52.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:52.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:52.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59b320e]
2026-01-08T16:51:52.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3e46f9]
2026-01-08T16:51:52.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2305e7c8] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c383bf] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136124132 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:52.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@995364976 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:52.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:52.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:52.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:52.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2305e7c8]
2026-01-08T16:51:52.589+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c383bf]
2026-01-08T16:51:52.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8ff372] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b26b6] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1186494028 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:52.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@960267129 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:52.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b26b6]
2026-01-08T16:51:52.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8ff372]
2026-01-08T16:51:52.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:52.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:51:52.609+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19525411] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:52.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:52.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@754135082 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:52.614+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:52.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:52.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:52.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19525411]
2026-01-08T16:51:52.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:52.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:51:52.639+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:53.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:53.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:53.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:53.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:53.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:53.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:53.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:53.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:53.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:53.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:53.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:53.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@652326ed] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a80346a] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415721971 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:51:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@381922560 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:51:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:53.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:53.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:53.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:53.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:53.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:53.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@652326ed]
2026-01-08T16:51:53.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a80346a]
2026-01-08T16:51:53.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:53.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:53.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:53.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:53.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:53.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:56.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=2&size=10
2026-01-08T16:51:56.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=2&size=10
2026-01-08T16:51:56.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:51:56.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=2&size=10
2026-01-08T16:51:56.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=2&size=10", parameters={masked}
2026-01-08T16:51:56.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:51:56.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:56.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e7f8ffc] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:56.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342905981 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:56.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:56.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:56.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:56.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e7f8ffc]
2026-01-08T16:51:56.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:56.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6897b63e] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:56.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@835489509 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:56.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:56.572+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:56.582+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:56.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6897b63e]
2026-01-08T16:51:56.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:56.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1a4563] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:56.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2028548280 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:56.590+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:56.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:56.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:56.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d1a4563]
2026-01-08T16:51:56.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:56.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7054172f] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:56.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253392155 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:56.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:56.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:56.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:56.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7054172f]
2026-01-08T16:51:56.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:56.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a436d8c] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:56.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2055142020 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:56.609+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:51:56.610+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:51:56.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:51:56.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a436d8c]
2026-01-08T16:51:56.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:56.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27139467] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:56.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378380804 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:56.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:56.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:56.623+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:56.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27139467]
2026-01-08T16:51:56.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:56.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac88281] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:56.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@21203219 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:51:56.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:51:56.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:51:56.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:51:56.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac88281]
2026-01-08T16:51:56.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:56.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:51:56.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:56.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:56.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:51:56.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:56.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:51:56.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:56.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:51:56.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:56.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:51:56.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:56.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:51:56.956+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:56.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:51:56.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:56.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d70f971] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:56.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:51:56.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a373d6d] was not registered for synchronization because synchronization is not active
2026-01-08T16:51:56.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@67698837 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:51:56.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@700282453 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:51:56.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:56.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:51:56.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:56.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:51:56.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:56.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:51:56.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a373d6d]
2026-01-08T16:51:56.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d70f971]
2026-01-08T16:51:56.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:56.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:51:56.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:56.989+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:51:56.990+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:51:56.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:01.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=3&size=10
2026-01-08T16:52:01.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=3&size=10
2026-01-08T16:52:01.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:01.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=3&size=10
2026-01-08T16:52:01.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=3&size=10", parameters={masked}
2026-01-08T16:52:01.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:01.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:01.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336bc572] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:01.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@523070230 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:01.678+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:01.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:01.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:01.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336bc572]
2026-01-08T16:52:01.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:01.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7501655a] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:01.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@6428932 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:01.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:01.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:01.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:01.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7501655a]
2026-01-08T16:52:01.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:01.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2fad92] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:01.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1903833752 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:01.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:01.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:01.690+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:01.695+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2fad92]
2026-01-08T16:52:01.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:01.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f4e1e8] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:01.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2059767385 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:01.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:01.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:01.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:01.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f4e1e8]
2026-01-08T16:52:01.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:01.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e53454f] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:01.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294062284 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:01.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:01.703+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:01.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:01.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e53454f]
2026-01-08T16:52:01.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:01.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4100d6a1] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:01.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1700633331 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:01.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:01.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:01.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:01.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4100d6a1]
2026-01-08T16:52:01.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:01.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfc6c6a] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:01.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064519306 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:01.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:01.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:01.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:01.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfc6c6a]
2026-01-08T16:52:01.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:01.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:01.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:01.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:01.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:01.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:01.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:01.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:01.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:01.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:01.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:01.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:01.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:01.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:01.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:01.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:01.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b927efd] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:01.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:01.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37463fea] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:01.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@480502531 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:01.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:01.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1425173543 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:01.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:01.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:01.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:01.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:01.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b927efd]
2026-01-08T16:52:01.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:01.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:01.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37463fea]
2026-01-08T16:52:01.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:01.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:01.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:01.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:01.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:02.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:52:02.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:52:02.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:02.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:52:02.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:52:02.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:02.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:02.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a310664] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:02.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1306447540 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:02.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:02.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:02.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:02.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a310664]
2026-01-08T16:52:02.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:02.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c056df4] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:02.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081422841 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:02.822+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:02.822+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:02.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:02.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c056df4]
2026-01-08T16:52:02.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:02.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635d117b] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:02.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1680914985 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:02.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:02.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:02.839+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:02.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635d117b]
2026-01-08T16:52:02.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:02.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59cfea1c] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:02.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1385361047 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:02.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:02.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:02.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:02.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59cfea1c]
2026-01-08T16:52:02.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:02.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa6d274] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:02.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772052118 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:02.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:02.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:02.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:02.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa6d274]
2026-01-08T16:52:02.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:02.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b2dbea] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:02.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904119290 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:02.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:02.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:02.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:02.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b2dbea]
2026-01-08T16:52:02.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:02.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296a7e5a] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:02.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@924421398 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:02.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:02.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:02.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:02.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296a7e5a]
2026-01-08T16:52:02.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:02.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:02.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:03.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:03.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:03.172+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:03.172+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:03.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:03.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:03.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:03.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:03.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:03.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:03.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:03.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:03.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:03.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:03.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f6adee9] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:03.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a29c78] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:03.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1214397914 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:03.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:03.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@594675555 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:03.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:03.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:03.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:03.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:03.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a29c78]
2026-01-08T16:52:03.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:03.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:03.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:03.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:03.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f6adee9]
2026-01-08T16:52:03.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:03.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:03.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:10.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=PAID
2026-01-08T16:52:10.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=PAID
2026-01-08T16:52:10.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:10.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=PAID
2026-01-08T16:52:10.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=PAID", parameters={masked}
2026-01-08T16:52:10.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:10.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:10.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d27a90c] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:10.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858180997 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:10.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:10.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:10.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:10.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d27a90c]
2026-01-08T16:52:10.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:10.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4c51f2] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:10.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@612410266 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:10.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:10.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:10.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:10.277+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4c51f2]
2026-01-08T16:52:10.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:10.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763a226e] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:10.279+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@454311578 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:10.279+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:10.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), PAID(String), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:10.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-08T16:52:10.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763a226e]
2026-01-08T16:52:10.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:10.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a28691] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:10.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@548203865 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:10.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:10.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:10.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:10.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a28691]
2026-01-08T16:52:10.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:10.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ebb972d] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:10.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2109604453 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:10.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:10.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), PAID(String), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:10.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-08T16:52:10.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ebb972d]
2026-01-08T16:52:10.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:10.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@175d81f6] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:10.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@636317391 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:10.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:10.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:10.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:10.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@175d81f6]
2026-01-08T16:52:10.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:10.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc22c14] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:10.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384520811 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:10.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:10.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:10.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:10.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc22c14]
2026-01-08T16:52:10.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:10.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:10.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:10.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:10.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:10.660+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:10.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:10.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:10.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:10.677+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:10.678+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:10.678+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:10.677+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:10.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:10.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60ec0cc0] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:10.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:10.686+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:10.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:10.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47377c5b] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:10.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432783754 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:10.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636067667 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:10.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:10.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:10.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:10.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:10.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:10.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:10.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47377c5b]
2026-01-08T16:52:10.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60ec0cc0]
2026-01-08T16:52:10.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:10.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:10.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:10.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:10.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:10.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:18.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:18.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:18.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:52:18.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/32
2026-01-08T16:52:18.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/32
2026-01-08T16:52:18.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:52:18.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:18.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:18.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:52:18.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:52:18.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:18.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/32
2026-01-08T16:52:18.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/32
2026-01-08T16:52:18.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:18.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:18.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:18.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:52:18.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:52:18.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:18.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/32
2026-01-08T16:52:18.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/32
2026-01-08T16:52:18.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/32
2026-01-08T16:52:18.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:18.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:52:18.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:52:18.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:18.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:18.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/32", parameters={}
2026-01-08T16:52:18.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/32
2026-01-08T16:52:18.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:18.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:52:18.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:52:18.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:18.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:52:18.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/32", parameters={}
2026-01-08T16:52:18.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b5eb9] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:18.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:52:18.916+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:52:18.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:52:18.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64619d9b] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:18.917+09:00  INFO 23448 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 12, companyId: 1
2026-01-08T16:52:18.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:18.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:52:18.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:18.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:18.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fad7a15] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:18.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:18.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27e56641] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:18.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf1337f] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:18.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14bd7798] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:18.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@698990522 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:18.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973596653 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:18.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1080588096 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:18.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1200242037 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:18.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1120148191 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:18.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@696562252 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:18.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:18.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:18.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:52:18.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:52:18.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:52:18.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:52:18.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:52:18.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:18.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:18.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:18.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:18.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:18.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T16:52:18.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:18.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64619d9b]
2026-01-08T16:52:18.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-08T16:52:18.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:18.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:52:18.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf1337f]
2026-01-08T16:52:18.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:52:18.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:18.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14bd7798]
2026-01-08T16:52:18.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b5eb9]
2026-01-08T16:52:18.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fad7a15]
2026-01-08T16:52:18.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:18.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27e56641]
2026-01-08T16:52:18.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:18.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:19.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:19.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:19.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T16:52:19.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:19.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:19.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:19.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-08T16:52:19.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:19.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d616b26] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:19.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:19.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@decd0cf] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:19.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@762377042 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:19.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:52:19.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:19.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@506865302 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:19.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:19.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:52:19.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:19.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:52:19.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@decd0cf]
2026-01-08T16:52:19.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:19.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b298650] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:19.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1881687890 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:19.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:52:19.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:52:19.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d616b26]
2026-01-08T16:52:19.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:19.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:19.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@231f2b44] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:19.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@361843802 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:19.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:52:19.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:19.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-08T16:52:19.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b298650]
2026-01-08T16:52:19.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-08T16:52:19.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:19.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@231f2b44]
2026-01-08T16:52:19.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f5b6105] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:19.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:19.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1475407239 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:19.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356827a5] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:19.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:52:19.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1776242794 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:19.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:19.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:52:19.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:19.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:52:19.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f5b6105]
2026-01-08T16:52:19.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:19.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7220f281] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:19.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@909633161 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:19.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:19.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:19.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:52:19.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356827a5]
2026-01-08T16:52:19.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:19.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4962f80d] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:19.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1036237707 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:19.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:19.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:19.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7220f281]
2026-01-08T16:52:19.279+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:19.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:19.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=32, drafterId=2, r (truncated)...]
2026-01-08T16:52:19.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:19.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4962f80d]
2026-01-08T16:52:19.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:19.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:19.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=32, drafterId=2, r (truncated)...]
2026-01-08T16:52:19.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:26.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:26.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:26.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:52:26.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:52:26.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:52:26.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:26.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:52:26.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:26.788+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:26.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:26.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:26.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:26.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:52:26.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:26.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:52:26.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:26.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:26.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:26.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:26.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:52:26.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:26.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:26.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:26.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:26.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:26.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:26.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:26.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:26.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:52:26.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:26.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:52:26.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:26.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:52:26.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:26.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:26.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:52:26.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:26.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:26.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:26.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:26.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55b6a443] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:26.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:52:26.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:26.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:26.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:26.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ecdebe] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:26.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:26.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf9e11f] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:26.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:26.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d48843d] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:26.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24109f30] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:26.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@737505657 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:26.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f5df750] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:26.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1435665284 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:26.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@968716903 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:26.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:26.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:26.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@132118598 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:26.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:26.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@381724969 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:26.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:52:26.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:52:26.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:26.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@800568354 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:26.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:26.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:26.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:26.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:26.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:26.923+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:26.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:26.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:26.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55b6a443]
2026-01-08T16:52:26.923+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:26.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:26.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf9e11f]
2026-01-08T16:52:26.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ecdebe]
2026-01-08T16:52:26.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:26.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d48843d]
2026-01-08T16:52:26.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:26.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:26.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:26.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:26.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:26.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:26.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42606b9c] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:26.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:26.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:26.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:26.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1224044130 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:26.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:52:26.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:26.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f5df750]
2026-01-08T16:52:26.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:52:26.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:52:26.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:26.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:26.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24109f30]
2026-01-08T16:52:26.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:26.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:26.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:52:26.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:26.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:26.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:26.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:26.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:52:26.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:52:26.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:26.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:52:26.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:26.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:52:26.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:52:26.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:26.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:26.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:26.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:26.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:26.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:52:26.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42606b9c]
2026-01-08T16:52:26.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:27.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:27.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:27.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dea5258] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@702b6217] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68f594c2] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51d86cfd] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:27.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152065511 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:27.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598294270 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:27.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@688406219 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:27.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1409873429 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:27.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:27.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:27.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:27.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:27.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:27.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bef7017] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:27.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:27.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:27.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 12(Long)
2026-01-08T16:52:27.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1689130410 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:27.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:27.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:27.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:27.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:27.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T16:52:27.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:27.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dea5258]
2026-01-08T16:52:27.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51d86cfd]
2026-01-08T16:52:27.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:27.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@702b6217]
2026-01-08T16:52:27.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68f594c2]
2026-01-08T16:52:27.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558a3a33] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:27.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bef7017]
2026-01-08T16:52:27.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:27.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fdfff6b] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1257097800 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:27.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:27.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:27.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T16:52:27.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1002973142 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:27.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:27.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:27.147+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:27.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:27.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:27.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:27.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:27.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:27.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:27.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558a3a33]
2026-01-08T16:52:27.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@220ae2d8] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:27.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@651497224 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:27.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fdfff6b]
2026-01-08T16:52:27.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:27.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:27.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7788b3ec] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1999384273 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:27.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:27.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:27.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:27.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@220ae2d8]
2026-01-08T16:52:27.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b92822f] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122034599 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:27.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:27.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:27.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:27.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7788b3ec]
2026-01-08T16:52:27.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b98766b] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@423470887 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:27.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:27.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:27.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:27.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b92822f]
2026-01-08T16:52:27.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@395de8a] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@470394669 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:27.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:27.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:27.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:27.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b98766b]
2026-01-08T16:52:27.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d51b05] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1754668634 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:27.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:27.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:27.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:27.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@395de8a]
2026-01-08T16:52:27.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dd7517e] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:27.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538685376 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:27.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d51b05]
2026-01-08T16:52:27.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:27.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:27.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:27.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:27.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:27.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:27.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dd7517e]
2026-01-08T16:52:27.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa40d47] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416281964 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:27.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:27.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-08T16:52:27.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:27.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa40d47]
2026-01-08T16:52:27.311+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:27.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:27.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:27.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:27.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:27.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:27.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:27.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:27.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:27.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:27.858+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:27.858+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:27.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:27.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:27.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:27.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:27.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715bc110] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fcb1c8c] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:27.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1374416073 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:27.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510721218 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:27.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:27.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:27.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:27.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-08T16:52:27.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:27.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fcb1c8c]
2026-01-08T16:52:27.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T16:52:27.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:27.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715bc110]
2026-01-08T16:52:27.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:27.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:27.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T16:52:27.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:27.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:28.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-08T16:52:28.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-08T16:52:28.754+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/logout
2026-01-08T16:52:28.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-08T16:52:28.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-08T16:52:28.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-08T16:52:28.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMiIsInVzZXJuYW1lIjo (truncated)...]
2026-01-08T16:52:28.803+09:00  INFO 23448 --- [http-nio-8080-exec-8] SECURITY                                 : LOGOUT userId=12
2026-01-08T16:52:28.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:28.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-08T16:52:28.818+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:37.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T16:52:37.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T16:52:37.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T16:52:37.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T16:52:37.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T16:52:37.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T16:52:37.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user3, password=1234)]
2026-01-08T16:52:37.916+09:00  INFO 23448 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user3
2026-01-08T16:52:37.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:37.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277ee1b7] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:37.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1666583168 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:37.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T16:52:37.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user3(String)
2026-01-08T16:52:37.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T16:52:37.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277ee1b7]
2026-01-08T16:52:38.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@528e99fe] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@799456338 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:38.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T16:52:38.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-08T16:52:38.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-08T16:52:38.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@528e99fe]
2026-01-08T16:52:38.011+09:00  INFO 23448 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 성공 - userId: 4, role: ACCOUNTANT, companyId: 1
2026-01-08T16:52:38.011+09:00  INFO 23448 --- [http-nio-8080-exec-1] SECURITY                                 : LOGIN_SUCCESS userId=4 username=test_user3 role=ACCOUNTANT
2026-01-08T16:52:38.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:38.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=4, username=test_user3, password (truncated)...]
2026-01-08T16:52:38.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:38.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T16:52:38.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T16:52:38.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-08T16:52:38.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T16:52:38.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T16:52:38.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T16:52:38.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@462fa7cd] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787328190 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:38.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T16:52:38.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-08T16:52:38.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-08T16:52:38.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@462fa7cd]
2026-01-08T16:52:38.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:38.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T16:52:38.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:38.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:38.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:38.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:38.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T16:52:38.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:38.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T16:52:38.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:38.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:38.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T16:52:38.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:38.688+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:38.688+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:38.571+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:38.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:38.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:38.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:38.686+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:38.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:38.692+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:38.693+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:38.694+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:38.694+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T16:52:38.694+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:38.695+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:38.695+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:38.695+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:38.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T16:52:38.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:38.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:38.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:38.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:38.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@492c22d7] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:38.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:38.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1951c9eb] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1918558732 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:38.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2661b90e] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13af92fc] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:38.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aece7a] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:38.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T16:52:38.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T16:52:38.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:38.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1766344797 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:38.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636596946 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:38.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@798414553 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:38.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:38.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1732631937 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:38.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@492c22d7]
2026-01-08T16:52:38.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:38.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:38.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:38.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T16:52:38.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:38.772+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:38.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:38.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T16:52:38.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T16:52:38.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7446f658] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:38.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:38.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1549031581 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:38.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:38.805+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:38.821+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:38.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1951c9eb]
2026-01-08T16:52:38.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:38.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aece7a]
2026-01-08T16:52:38.852+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5509f15a] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1723758972 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:38.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:38.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:38.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522b07c8] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:38.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13af92fc]
2026-01-08T16:52:38.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:38.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2661b90e]
2026-01-08T16:52:38.858+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089781320 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:38.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5648fbce] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:38.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f298ec6] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@138361368 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:38.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:38.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:38.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:38.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074654908 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:38.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:38.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:38.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:38.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:38.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:38.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:38.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:38.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:38.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7446f658]
2026-01-08T16:52:38.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5509f15a]
2026-01-08T16:52:38.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:38.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:38.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:38.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:38.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:38.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:38.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:38.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:38.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:38.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:38.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:38.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f298ec6]
2026-01-08T16:52:38.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522b07c8]
2026-01-08T16:52:38.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5648fbce]
2026-01-08T16:52:38.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:38.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:38.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:38.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2143e8a5] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:38.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2043f5e6] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@818209224 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:38.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:38.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281b6ee6] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:38.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@710718305 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:38.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:38.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T16:52:38.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:38.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1135592085 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:38.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:38.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:38.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:38.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:38.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:38.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:38.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T16:52:38.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:38.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:38.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T16:52:38.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:38.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:38.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea03271] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@139780155 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:38.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:38.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@246f6cf] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:38.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:38.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:38.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281b6ee6]
2026-01-08T16:52:38.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T16:52:38.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1571816243 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:38.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2043f5e6]
2026-01-08T16:52:38.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2143e8a5]
2026-01-08T16:52:38.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c35a5ec] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:38.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:38.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:38.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1068142290 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:38.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481c1c4a] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d4909c] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2001677418 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:39.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678183971 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:39.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:39.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:39.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:39.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.022+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea03271]
2026-01-08T16:52:39.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:39.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:39.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@246f6cf]
2026-01-08T16:52:39.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:39.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299b97f8] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@475987082 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:39.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d4909c]
2026-01-08T16:52:39.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c35a5ec]
2026-01-08T16:52:39.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481c1c4a]
2026-01-08T16:52:39.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:39.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6c2618] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3caa3452] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:39.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@934975475 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:39.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@247989035 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:39.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:39.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:39.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:39.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299b97f8]
2026-01-08T16:52:39.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:39.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a35062e] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3caa3452]
2026-01-08T16:52:39.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6c2618]
2026-01-08T16:52:39.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@526678215 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:39.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729a6a41] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.100+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3baf65ee] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:39.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@528472292 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:39.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1166923877 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:39.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:39.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:39.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:39.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:39.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:39.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a35062e]
2026-01-08T16:52:39.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:39.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:39.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6365b1a7] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3baf65ee]
2026-01-08T16:52:39.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59040fa6] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432312701 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:39.344+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729a6a41]
2026-01-08T16:52:39.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0ff3b1] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1290163251 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:39.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.345+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@564387731 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:39.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:39.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:39.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6365b1a7]
2026-01-08T16:52:39.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0ff3b1]
2026-01-08T16:52:39.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59040fa6]
2026-01-08T16:52:39.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@423fe28f] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e876af6] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ae30a36] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203004902 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1812434156 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:39.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:39.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@870536691 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:39.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:39.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:39.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:39.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:39.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ae30a36]
2026-01-08T16:52:39.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e876af6]
2026-01-08T16:52:39.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356d0f25] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4739dfe2] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.391+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@44883241 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:39.391+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728909572 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:39.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:39.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:39.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:39.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@423fe28f]
2026-01-08T16:52:39.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477949c7] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2054152253 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:39.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:39.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:39.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4739dfe2]
2026-01-08T16:52:39.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:39.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356d0f25]
2026-01-08T16:52:39.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477949c7]
2026-01-08T16:52:39.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:39.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd095a0] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:39.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@370786264 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:39.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45faf3cb] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220586946 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:39.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.407+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.410+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45faf3cb]
2026-01-08T16:52:39.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd095a0]
2026-01-08T16:52:39.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba5590d] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:39.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@701731097 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:39.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:39.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:39.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:39.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:39.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba5590d]
2026-01-08T16:52:39.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771f8d8f] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1717817168 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771f8d8f]
2026-01-08T16:52:39.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:39.456+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:39.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:39.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:39.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:39.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:39.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:39.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:39.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:39.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:39.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:39.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:39.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:39.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:39.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:39.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4157c01b] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f409b3] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@48237151 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1282253078 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:39.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:39.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:39.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:39.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:39.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:39.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:39.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f409b3]
2026-01-08T16:52:39.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4157c01b]
2026-01-08T16:52:39.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:39.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a14ce81] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59cc0175] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:39.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086402017 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:39.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@644109647 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:39.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:39.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:39.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a14ce81]
2026-01-08T16:52:39.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:39.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:39.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59cc0175]
2026-01-08T16:52:39.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:39.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:39.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:39.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:39.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:41.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=100&status%5B%5D=PAID
2026-01-08T16:52:41.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=100&status%5B%5D=PAID
2026-01-08T16:52:41.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:41.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=100&status%5B%5D=PAID
2026-01-08T16:52:41.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=100&status%5B%5D=PAID", parameters={masked}
2026-01-08T16:52:41.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:41.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:41.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73263cea] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:41.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588306379 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:41.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:41.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:41.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:41.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73263cea]
2026-01-08T16:52:41.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:41.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32051767] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:41.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810641649 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:41.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:41.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:41.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:41.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32051767]
2026-01-08T16:52:41.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:41.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b831ad9] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:41.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@287808225 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:41.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:41.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), PAID(String), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:41.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-08T16:52:41.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b831ad9]
2026-01-08T16:52:41.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:41.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db11572] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:41.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121768911 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:41.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:41.463+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:41.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:41.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db11572]
2026-01-08T16:52:41.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:41.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a19cba0] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:41.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@535190292 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:41.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:41.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-08T16:52:41.471+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 25
2026-01-08T16:52:41.472+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a19cba0]
2026-01-08T16:52:41.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:41.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59107665] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:41.478+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1843454508 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:41.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:41.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), PAID(String), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:41.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 17
2026-01-08T16:52:41.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59107665]
2026-01-08T16:52:41.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:41.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74dc0f97] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:41.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774241335 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:41.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:41.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:41.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:41.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74dc0f97]
2026-01-08T16:52:41.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:41.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc77067] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:41.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166946047 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:41.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:41.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-08T16:52:41.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 25
2026-01-08T16:52:41.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dc77067]
2026-01-08T16:52:41.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:41.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@386a6a8b] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:41.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503865769 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:41.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:41.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:41.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:41.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@386a6a8b]
2026-01-08T16:52:41.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:41.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:41.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:42.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:42.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:42.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:52:42.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/32
2026-01-08T16:52:42.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/32
2026-01-08T16:52:42.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T16:52:42.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:42.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:42.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:42.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:52:42.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/32
2026-01-08T16:52:42.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T16:52:42.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:42.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:42.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:52:42.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/32
2026-01-08T16:52:42.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/32
2026-01-08T16:52:42.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:42.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-08T16:52:42.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:42.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:52:42.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/32
2026-01-08T16:52:42.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/32
2026-01-08T16:52:42.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:42.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T16:52:42.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:42.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:52:42.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/32
2026-01-08T16:52:42.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/32", parameters={}
2026-01-08T16:52:42.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:42.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T16:52:42.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:42.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298690c0] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:42.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:52:42.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/32", parameters={}
2026-01-08T16:52:42.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:52:42.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:42.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e029d04] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:42.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T16:52:42.983+09:00  INFO 23448 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-08T16:52:42.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:42.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3014a32e] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:42.967+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-08T16:52:42.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:42.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5bea2e] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:42.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T16:52:42.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567f816] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f759e57] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@338823761 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:43.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:43.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1627989460 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:43.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1568304022 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:43.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148440775 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:43.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:43.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:43.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:52:43.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T16:52:43.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T16:52:43.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:43.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:43.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975095197 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:43.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@488711787 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:43.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:52:43.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:43.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T16:52:43.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:43.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:43.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:43.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-08T16:52:43.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5bea2e]
2026-01-08T16:52:43.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:43.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298690c0]
2026-01-08T16:52:43.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d76b6d5] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e029d04]
2026-01-08T16:52:43.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-08T16:52:43.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1509989852 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:43.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:43.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:43.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:43.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:43.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:43.141+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:43.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-08T16:52:43.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3014a32e]
2026-01-08T16:52:43.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:43.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:52:43.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T16:52:43.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:43.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d76b6d5]
2026-01-08T16:52:43.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567f816]
2026-01-08T16:52:43.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f759e57]
2026-01-08T16:52:43.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4667c0bd] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-08T16:52:43.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:43.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@712080431 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:43.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:43.247+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:43.247+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9493f] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:52:43.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:43.344+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1503885259 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:43.345+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:43.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T16:52:43.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:43.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:52:43.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T16:52:43.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4667c0bd]
2026-01-08T16:52:43.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9493f]
2026-01-08T16:52:43.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab42b3] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1706105747 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:43.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f72cae] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:52:43.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@405538654 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:43.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:43.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T16:52:43.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:43.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-08T16:52:43.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-08T16:52:43.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f72cae]
2026-01-08T16:52:43.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dab42b3]
2026-01-08T16:52:43.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da2ed4f] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d5db90] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856467082 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:43.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1401758215 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:43.410+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:52:43.412+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T16:52:43.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:43.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 32(Long), 1(Long)
2026-01-08T16:52:43.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:52:43.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-08T16:52:43.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da2ed4f]
2026-01-08T16:52:43.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d5db90]
2026-01-08T16:52:43.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:43.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42bbba5d] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6249af] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:43.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026504144 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:43.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658196104 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:43.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:43.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:43.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:43.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:43.463+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:43.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:43.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6249af]
2026-01-08T16:52:43.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42bbba5d]
2026-01-08T16:52:43.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:43.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:43.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=32, drafterId=2, r (truncated)...]
2026-01-08T16:52:43.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=32, drafterId=2, r (truncated)...]
2026-01-08T16:52:43.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:43.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:49.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:49.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:49.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:52:49.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:49.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:52:49.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T16:52:49.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T16:52:49.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:49.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T16:52:49.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:49.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T16:52:49.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T16:52:49.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:49.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:49.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:52:49.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:49.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:52:49.991+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T16:52:49.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:49.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:49.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:49.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:50.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:52:50.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:50.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:50.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:50.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:52:50.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:50.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:52:50.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T16:52:50.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:50.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:50.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:52:50.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:50.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:52:50.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T16:52:50.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:50.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:50.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:50.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:50.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:52:50.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:50.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3575e619] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45767735] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13174083] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e8eb4c] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac4fedf] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c505b2] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@226222428 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:50.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1461838192 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:50.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@119093751 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1511285471 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:50.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.110+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@305327041 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:50.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@553782858 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:50.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.115+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:50.116+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.116+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.122+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T16:52:50.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:50.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:50.147+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:50.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45767735]
2026-01-08T16:52:50.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:50.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T16:52:50.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:50.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13174083]
2026-01-08T16:52:50.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e8eb4c]
2026-01-08T16:52:50.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c505b2]
2026-01-08T16:52:50.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac4fedf]
2026-01-08T16:52:50.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3575e619]
2026-01-08T16:52:50.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.159+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:50.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f78c150] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e610f1e] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e31a09] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59173819] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bbf209] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585069425 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@672819528 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:50.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@220057031 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:50.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:50.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1024961132 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:50.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@231008744 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:50.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:50.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:50.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:50.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:50.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f78c150]
2026-01-08T16:52:50.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e610f1e]
2026-01-08T16:52:50.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e31a09]
2026-01-08T16:52:50.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ebb9d] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:50.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1896283108 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2606105] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e0d27c3] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.231+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803244120 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:50.231+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2027083491 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:50.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59173819]
2026-01-08T16:52:50.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@848242b] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761546955 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:50.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:50.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T16:52:50.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T16:52:50.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:50.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T16:52:50.247+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T16:52:50.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T16:52:50.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:50.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:50.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bbf209]
2026-01-08T16:52:50.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:50.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:50.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:50.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:50.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ebb9d]
2026-01-08T16:52:50.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:50.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T16:52:50.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:50.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1762d4ff] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@848242b]
2026-01-08T16:52:50.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790239448 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:50.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50cb17fc] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@426444978 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:50.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T16:52:50.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T16:52:50.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T16:52:50.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T16:52:50.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T16:52:50.294+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.294+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9982f2] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1156559502 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T16:52:50.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T16:52:50.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:50.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T16:52:50.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T16:52:50.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:50.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e0d27c3]
2026-01-08T16:52:50.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T16:52:50.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50cb17fc]
2026-01-08T16:52:50.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2606105]
2026-01-08T16:52:50.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@321a955a] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T16:52:50.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711185893 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:50.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.344+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T16:52:50.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@678a2a96] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T16:52:50.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1762d4ff]
2026-01-08T16:52:50.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33673696] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1726154539 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:50.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9982f2]
2026-01-08T16:52:50.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@941602432 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:50.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:50.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:50.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c914aec] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:50.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2119b349] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:50.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232108717 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@905980810 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:50.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:50.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:50.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@321a955a]
2026-01-08T16:52:50.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:50.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T16:52:50.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.415+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454634e1] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@678a2a96]
2026-01-08T16:52:50.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33673696]
2026-01-08T16:52:50.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588302678 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:50.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d6a486] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:50.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1398898368 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:50.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T16:52:50.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc0cd6e] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:50.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2119b349]
2026-01-08T16:52:50.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c914aec]
2026-01-08T16:52:50.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1998161862 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:50.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:50.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.478+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T16:52:50.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334fd40] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570da98d] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T16:52:50.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868273044 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:50.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1372409770 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T16:52:50.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:50.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:50.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T16:52:50.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T16:52:50.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:50.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T16:52:50.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:50.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424dec80] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454634e1]
2026-01-08T16:52:50.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@455579026 wrapping com.mysql.cj.jdbc.ConnectionImpl@722e25d8] will not be managed by Spring
2026-01-08T16:52:50.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1094dbc1] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T16:52:50.510+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1677788174 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:50.510+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:50.513+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.513+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:50.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T16:52:50.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:50.527+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:50.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc0cd6e]
2026-01-08T16:52:50.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570da98d]
2026-01-08T16:52:50.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334fd40]
2026-01-08T16:52:50.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d6a486]
2026-01-08T16:52:50.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4349722a] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58247c6] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362480d9] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@207558225 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739807230 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:50.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59ab06a6] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2127712677 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:50.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T16:52:50.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@336882561 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:50.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:50.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424dec80]
2026-01-08T16:52:50.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:50.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.571+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:50.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T16:52:50.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362480d9]
2026-01-08T16:52:50.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1094dbc1]
2026-01-08T16:52:50.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.582+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4349722a]
2026-01-08T16:52:50.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2899938e] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:50.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@709423b3] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@975830028 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1181263027 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:50.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T16:52:50.596+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T16:52:50.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:50.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.614+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:50.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:50.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T16:52:50.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59ab06a6]
2026-01-08T16:52:50.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T16:52:50.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:50.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58247c6]
2026-01-08T16:52:50.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:50.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:50.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T16:52:50.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b178db8] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:50.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T16:52:50.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1555844971 wrapping com.mysql.cj.jdbc.ConnectionImpl@2515c747] will not be managed by Spring
2026-01-08T16:52:50.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:50.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@709423b3]
2026-01-08T16:52:50.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab6fcc2] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1265556892 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:50.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:50.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:50.660+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:50.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T16:52:50.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:50.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:50.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2899938e]
2026-01-08T16:52:50.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T16:52:50.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c35c6ef] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d96085f] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:50.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab6fcc2]
2026-01-08T16:52:50.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T16:52:50.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953432836 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@904563942 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:50.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18ce33da] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc898a7] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b178db8]
2026-01-08T16:52:50.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T16:52:50.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:50.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774272207 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:50.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1622490416 wrapping com.mysql.cj.jdbc.ConnectionImpl@17d9ba3e] will not be managed by Spring
2026-01-08T16:52:50.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T16:52:50.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T16:52:50.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T16:52:50.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T16:52:50.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:50.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.809+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d96085f]
2026-01-08T16:52:50.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T16:52:50.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T16:52:50.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ccf3827] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc898a7]
2026-01-08T16:52:50.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18ce33da]
2026-01-08T16:52:50.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c35c6ef]
2026-01-08T16:52:50.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1637220625 wrapping com.mysql.cj.jdbc.ConnectionImpl@3ffa7e4a] will not be managed by Spring
2026-01-08T16:52:50.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:50.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb45cca] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d6ac1d] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898491493 wrapping com.mysql.cj.jdbc.ConnectionImpl@645859cf] will not be managed by Spring
2026-01-08T16:52:50.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973813430 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ccf3827]
2026-01-08T16:52:50.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d6ac1d]
2026-01-08T16:52:50.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb45cca]
2026-01-08T16:52:50.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:50.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6219b90c] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T16:52:50.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T16:52:50.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1352488726 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T16:52:50.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T16:52:50.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T16:52:50.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6219b90c]
2026-01-08T16:52:50.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T16:52:50.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6174c640] was not registered for synchronization because synchronization is not active
2026-01-08T16:52:50.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1317720763 wrapping com.mysql.cj.jdbc.ConnectionImpl@60c38f27] will not be managed by Spring
2026-01-08T16:52:50.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T16:52:50.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T16:52:50.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T16:52:50.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6174c640]
2026-01-08T16:52:50.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T16:52:50.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T16:52:50.956+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:23.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:27:23.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:27:23.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:27:23.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:27:23.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:27:23.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T17:27:23.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:27:23.196+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T17:27:23.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:27:23.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:27:23.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:27:23.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:27:23.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:27:23.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T17:27:23.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:27:23.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:27:23.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:27:23.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:27:23.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:27:23.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:27:23.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:27:23.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:27:23.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T17:27:23.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:27:23.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T17:27:23.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:27:23.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:27:23.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:27:23.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:27:23.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:27:23.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:27:23.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:27:23.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T17:27:23.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:27:23.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:27:23.294+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:27:23.294+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:27:23.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:27:23.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T17:27:23.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:27:23.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:27:23.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:27:23.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:27:23.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T17:27:23.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e60e76] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302f491] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296eef10] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4951558e] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:27:23.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f392e7] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@19130613 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:23.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@345357011 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:23.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f764666] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:23.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:27:23.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:23.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T17:27:23.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835631446 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:27:23.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2008484710 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:27:23.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:27:23.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:27:23.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T17:27:23.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T17:27:23.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@405456451 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:23.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:27:23.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:23.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:27:23.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e60e76]
2026-01-08T17:27:23.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302f491]
2026-01-08T17:27:23.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T17:27:23.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1261331932 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:23.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:23.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:23.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:27:23.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f0cc469] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1710168868 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:23.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:23.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:23.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:23.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:23.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:27:23.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:27:23.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:27:23.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:23.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T17:27:23.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:23.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f0cc469]
2026-01-08T17:27:23.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:27:23.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f764666]
2026-01-08T17:27:23.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4951558e]
2026-01-08T17:27:23.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:27:23.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6789eeb0] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d7df574] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.940+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e3b520d] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.940+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@517947812 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:23.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10cc5b0d] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085418992 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:23.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282728495 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:27:23.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:27:23.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:23.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:23.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:27:23.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:23.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:23.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T17:27:23.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T17:27:23.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296eef10]
2026-01-08T17:27:23.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f392e7]
2026-01-08T17:27:23.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcfc55] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:23.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@424207379 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:27:23.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:23.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:23.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:23.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@173115837 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:24.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:27:24.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:27:24.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13dcfdfb] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:24.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d7df574]
2026-01-08T17:27:24.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e3b520d]
2026-01-08T17:27:24.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:24.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6789eeb0]
2026-01-08T17:27:24.410+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:24.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512a9061] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:24.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046691482 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:24.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T17:27:24.408+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1530046881 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:27:24.408+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:24.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:24.410+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:24.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:24.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:24.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0cd9cc] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:24.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T17:27:24.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485331372 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:24.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:24.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:24.444+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:24.444+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:27:24.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:27:24.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:24.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcfc55]
2026-01-08T17:27:24.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:24.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1738dbef] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:24.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1961206537 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:24.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:27:24.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T17:27:24.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:24.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:24.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13dcfdfb]
2026-01-08T17:27:24.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:27:24.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10cc5b0d]
2026-01-08T17:27:24.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512a9061]
2026-01-08T17:27:24.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-08T17:27:24.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:24.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T17:27:24.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:24.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T17:27:24.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0cd9cc]
2026-01-08T17:27:24.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:24.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249a3c0b] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:24.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211384813 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:24.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T17:27:24.596+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:24.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:24.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T17:27:24.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:27:24.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:27:24.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:27:25.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:24.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T17:27:25.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce667f6] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T17:27:25.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:27:25.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:27:25.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1738dbef]
2026-01-08T17:27:25.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:27:25.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T17:27:25.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:27:25.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813249784 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:25.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:27:25.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:27:25.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25274ea3] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:27:25.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dbd06b] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:27:25.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:27:25.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T17:27:25.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1955663435 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:25.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:27:25.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:27:25.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249a3c0b]
2026-01-08T17:27:25.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:25.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d416eb3] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:27:25.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:25.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:25.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1222277948 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:25.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T17:27:25.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:27:25.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b515a4c] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:25.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T17:27:25.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:27:25.307+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T17:27:25.307+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@129717034 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:27:25.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:25.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1691862939 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:27:25.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:27:25.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T17:27:25.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:27:25.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce667f6]
2026-01-08T17:27:25.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671cfe1b] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@212991394 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:25.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:27:25.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T17:27:25.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T17:27:25.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25274ea3]
2026-01-08T17:27:25.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:27:25.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:27:25.523+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d416eb3]
2026-01-08T17:27:25.524+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-08T17:27:25.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:25.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:27:25.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:27:25.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dd1b00] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T17:27:25.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:25.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b936f89] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1591767664 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:25.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:25.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:25.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@507498590 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:25.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:25.589+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:25.557+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:27:25.589+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b515a4c]
2026-01-08T17:27:25.590+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:25.590+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:27:25.592+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:25.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:27:25.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:27:25.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:27:25.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:27:25.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:27:25.573+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:27:25.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.609+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2996f686] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.609+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@124821620 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:27:25.610+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:27:25.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T17:27:25.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:27:25.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:27:25.614+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:27:25.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:27:25.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:27:25.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-08T17:27:25.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:25.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:25.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671cfe1b]
2026-01-08T17:27:25.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c4f64c] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dbd06b]
2026-01-08T17:27:25.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b936f89]
2026-01-08T17:27:25.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dd1b00]
2026-01-08T17:27:25.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:25.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1049224833 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:25.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:25.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T17:27:25.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a0a1e5c] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:27:25.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T17:27:25.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65efaec] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:25.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@112272009 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:25.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:25.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:25.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248255264 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:25.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T17:27:25.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:25.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T17:27:25.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-08T17:27:25.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-08T17:27:25.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-08T17:27:25.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:27:25.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2579efe6] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361476222 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:27:25.809+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:25.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:25.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:25.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:25.791+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:27:25.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:27:25.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:27:25.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:27:25.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:27:25.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.821+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79fb3ef6] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-08T17:27:25.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2996f686]
2026-01-08T17:27:25.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:25.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46fc059c] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:25.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@24380364 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:27:25.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1489037571 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:27:25.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:27:25.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:25.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T17:27:25.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:25.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:25.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:25.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T17:27:25.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:26.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2579efe6]
2026-01-08T17:27:26.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:27:26.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a0a1e5c]
2026-01-08T17:27:26.414+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65efaec]
2026-01-08T17:27:26.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c4f64c]
2026-01-08T17:27:26.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:26.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79fb3ef6]
2026-01-08T17:27:26.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:26.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:26.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:26.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479706ea] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:26.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625411a9] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:26.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@addcd3a] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:26.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:26.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c708003] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:26.589+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:26.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097334466 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:26.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@146326746 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:27:26.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@272620227 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:26.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:27:26.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@495488763 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:26.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46fc059c]
2026-01-08T17:27:26.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:26.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:26.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:27:26.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:26.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:27:26.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:26.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:26.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:26.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:27:26.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:27:26.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48b336ed] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:26.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:27:26.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:26.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:26.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:27:27.431+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@addcd3a]
2026-01-08T17:27:27.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@823291560 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:27:27.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:27:27.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:27:27.411+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625411a9]
2026-01-08T17:27:27.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479706ea]
2026-01-08T17:27:27.431+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.432+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:27:27.432+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c708003]
2026-01-08T17:27:27.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34051a6b] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.456+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1373b1ca] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:27:27.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1365783380 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:27:27.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:27.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6edeeafe] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-08T17:27:27.456+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1545462896 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:27.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:27:27.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T17:27:27.471+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:27:27.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@168713730 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:27.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:27.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:27:27.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:27.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:27.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:27.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:27:27.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:27.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:27:27.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:27:27.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-08T17:27:27.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:27.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:27:27.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T17:27:27.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:27.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:27:27.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48b336ed]
2026-01-08T17:27:27.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34051a6b]
2026-01-08T17:27:27.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:27:27.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1373b1ca]
2026-01-08T17:27:27.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6edeeafe]
2026-01-08T17:27:27.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:27:27.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362bfd40] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.664+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:27:27.664+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.664+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:27.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:27:27.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:27:27.692+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.692+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@592ad49d] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1887199261 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:27:27.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50cfb4a] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8512c1b] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:27:27.693+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@734853254 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:27:27.756+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:27.693+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:27.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@424050626 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:27.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc4bdf9] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102900026 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:27.756+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:27:27.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:27.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T17:27:27.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:27:27.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:27:27.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:27:27.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:27:27.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:27:27.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:27:27.795+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@218769574 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:27:27.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:27:27.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:27.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T17:27:27.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:27:27.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:27:27.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T17:27:27.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362bfd40]
2026-01-08T17:27:27.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:27.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@592ad49d]
2026-01-08T17:27:27.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:27:27.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-08T17:27:27.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2a3126] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1118538274 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:27:27.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:27.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:27.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:27.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ff6b0d] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-08T17:27:27.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:27:27.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:27:27.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T17:27:27.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc4bdf9]
2026-01-08T17:27:27.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@491cd84e] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:27.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1817974992 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:27:27.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:27.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8512c1b]
2026-01-08T17:27:27.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50cfb4a]
2026-01-08T17:27:27.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:27:27.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:27.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:27.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:27.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@145845013 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:27.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:28.008+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:27:28.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751d0c4f] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:28.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-08T17:27:28.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:27:28.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2a3126]
2026-01-08T17:27:28.505+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:28.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T17:27:28.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:28.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:27:28.407+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388591373 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:28.478+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:28.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-08T17:27:28.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:28.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@491cd84e]
2026-01-08T17:27:28.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:27:28.664+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:27:28.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-08T17:27:28.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:28.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:29.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:27:29.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ff6b0d]
2026-01-08T17:27:29.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T17:27:29.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372d7ea8] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:29.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:29.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:29.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fa942d9] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:29.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235179070 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:27:29.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:29.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2002119129 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:27:29.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:27:29.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751d0c4f]
2026-01-08T17:27:29.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:29.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:27:29.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:29.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-08T17:27:29.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eb417da] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:29.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1406539063 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:29.294+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:29.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:29.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fa942d9]
2026-01-08T17:27:29.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:29.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:29.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-08T17:27:29.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:29.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:27:29.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372d7ea8]
2026-01-08T17:27:29.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:29.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:29.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eb417da]
2026-01-08T17:27:29.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:27:29.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:29.377+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f52b36b] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:29.377+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:27:29.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28730268 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:29.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:27:29.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:27:29.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:27:29.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f52b36b]
2026-01-08T17:27:29.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:27:29.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376e4d43] was not registered for synchronization because synchronization is not active
2026-01-08T17:27:29.591+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1306356014 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:27:29.591+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:27:29.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-08T17:27:29.680+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:27:29.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376e4d43]
2026-01-08T17:27:29.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:27:29.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:27:29.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:24.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-08T17:31:24.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-08T17:31:25.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/logout
2026-01-08T17:31:25.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-08T17:31:25.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-08T17:31:25.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-08T17:31:25.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI0IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-08T17:31:25.103+09:00  INFO 23448 --- [http-nio-8080-exec-4] SECURITY                                 : LOGOUT userId=4
2026-01-08T17:31:25.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:25.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-08T17:31:25.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:29.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:31:29.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:31:29.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:31:29.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:31:29.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:31:29.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:31:29.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-08T17:31:29.932+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-08T17:31:29.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:29.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d1c473] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:29.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@732041466 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:29.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:31:29.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-08T17:31:29.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T17:31:29.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d1c473]
2026-01-08T17:31:30.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:30.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ca34ed] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:30.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@825242863 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:30.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:30.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:30.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:30.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ca34ed]
2026-01-08T17:31:30.053+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 1
2026-01-08T17:31:30.053+09:00  INFO 23448 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-08T17:31:30.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:30.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-08T17:31:30.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:30.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T17:31:30.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T17:31:30.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-08T17:31:30.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T17:31:30.557+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T17:31:30.558+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T17:31:30.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:30.572+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8a9722] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:30.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@723946299 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:30.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T17:31:30.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-08T17:31:30.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-08T17:31:30.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8a9722]
2026-01-08T17:31:30.674+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:30.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T17:31:30.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:30.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:30.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:30.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:31:30.775+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:30.775+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:30.775+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:31:30.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:31:30.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:31:30.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:31:30.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:31.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:31.022+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:31:31.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:31:31.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:31:31.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:31.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:31.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:31:31.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:31:31.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:31:31.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:31:31.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:31.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:31.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:31.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:31.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:31.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:31.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:31:31.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:31.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:31.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:31.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:31.141+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:31.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:31:31.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:31.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:31.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:31.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:31.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:31.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:31.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbfec5d] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:31.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:31.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:31.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:31.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:31.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:31:31.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:31.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:31.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:31.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:31.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b1c1d] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:31.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:31.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:31:31.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:31.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:31.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1521742687 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:31.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@400d4014] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:31.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:31:31.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:31.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773905685 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:31.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19adcf10] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:31.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:31.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:31.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406f2be5] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:31.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:31.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:31.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:31.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5a46cf] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:31.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:31.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@385410994 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:31.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1096789390 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:31.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@986354969 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:31.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:31.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:31:31.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:31.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:31.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:31.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:31.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbfec5d]
2026-01-08T17:31:31.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1321023391 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:31.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:31.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:31.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:31.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:31.534+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b1c1d]
2026-01-08T17:31:31.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:31.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@400d4014]
2026-01-08T17:31:31.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:31:31.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:31.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:31.623+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:31.690+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:31.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:31.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:31.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406f2be5]
2026-01-08T17:31:31.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19adcf10]
2026-01-08T17:31:31.690+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b49c7a0] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:31.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:31:31.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:31.756+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:31.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:31.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:31:31.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:31.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@321482153 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:31.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:31:31.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5a46cf]
2026-01-08T17:31:31.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:31.788+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:31.788+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:31.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:31.789+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:31:31.805+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:31.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:31.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:31:31.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:31:31.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:31:31.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:31.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:31:31.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@706e927] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:31.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:31:31.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:31:31.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:31:32.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:31:32.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134344884 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:32.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:32.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:31:32.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:32.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:31:32.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:31:32.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:31:32.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:31:32.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:32.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:31:32.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b49c7a0]
2026-01-08T17:31:32.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:32.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:32.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:31:32.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1490dd32] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:31:32.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:32.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:31:32.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:32.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:32.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:32.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:32.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72edc6] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d837ecf] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:32.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1777785977 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:32.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:32.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1190982885 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:32.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c2b715] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@706e927]
2026-01-08T17:31:32.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:32.258+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:32.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415076807 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:32.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:32.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:31:32.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1801708707 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:32.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:32.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:32.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:32.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:32.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:32.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:32.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:31:32.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:31:32.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:32.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:32.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:31:32.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:32.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d88f12d] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.311+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:32.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:32.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:32.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:32.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1490dd32]
2026-01-08T17:31:32.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72edc6]
2026-01-08T17:31:32.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:32.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:32.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:32.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63bebb21] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:31:32.327+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.328+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1458369493 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:32.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf3e98d] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:32.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:32.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@207541203 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:32.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166845567 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:32.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:31:32.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:32.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:32.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:32.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:31:32.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:32.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:32.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:31:32.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:31:32.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:31:32.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:32.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:31:32.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:31:32.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:32.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bc29f9] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63bebb21]
2026-01-08T17:31:32.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d837ecf]
2026-01-08T17:31:32.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:31:32.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf3e98d]
2026-01-08T17:31:32.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@740250735 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:32.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:32.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:32.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:32.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:32.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2808e6] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d88f12d]
2026-01-08T17:31:32.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:31:32.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:32.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:32.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:32.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:32.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775879057 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:32.414+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:32.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:31:32.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4971cedc] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:32.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:31:32.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:32.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:31:32.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:31:32.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:31:32.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@391659699 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:32.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bc29f9]
2026-01-08T17:31:32.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:31:32.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:31:32.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c2b715]
2026-01-08T17:31:32.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:32.490+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.490+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:31:32.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:31:32.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:31:32.490+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:31:32.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:32.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:32.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145d2363] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.502+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:32.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:32.502+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:31:32.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1624908784 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:32.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:31:32.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@696d9203] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:32.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:32.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:32.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@829550242 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:32.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:32.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:32.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:32.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:32.573+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:32.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:31:32.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2808e6]
2026-01-08T17:31:32.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4971cedc]
2026-01-08T17:31:32.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:32.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:31:32.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1975c227] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.639+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:32.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:32.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:32.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436921382 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:32.687+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:31:32.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:31:32.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d30f02] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:32.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145d2363]
2026-01-08T17:31:32.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:32.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503532774 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:32.703+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:31:32.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:32.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:32.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:32.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@696d9203]
2026-01-08T17:31:32.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:31:32.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c88386] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:31:32.791+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:32.858+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:32.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1593047719 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:32.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:31:32.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:31:32.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3795023] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:31:32.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:32.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:31:32.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@864472762 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:32.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:32.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:32.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:31:32.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:31:32.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:32.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:32.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:31:32.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:31:32.974+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:31:32.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d30f02]
2026-01-08T17:31:32.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:32.974+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:31:32.991+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:31:32.974+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253c4f62] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:32.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1975c227]
2026-01-08T17:31:32.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:32.991+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:31:32.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:33.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:31:33.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364d3233] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:31:33.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:33.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:33.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:33.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266309863 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:33.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3795023]
2026-01-08T17:31:33.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c88386]
2026-01-08T17:31:33.022+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:31:33.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:33.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aa88385] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c79b88d] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:31:33.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1845337573 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:33.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:33.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637418445 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:33.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c294e9b] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1003144247 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:33.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:31:33.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:31:33.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@85522293 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:33.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:31:33.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:31:33.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:33.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:33.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:33.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:33.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:33.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:33.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:31:33.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364d3233]
2026-01-08T17:31:33.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66aa3021] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aa88385]
2026-01-08T17:31:33.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:33.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253c4f62]
2026-01-08T17:31:33.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c79b88d]
2026-01-08T17:31:33.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c66c72c] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912673016 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:33.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c294e9b]
2026-01-08T17:31:33.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:33.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667610169 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:33.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:31:33.141+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a47893a] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.141+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:33.141+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:31:33.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c04183] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:33.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:31:33.159+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1425907036 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:33.159+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:33.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:33.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946612710 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:33.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:33.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:33.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:33.196+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:31:33.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:33.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:31:33.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:31:33.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:33.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:31:33.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:31:33.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c66c72c]
2026-01-08T17:31:33.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:31:33.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:31:33.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@674a923c] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:33.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1830778462 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:33.258+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:33.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:31:33.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:33.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:31:33.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a47893a]
2026-01-08T17:31:33.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c04183]
2026-01-08T17:31:33.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b2aa33c] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66aa3021]
2026-01-08T17:31:33.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975891949 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:33.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:33.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52ef7a23] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46ed5849] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:31:33.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:31:33.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@881276701 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:33.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829426510 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:33.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:31:33.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:33.290+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:33.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:33.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:33.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:33.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@674a923c]
2026-01-08T17:31:33.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4179d14a] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:33.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1913741355 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:33.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46ed5849]
2026-01-08T17:31:33.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:33.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:31:33.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:33.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:33.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b2aa33c]
2026-01-08T17:31:33.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52ef7a23]
2026-01-08T17:31:33.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3457fa87] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:33.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416596820 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:33.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:31:33.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43cced78] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:33.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1784396096 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:33.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:33.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4179d14a]
2026-01-08T17:31:33.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69af508f] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716727665 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:33.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3457fa87]
2026-01-08T17:31:33.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@101c43be] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43cced78]
2026-01-08T17:31:33.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@454295800 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:33.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:33.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:33.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d216b3] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223451612 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:33.391+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:33.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69af508f]
2026-01-08T17:31:33.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:33.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:33.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:31:33.406+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:33.410+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:33.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@101c43be]
2026-01-08T17:31:33.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:33.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78db3549] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d216b3]
2026-01-08T17:31:33.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170432607 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:33.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17157414] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.470+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@785096651 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:33.471+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:33.473+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:33.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78db3549]
2026-01-08T17:31:33.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:33.508+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:33.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:31:33.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17157414]
2026-01-08T17:31:33.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:33.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2821d20a] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@338208462 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:33.573+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.582+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:33.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:33.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:33.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:33.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:33.792+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2821d20a]
2026-01-08T17:31:33.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:33.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:33.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62db2ef9] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:33.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1154224426 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:33.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:33.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:33.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:33.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f84111b] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.822+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:33.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:33.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:33.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:33.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@188622583 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:33.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:33.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:33.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:33.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:33.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:33.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62db2ef9]
2026-01-08T17:31:33.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:33.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:33.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:33.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:33.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@942e032] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:33.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:33.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:33.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:33.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@844475141 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:33.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:33.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:33.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aed0f29] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:33.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df1c287] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:33.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813781598 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:33.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290b5223] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:33.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f84111b]
2026-01-08T17:31:33.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:33.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:33.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:33.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:33.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:33.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1800274457 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:33.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1172626485 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:33.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:33.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:33.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:33.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:33.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@942e032]
2026-01-08T17:31:33.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:33.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:33.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:33.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:31:33.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aed0f29]
2026-01-08T17:31:33.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:33.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:34.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:34.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110eb770] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df1c287]
2026-01-08T17:31:34.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290b5223]
2026-01-08T17:31:34.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@859338303 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:34.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:34.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:34.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7925a94a] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:34.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1494469799 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:34.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:34.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:34.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:34.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:34.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110eb770]
2026-01-08T17:31:34.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7925a94a]
2026-01-08T17:31:34.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:34.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:34.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:34.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:34.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:31:34.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T17:31:34.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:31:34.571+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-08T17:31:34.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T17:31:34.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:34.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:34.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:34.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:31:34.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T17:31:34.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:31:34.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:31:34.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-08T17:31:34.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:34.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies/pending
2026-01-08T17:31:34.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:34.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T17:31:34.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:31:34.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:31:34.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:34.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-08T17:31:34.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:34.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T17:31:34.674+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:31:34.691+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:31:34.692+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:34.692+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-08T17:31:34.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:34.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T17:31:34.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:31:34.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:31:34.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:34.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-08T17:31:34.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T17:31:34.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:31:34.739+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.739+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cfe12cf] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.741+09:00  INFO 23448 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T17:31:34.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587ab7c4] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cda85cb] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c88d226] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c498e3d] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@539316c8] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1280454328 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:34.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1073191783 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:34.772+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:31:34.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:34.775+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:34.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075386559 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:34.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1577134668 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:34.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1898933273 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:34.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@936005468 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:34.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:34.782+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:34.782+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:34.782+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:34.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:34.788+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:34.791+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:31:34.791+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:34.791+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:34.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:34.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 1(Long), PENDING(String)
2026-01-08T17:31:34.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587ab7c4]
2026-01-08T17:31:34.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cfe12cf]
2026-01-08T17:31:34.805+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:31:34.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:34.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:34.818+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@539316c8]
2026-01-08T17:31:34.822+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T17:31:34.823+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c23ac89] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603831254 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:34.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:34.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T17:31:34.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-08T17:31:34.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:34.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:34.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:34.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T17:31:34.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c88d226]
2026-01-08T17:31:34.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c498e3d]
2026-01-08T17:31:34.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cda85cb]
2026-01-08T17:31:34.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T17:31:34.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.852+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.852+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522e1db8] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T17:31:34.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:34.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:31:34.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867877431 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:34.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:34.855+09:00  INFO 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T17:31:34.857+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:34.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:34.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e36e9d] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c23ac89]
2026-01-08T17:31:34.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1703253107 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:34.885+09:00  INFO 23448 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T17:31:34.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:34.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:34.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:34.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T17:31:34.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522e1db8]
2026-01-08T17:31:34.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:34.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:34.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e36e9d]
2026-01-08T17:31:34.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:34.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:34.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443a9bd0] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:34.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2006876748 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:34.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:34.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:34.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:34.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443a9bd0]
2026-01-08T17:31:34.939+09:00  INFO 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T17:31:34.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:34.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T17:31:34.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:35.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:35.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:35.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:35.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:35.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:35.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:35.159+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:35.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:35.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:35.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:35.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:35.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:35.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:35.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:35.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:35.172+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:35.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:35.172+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:35.173+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:35.174+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:35.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:35.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:35.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34992437] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:35.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:35.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:35.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:35.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@472817860 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:35.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:35.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac9a7ea] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:35.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1370240f] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:35.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:35.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:35.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616707803 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:35.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2107881759 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:35.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:35.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:35.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:35.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:35.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e176f58] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:35.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:35.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:35.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867633143 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:35.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:35.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:35.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34992437]
2026-01-08T17:31:35.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:35.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:35.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:35.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:35.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:35.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:35.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac9a7ea]
2026-01-08T17:31:35.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1370240f]
2026-01-08T17:31:35.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:35.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:35.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:35.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e176f58]
2026-01-08T17:31:35.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:35.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19cb10ff] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:35.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:35.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:35.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@193535893 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:35.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46917c69] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:35.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:35.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@329885260 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:35.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:35.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:35.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:35.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:35.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19cb10ff]
2026-01-08T17:31:35.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:35.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:35.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:35.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:35.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46917c69]
2026-01-08T17:31:35.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:35.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:35.340+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:36.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:36.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:36.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:31:36.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:36.040+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:36.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:31:36.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:31:36.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:31:36.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:31:36.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:31:36.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:31:36.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:36.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:36.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:31:36.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:36.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:31:36.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:36.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:36.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:36.141+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:31:36.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:36.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:31:36.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:31:36.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:36.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:36.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:36.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:36.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:36.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:36.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:36.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:36.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:36.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14904ac4] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:31:36.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:31:36.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:31:36.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:31:36.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:31:36.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:31:36.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:36.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:36.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec17bc1] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31918b79] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:36.340+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1494542406 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:36.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:36.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1477c056] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:36.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:36.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:36.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:36.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4eeaf1] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e162849] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1583679832 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:36.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@977664150 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:36.407+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:36.408+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:31:36.408+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:36.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:36.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285455147 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:36.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096555767 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:36.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@796930675 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:36.411+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:36.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:36.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:31:36.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:36.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:36.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:36.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14904ac4]
2026-01-08T17:31:36.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:36.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec17bc1]
2026-01-08T17:31:36.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31918b79]
2026-01-08T17:31:36.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:36.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:36.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:36.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:36.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:36.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:31:36.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f08d76] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:36.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:36.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1277604990 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:36.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:36.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:36.444+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:31:36.444+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:31:36.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:31:36.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:31:36.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:31:36.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:31:36.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:31:36.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:36.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:31:36.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:31:36.473+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4eeaf1]
2026-01-08T17:31:36.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:36.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:31:36.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:36.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:36.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570e2487] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:36.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:36.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:36.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:36.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a104342] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1360457875 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:36.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f08d76]
2026-01-08T17:31:36.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e162849]
2026-01-08T17:31:36.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1477c056]
2026-01-08T17:31:36.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@723380759 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:36.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:36.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:36.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:36.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6483a1a4] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:31:36.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:36.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:36.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:36.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d64876] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@700246889 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:31:36.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:31:36.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:36.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:36.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@502708732 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:36.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:31:36.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:31:36.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:31:36.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:36.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:36.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:31:36.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:31:36.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:31:36.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:36.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570e2487]
2026-01-08T17:31:36.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:31:36.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:31:36.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:36.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:36.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:36.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:31:36.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:31:36.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:31:36.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:36.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fe2fda1] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:31:36.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:36.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:31:36.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:36.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:31:36.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:36.956+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a89174] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:36.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d64876]
2026-01-08T17:31:36.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@165440906 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:36.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:36.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d51473] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:36.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:36.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@80112039 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:36.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:36.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28d3e832] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:36.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:31:36.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1121030217 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:36.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:36.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813048584 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:36.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6483a1a4]
2026-01-08T17:31:36.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:36.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:31:36.990+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:36.990+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:36.990+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:36.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:36.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:31:37.006+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:37.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:37.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:37.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:31:37.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a104342]
2026-01-08T17:31:37.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a89174]
2026-01-08T17:31:37.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d51473]
2026-01-08T17:31:37.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b333286] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:37.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:37.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:37.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@829414175 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:37.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:31:37.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28d3e832]
2026-01-08T17:31:37.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fe2fda1]
2026-01-08T17:31:37.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39a77223] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:37.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:37.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.073+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1691973458 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:37.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:37.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:37.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:31:37.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:37.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:31:37.100+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:37.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:37.174+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:31:37.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:37.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b333286]
2026-01-08T17:31:37.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:37.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:37.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:31:37.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:31:37.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@98c676b] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2016214322 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:37.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:31:37.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12dc455d] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:31:37.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:37.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:31:37.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@276423298 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:37.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:31:37.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:37.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:37.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:37.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:37.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:31:37.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:31:37.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:31:37.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:37.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:37.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4600905d] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39a77223]
2026-01-08T17:31:37.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:31:37.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@591038815 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:37.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:31:37.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd25e4b] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@360eb394] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:37.239+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:37.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:31:37.240+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510001560 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:37.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1674801892 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:37.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12dc455d]
2026-01-08T17:31:37.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@98c676b]
2026-01-08T17:31:37.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:37.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:31:37.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:31:37.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:37.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:31:37.258+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@417235a2] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.258+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e094e7] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:31:37.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@829716092 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:37.271+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465375887 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:37.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:37.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:37.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:37.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:31:37.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:31:37.292+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:37.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@360eb394]
2026-01-08T17:31:37.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:31:37.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4600905d]
2026-01-08T17:31:37.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:37.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:31:37.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd25e4b]
2026-01-08T17:31:37.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:31:37.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.329+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@208ba6ac] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774210800 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:37.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:37.344+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:37.345+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:37.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e094e7]
2026-01-08T17:31:37.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:37.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@417235a2]
2026-01-08T17:31:37.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:37.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab6aab7] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1782142822 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:37.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:37.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:37.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:37.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@208ba6ac]
2026-01-08T17:31:37.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6599390e] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:37.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab6aab7]
2026-01-08T17:31:37.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@408575447 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:37.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:37.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:37.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@210a541b] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@778477983 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:37.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:37.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:37.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:37.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6599390e]
2026-01-08T17:31:37.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e12b4c] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:37.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@210a541b]
2026-01-08T17:31:37.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1067200887 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:37.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:31:37.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ee3102] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:31:37.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1698104648 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:31:37.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:37.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:37.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:31:37.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:37.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e12b4c]
2026-01-08T17:31:37.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ee3102]
2026-01-08T17:31:37.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d31fa3a] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:31:37.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@663756187 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:37.393+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:37.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:37.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:37.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d31fa3a]
2026-01-08T17:31:37.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6010dd] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@766695713 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:37.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:31:37.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:31:37.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:31:37.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6010dd]
2026-01-08T17:31:37.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fb9ae2c] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@541108222 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:37.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:31:37.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:31:37.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:31:37.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fb9ae2c]
2026-01-08T17:31:37.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:31:37.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:37.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:37.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:31:37.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:31:37.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:37.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:37.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:37.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:37.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:37.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:37.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:37.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:37.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@285a5925] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795935657 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:37.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:37.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:37.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:37.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:37.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:31:37.524+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:31:37.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac24579] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@722350545 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:37.557+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:37.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:37.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:31:37.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:31:37.582+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:31:37.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:31:37.590+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:37.592+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:37.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac24579]
2026-01-08T17:31:37.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:31:37.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:31:37.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:31:37.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@285a5925]
2026-01-08T17:31:37.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:31:37.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:37.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391f56fd] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.614+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1318605040 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:31:37.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:31:37.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28d8efb0] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1378945279 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:31:37.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:31:37.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ac2db1] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:37.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570690031 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:37.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:37.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:31:37.623+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:31:37.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:37.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:31:37.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:31:37.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28d8efb0]
2026-01-08T17:31:37.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391f56fd]
2026-01-08T17:31:37.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ac2db1]
2026-01-08T17:31:37.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:37.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:37.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:31:37.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17572557] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:37.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.639+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:37.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1583301545 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:31:37.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:31:37.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:31:37.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:31:37.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17572557]
2026-01-08T17:31:37.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:37.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:31:37.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:38.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-08T17:31:38.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-08T17:31:38.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/logout
2026-01-08T17:31:38.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-08T17:31:38.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-08T17:31:38.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-08T17:31:38.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-08T17:31:38.190+09:00  INFO 23448 --- [http-nio-8080-exec-4] SECURITY                                 : LOGOUT userId=1
2026-01-08T17:31:38.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:38.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-08T17:31:38.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:31:59.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:31:59.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:31:59.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:31:59.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:31:59.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:31:59.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:31:59.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=sungjin_g, password=fuckin1042!)]
2026-01-08T17:31:59.169+09:00  INFO 23448 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 시도 - username: sungjin_g
2026-01-08T17:31:59.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:31:59.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22aa9dbf] was not registered for synchronization because synchronization is not active
2026-01-08T17:31:59.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1657947406 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:31:59.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:31:59.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: sungjin_g(String)
2026-01-08T17:31:59.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:31:59.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22aa9dbf]
2026-01-08T17:31:59.215+09:00  WARN 23448 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 실패 - username: sungjin_g
2026-01-08T17:31:59.218+09:00  WARN 23448 --- [http-nio-8080-exec-1] SECURITY                                 : LOGIN_FAILURE username=sungjin_g
2026-01-08T17:31:59.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:31:59.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:31:59.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:32:01.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:32:01.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:32:01.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:32:01.695+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:32:01.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:32:01.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:32:01.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=sungjin_g, password=1042)]
2026-01-08T17:32:01.771+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 로그인 시도 - username: sungjin_g
2026-01-08T17:32:01.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:32:01.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a94b852] was not registered for synchronization because synchronization is not active
2026-01-08T17:32:01.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@258827085 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:32:01.890+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:32:01.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: sungjin_g(String)
2026-01-08T17:32:01.940+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:32:01.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a94b852]
2026-01-08T17:32:01.957+09:00  WARN 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 로그인 실패 - username: sungjin_g
2026-01-08T17:32:01.957+09:00  WARN 23448 --- [http-nio-8080-exec-5] SECURITY                                 : LOGIN_FAILURE username=sungjin_g
2026-01-08T17:32:01.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:32:01.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:32:01.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:32:06.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:32:06.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:32:06.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:32:06.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:32:06.040+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:32:06.040+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:32:06.042+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=sungjin_g, password=1042)]
2026-01-08T17:32:06.056+09:00  INFO 23448 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 시도 - username: sungjin_g
2026-01-08T17:32:06.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:32:06.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca9e9f9] was not registered for synchronization because synchronization is not active
2026-01-08T17:32:06.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@356568361 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:32:06.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:32:06.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: sungjin_g(String)
2026-01-08T17:32:06.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:32:06.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca9e9f9]
2026-01-08T17:32:06.105+09:00  WARN 23448 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 실패 - username: sungjin_g
2026-01-08T17:32:06.107+09:00  WARN 23448 --- [http-nio-8080-exec-6] SECURITY                                 : LOGIN_FAILURE username=sungjin_g
2026-01-08T17:32:06.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:32:06.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:32:06.113+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:32:11.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:32:11.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:32:11.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:32:11.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:32:11.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:32:11.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:32:11.744+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=sungjing, password=1042)]
2026-01-08T17:32:11.748+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: sungjing
2026-01-08T17:32:11.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:32:11.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4b4f21] was not registered for synchronization because synchronization is not active
2026-01-08T17:32:11.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2142051864 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:32:11.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:32:11.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: sungjing(String)
2026-01-08T17:32:11.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:32:11.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4b4f21]
2026-01-08T17:32:11.758+09:00  WARN 23448 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 실패 - username: sungjing
2026-01-08T17:32:11.761+09:00  WARN 23448 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_FAILURE username=sungjing
2026-01-08T17:32:11.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:32:11.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:32:11.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:32:35.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:32:35.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:32:35.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:32:35.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:32:35.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:32:36.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:32:36.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=sungjin_g, password=1042)]
2026-01-08T17:32:36.317+09:00  INFO 23448 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 시도 - username: sungjin_g
2026-01-08T17:32:36.406+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:32:36.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f663672] was not registered for synchronization because synchronization is not active
2026-01-08T17:32:36.526+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976797888 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:32:36.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:32:36.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: sungjin_g(String)
2026-01-08T17:32:36.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:32:36.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f663672]
2026-01-08T17:32:36.626+09:00  WARN 23448 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 실패 - username: sungjin_g
2026-01-08T17:32:36.631+09:00  WARN 23448 --- [http-nio-8080-exec-3] SECURITY                                 : LOGIN_FAILURE username=sungjin_g
2026-01-08T17:32:36.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:32:36.639+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:32:36.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:32:41.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:32:41.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:32:41.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:32:41.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:32:41.040+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:32:41.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:32:41.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=sungjin_g, password=1042)]
2026-01-08T17:32:41.054+09:00  INFO 23448 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: sungjin_g
2026-01-08T17:32:41.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:32:41.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a728a8f] was not registered for synchronization because synchronization is not active
2026-01-08T17:32:41.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2016008707 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:32:41.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:32:41.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: sungjin_g(String)
2026-01-08T17:32:41.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:32:41.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a728a8f]
2026-01-08T17:32:41.198+09:00  WARN 23448 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 실패 - username: sungjin_g
2026-01-08T17:32:41.200+09:00  WARN 23448 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_FAILURE username=sungjin_g
2026-01-08T17:32:41.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:32:41.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:32:41.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:32:42.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:32:42.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:32:42.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:32:42.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:32:42.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:32:42.356+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:32:42.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=sungjin_g, password=1042!)]
2026-01-08T17:32:42.357+09:00  INFO 23448 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 로그인 시도 - username: sungjin_g
2026-01-08T17:32:42.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:32:42.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c37131] was not registered for synchronization because synchronization is not active
2026-01-08T17:32:42.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2075897919 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cb72033] will not be managed by Spring
2026-01-08T17:32:42.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:32:42.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: sungjin_g(String)
2026-01-08T17:32:42.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:32:42.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c37131]
2026-01-08T17:32:42.380+09:00  WARN 23448 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 로그인 실패 - username: sungjin_g
2026-01-08T17:32:42.380+09:00  WARN 23448 --- [http-nio-8080-exec-9] SECURITY                                 : LOGIN_FAILURE username=sungjin_g
2026-01-08T17:32:42.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:32:42.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:32:42.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:32:44.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:32:44.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:32:44.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:32:44.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:32:44.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:32:44.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:32:44.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=sungjin_g, password=10422)]
2026-01-08T17:32:44.665+09:00  INFO 23448 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 시도 - username: sungjin_g
2026-01-08T17:32:44.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:32:44.677+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f6d4a7] was not registered for synchronization because synchronization is not active
2026-01-08T17:32:44.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1998246432 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:32:44.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:32:44.680+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: sungjin_g(String)
2026-01-08T17:32:44.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:32:44.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f6d4a7]
2026-01-08T17:32:44.707+09:00  WARN 23448 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 실패 - username: sungjin_g
2026-01-08T17:32:44.707+09:00  WARN 23448 --- [http-nio-8080-exec-3] SECURITY                                 : LOGIN_FAILURE username=sungjin_g
2026-01-08T17:32:44.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:32:44.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:32:44.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:05.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:33:05.124+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:33:05.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:33:05.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:33:05.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:33:05.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:33:05.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=sangmin, password=1042)]
2026-01-08T17:33:05.130+09:00  INFO 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 시도 - username: sangmin
2026-01-08T17:33:05.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:05.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a06f092] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:05.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@224841870 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:05.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:33:05.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: sangmin(String)
2026-01-08T17:33:05.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:33:05.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a06f092]
2026-01-08T17:33:05.150+09:00  WARN 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 실패 - username: sangmin
2026-01-08T17:33:05.151+09:00  WARN 23448 --- [http-nio-8080-exec-4] SECURITY                                 : LOGIN_FAILURE username=sangmin
2026-01-08T17:33:05.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:05.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:33:05.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:17.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:33:17.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:33:17.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:33:17.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:33:17.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:33:17.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:33:17.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user, password=1234)]
2026-01-08T17:33:17.846+09:00  INFO 23448 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user
2026-01-08T17:33:17.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:17.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b09db7] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:17.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40819046 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:17.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:33:17.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user(String)
2026-01-08T17:33:17.852+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 0
2026-01-08T17:33:17.852+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b09db7]
2026-01-08T17:33:17.853+09:00  WARN 23448 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 실패 - username: test_user
2026-01-08T17:33:17.853+09:00  WARN 23448 --- [http-nio-8080-exec-7] SECURITY                                 : LOGIN_FAILURE username=test_user
2026-01-08T17:33:17.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:17.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=아이디 또는 비밀번호가 틀렸습니다., data=null)]
2026-01-08T17:33:17.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:41.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:33:41.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:33:41.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:33:41.651+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:33:41.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:33:41.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:33:41.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user1, password=1234)]
2026-01-08T17:33:41.666+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user1
2026-01-08T17:33:41.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:41.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f9c3b8] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:41.677+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@276879104 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:41.678+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:33:41.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user1(String)
2026-01-08T17:33:41.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T17:33:41.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8f9c3b8]
2026-01-08T17:33:41.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:41.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15dea261] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:41.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@198670950 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:41.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:33:41.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-08T17:33:41.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T17:33:41.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15dea261]
2026-01-08T17:33:41.786+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 로그인 성공 - userId: 2, role: USER, companyId: 2
2026-01-08T17:33:41.786+09:00  INFO 23448 --- [http-nio-8080-exec-5] SECURITY                                 : LOGIN_SUCCESS userId=2 username=test_user1 role=USER
2026-01-08T17:33:41.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:41.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=2, username=test_user1, password (truncated)...]
2026-01-08T17:33:41.788+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T17:33:43.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T17:33:43.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/companies
2026-01-08T17:33:43.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T17:33:43.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T17:33:43.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T17:33:43.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ec3dcea] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1434154495 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T17:33:43.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-08T17:33:43.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-08T17:33:43.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ec3dcea]
2026-01-08T17:33:43.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-08T17:33:43.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:43.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:33:43.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:43.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:43.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:43.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:43.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:43.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:33:43.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:43.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:43.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:43.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:43.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:43.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:43.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:33:43.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:33:43.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:43.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:33:43.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:43.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:43.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:33:43.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:43.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:43.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:43.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:43.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:43.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:33:43.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:33:43.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:43.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:33:43.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:43.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:33:43.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:33:43.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:43.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:33:43.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:43.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@95fd278] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.196+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cc971b6] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c60073e] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d383195] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1142a1] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e20b007] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@219693669 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:43.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@207592568 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:43.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:43.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:43.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:43.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@477464715 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:43.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2094027844 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:43.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:33:43.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358368382 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:33:43.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@555091149 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:43.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:43.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:43.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.247+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:43.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@95fd278]
2026-01-08T17:33:43.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:43.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d383195]
2026-01-08T17:33:43.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:43.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:43.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:43.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c60073e]
2026-01-08T17:33:43.277+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:33:43.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:43.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21fc3e0e] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.287+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:43.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1466666538 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:43.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1142a1]
2026-01-08T17:33:43.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:43.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:33:43.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2213646b] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:43.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:43.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:33:43.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:33:43.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1880339448 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.311+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:43.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e20b007]
2026-01-08T17:33:43.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cc971b6]
2026-01-08T17:33:43.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:33:43.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:33:43.311+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:43.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f63bf5b] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:43.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:33:43.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:33:43.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1049613537 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:43.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:43.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:33:43.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:43.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:43.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fda1991] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:43.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21fc3e0e]
2026-01-08T17:33:43.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2213646b]
2026-01-08T17:33:43.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:33:43.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1848429616 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:43.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:33:43.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:43.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:33:43.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666912e6] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f530b1] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f63bf5b]
2026-01-08T17:33:43.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:43.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@639978603 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:43.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122069016 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf28241] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:43.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:43.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1741333043 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:43.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:43.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:33:43.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:43.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fda1991]
2026-01-08T17:33:43.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:33:43.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf28241]
2026-01-08T17:33:43.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:43.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:43.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8b3153] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f530b1]
2026-01-08T17:33:43.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666912e6]
2026-01-08T17:33:43.589+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1150569705 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.596+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6553575d] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1946cae4] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@198018046 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@924194056 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:43.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8b3153]
2026-01-08T17:33:43.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53a9646d] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@826984162 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:43.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6553575d]
2026-01-08T17:33:43.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:43.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1946cae4]
2026-01-08T17:33:43.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694ca382] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@383449161 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3203c4f1] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:43.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490551743 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:43.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:43.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:43.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:43.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53a9646d]
2026-01-08T17:33:43.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:43.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c92ce8a] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1409302905 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:43.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:43.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694ca382]
2026-01-08T17:33:43.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3203c4f1]
2026-01-08T17:33:43.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1053faab] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430d7b79] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@470752144 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862601637 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:43.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:43.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:43.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:43.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c92ce8a]
2026-01-08T17:33:43.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:43.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d52878f] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1198455857 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:43.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:43.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:43.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:43.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1053faab]
2026-01-08T17:33:43.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430d7b79]
2026-01-08T17:33:43.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:43.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566abfee] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2733d3e7] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d52878f]
2026-01-08T17:33:43.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1499693354 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@256750283 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:43.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.649+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cb604f] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.649+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2083319686 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:43.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:43.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.659+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566abfee]
2026-01-08T17:33:43.660+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2733d3e7]
2026-01-08T17:33:43.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55ed64af] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af8167a] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1459303475 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1676499497 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:43.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:43.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:43.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:43.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:43.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:43.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cb604f]
2026-01-08T17:33:43.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:43.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@461b06ee] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55ed64af]
2026-01-08T17:33:43.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1753010042 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88be9ca] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@914177128 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:43.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af8167a]
2026-01-08T17:33:43.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f1d9813] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@461b06ee]
2026-01-08T17:33:43.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1171000908 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:43.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27aaa127] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@966328138 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:43.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:43.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88be9ca]
2026-01-08T17:33:43.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:33:43.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f1d9813]
2026-01-08T17:33:43.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:43.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:33:43.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27aaa127]
2026-01-08T17:33:43.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8685ff] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@207073425 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:43.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:43.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:43.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:43.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e8685ff]
2026-01-08T17:33:43.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.772+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:33:43.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:43.852+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:43.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:43.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:43.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:43.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:43.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:43.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:43.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:43.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:43.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:43.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:43.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:43.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bda5039] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4afd5805] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:43.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@644483485 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:43.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:43.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@876635919 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:43.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:43.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:43.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:43.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:43.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:43.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4afd5805]
2026-01-08T17:33:43.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bda5039]
2026-01-08T17:33:43.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:43.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:43.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:43.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:43.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:46.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:33:46.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:33:46.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:46.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:33:46.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:33:46.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:33:46.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:46.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:33:46.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:33:46.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:46.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:33:46.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:33:46.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:46.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:33:46.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:33:46.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:46.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:33:46.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:33:46.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:46.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:33:46.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/my-approvals
2026-01-08T17:33:46.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:46.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:33:46.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:33:46.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:46.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:33:46.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:33:46.196+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:46.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:33:46.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:33:46.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:46.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:33:46.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:33:46.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:46.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:33:46.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:33:46.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:46.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:33:46.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:33:46.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8a8ca] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e639a27] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb481eb] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ae273bb] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d8fd17b] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@232f88ba] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14954325 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:46.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@112201394 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.253+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1900843258 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:46.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@828589516 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:46.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2025949863 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:46.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081372227 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:33:46.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:46.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8a8ca]
2026-01-08T17:33:46.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:33:46.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e639a27]
2026-01-08T17:33:46.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@232f88ba]
2026-01-08T17:33:46.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:33:46.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T17:33:46.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d33a6c] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb481eb]
2026-01-08T17:33:46.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ae273bb]
2026-01-08T17:33:46.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:46.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d8fd17b]
2026-01-08T17:33:46.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:46.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@654979404 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:46.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:46.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:33:46.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:33:46.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T17:33:46.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:33:46.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:46.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:33:46.414+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:33:46.430+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:46.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:33:46.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:33:46.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d33a6c]
2026-01-08T17:33:46.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:33:46.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:46.472+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:46.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:46.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:33:46.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:33:46.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/my-approvals
2026-01-08T17:33:46.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:33:46.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:33:46.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a508a5] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:33:46.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc16d42] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:33:46.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52242a63] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590890404 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:46.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:33:46.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620635148 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:46.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:46.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@900032260 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:46.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:33:46.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:46.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6225cef0] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.527+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1250832238 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3417cf8f] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@493165228 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:46.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:33:46.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:46.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:46.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a508a5]
2026-01-08T17:33:46.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52242a63]
2026-01-08T17:33:46.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc16d42]
2026-01-08T17:33:46.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:46.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:33:46.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6225cef0]
2026-01-08T17:33:46.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7df17964] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-08T17:33:46.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841996005 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:46.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3417cf8f]
2026-01-08T17:33:46.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55836439] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-08T17:33:46.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@429748791 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7df17964]
2026-01-08T17:33:46.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55836439]
2026-01-08T17:33:46.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac112a5] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dd02503] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@606933352 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:46.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1528583044 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:46.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:46.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:46.571+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:46.573+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:46.573+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:46.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dd02503]
2026-01-08T17:33:46.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac112a5]
2026-01-08T17:33:46.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a1ff74] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae5308c] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121609246 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:46.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148067151 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:46.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:46.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae5308c]
2026-01-08T17:33:46.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:46.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3ab5a8] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a1ff74]
2026-01-08T17:33:46.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327007219 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:46.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c621c09] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:46.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@828708014 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:46.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:46.589+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3ab5a8]
2026-01-08T17:33:46.592+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54582265] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@219564723 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c621c09]
2026-01-08T17:33:46.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:46.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47cbe247] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:46.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@993344739 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:46.596+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:46.596+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:46.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:46.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:46.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54582265]
2026-01-08T17:33:46.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47cbe247]
2026-01-08T17:33:46.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d88f10] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4e2189] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1359402724 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1703886269 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:46.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.609+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4e2189]
2026-01-08T17:33:46.610+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d88f10]
2026-01-08T17:33:46.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:33:46.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0aec1c] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1001014370 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:46.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:46.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:46.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0aec1c]
2026-01-08T17:33:46.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d77d4a] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@215025472 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:46.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:46.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:46.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d77d4a]
2026-01-08T17:33:46.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:33:46.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:46.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:46.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:46.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:46.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:46.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:46.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:46.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:46.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:46.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:46.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:46.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:46.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:46.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b2654e5] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378a8fa4] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:46.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027449662 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:46.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953576282 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:46.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:46.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:46.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:46.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378a8fa4]
2026-01-08T17:33:46.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:46.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b2654e5]
2026-01-08T17:33:46.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:46.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:46.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:46.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:46.989+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:50.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:50.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:33:50.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:50.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:50.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:50.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:50.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:50.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:33:50.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:33:50.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:33:50.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:50.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:50.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:50.754+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:50.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:50.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:33:50.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:33:50.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:50.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:33:50.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:50.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:50.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:33:50.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:50.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:50.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:33:50.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:50.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:33:50.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:50.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:33:50.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:50.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:50.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:33:50.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:50.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fa0f87] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:33:50.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:50.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:50.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a68d071] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4140249e] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e7e0350] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1334136816 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:50.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70697f41] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2063864277 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:33:50.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:50.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2043014814 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:50.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273dc9e3] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:33:50.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1733900587 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:50.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@107835608 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:50.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:50.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:50.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:50.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:50.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1245337745 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:50.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:50.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:33:50.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:50.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:50.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a68d071]
2026-01-08T17:33:50.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fa0f87]
2026-01-08T17:33:50.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70697f41]
2026-01-08T17:33:50.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:50.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4140249e]
2026-01-08T17:33:50.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:50.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:50.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:50.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:50.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e7e0350]
2026-01-08T17:33:50.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:50.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:33:50.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:50.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273dc9e3]
2026-01-08T17:33:50.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@828156a] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668d0e6f] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:50.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:50.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:50.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:50.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1046677834 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:50.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@965524172 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:50.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:50.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:50.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@828156a]
2026-01-08T17:33:50.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668d0e6f]
2026-01-08T17:33:50.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d9d3452] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138fc850] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1968633294 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:50.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@494879288 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:50.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:50.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:50.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:50.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:50.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:50.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:50.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138fc850]
2026-01-08T17:33:50.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d9d3452]
2026-01-08T17:33:50.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42443975] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c853d4f] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.956+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803513381 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:50.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2020520745 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:50.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42443975]
2026-01-08T17:33:50.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c853d4f]
2026-01-08T17:33:50.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4797e826] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c9e761] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620490288 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:50.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@539216338 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:50.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:50.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:50.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:50.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:50.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:50.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:50.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c9e761]
2026-01-08T17:33:50.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4797e826]
2026-01-08T17:33:50.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319a2269] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c1075f6] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1958636170 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:50.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1526868436 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:50.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:50.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:33:50.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:50.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:33:50.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:50.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:33:50.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c1075f6]
2026-01-08T17:33:50.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319a2269]
2026-01-08T17:33:50.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@468ae2f] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e3aa70] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@198759569 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:50.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711950255 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:50.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@468ae2f]
2026-01-08T17:33:50.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e3aa70]
2026-01-08T17:33:50.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0bc117] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41818b63] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1045627151 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:50.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1512708361 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:50.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:50.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:33:50.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:50.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:33:50.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:50.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:33:50.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41818b63]
2026-01-08T17:33:50.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0bc117]
2026-01-08T17:33:50.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:50.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@261cfc32] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5759f2fb] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:50.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1804312833 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:50.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987805822 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:50.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:50.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:50.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:50.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@261cfc32]
2026-01-08T17:33:50.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5759f2fb]
2026-01-08T17:33:50.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:50.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:51.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:33:51.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:33:51.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:51.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:51.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:51.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:51.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:51.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:51.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:51.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:51.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:51.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:51.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:51.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:51.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:51.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:51.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:51.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319f289a] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:51.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:51.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1028719945 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:51.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59d1a763] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:51.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:51.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@45595710 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:51.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:51.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:51.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:51.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:51.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319f289a]
2026-01-08T17:33:51.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:51.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:51.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:51.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:51.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59d1a763]
2026-01-08T17:33:51.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:51.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:51.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:52.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:33:52.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:52.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-08T17:33:52.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-08T17:33:52.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:33:52.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:52.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-08T17:33:52.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:33:52.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-08T17:33:52.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:52.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/cards/company
2026-01-08T17:33:52.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:33:52.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:52.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/cards/company
2026-01-08T17:33:52.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-08T17:33:52.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-08T17:33:52.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:33:52.505+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:52.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-08T17:33:52.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-08T17:33:52.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:33:52.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:52.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-08T17:33:52.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-08T17:33:52.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:52.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:52.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:52.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:52.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32b600b9] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:52.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b99822] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:52.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c681497] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:52.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dbdba79] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:52.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1393296181 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:52.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@858794979 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:52.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2289006 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:52.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1996623684 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:52.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-08T17:33:52.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:52.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:33:52.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-08T17:33:52.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-08T17:33:52.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:52.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:52.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-08T17:33:52.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:52.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:33:52.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b99822]
2026-01-08T17:33:52.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 0
2026-01-08T17:33:52.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32b600b9]
2026-01-08T17:33:52.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 0
2026-01-08T17:33:52.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dbdba79]
2026-01-08T17:33:52.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:52.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:52.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c681497]
2026-01-08T17:33:52.539+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:52.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:52.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:33:52.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:52.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[])]
2026-01-08T17:33:52.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:52.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:52.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[])]
2026-01-08T17:33:52.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:52.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:52.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:52.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:52.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:52.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:52.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:52.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:52.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:52.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:52.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:52.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:52.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:52.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:52.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39469fd8] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:52.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:52.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1029799078 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:52.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:52.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:52.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da0e51] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:52.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:52.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1111876336 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:33:52.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:52.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:52.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39469fd8]
2026-01-08T17:33:52.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:52.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:52.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:52.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:52.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:52.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da0e51]
2026-01-08T17:33:52.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:52.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:52.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:54.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-08T17:33:54.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-08T17:33:54.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/cards/user
2026-01-08T17:33:54.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-08T17:33:54.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-08T17:33:54.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-08T17:33:54.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:54.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42688af2] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:54.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122856138 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:54.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-08T17:33:54.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 2(Long)
2026-01-08T17:33:54.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-08T17:33:54.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42688af2]
2026-01-08T17:33:54.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:54.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=2, userId=2, cardName=개인카 (truncated)...]
2026-01-08T17:33:54.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:54.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:54.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:54.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:54.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:54.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:54.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:54.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:54.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:54.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:54.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:54.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:54.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:54.139+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:54.140+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f022b7] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:54.142+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:54.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cfc8c4] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:54.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960237077 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:54.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:54.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@501286588 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:54.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:54.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:54.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:54.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:54.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f022b7]
2026-01-08T17:33:54.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:54.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:54.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:54.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:54.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cfc8c4]
2026-01-08T17:33:54.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:54.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:54.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:57.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:57.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:33:57.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T17:33:57.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:33:57.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-08T17:33:57.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:57.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T17:33:57.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:33:57.440+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:33:57.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:33:57.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T17:33:57.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/companies
2026-01-08T17:33:57.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:57.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-08T17:33:57.444+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T17:33:57.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/companies/pending
2026-01-08T17:33:57.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/me
2026-01-08T17:33:57.444+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:33:57.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/me
2026-01-08T17:33:57.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:33:57.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:57.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:57.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-08T17:33:57.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T17:33:57.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:33:57.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T17:33:57.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:33:57.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:57.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-08T17:33:57.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T17:33:57.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:33:57.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T17:33:57.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:57.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6706ecec] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:57.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:33:57.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:57.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-08T17:33:57.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T17:33:57.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T17:33:57.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:57.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42239112] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:57.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:57.463+09:00  INFO 23448 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 2, companyId: 2
2026-01-08T17:33:57.464+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 2, companyId: 2
2026-01-08T17:33:57.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e2247d3] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:57.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fb7de0d] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:57.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:57.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560596120 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:33:57.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1566153684 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:33:57.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:57.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cee22e] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:57.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5d95a3] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:57.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:33:57.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:57.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@809376891 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:57.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:33:57.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2100764444 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:33:57.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1239718662 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:57.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:57.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:57.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 2(Long), PENDING(String)
2026-01-08T17:33:57.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:33:57.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:57.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-08T17:33:57.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:57.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:33:57.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@109756554 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:33:57.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:57.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-08T17:33:57.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6706ecec]
2026-01-08T17:33:57.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:33:57.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42239112]
2026-01-08T17:33:57.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fb7de0d]
2026-01-08T17:33:57.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:57.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:57.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:33:57.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:57.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:57.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:33:57.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:33:57.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:57.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:57.739+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:57.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T17:33:57.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:57.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e2247d3]
2026-01-08T17:33:57.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cee22e]
2026-01-08T17:33:57.782+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:57.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:33:57.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:57.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=10, userId=2, companyId= (truncated)...]
2026-01-08T17:33:57.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5d95a3]
2026-01-08T17:33:57.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:57.788+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d08c0a9] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:57.792+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:57.795+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e65420] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:57.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682717925 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:33:57.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:33:57.795+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1632946649 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:57.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-08T17:33:57.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:33:57.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-08T17:33:57.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T17:33:57.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e65420]
2026-01-08T17:33:57.805+09:00  INFO 23448 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 2, companyId: 2, role: USER
2026-01-08T17:33:57.810+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:57.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T17:33:57.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=2, username=test_user1, passw (truncated)...]
2026-01-08T17:33:57.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d08c0a9]
2026-01-08T17:33:57.813+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 2, companyId: 2, role: USER
2026-01-08T17:33:57.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:57.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:57.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=2, username=test_user1, passw (truncated)...]
2026-01-08T17:33:57.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:57.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:57.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:33:57.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:57.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:33:57.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:57.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:33:57.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:57.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:33:57.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:58.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:33:58.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:58.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:33:58.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:58.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:33:58.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3285d225] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:58.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28d75ffa] was not registered for synchronization because synchronization is not active
2026-01-08T17:33:58.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@566100466 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:33:58.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1623488898 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:33:58.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:58.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:33:58.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:58.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:33:58.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:58.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:33:58.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28d75ffa]
2026-01-08T17:33:58.055+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3285d225]
2026-01-08T17:33:58.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:58.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:33:58.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:58.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:33:58.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:33:58.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:03.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-08T17:34:03.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-08T17:34:03.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/logout
2026-01-08T17:34:03.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-08T17:34:03.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-08T17:34:03.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-08T17:34:03.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIyIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-08T17:34:03.089+09:00  INFO 23448 --- [http-nio-8080-exec-6] SECURITY                                 : LOGOUT userId=2
2026-01-08T17:34:03.091+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:03.094+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-08T17:34:03.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:06.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:34:06.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:34:06.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:34:06.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:34:06.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:34:06.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:34:06.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-08T17:34:06.580+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-08T17:34:06.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:06.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f775d9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:06.582+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1781312003 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:06.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:34:06.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-08T17:34:06.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T17:34:06.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f775d9]
2026-01-08T17:34:06.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:06.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b36b6e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:06.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1811321923 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:06.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:06.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:06.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:06.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b36b6e]
2026-01-08T17:34:06.672+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 1
2026-01-08T17:34:06.672+09:00  INFO 23448 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-08T17:34:06.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:06.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-08T17:34:06.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:06.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T17:34:06.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T17:34:06.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-08T17:34:06.974+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T17:34:06.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T17:34:06.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T17:34:06.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:06.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66bd4dd9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:06.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180803140 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:06.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T17:34:06.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-08T17:34:06.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-08T17:34:06.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66bd4dd9]
2026-01-08T17:34:06.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:06.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T17:34:06.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:07.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:07.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:07.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:07.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:07.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:34:07.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:07.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:07.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:34:07.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:07.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:07.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:34:07.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:07.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:07.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:07.113+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:07.114+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:07.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:07.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:07.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:34:07.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:07.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:07.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:07.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:07.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:07.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:07.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:07.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:07.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:07.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:07.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:07.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:07.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:34:07.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:07.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:07.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:07.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:07.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:07.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:34:07.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:07.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:07.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:07.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:07.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:07.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5269c775] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@540215b6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4955ec] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea10900] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff4e469] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a8a122] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.147+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@182799271 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@761347153 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:07.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902834248 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:07.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1356203135 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:07.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@864101300 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:07.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:07.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:07.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:07.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1005340362 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:07.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:07.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:07.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:07.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:07.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.247+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:07.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:07.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:07.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5269c775]
2026-01-08T17:34:07.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:07.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:07.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4955ec]
2026-01-08T17:34:07.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@540215b6]
2026-01-08T17:34:07.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:07.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad1380e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2129060262 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:07.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:07.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:07.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:07.294+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:07.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:07.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea10900]
2026-01-08T17:34:07.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:07.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:07.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:07.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a8a122]
2026-01-08T17:34:07.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff4e469]
2026-01-08T17:34:07.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:07.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:07.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:07.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:07.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:07.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.318+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:07.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c3ab40d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad1380e]
2026-01-08T17:34:07.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:07.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6884cb5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:07.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:07.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2038343449 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:07.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560891645 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:07.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:07.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:07.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:07.327+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:07.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:07.328+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:07.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:07.327+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.327+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.329+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:07.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:07.329+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7386ceab] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:07.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1278796743 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:07.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:07.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6884cb5]
2026-01-08T17:34:07.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38146ddb] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:07.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:07.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c3ab40d]
2026-01-08T17:34:07.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@899784030 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:07.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:07.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9553759] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:07.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:07.338+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.343+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e85a1b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.340+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:07.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468680966 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:07.345+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:07.343+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:07.343+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.344+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220222199 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.345+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:07.345+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:07.345+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7386ceab]
2026-01-08T17:34:07.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:07.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:07.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:07.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb605c5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:07.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:34:07.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:07.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203695724 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:07.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:07.355+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:07.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:34:07.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:07.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9553759]
2026-01-08T17:34:07.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:34:07.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:07.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:07.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:07.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:07.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:34:07.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e85a1b]
2026-01-08T17:34:07.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:07.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:07.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:34:07.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:07.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4217fba6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38146ddb]
2026-01-08T17:34:07.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:07.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23873917 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:34:07.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb605c5]
2026-01-08T17:34:07.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5114b9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:07.377+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:07.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:07.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1474527650 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:07.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:07.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b50c673] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:34:07.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:07.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:07.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@816019697 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:34:07.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:34:07.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:07.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:07.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:07.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:07.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4217fba6]
2026-01-08T17:34:07.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:07.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:07.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:07.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:07.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf8ba2d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:07.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:07.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:07.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@567259359 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1630ced2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1377424709 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:07.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:07.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b5114b9]
2026-01-08T17:34:07.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:07.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:07.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:07.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:07.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:07.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b50c673]
2026-01-08T17:34:07.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:07.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79bf54ee] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:34:07.410+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.415+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:07.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:07.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf8ba2d]
2026-01-08T17:34:07.411+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.412+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2112441659 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.412+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56373bc1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24904ccf] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:07.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1630ced2]
2026-01-08T17:34:07.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:07.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:07.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1334303480 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.430+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:07.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@854566996 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:07.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:07.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76563c66] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:07.430+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:07.432+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:07.432+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:07.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711290912 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:07.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:07.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:07.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:07.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:07.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:07.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:07.444+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56373bc1]
2026-01-08T17:34:07.444+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@813a835] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:07.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:07.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1737847749 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:07.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:07.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24904ccf]
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76563c66]
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:07.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@750d7c9d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79bf54ee]
2026-01-08T17:34:07.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@123719a7] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@809178881 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:07.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:07.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a7dcaf] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172808930 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:07.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@813a835]
2026-01-08T17:34:07.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136306385 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:07.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:07.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:07.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.463+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:07.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:07.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:07.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13379bb6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:07.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:07.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:07.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:34:07.470+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116444133 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:07.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:07.473+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:07.473+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:07.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@750d7c9d]
2026-01-08T17:34:07.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:07.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:07.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@123719a7]
2026-01-08T17:34:07.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d860f0] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.478+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:34:07.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:07.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@976161122 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:07.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:34:07.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:07.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:07.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:07.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:07.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:07.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:07.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d7c2fc] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6000c129] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13379bb6]
2026-01-08T17:34:07.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a7dcaf]
2026-01-08T17:34:07.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:07.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1030353867 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:07.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@866645324 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:07.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:07.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:07.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9a05ab] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190f40dd] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:07.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:07.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:07.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1390402437 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533439991 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d860f0]
2026-01-08T17:34:07.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:07.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d7c2fc]
2026-01-08T17:34:07.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.505+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:07.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:07.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:07.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6000c129]
2026-01-08T17:34:07.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:07.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60664fa1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:07.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1048097139 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:07.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12109606] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:07.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1064355619 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:07.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:07.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:07.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:07.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:07.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:07.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:07.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:07.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60664fa1]
2026-01-08T17:34:07.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190f40dd]
2026-01-08T17:34:07.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9a05ab]
2026-01-08T17:34:07.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.572+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:07.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6b01f0] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697d1e7c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:07.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0a4ae1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:07.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438856339 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:07.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1001672629 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.592+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@744551029 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.592+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:07.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:07.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:07.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:07.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:07.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:07.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:07.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:07.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12109606]
2026-01-08T17:34:07.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:07.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:07.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697d1e7c]
2026-01-08T17:34:07.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6b01f0]
2026-01-08T17:34:07.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:07.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63b4ab58] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:07.638+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1656477612 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.651+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:07.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0a4ae1]
2026-01-08T17:34:07.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414c9159] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1552713427 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:07.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:07.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.744+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63b4ab58]
2026-01-08T17:34:07.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:07.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:07.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f671817] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:07.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:07.790+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:07.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414c9159]
2026-01-08T17:34:07.798+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@424646344 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:07.805+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@293c0a02] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:07.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@215978021 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:07.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:07.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:07.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:07.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:07.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:07.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:07.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:07.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@293c0a02]
2026-01-08T17:34:07.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f671817]
2026-01-08T17:34:07.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:07.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e75c6d4] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:07.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:07.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:07.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:07.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1218073530 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:07.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627c08d9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@197cb50] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:07.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:07.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:07.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:07.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@735670926 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.863+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1717030101 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.863+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:07.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:07.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:07.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:07.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:07.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:07.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ec5e90] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:07.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:07.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:07.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:07.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@158769403 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:07.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e75c6d4]
2026-01-08T17:34:07.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:07.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:07.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@243f73f1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6f67e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:07.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1662812679 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:07.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1226136472 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:07.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:07.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:07.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:07.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:07.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@627c08d9]
2026-01-08T17:34:07.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@197cb50]
2026-01-08T17:34:07.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:07.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:07.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c51d8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f95c976] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:07.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82094858 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:07.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@820469407 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ec5e90]
2026-01-08T17:34:07.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:07.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:07.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7391869d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:07.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:07.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@894394017 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:07.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6f67e]
2026-01-08T17:34:07.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@243f73f1]
2026-01-08T17:34:07.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:07.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:07.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:07.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc061d9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:07.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c51d8]
2026-01-08T17:34:07.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1346317099 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:07.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f95c976]
2026-01-08T17:34:07.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:07.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:07.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:07.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:07.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:07.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34e1c4d5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:07.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7391869d]
2026-01-08T17:34:07.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:07.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@354313542 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:07.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:07.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:07.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:07.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:07.989+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:08.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:08.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc061d9]
2026-01-08T17:34:08.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:08.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:08.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:08.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:08.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34e1c4d5]
2026-01-08T17:34:08.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:08.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f82b93] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:08.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1023774933 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:08.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:08.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:08.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:08.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f82b93]
2026-01-08T17:34:08.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:08.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:08.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:11.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:11.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:11.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:11.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:11.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:34:11.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:11.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:11.056+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:34:11.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:11.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:11.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:11.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:11.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:11.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:11.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:11.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:11.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:34:11.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:11.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:11.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:11.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:11.147+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:11.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:11.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:34:11.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:11.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:11.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:11.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:11.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:11.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:11.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:11.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:34:11.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:11.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:11.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:11.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:11.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2215d248] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:34:11.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305fd6b1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:34:11.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a674ef2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d5b94c7] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e3e4257] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1689411004 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:11.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:11.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28157c3c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1451386786 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:11.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@764930787 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:11.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480774506 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:11.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:11.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:11.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:11.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:11.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2065697995 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:11.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@852221375 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:11.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:11.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:11.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:11.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:11.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:11.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:11.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2215d248]
2026-01-08T17:34:11.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:11.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:11.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:11.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:11.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:11.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305fd6b1]
2026-01-08T17:34:11.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:11.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:11.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:11.247+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:11.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a674ef2]
2026-01-08T17:34:11.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d5b94c7]
2026-01-08T17:34:11.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28157c3c]
2026-01-08T17:34:11.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e3e4257]
2026-01-08T17:34:11.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:11.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:11.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.255+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21035bd1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:11.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:11.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5697e0aa] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:34:11.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725326615 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:11.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:11.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:11.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:11.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@691012682 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:11.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:11.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:11.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:34:11.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:11.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:11.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@740c5bb3] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1381799881 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:11.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:11.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:34:11.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:11.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/1/applications
2026-01-08T17:34:11.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:11.330+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:11.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:11.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:34:11.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/1
2026-01-08T17:34:11.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:11.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:11.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:34:11.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/1/applications
2026-01-08T17:34:11.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21035bd1]
2026-01-08T17:34:11.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:34:11.343+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/1/applications
2026-01-08T17:34:11.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:11.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@352552a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/1/applications
2026-01-08T17:34:11.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1734612489 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:11.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/1/applications", parameters={}
2026-01-08T17:34:11.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5616f5ae] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:11.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-08T17:34:11.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:11.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-08T17:34:11.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:11.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1300457710 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:11.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5697e0aa]
2026-01-08T17:34:11.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-08T17:34:11.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:11.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-08T17:34:11.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@740c5bb3]
2026-01-08T17:34:11.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:11.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-08T17:34:11.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-08T17:34:11.393+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:11.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:11.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:11.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-08T17:34:11.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:11.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@352552a]
2026-01-08T17:34:11.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-08T17:34:11.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c16013c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-08T17:34:11.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1301755343 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:11.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbb08e5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:11.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2094132093 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:11.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:11.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:11.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-08T17:34:11.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5616f5ae]
2026-01-08T17:34:11.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:11.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:11.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:34:11.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9c70aff] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@534813951 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:11.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:11.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:11.430+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/1/applications
2026-01-08T17:34:11.430+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/1
2026-01-08T17:34:11.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:11.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c16013c]
2026-01-08T17:34:11.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:11.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbb08e5]
2026-01-08T17:34:11.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c7db14] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@386573294 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:11.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:11.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-08T17:34:11.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 1(Long)
2026-01-08T17:34:11.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/1/applications
2026-01-08T17:34:11.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-08T17:34:11.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:11.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/1/applications
2026-01-08T17:34:11.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9c70aff]
2026-01-08T17:34:11.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-08T17:34:11.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-08T17:34:11.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/1/applications
2026-01-08T17:34:11.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b9cecda] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-08T17:34:11.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c7db14]
2026-01-08T17:34:11.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/1/applications", parameters={}
2026-01-08T17:34:11.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1350604338 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:11.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-08T17:34:11.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-08T17:34:11.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-08T17:34:11.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:11.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-08T17:34:11.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-08T17:34:11.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-08T17:34:11.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-08T17:34:11.471+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-08T17:34:11.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-08T17:34:11.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623da42f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41721f4f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1119157401 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:11.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2048133475 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:11.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:11.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:11.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:11.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:11.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 10
2026-01-08T17:34:11.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:11.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:11.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b9cecda]
2026-01-08T17:34:11.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41721f4f]
2026-01-08T17:34:11.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623da42f]
2026-01-08T17:34:11.520+09:00  INFO 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 10
2026-01-08T17:34:11.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:11.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@690542ae] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f91f3ca] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:11.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-08T17:34:11.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953987238 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:11.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1610755787 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:11.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-08T17:34:11.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-08T17:34:11.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-08T17:34:11.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 1(Long)
2026-01-08T17:34:11.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-08T17:34:11.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 10
2026-01-08T17:34:11.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f91f3ca]
2026-01-08T17:34:11.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@690542ae]
2026-01-08T17:34:11.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.642+09:00  INFO 23448 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 10
2026-01-08T17:34:11.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:11.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:11.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:11.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-08T17:34:11.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:13.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:13.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-01-08T17:34:13.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:13.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-01-08T17:34:13.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:13.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:13.678+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:13.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-01-08T17:34:13.678+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:13.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-01-08T17:34:13.680+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-01-08T17:34:13.680+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:13.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:13.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/plans
2026-01-08T17:34:13.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:13.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-01-08T17:34:13.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:13.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:13.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:13.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-01-08T17:34:13.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits
2026-01-08T17:34:13.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:13.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:13.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:13.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-01-08T17:34:13.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:13.742+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-01-08T17:34:13.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:13.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:13.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:13.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-01-08T17:34:13.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:13.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-01-08T17:34:13.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:13.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:13.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:13.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:13.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-01-08T17:34:13.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:13.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:13.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:13.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aff0a14] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:13.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@644979b2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b2efc6f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:13.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:13.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@375f8531] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.795+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:13.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1401001812 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:13.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@988555178 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:13.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1565319696 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:13.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:13.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-01-08T17:34:13.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42bc8da1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:13.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e4e50b4] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:13.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-01-08T17:34:13.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1911543347 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:13.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:13.822+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:13.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739714049 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:13.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:13.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-01-08T17:34:13.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@299628878 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:13.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:13.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 3
2026-01-08T17:34:13.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:13.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 1(Long)
2026-01-08T17:34:13.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:13.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@644979b2]
2026-01-08T17:34:13.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aff0a14]
2026-01-08T17:34:13.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b2efc6f]
2026-01-08T17:34:13.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:13.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:13.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.839+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@375f8531]
2026-01-08T17:34:13.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eca1b2e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-01-08T17:34:13.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:13.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 1
2026-01-08T17:34:13.855+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42bc8da1]
2026-01-08T17:34:13.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1100873772 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:13.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:13.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:13.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:13.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:13.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:13.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:13.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:13.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:13.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CreditDto(creditId=8, companyId=1, amount=5145, reaso (truncated)...]
2026-01-08T17:34:13.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:13.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:13.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:13.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:13.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:13.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-01-08T17:34:13.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:13.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:13.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:13.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-01-08T17:34:13.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:13.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:13.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/plans
2026-01-08T17:34:13.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:13.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:13.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:13.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:13.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e4e50b4]
2026-01-08T17:34:13.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits
2026-01-08T17:34:13.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eca1b2e]
2026-01-08T17:34:13.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-01-08T17:34:13.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:13.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:13.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-01-08T17:34:13.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-01-08T17:34:13.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:13.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:13.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:13.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-01-08T17:34:13.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:13.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-01-08T17:34:13.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:13.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-01-08T17:34:13.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:13.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dcff4c6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3000ba37] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c01b78] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:13.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:13.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:13.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1412743525 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:13.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1073891817 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:13.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:13.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967814185 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:13.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:13.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:13.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-01-08T17:34:13.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:13.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:13.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:13.956+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-01-08T17:34:13.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:13.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7735583f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:13.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1519374471 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:13.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:13.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : <==      Total: 3
2026-01-08T17:34:13.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:13.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-01-08T17:34:13.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:13.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:13.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dcff4c6]
2026-01-08T17:34:13.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:13.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 1(Long)
2026-01-08T17:34:13.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59c01b78]
2026-01-08T17:34:13.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:13.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-01-08T17:34:13.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34359f80] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:13.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:13.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:13.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014886910 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:13.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:13.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:13.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:13.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 1
2026-01-08T17:34:13.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:13.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7735583f]
2026-01-08T17:34:13.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:13.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3000ba37]
2026-01-08T17:34:13.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CreditDto(creditId=8, companyId=1, amount=5145, reaso (truncated)...]
2026-01-08T17:34:13.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:13.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:14.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:14.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:14.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:14.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34359f80]
2026-01-08T17:34:14.009+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:14.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:14.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:16.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:16.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:16.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:16.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-08T17:34:16.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-08T17:34:16.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:16.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:16.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:16.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-08T17:34:16.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:16.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:16.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:16.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/cards/company
2026-01-08T17:34:16.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-08T17:34:16.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:16.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:16.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:16.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-08T17:34:16.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:16.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/cards/company
2026-01-08T17:34:16.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:16.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:16.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-08T17:34:16.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:16.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:16.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-08T17:34:16.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:16.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-08T17:34:16.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbde80] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-08T17:34:16.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7711d2a4] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-08T17:34:16.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20291aba] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4bff25] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.402+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2038264533 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:16.403+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.412+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:16.412+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1792615410 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:16.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ff61ab] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.414+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:16.414+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:16.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:16.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282032481 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:16.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662172860 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:16.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:16.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-08T17:34:16.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@341092363 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:16.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:16.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:16.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:16.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-08T17:34:16.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbde80]
2026-01-08T17:34:16.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:16.431+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:16.432+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:16.432+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7711d2a4]
2026-01-08T17:34:16.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:16.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:16.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e5e900b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@945590545 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:16.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:16.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:16.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:16.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-08T17:34:16.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-08T17:34:16.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20291aba]
2026-01-08T17:34:16.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4bff25]
2026-01-08T17:34:16.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ff61ab]
2026-01-08T17:34:16.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:16.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:16.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:16.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:16.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:16.454+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e5e900b]
2026-01-08T17:34:16.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:16.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-08T17:34:16.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-08T17:34:16.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:16.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:16.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:16.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:16.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:16.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:16.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:16.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:16.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:16.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:16.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:16.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:16.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:16.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:16.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:16.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:16.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:16.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:16.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:16.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:16.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:16.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:16.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:16.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b09d2a1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@71151464 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:16.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:16.651+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:16.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:16.651+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:16.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:16.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:16.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:16.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:16.690+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749aa972] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a3944a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.693+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@793acab5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@248676724 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:16.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1028730747 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:16.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1782505627 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:16.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:16.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:16.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:16.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:16.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:16.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b09d2a1]
2026-01-08T17:34:16.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:16.703+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:16.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:16.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:16.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:16.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:16.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:16.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@793acab5]
2026-01-08T17:34:16.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749aa972]
2026-01-08T17:34:16.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:16.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302ce97] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef9799b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:16.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750961440 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:16.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:16.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2131331599 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:16.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:16.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:16.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:16.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:16.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a3944a]
2026-01-08T17:34:16.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:16.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:16.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:16.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302ce97]
2026-01-08T17:34:16.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:16.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef9799b]
2026-01-08T17:34:16.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:16.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:16.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:16.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:16.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:16.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:16.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:17.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:17.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:17.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:17.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:17.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:17.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:17.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:34:17.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:17.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:34:17.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:17.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:17.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:34:17.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:17.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:17.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:17.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:17.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:17.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:17.955+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:17.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:17.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:17.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:17.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:17.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:17.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:17.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:17.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:17.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:17.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:17.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:17.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:17.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:17.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:17.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:17.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:17.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:17.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@656ed188] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:17.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:17.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:17.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:17.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dea539f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:17.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:17.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:18.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:18.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:18.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:18.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:18.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:18.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:18.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1496671008 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:18.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1609410757 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:18.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56dc6d6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:18.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0ef9eb] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:18.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:18.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:18.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249ece27] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:18.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9b3d86] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:18.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:18.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:18.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@300420286 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:18.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1733291266 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:18.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@39121732 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:18.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@328804136 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:18.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:18.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:18.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:18.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:18.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:18.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:18.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@656ed188]
2026-01-08T17:34:18.502+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dea539f]
2026-01-08T17:34:18.502+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:18.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:18.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:18.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:18.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:18.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:18.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b74ff4] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:18.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:18.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:18.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:18.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:18.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:18.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867972030 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:18.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0ef9eb]
2026-01-08T17:34:18.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:18.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@249ece27]
2026-01-08T17:34:18.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9b3d86]
2026-01-08T17:34:18.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:18.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:18.821+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:18.821+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c27af1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:18.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@554030759 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:18.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:18.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:18.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:18.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:34:18.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:18.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:18.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:18.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:18.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:34:18.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:18.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:18.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:34:18.863+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:18.863+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:34:18.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:18.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:18.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56dc6d6]
2026-01-08T17:34:18.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:18.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:18.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c27af1]
2026-01-08T17:34:18.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:18.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b74ff4]
2026-01-08T17:34:18.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:34:18.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:18.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:18.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:18.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:18.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:34:18.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:18.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@124de152] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:18.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:18.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:18.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:18.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:18.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:34:18.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@580074147 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:18.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:18.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:18.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:18.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:18.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:34:18.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:18.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:18.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:18.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:34:18.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:18.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:18.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:18.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:18.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:18.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:18.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1507b46a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:18.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:18.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:18.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:34:18.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5ce4cd] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:18.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1837003588 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:18.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:18.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:18.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:18.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:34:18.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@900084372 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:18.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:18.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:18.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:18.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:19.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:19.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:19.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@124de152]
2026-01-08T17:34:19.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dd7dba] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1955483538 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:19.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:19.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:19.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:19.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e55065] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@733726b5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f84f2b2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:19.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1507b46a]
2026-01-08T17:34:19.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@224356442 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:19.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:19.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152256016 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:19.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:19.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:19.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5ce4cd]
2026-01-08T17:34:19.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:19.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dd7dba]
2026-01-08T17:34:19.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:19.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:34:19.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:19.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:19.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:19.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:19.042+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@83454316 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:19.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:19.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ecba633] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@606156029 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:19.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:19.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:19.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:19.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:19.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:19.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:19.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:19.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:19.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e55065]
2026-01-08T17:34:19.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:19.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:19.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@733726b5]
2026-01-08T17:34:19.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:19.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:19.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a286366] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:19.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:19.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:19.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f84f2b2]
2026-01-08T17:34:19.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:19.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1343515710 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:19.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:19.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:19.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:19.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.094+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:19.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:19.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:19.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:19.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ecba633]
2026-01-08T17:34:19.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9442b9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:19.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:19.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.116+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b17117] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396396320 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:19.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:19.106+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:19.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@896051148 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:19.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:19.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:19.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:19.165+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:19.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214c788b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1657079810 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:19.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:19.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:19.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a286366]
2026-01-08T17:34:19.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1013fc] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1240097739 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:19.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:19.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:19.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cff6e90] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:19.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:19.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:19.510+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9442b9]
2026-01-08T17:34:19.510+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616604656 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:19.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:19.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b17117]
2026-01-08T17:34:19.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:19.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:19.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:19.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:19.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:19.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12f5f9d1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:19.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:19.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@265358161 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:19.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:19.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:19.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:19.534+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1013fc]
2026-01-08T17:34:19.534+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:19.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cff6e90]
2026-01-08T17:34:19.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625546f4] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:19.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:19.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:19.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658468017 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:19.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:19.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:19.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:19.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214c788b]
2026-01-08T17:34:19.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12f5f9d1]
2026-01-08T17:34:19.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:19.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:19.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:19.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:19.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@786976e5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:19.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1173300040 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:19.588+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:19.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:19.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@625546f4]
2026-01-08T17:34:19.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:19.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@269c2f6b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1849077674 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:19.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:19.682+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:19.695+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@786976e5]
2026-01-08T17:34:19.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:19.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10a0a40] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@845650650 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:19.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:19.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:19.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:19.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@269c2f6b]
2026-01-08T17:34:19.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a9d1e1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.761+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1166627240 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:19.761+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:19.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:19.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10a0a40]
2026-01-08T17:34:19.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:19.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558fea54] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@67543727 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:19.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:19.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:19.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:19.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a9d1e1]
2026-01-08T17:34:19.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10666487] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1552718259 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:19.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:19.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:19.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:19.838+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558fea54]
2026-01-08T17:34:19.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:19.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743c41b7] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10666487]
2026-01-08T17:34:19.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1582028846 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:19.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:19.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a5f32a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:19.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@566554021 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:19.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:19.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:19.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:19.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:19.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a5f32a]
2026-01-08T17:34:19.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743c41b7]
2026-01-08T17:34:19.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:19.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:19.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:19.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fddc261] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:19.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@964300756 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:19.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:19.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:19.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:19.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:19.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fddc261]
2026-01-08T17:34:20.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:20.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:20.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:20.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:20.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:20.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:20.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:20.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:20.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:20.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:20.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:20.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:20.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:20.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:20.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:20.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:20.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:20.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:20.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:20.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:20.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:20.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:20.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:20.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:20.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:20.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:20.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41093681] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:20.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:20.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:20.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8c6c7c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:20.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:20.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16cf0f9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:20.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:20.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:20.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e791c8b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:20.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1980614916 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:20.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@162881594 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:20.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:20.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:20.094+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:20.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:20.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532442677 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:20.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@397142583 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:20.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:20.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:20.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:20.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:20.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:20.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:20.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e791c8b]
2026-01-08T17:34:20.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41093681]
2026-01-08T17:34:20.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:20.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:20.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:20.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d4e814] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:20.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:20.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@453006720 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:20.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:20.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:20.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:20.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:20.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16cf0f9]
2026-01-08T17:34:20.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8c6c7c]
2026-01-08T17:34:20.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:20.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:20.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:20.191+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c4db542] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:20.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:20.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1066698481 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:20.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:20.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:20.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:20.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d4e814]
2026-01-08T17:34:20.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:20.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:20.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:20.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c4db542]
2026-01-08T17:34:20.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:20.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:20.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:20.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:21.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:21.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:21.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:21.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:34:21.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:21.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:34:21.754+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:34:21.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:21.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:34:21.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:21.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:34:21.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:21.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:21.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:21.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:21.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:21.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:21.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:21.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:21.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:21.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:21.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:34:21.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:21.818+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:21.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:21.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:21.832+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:21.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:34:21.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:34:21.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:21.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:21.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@375ac2ac] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:21.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:21.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:21.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:21.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:21.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:21.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5f6afe] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:21.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:21.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c36ef8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:21.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:21.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:21.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc4acb] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eea9a5b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1023778551 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:21.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e9cedc] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:21.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:21.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1690757788 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:21.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1767028584 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:21.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:21.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:21.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:21.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:21.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@914894250 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:21.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:21.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:21.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1565997207 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:21.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:21.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:21.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@375ac2ac]
2026-01-08T17:34:21.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@209325522 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:21.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:21.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:21.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354fc031] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:21.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1727060439 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:21.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:21.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:21.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:21.946+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5f6afe]
2026-01-08T17:34:21.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b3dfb3c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1162056875 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:21.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:21.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:21.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c36ef8]
2026-01-08T17:34:21.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:21.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:21.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eea9a5b]
2026-01-08T17:34:21.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:21.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:21.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:21.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:21.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:21.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc4acb]
2026-01-08T17:34:21.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:21.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:21.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:21.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:21.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:21.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:21.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e9cedc]
2026-01-08T17:34:21.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:21.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:21.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:21.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:34:21.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:34:21.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:34:21.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:34:21.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:21.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:21.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:21.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:21.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:34:21.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:34:21.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:21.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:34:21.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:34:21.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:34:21.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dcb551] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:34:21.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2001397613 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:21.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@556ad3b9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:21.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:21.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@663491912 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:21.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b86f451] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:21.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:21.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:21.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@51028399 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:21.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:21.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:21.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:21.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:21.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@354fc031]
2026-01-08T17:34:21.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:21.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:21.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:34:22.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:22.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:34:22.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:34:22.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:22.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.007+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@572ce0c2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232987940 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:22.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:34:22.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:34:22.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:34:22.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:34:22.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:34:22.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e4f20ee] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1478578703 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:22.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:22.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:22.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:34:22.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:22.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:22.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b3dfb3c]
2026-01-08T17:34:22.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b86f451]
2026-01-08T17:34:22.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dcb551]
2026-01-08T17:34:22.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@556ad3b9]
2026-01-08T17:34:22.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:34:22.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f846b74] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26708203] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:22.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@572ce0c2]
2026-01-08T17:34:22.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e4f20ee]
2026-01-08T17:34:22.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:34:22.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2065994659 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:22.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@986238688 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:22.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:22.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.094+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18e4607] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5632b5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:22.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:22.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@823430148 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:22.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1789469089 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:22.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:22.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:22.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:22.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:22.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4461311f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@933122139 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:22.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:22.113+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:22.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:22.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4461311f]
2026-01-08T17:34:22.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18e4607]
2026-01-08T17:34:22.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:22.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:22.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44a139a5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f846b74]
2026-01-08T17:34:22.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5632b5]
2026-01-08T17:34:22.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@938271048 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:22.120+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.124+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ab756c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:22.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f54120d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1501838070 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:22.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:22.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@865534808 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:22.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:22.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:34:22.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26708203]
2026-01-08T17:34:22.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71c2825b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1400927994 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:22.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:22.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:34:22.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:34:22.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71c2825b]
2026-01-08T17:34:22.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc0c0ec] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1853180821 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:22.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f54120d]
2026-01-08T17:34:22.141+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.143+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.143+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.143+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a0229a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@485203609 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:22.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:34:22.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:22.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ab756c]
2026-01-08T17:34:22.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:22.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171af8e0] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046095226 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:22.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:22.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44a139a5]
2026-01-08T17:34:22.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b968c26] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@372763360 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:22.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:22.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a0229a]
2026-01-08T17:34:22.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc0c0ec]
2026-01-08T17:34:22.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72c12f47] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171af8e0]
2026-01-08T17:34:22.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:34:22.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1617393527 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:22.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:22.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:34:22.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:22.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b968c26]
2026-01-08T17:34:22.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dbf85d5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1646780408 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:22.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:22.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:22.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:22.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72c12f47]
2026-01-08T17:34:22.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5930ec07] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@577784689 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:22.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.195+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:22.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dbf85d5]
2026-01-08T17:34:22.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a68d3] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1908069408 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:22.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:22.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:22.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5930ec07]
2026-01-08T17:34:22.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@183b6c9f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1186331467 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:22.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:22.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:22.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:22.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a68d3]
2026-01-08T17:34:22.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14245208] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206627503 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:22.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:22.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@183b6c9f]
2026-01-08T17:34:22.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14245208]
2026-01-08T17:34:22.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256e700b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5bbbc1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1718792109 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:22.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@190384752 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:22.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:22.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.231+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:22.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256e700b]
2026-01-08T17:34:22.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:22.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5bbbc1]
2026-01-08T17:34:22.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.234+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a9c02a4] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:22.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@712588677 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:22.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:22.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:22.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:22.238+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a9c02a4]
2026-01-08T17:34:22.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:22.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:22.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:22.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:22.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:22.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:22.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:22.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:22.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:22.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:22.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:22.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:22.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:22.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:22.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:22.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:22.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:22.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:22.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:22.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:22.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:22.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66599481] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:22.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:22.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:22.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@642039122 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:22.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52587034] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:22.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:22.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361872605 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:22.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545d7950] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.571+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@90bd34c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.571+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:22.571+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:22.571+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@435770125 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:22.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@79803681 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:22.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:22.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:22.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:22.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:22.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:22.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:22.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:22.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66599481]
2026-01-08T17:34:22.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52587034]
2026-01-08T17:34:22.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b791c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:22.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@707528718 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:22.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:22.589+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:22.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545d7950]
2026-01-08T17:34:22.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:22.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:22.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a79962c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:22.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1162995658 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:22.596+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:22.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:22.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:22.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@90bd34c]
2026-01-08T17:34:22.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:22.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b791c]
2026-01-08T17:34:22.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:22.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:22.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:22.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:22.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a79962c]
2026-01-08T17:34:22.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:22.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:22.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:24.008+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:24.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:24.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T17:34:24.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:34:24.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-08T17:34:24.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T17:34:24.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:24.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:24.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:24.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:34:24.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T17:34:24.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-08T17:34:24.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:24.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:24.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:24.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:34:24.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T17:34:24.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies/pending
2026-01-08T17:34:24.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:24.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:24.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:24.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:34:24.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T17:34:24.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-08T17:34:24.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:24.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:24.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:24.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:34:24.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T17:34:24.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-08T17:34:24.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:24.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:24.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:24.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:34:24.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T17:34:24.100+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-08T17:34:24.104+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.108+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.110+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.113+09:00  INFO 23448 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T17:34:24.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.117+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682e2222] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@790a212a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3e6ca7] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@128db237] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ef6b9b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19057a39] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@915005369 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:24.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1757680804 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:24.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:24.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1010921143 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:24.149+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1540918373 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:24.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@811961567 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:24.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1197507045 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:24.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:24.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:24.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:24.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:24.152+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:24.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:24.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:24.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:24.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:24.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:24.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 1(Long), PENDING(String)
2026-01-08T17:34:24.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:24.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:24.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:24.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19057a39]
2026-01-08T17:34:24.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682e2222]
2026-01-08T17:34:24.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@790a212a]
2026-01-08T17:34:24.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-08T17:34:24.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:24.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:24.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ef6b9b]
2026-01-08T17:34:24.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22833204] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@128db237]
2026-01-08T17:34:24.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c3e6ca7]
2026-01-08T17:34:24.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:24.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ba2c5f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@6622481 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:24.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1464734210 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:24.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:24.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:24.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:34:24.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:24.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T17:34:24.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:24.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:24.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.196+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me
2026-01-08T17:34:24.196+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:24.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T17:34:24.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T17:34:24.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:24.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T17:34:24.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22833204]
2026-01-08T17:34:24.213+09:00  INFO 23448 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 1
2026-01-08T17:34:24.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:24.214+09:00  INFO 23448 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T17:34:24.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ba2c5f]
2026-01-08T17:34:24.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c1a39a8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2037275494 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:24.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T17:34:24.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:24.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:24.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:24.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:24.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c1a39a8]
2026-01-08T17:34:24.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@84f4890] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@891680584 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:24.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:24.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:24.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:24.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@84f4890]
2026-01-08T17:34:24.280+09:00  INFO 23448 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 1, role: CEO
2026-01-08T17:34:24.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-08T17:34:24.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:24.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:24.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:24.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:24.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:24.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:24.456+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:24.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:24.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:24.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:24.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:24.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:24.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:24.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:24.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:24.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:24.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:24.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:24.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:24.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:24.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:24.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:24.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:24.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@708d0ee8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@723555781 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:24.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:24.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:24.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:24.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4826ded3] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443de07] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0de6dd] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@10431804 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:24.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082757374 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:24.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908453482 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:24.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:24.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:24.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:24.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:24.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:24.487+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@708d0ee8]
2026-01-08T17:34:24.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:24.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:24.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4826ded3]
2026-01-08T17:34:24.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:24.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:24.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:24.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6976a71] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443de07]
2026-01-08T17:34:24.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017061942 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:24.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:24.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:24.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0de6dd]
2026-01-08T17:34:24.502+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:24.502+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:24.502+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:24.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.508+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e9df989] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:24.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2093272969 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:24.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:24.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:24.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:24.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6976a71]
2026-01-08T17:34:24.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:24.534+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:24.534+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:24.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e9df989]
2026-01-08T17:34:24.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:24.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:24.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:28.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:28.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:34:28.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:34:28.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:28.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:28.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:28.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:34:28.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:28.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:34:28.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:28.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:34:28.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:28.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:28.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:34:28.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:34:28.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:28.754+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:28.761+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:28.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:28.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:28.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:28.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:28.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:34:28.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:28.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:28.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:28.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:28.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:34:28.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:34:28.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:28.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:28.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:28.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:28.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:34:28.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a12fcb6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:34:28.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:28.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:28.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:28.801+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:28.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@29998089 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:28.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:34:28.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:28.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:28.803+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:28.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.809+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.810+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d51c23b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65adfb90] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:28.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67468fc8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cde130f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a59ad8a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@564782176 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:28.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@982664953 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:28.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:28.821+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:28.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1134686374 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:28.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:28.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:28.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a12fcb6]
2026-01-08T17:34:28.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1771902054 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:28.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:28.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@187380811 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:28.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:28.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:28.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:28.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:28.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:28.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:28.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:28.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65adfb90]
2026-01-08T17:34:28.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:28.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:28.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:28.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:28.863+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:34:28.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:28.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:28.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:28.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:28.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:28.870+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:28.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:34:28.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cde130f]
2026-01-08T17:34:28.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:34:28.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67468fc8]
2026-01-08T17:34:28.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:34:28.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d51c23b]
2026-01-08T17:34:28.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:28.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a59ad8a]
2026-01-08T17:34:28.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:34:28.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6981fdaa] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:34:28.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:28.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d9823a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:34:28.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1801126628 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:28.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:28.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e09e23] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:28.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803271329 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:28.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:28.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:34:28.884+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:28.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:28.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1587530249 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:28.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:28.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:28.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:34:28.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@475c264a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:28.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:28.898+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057639986 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:28.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:28.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:28.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:28.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:28.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789715f6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:28.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154659548 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:28.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6981fdaa]
2026-01-08T17:34:28.901+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22d9823a]
2026-01-08T17:34:28.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:28.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:28.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:28.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:28.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:28.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:28.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ddcf7f2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa4a0eb] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:28.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e09e23]
2026-01-08T17:34:28.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@727068494 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:28.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@335689175 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:28.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@475c264a]
2026-01-08T17:34:28.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:28.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@588c9546] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.916+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:34:28.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:28.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:28.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:28.921+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1818268380 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:28.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789715f6]
2026-01-08T17:34:28.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:28.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:34:28.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a0da2bd] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:28.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:28.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1548072384 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:28.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:34:28.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:28.947+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d261b4b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:28.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:34:28.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@761170876 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:28.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:28.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:34:28.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:28.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:34:28.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:28.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa4a0eb]
2026-01-08T17:34:28.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ddcf7f2]
2026-01-08T17:34:28.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:34:28.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:28.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:34:28.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191692f2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@207d18bd] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:28.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1189792451 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:28.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171182119 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:28.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:28.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256bdd86] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:28.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:28.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:28.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:28.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:28.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@588c9546]
2026-01-08T17:34:28.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1469192819 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:28.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:28.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:28.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:28.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d261b4b]
2026-01-08T17:34:28.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a0da2bd]
2026-01-08T17:34:28.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:28.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:28.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:29.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:29.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:29.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6606f030] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191692f2]
2026-01-08T17:34:29.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13bcf243] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@207d18bd]
2026-01-08T17:34:29.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1000817656 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:29.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:29.009+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:29.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@78881475 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:29.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:29.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:34:29.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@256bdd86]
2026-01-08T17:34:29.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:29.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:29.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42deb2d6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:34:29.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:29.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:29.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170844864 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:29.021+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:29.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:34:29.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:29.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:34:29.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:29.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:29.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:29.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:29.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6606f030]
2026-01-08T17:34:29.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:29.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:29.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@360e7a38] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:29.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13bcf243]
2026-01-08T17:34:29.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5371d604] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:29.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1742244793 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:29.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:29.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@222572656 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:29.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42deb2d6]
2026-01-08T17:34:29.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:29.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615954b5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:29.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:29.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360946743 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:29.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12466ed2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a39906] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:29.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:29.042+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1208904924 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:29.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@350013350 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:29.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:29.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:29.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:29.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:29.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@360e7a38]
2026-01-08T17:34:29.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:29.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:29.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:29.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:29.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5371d604]
2026-01-08T17:34:29.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@615954b5]
2026-01-08T17:34:29.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:34:29.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:29.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12466ed2]
2026-01-08T17:34:29.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:29.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364da4b5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@488284725 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:29.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:29.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:29.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:29.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a39906]
2026-01-08T17:34:29.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:29.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f1e188] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066033593 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:29.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:29.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:29.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:29.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@364da4b5]
2026-01-08T17:34:29.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:29.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6431a484] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f1e188]
2026-01-08T17:34:29.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1057152187 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:29.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:29.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2876a552] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:29.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1665203317 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:29.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:29.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:29.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:29.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6431a484]
2026-01-08T17:34:29.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9746d6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:29.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@99342916 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:29.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2876a552]
2026-01-08T17:34:29.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:29.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:29.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9709db4] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@347207165 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:29.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:29.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:29.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:29.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9746d6]
2026-01-08T17:34:29.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554ed45c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:29.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@54102485 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:29.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9709db4]
2026-01-08T17:34:29.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:29.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:29.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:29.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.094+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:29.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554ed45c]
2026-01-08T17:34:29.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db12748] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122249366 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:29.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:29.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:29.100+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:29.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db12748]
2026-01-08T17:34:29.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:29.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:29.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:29.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:29.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:29.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:29.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:29.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:29.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:29.430+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:29.432+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:29.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:29.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:29.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:29.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:29.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:29.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:29.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:29.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:29.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:29.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@742e6680] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:29.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:29.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699551735 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:29.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:29.470+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:29.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:29.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d755b5a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.470+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:29.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686764918 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:29.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:29.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551d0c3d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a14721a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:29.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1955383474 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:29.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1374162227 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:29.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:29.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:29.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:29.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:29.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:29.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:29.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:29.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:29.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:29.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d755b5a]
2026-01-08T17:34:29.508+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@551d0c3d]
2026-01-08T17:34:29.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@742e6680]
2026-01-08T17:34:29.513+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a14721a]
2026-01-08T17:34:29.513+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:29.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@602215a5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39195812] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:29.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:29.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:29.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@659172720 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:29.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@81319912 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:29.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:29.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:29.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:29.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:29.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:29.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:29.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@602215a5]
2026-01-08T17:34:29.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:29.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39195812]
2026-01-08T17:34:29.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:29.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:29.651+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:29.954+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-08T17:34:29.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-08T17:34:29.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/logout
2026-01-08T17:34:29.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-08T17:34:29.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-08T17:34:30.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-08T17:34:30.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-08T17:34:30.024+09:00  INFO 23448 --- [http-nio-8080-exec-7] SECURITY                                 : LOGOUT userId=1
2026-01-08T17:34:30.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:30.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-08T17:34:30.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:33.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:34:33.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:34:33.798+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:34:33.798+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:34:33.798+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:34:33.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:34:33.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user1, password=1234)]
2026-01-08T17:34:33.804+09:00  INFO 23448 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user1
2026-01-08T17:34:33.810+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:33.810+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab2038a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:33.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@238602040 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:33.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:34:33.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user1(String)
2026-01-08T17:34:33.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T17:34:33.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab2038a]
2026-01-08T17:34:33.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:33.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df9c646] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:33.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@256356039 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:33.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:33.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-08T17:34:34.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T17:34:34.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df9c646]
2026-01-08T17:34:34.002+09:00  INFO 23448 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 로그인 성공 - userId: 2, role: USER, companyId: 2
2026-01-08T17:34:34.004+09:00  INFO 23448 --- [http-nio-8080-exec-9] SECURITY                                 : LOGIN_SUCCESS userId=2 username=test_user1 role=USER
2026-01-08T17:34:34.009+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=2, username=test_user1, password (truncated)...]
2026-01-08T17:34:34.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T17:34:34.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T17:34:34.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/companies
2026-01-08T17:34:34.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T17:34:34.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T17:34:34.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T17:34:34.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31712663] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@217177639 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:34.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T17:34:34.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-08T17:34:34.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-08T17:34:34.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31712663]
2026-01-08T17:34:34.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-08T17:34:34.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:34.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:34.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:34.310+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:34.310+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:34.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:34.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:34.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:34.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:34.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:34.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:34.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:34.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:34.343+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:34.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:34.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:34.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:34:34.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:34.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:34:34.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:34.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:34.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:34.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:34.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:34.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:34.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:34.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:34.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:34.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:34:34.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:34.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:34.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:34:34.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:34.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:34.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:34.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:34.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33cf1ab3] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:34.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:34.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:34.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ce4a84] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f9b290] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@688e337d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd7b94b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7926e65c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1799581797 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:34.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1397995349 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:34.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:34.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858302661 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:34.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:34.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:34.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457003132 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:34.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:34.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415065822 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:34.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2008870750 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:34.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:34.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:34.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:34.404+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:34.405+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f9b290]
2026-01-08T17:34:34.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:34.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.418+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ce4a84]
2026-01-08T17:34:34.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@688e337d]
2026-01-08T17:34:34.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:34.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:34.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.419+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:34.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33cf1ab3]
2026-01-08T17:34:34.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1afa1332] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd7b94b]
2026-01-08T17:34:34.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7926e65c]
2026-01-08T17:34:34.429+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:34.431+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:34.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@183562371 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:34.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:34.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:34.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2a9e5f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:34.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:34.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:34.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1469898585 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:34.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:34.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:34.463+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:34.463+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:34.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:34.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:34:34.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:34.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1afa1332]
2026-01-08T17:34:34.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:34.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:34.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a46d50] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:34:34.478+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.478+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2a9e5f]
2026-01-08T17:34:34.478+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@531943309 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:34.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bbfc932] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:34.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3360184d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1038375881 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:34.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:34.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1368795892 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:34.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7797e482] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:34.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1859540041 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:34.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:34.484+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:34.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32e6e548] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:34.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:34.488+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:34.490+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117340044 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:34.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:34.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:34.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a46d50]
2026-01-08T17:34:34.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3360184d]
2026-01-08T17:34:34.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:34.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:34.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:34.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:34.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bbfc932]
2026-01-08T17:34:34.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7797e482]
2026-01-08T17:34:34.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.510+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32e6e548]
2026-01-08T17:34:34.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251941a9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@483b4a82] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074457185 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:34.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@4195571 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:34.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c5ae149] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.518+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957583151 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.527+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.534+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@483b4a82]
2026-01-08T17:34:34.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@251941a9]
2026-01-08T17:34:34.535+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c5ae149]
2026-01-08T17:34:34.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af9702e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100e362] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.536+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73aa1956] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@402937001 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:34.537+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862004450 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:34.538+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@403828419 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:34.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:34.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:34.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:34.543+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:34.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:34.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:34.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:34.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af9702e]
2026-01-08T17:34:34.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100e362]
2026-01-08T17:34:34.550+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f13e78] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:34.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4abedcf] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1187530408 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:34.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73aa1956]
2026-01-08T17:34:34.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@37098955 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:34.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:34.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.552+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:34.553+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:34.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d75303e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:34.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1580656239 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:34.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:34.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d75303e]
2026-01-08T17:34:34.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f13e78]
2026-01-08T17:34:34.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4abedcf]
2026-01-08T17:34:34.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7568305] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7953e514] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60a829e6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1408673553 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2011104952 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:34.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1001809321 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:34.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:34.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:34.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:34.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7568305]
2026-01-08T17:34:34.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7953e514]
2026-01-08T17:34:34.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60a829e6]
2026-01-08T17:34:34.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40429fdd] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1008e39e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61437e14] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1933537915 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1981140942 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:34.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074105539 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:34.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:34.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:34.582+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:34.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:34.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:34.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:34.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:34.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:34.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:34.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1008e39e]
2026-01-08T17:34:34.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61437e14]
2026-01-08T17:34:34.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40429fdd]
2026-01-08T17:34:34.586+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.590+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e52e7d8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.587+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d8dd02a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.589+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245c7263] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.592+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@716841912 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.592+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1783549974 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:34.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1586830114 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:34.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245c7263]
2026-01-08T17:34:34.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d8dd02a]
2026-01-08T17:34:34.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e52e7d8]
2026-01-08T17:34:34.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:34.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:34.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b49c7c2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1657572692 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:34.651+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:34.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:34.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b49c7c2]
2026-01-08T17:34:34.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a5c998a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@258879700 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:34.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:34.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:34.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a5c998a]
2026-01-08T17:34:34.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:34.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.761+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:34.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:34.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:34.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:34.772+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:34.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:34.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:34.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:34.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:34.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:34.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:34.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:34.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:34.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701ee814] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bd0419] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:34.782+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@350851176 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:34.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1103810323 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:34.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:34.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:34.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:34.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:34.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:34.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:34.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701ee814]
2026-01-08T17:34:34.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bd0419]
2026-01-08T17:34:34.791+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:34.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:34.793+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:34.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:34.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:36.258+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:36.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:36.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T17:34:36.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:34:36.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-08T17:34:36.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-08T17:34:36.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:36.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:36.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:36.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:36.351+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:36.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:36.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:36.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T17:34:36.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:34:36.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/me
2026-01-08T17:34:36.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-08T17:34:36.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-08T17:34:36.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/companies/pending
2026-01-08T17:34:36.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:36.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:36.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dcd6669] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:36.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/companies
2026-01-08T17:34:36.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T17:34:36.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/me
2026-01-08T17:34:36.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-08T17:34:36.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:36.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:34:36.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T17:34:36.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-08T17:34:36.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-08T17:34:36.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1047183905 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:36.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:36.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:34:36.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T17:34:36.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-08T17:34:36.388+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 2, companyId: 2
2026-01-08T17:34:36.386+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-08T17:34:36.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:36.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:36.387+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:34:36.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-08T17:34:36.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:36.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:36.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:36.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb053cd] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:36.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:36.863+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a839064] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:36.859+09:00  INFO 23448 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 2, companyId: 2
2026-01-08T17:34:36.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d10f5a6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:36.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64939de3] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:36.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:36.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4405fb07] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:36.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@976507651 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:36.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1685208543 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:36.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:36.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:36.871+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:36.874+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dcd6669]
2026-01-08T17:34:36.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1261406063 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:36.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123768745 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:36.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1275834799 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:36.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:36.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-08T17:34:36.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:36.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:36.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:36.882+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:36.883+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:36.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T17:34:36.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:36.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 2(Long), PENDING(String)
2026-01-08T17:34:36.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:36.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:36.893+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:36.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a839064]
2026-01-08T17:34:36.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:36.904+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=10, userId=2, companyId= (truncated)...]
2026-01-08T17:34:36.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb053cd]
2026-01-08T17:34:36.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:36.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-08T17:34:36.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:36.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:36.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:36.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4405fb07]
2026-01-08T17:34:36.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64939de3]
2026-01-08T17:34:36.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d10f5a6]
2026-01-08T17:34:36.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:36.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:36.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:36.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:36.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:36.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfae4bf] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:36.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:36.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@94aa885] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:36.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@237148730 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:36.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:36.934+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1549058772 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:36.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:36.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:36.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-08T17:34:36.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-08T17:34:36.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T17:34:36.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-08T17:34:36.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfae4bf]
2026-01-08T17:34:36.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@94aa885]
2026-01-08T17:34:36.962+09:00  INFO 23448 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 2, companyId: 2, role: USER
2026-01-08T17:34:36.963+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 2, companyId: 2, role: USER
2026-01-08T17:34:36.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:36.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:36.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=2, username=test_user1, passw (truncated)...]
2026-01-08T17:34:36.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=2, username=test_user1, passw (truncated)...]
2026-01-08T17:34:36.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:36.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:37.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:37.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:37.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:37.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:37.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:37.078+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:37.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:37.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:37.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:37.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:37.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:37.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:37.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:37.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:37.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c18f97e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:37.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ebf45a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:37.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@524778583 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:37.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953528260 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:37.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:37.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:37.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:37.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:37.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:37.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:37.089+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ebf45a]
2026-01-08T17:34:37.091+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c18f97e]
2026-01-08T17:34:37.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:37.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:37.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:37.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:37.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:37.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:39.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:39.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:39.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-08T17:34:39.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-08T17:34:39.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:39.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-08T17:34:39.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:39.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-08T17:34:39.974+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:39.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:39.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/cards/company
2026-01-08T17:34:39.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-08T17:34:39.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:39.991+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/cards/company
2026-01-08T17:34:39.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:39.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-08T17:34:39.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:39.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-08T17:34:39.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:39.999+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-08T17:34:40.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:40.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-08T17:34:40.000+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:40.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:40.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc3f1c3] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:40.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:40.002+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-08T17:34:40.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4d6cbe] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:40.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:40.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39fe0578] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:40.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:40.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be7efb9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:40.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@326573126 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:40.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1577126185 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:40.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@521445441 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:40.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-08T17:34:40.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052396408 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:40.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:40.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:40.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-08T17:34:40.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-08T17:34:40.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:40.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:40.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-08T17:34:40.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:40.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 0
2026-01-08T17:34:40.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39fe0578]
2026-01-08T17:34:40.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 0
2026-01-08T17:34:40.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:40.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc3f1c3]
2026-01-08T17:34:40.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:40.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be7efb9]
2026-01-08T17:34:40.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4d6cbe]
2026-01-08T17:34:40.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:40.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:40.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:40.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:40.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[])]
2026-01-08T17:34:40.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:40.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[])]
2026-01-08T17:34:40.054+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:40.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:40.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:40.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:40.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:40.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:40.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:40.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:40.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:40.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:40.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:40.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:40.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:40.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:40.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:40.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:40.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:40.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:40.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bdd470c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:40.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20994e87] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:40.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1926921919 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:40.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1832154299 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:40.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:40.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:40.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:40.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:40.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:40.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:40.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bdd470c]
2026-01-08T17:34:40.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20994e87]
2026-01-08T17:34:40.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:40.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:40.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:40.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:40.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:40.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:41.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:41.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:41.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:41.684+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:41.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:41.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:41.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:41.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:41.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:41.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:41.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:41.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:41.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:41.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:41.703+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:41.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:34:41.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:41.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:41.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:41.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:41.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:34:41.734+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:41.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:41.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:41.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:41.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5c2ea3] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:41.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59fb1cec] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:41.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:41.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:41.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-08T17:34:41.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:41.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a23fea8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-08T17:34:41.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8abcab] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:41.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1981986403 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:41.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835897138 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:41.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-08T17:34:41.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:41.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:41.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:41.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:41.798+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.798+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:41.799+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:41.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d3e6ac] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.800+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199284613 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:41.802+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1721614013 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:41.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57741646] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:41.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:41.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:41.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1724569203 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:41.822+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:41.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:41.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1266755955 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:41.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:41.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:41.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59fb1cec]
2026-01-08T17:34:41.830+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5c2ea3]
2026-01-08T17:34:41.831+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:41.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:41.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:41.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:41.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a89d115] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:41.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:41.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:41.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378235165 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:41.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:41.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8abcab]
2026-01-08T17:34:41.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a23fea8]
2026-01-08T17:34:41.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:41.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:41.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:41.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d3e6ac]
2026-01-08T17:34:41.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:41.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:41.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:41.863+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57741646]
2026-01-08T17:34:41.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:41.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:41.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:41.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:41.887+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:41.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:41.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372b7c02] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:41.899+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254211974 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:41.900+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:41.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:41.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:41.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a89d115]
2026-01-08T17:34:41.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.919+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc41b5b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533819983 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:41.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:41.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:41.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372b7c02]
2026-01-08T17:34:41.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:41.935+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce487f8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891840778 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:41.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:41.945+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:41.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:41.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc41b5b]
2026-01-08T17:34:41.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d39bc3f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:41.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce487f8]
2026-01-08T17:34:41.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1183607808 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:41.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:41.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715e85a3] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:41.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228736311 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:41.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:41.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:41.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:41.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:41.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715e85a3]
2026-01-08T17:34:41.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d39bc3f]
2026-01-08T17:34:41.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@442ada34] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b60a8d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1096559759 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:41.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1506707904 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:41.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:41.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:41.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:41.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:41.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:41.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:41.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b60a8d]
2026-01-08T17:34:41.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@442ada34]
2026-01-08T17:34:41.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:41.986+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77bbb70c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391cc1b4] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:41.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1041246484 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:41.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@729106393 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:41.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:41.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:41.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:41.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:42.003+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:42.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391cc1b4]
2026-01-08T17:34:42.004+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:42.005+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 5
2026-01-08T17:34:42.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@274140c2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:42.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77bbb70c]
2026-01-08T17:34:42.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022651135 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:42.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:42.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:42.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57ea1cd7] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:42.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:42.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2109981425 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:42.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:42.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:42.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:42.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@274140c2]
2026-01-08T17:34:42.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:42.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:42.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bb930b2] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:42.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57ea1cd7]
2026-01-08T17:34:42.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@919807063 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:42.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:42.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:42.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38dfdad0] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:42.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:42.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1070888376 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:42.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:42.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-08T17:34:42.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:42.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bb930b2]
2026-01-08T17:34:42.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 5
2026-01-08T17:34:42.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:42.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38dfdad0]
2026-01-08T17:34:42.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611447c6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:42.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:42.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872077302 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:42.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e43191d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:42.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:42.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022460767 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:42.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:42.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:42.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-08T17:34:42.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:42.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:42.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e43191d]
2026-01-08T17:34:42.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611447c6]
2026-01-08T17:34:42.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:42.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:42.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:42.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:42.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:42.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:42.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:42.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:42.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:42.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:42.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:42.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:42.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:42.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:42.154+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:42.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:42.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:42.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:42.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:42.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:42.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf95c36] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:42.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@616f2656] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:42.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503219110 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:42.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:42.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:42.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199795082 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:42.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:42.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:42.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:42.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf95c36]
2026-01-08T17:34:42.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:42.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:42.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@616f2656]
2026-01-08T17:34:42.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:42.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:42.187+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:42.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:42.196+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:45.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:45.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:45.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-08T17:34:45.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-08T17:34:45.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-08T17:34:45.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/approvers/active
2026-01-08T17:34:45.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:45.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-08T17:34:45.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:45.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-08T17:34:45.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:45.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-08T17:34:45.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/2/approvers/active
2026-01-08T17:34:45.105+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-08T17:34:45.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expense-categories/merged
2026-01-08T17:34:45.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expense-categories/merged
2026-01-08T17:34:45.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:45.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:45.110+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/2/approvers/active
2026-01-08T17:34:45.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/2/approvers/active
2026-01-08T17:34:45.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:45.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-08T17:34:45.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-08T17:34:45.127+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-08T17:34:45.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-08T17:34:45.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:45.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-08T17:34:45.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:45.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1515c8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:45.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/2/approvers/active
2026-01-08T17:34:45.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:45.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-08T17:34:45.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-08T17:34:45.137+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-08T17:34:45.142+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/2/approvers/active", parameters={}
2026-01-08T17:34:45.143+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:45.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:45.146+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451671b7] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:45.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-08T17:34:45.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-08T17:34:45.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-08T17:34:45.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-08T17:34:45.145+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-08T17:34:45.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:45.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f7705b6] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:45.161+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-08T17:34:45.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T17:34:45.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T17:34:45.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:45.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e62792] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:45.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T17:34:45.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T17:34:45.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:45.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2164beee] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:45.174+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:45.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121604521 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:45.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969050795 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:45.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1531234589 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:45.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1932420047 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:45.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658814286 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:45.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@341bc049] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:45.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:45.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-08T17:34:45.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:45.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-08T17:34:45.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-08T17:34:45.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:45.285+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:45.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:45.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660161514 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:45.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:45.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:45.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-08T17:34:45.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 2(Long), 2(Long)
2026-01-08T17:34:45.330+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:45.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451671b7]
2026-01-08T17:34:45.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:45.334+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-08T17:34:45.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:45.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d1515c8]
2026-01-08T17:34:45.335+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2164beee]
2026-01-08T17:34:45.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:45.337+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:45.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:45.344+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:45.344+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:45.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=10, username=test_accountant, password (truncated)...]
2026-01-08T17:34:45.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:45.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 1
2026-01-08T17:34:45.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:45.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@341bc049]
2026-01-08T17:34:45.356+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:45.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=10, username=test_accountant, password (truncated)...]
2026-01-08T17:34:45.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:45.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-08T17:34:45.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f7705b6]
2026-01-08T17:34:45.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:45.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-08T17:34:45.377+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-08T17:34:45.377+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e62792]
2026-01-08T17:34:45.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:45.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:45.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-08T17:34:45.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:48.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-08T17:34:48.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-08T17:34:48.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/logout
2026-01-08T17:34:48.968+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-08T17:34:48.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-08T17:34:48.969+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-08T17:34:48.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIyIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-08T17:34:49.058+09:00  INFO 23448 --- [http-nio-8080-exec-1] SECURITY                                 : LOGOUT userId=2
2026-01-08T17:34:49.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:49.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-08T17:34:49.128+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:51.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-08T17:34:51.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-08T17:34:51.307+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-08T17:34:51.307+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-08T17:34:51.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-08T17:34:51.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-08T17:34:51.310+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-08T17:34:51.310+09:00  INFO 23448 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-08T17:34:51.311+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:51.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8ad65e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:51.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1531162883 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:51.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-08T17:34:51.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-08T17:34:51.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-08T17:34:51.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8ad65e]
2026-01-08T17:34:51.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:51.464+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49afd2ba] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:51.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1800208037 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:51.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:51.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:51.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:51.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49afd2ba]
2026-01-08T17:34:51.482+09:00  INFO 23448 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 1
2026-01-08T17:34:51.484+09:00  INFO 23448 --- [http-nio-8080-exec-6] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-08T17:34:51.485+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:51.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-08T17:34:51.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:51.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T17:34:51.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T17:34:51.670+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-08T17:34:51.677+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T17:34:51.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T17:34:51.695+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T17:34:51.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:51.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1688dc8b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:51.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@891451676 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:51.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T17:34:51.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-08T17:34:51.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:51.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:51.762+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:51.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:51.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:51.856+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:34:51.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-08T17:34:51.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1688dc8b]
2026-01-08T17:34:51.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:51.865+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:51.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:51.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:34:51.868+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:51.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:51.869+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T17:34:51.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:34:51.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:51.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:51.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:51.877+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:51.876+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:51.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:51.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:51.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:51.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:34:51.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:51.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:51.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:51.885+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:51.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:51.902+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:51.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:51.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:51.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:51.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:51.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:51.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:51.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:51.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:34:51.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:51.918+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:51.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:51.920+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:51.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:51.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:34:51.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:51.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:51.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:51.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:51.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a04969e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:51.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:51.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297dc423] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:51.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bff9fc0] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:51.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:51.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:51.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:51.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2050517969 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:51.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:51.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbd64c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:51.952+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:51.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:51.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5749f21e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:51.953+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69294696] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:51.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:51.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@143252075 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:51.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@306545945 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:51.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@118068025 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:51.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1637880618 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:51.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089881726 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:51.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:51.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:51.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:51.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:51.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:51.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:51.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a04969e]
2026-01-08T17:34:51.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:51.990+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:52.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:52.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:52.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:52.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee1297b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14675551 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:52.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:52.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:52.037+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:52.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:52.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:52.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:52.042+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:52.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbd64c]
2026-01-08T17:34:52.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5749f21e]
2026-01-08T17:34:52.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69294696]
2026-01-08T17:34:52.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297dc423]
2026-01-08T17:34:52.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bff9fc0]
2026-01-08T17:34:52.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.047+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ca97eb] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:52.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@711e26b3] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:52.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:52.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1382757933 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:52.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813065120 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:52.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:52.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:52.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:52.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:52.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:52.110+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:52.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:52.094+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee1297b]
2026-01-08T17:34:52.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:52.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:52.110+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:52.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:52.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:52.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:52.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:52.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:52.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:52.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:52.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:52.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:52.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:52.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:52.142+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a9c55b8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:52.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:52.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:52.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:52.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71a64662] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@319755925 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:52.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ca97eb]
2026-01-08T17:34:52.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@711e26b3]
2026-01-08T17:34:52.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:52.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:52.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@759964433 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:52.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:52.183+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.184+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:52.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:52.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:52.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:52.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283b7a92] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1168360881 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:52.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:52.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:52.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:52.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f7ba11] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:52.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:52.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:52.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@565751078 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:52.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:52.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:52.247+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:52.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:34:52.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bf19a32] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:52.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:52.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a9c55b8]
2026-01-08T17:34:52.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:34:52.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947798234 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:52.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71a64662]
2026-01-08T17:34:52.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:34:52.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:52.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:52.310+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:52.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:34:52.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:52.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:52.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a531228] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283b7a92]
2026-01-08T17:34:52.320+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:34:52.321+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:52.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@419813974 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:52.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.350+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10587cca] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.327+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:52.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:34:52.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50642f5d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@284425164 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:52.352+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:52.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:52.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@595075113 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:52.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:52.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bf19a32]
2026-01-08T17:34:52.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:52.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:52.384+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:52.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:34:52.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:52.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:52.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:52.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:52.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:34:52.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:52.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f7ba11]
2026-01-08T17:34:52.417+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:52.427+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:52.433+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:52.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.434+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:52.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a531228]
2026-01-08T17:34:52.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:52.435+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:52.436+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74357a0c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:52.449+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:52.450+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829867639 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:52.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:52.451+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.452+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:52.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:52.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:52.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567ecd6c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.466+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:52.467+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:52.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095368091 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:52.469+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50642f5d]
2026-01-08T17:34:52.470+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10587cca]
2026-01-08T17:34:52.471+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:52.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:52.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:52.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:52.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:52.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:52.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:52.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c82820] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.501+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74357a0c]
2026-01-08T17:34:52.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:34:52.513+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:52.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437066531 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:52.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:52.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:52.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:52.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17cca123] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.533+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:52.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1215712460 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:52.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-08T17:34:52.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:52.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:52.545+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:52.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:52.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:52.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-08T17:34:52.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-08T17:34:52.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@193a718c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:52.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:52.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:52.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:52.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:52.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:52.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:52.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ca83b7] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1913208965 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:52.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:52.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:52.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:52.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:52.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:52.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c82820]
2026-01-08T17:34:52.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:52.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17cca123]
2026-01-08T17:34:52.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203b4fbc] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1163393715 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:52.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:52.614+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:52.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@804427580 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:52.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:52.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:52.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fedf189] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:52.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:52.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:52.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@500859118 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:52.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:52.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:52.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:52.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f25d55] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:52.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:52.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:52.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:52.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ca83b7]
2026-01-08T17:34:52.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086349 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:52.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567ecd6c]
2026-01-08T17:34:52.649+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@193a718c]
2026-01-08T17:34:52.651+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203b4fbc]
2026-01-08T17:34:52.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.718+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:52.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:52.790+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:52.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:52.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fedf189]
2026-01-08T17:34:52.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:52.817+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:52.818+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:52.818+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa900a9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.823+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.818+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.822+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:52.824+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@93713999 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:52.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-08T17:34:52.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:52.826+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61cfcdd9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:52.827+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-08T17:34:52.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:34:52.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:52.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1638795728 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:52.829+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:52.844+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-08T17:34:52.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-08T17:34:52.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:52.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:52.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:52.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-08T17:34:52.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-08T17:34:52.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f25d55]
2026-01-08T17:34:52.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:52.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:52.853+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-08T17:34:52.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:34:52.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:52.864+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:52.866+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-08T17:34:52.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43621806] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:52.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa900a9]
2026-01-08T17:34:52.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:52.903+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6201db8c] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@37481930 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:52.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61cfcdd9]
2026-01-08T17:34:52.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612a69a7] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-08T17:34:52.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@571882304 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:52.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:52.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693359023 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:52.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce38daf] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:52.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:52.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:52.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a95e74e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:52.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2079875282 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:52.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154821f8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:52.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:52.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437293248 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:52.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:52.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:52.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1464382251 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:52.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:53.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43621806]
2026-01-08T17:34:53.011+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:53.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:53.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:53.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-08T17:34:53.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6201db8c]
2026-01-08T17:34:53.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:53.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:53.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:53.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f8378] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856959756 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:53.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:53.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-08T17:34:53.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-08T17:34:53.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-08T17:34:53.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-08T17:34:53.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-08T17:34:53.036+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:53.038+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:53.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:53.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-08T17:34:53.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612a69a7]
2026-01-08T17:34:53.073+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce38daf]
2026-01-08T17:34:53.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@463e7618] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45303fca] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:53.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@383784325 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:53.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:53.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-08T17:34:53.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:53.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a95e74e]
2026-01-08T17:34:53.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1109224678 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:53.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:53.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f8378]
2026-01-08T17:34:53.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-08T17:34:53.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.094+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-08T17:34:53.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:53.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-08T17:34:53.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5e3cac] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-08(LocalDate)
2026-01-08T17:34:53.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8546d1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-08T17:34:53.113+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1486099422 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:53.114+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154821f8]
2026-01-08T17:34:53.114+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@67047002 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.114+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:53.115+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:53.116+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.116+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:53.121+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:53.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-08T17:34:53.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@463e7618]
2026-01-08T17:34:53.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:53.119+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-08T17:34:53.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45303fca]
2026-01-08T17:34:53.124+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.126+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:53.135+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-08T17:34:53.136+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:53.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.141+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:53.143+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5e3cac]
2026-01-08T17:34:53.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8546d1]
2026-01-08T17:34:53.147+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.147+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.160+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e07fdf] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f990d5d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236421235 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:53.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@947744177 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.167+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:53.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:53.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:53.169+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:53.176+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:53.176+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:53.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f990d5d]
2026-01-08T17:34:53.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e07fdf]
2026-01-08T17:34:53.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d18d19a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.179+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@101f6589] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2060246145 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.180+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371602642 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:53.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:53.182+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:53.185+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:53.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:53.197+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:53.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:53.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@101f6589]
2026-01-08T17:34:53.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d18d19a]
2026-01-08T17:34:53.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e9a4d69] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d7987e] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1430410270 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:53.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@676862879 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:53.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:34:53.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:53.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:34:53.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:53.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-08T17:34:53.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e9a4d69]
2026-01-08T17:34:53.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d7987e]
2026-01-08T17:34:53.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:53.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64079986] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1797060880 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:53.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:53.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:53.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64079986]
2026-01-08T17:34:53.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.233+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d9134a] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@147483518 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:34:53.237+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:34:53.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 33
2026-01-08T17:34:53.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:53.247+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:53.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:53.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:53.250+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d9134a]
2026-01-08T17:34:53.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdd478] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:53.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:53.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:53.261+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@463918094 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:53.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:53.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:53.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:34:53.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:53.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:53.263+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:53.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:34:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:53.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:53.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:53.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:53.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:34:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:53.268+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a138646] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdd478]
2026-01-08T17:34:53.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@511fec65] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.269+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aec8e8] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.270+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026285554 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:53.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ac48ef] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1688522472 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:53.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1134848440 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:53.279+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451900218 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:53.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:34:53.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:53.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:53.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:53.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:53.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:53.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:53.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:53.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:53.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:53.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:53.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:53.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a138646]
2026-01-08T17:34:53.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@511fec65]
2026-01-08T17:34:53.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ac48ef]
2026-01-08T17:34:53.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aec8e8]
2026-01-08T17:34:53.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.300+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:53.301+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:53.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:53.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@197765b9] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2984d56b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:53.302+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.303+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945550152 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:53.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1478271291 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:53.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:53.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:53.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:53.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:53.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:53.353+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:53.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2984d56b]
2026-01-08T17:34:53.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@197765b9]
2026-01-08T17:34:53.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:53.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:53.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:53.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:53.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:55.923+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:34:55.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:34:55.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:34:55.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-08T17:34:55.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-08T17:34:55.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/1/approvers/active
2026-01-08T17:34:55.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/1/approvers/active
2026-01-08T17:34:55.990+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:34:55.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:34:56.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:34:56.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-08T17:34:56.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/1/approvers/active
2026-01-08T17:34:56.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-08T17:34:56.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:34:56.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:34:56.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:34:56.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expense-categories/merged
2026-01-08T17:34:56.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/1/approvers/active
2026-01-08T17:34:56.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expense-categories/merged
2026-01-08T17:34:56.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:34:56.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:34:56.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:34:56.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-08T17:34:56.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/1/approvers/active
2026-01-08T17:34:56.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-08T17:34:56.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:34:56.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:34:56.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:34:56.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-08T17:34:56.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-08T17:34:56.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/1/approvers/active", parameters={}
2026-01-08T17:34:56.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-08T17:34:56.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-08T17:34:56.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:34:56.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T17:34:56.073+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:34:56.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:34:56.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-08T17:34:56.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-08T17:34:56.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T17:34:56.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.091+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c08c7d] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-08T17:34:56.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-08T17:34:56.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8d1121] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@680956ba] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-08T17:34:56.100+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3806b3b1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57d4541f] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.115+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@13562156 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:34:56.147+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:34:56.116+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1289916035 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:34:56.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ccbdfb1] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.131+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518438890 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:56.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:56.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1101962590 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:56.148+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2095905610 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:56.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:34:56.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:34:56.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-08T17:34:56.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-08T17:34:56.164+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:56.166+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:34:56.168+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:56.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:56.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 0
2026-01-08T17:34:56.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-08T17:34:56.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:34:56.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588365868 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:34:56.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:34:56.194+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-08T17:34:56.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3806b3b1]
2026-01-08T17:34:56.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8d1121]
2026-01-08T17:34:56.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@680956ba]
2026-01-08T17:34:56.217+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-08T17:34:56.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c08c7d]
2026-01-08T17:34:56.220+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57d4541f]
2026-01-08T17:34:56.229+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:56.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:56.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:56.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:56.235+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:56.245+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:56.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-08T17:34:56.247+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4cd7a7] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.248+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:34:56.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-08T17:34:56.249+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:56.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:56.251+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1200072706 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:56.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:56.252+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:56.257+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:34:56.259+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:34:56.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/1/approvers/active
2026-01-08T17:34:56.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/1/approvers/active
2026-01-08T17:34:56.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-01-08T17:34:56.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 12
2026-01-08T17:34:56.325+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:34:56.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/1/approvers/active
2026-01-08T17:34:56.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ccbdfb1]
2026-01-08T17:34:56.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4cd7a7]
2026-01-08T17:34:56.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/1/approvers/active", parameters={}
2026-01-08T17:34:56.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:56.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:56.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-08T17:34:56.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-08T17:34:56.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:56.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T17:34:56.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:56.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:56.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-08T17:34:56.401+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@730ec8bb] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.510+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-08T17:34:56.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099594852 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:56.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-08T17:34:56.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/approvers
2026-01-08T17:34:56.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:34:56.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-08T17:34:56.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-08T17:34:56.578+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-08T17:34:56.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d4482b] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1063720989 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:34:56.596+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-08T17:34:56.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-08T17:34:56.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 0
2026-01-08T17:34:56.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@730ec8bb]
2026-01-08T17:34:56.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-08T17:34:56.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:56.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52d4482b]
2026-01-08T17:34:56.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:34:56.633+09:00  INFO 23448 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-08T17:34:56.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:56.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:56.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-08T17:34:56.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:56.659+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-01-08T17:34:56.693+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-08T17:34:56.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/approvers
2026-01-08T17:34:56.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-08T17:34:56.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-08T17:34:56.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-08T17:34:56.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:56.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8483e4] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:56.821+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725973267 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:56.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-08T17:34:56.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-08T17:34:56.875+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-08T17:34:56.881+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d8483e4]
2026-01-08T17:34:56.883+09:00  INFO 23448 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-08T17:34:56.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:56.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-08T17:34:56.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:57.206+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-08T17:34:57.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-08T17:34:57.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-08T17:34:57.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-08T17:34:57.324+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/cards/company
2026-01-08T17:34:57.326+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/cards/user
2026-01-08T17:34:57.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-08T17:34:57.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-08T17:34:57.333+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-08T17:34:57.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-08T17:34:57.336+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-08T17:34:57.342+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-08T17:34:57.344+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:57.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:34:57.346+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aec75d5] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:57.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18317441] was not registered for synchronization because synchronization is not active
2026-01-08T17:34:57.349+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1262550377 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:34:57.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-08T17:34:57.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 1(Long)
2026-01-08T17:34:57.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1999243650 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:34:57.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-08T17:34:57.385+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:34:57.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : <==      Total: 0
2026-01-08T17:34:57.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-08T17:34:57.395+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18317441]
2026-01-08T17:34:57.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aec75d5]
2026-01-08T17:34:57.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:57.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:34:57.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[])]
2026-01-08T17:34:57.398+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-08T17:34:57.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:34:57.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:17.591+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/create
2026-01-08T17:35:17.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/create
2026-01-08T17:35:17.598+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/create
2026-01-08T17:35:17.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/create
2026-01-08T17:35:17.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/create", parameters={}
2026-01-08T17:35:17.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#createExpense(ExpenseReportDto)
2026-01-08T17:35:17.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseReportDto(expenseReportId=null, drafterId=1, reportDate=2026-01-08, title=null, totalAmount=1 (truncated)...]
2026-01-08T17:35:17.710+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.b.controller.ExpenseController       : 지출결의서 생성 요청 - drafterId: 1, currentUserId: 1, totalAmount: 10000
2026-01-08T17:35:17.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:17.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1782370802 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will be managed by Spring
2026-01-08T17:35:17.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:35:17.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:35:17.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:35:17.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.720+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de] from current transaction
2026-01-08T17:35:17.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status IN ('APPROVED', 'PAID') ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status IN ('APPROVED', 'PAID') ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-08T17:35:17.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 1(Long), 2026(Integer), 1(Integer), 1(Integer), 식비/회식(String)
2026-01-08T17:35:17.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-08T17:35:17.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de] from current transaction
2026-01-08T17:35:17.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status IN ('APPROVED', 'PAID') ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(COALESCE(ed.actual_paid_amount, ed.amount)) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status IN ('APPROVED', 'PAID') ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-08T17:35:17.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 1(Long), 2026(Integer), null, null, 식비/회식(String)
2026-01-08T17:35:17.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-08T17:35:17.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de] from current transaction
2026-01-08T17:35:17.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.insertExpenseReport            : ==>  Preparing: INSERT INTO expense_report_tb ( drafter_id, report_date, title, total_amount, status, payment_req_date, is_pre_approval, is_secret, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-08T17:35:17.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.insertExpenseReport            : ==> Parameters: 1(Long), 2026-01-08(LocalDate), 지출결의서 - 2026-01-08(String), 10000(Long), WAIT(String), 2026-01-08(LocalDate), false(Boolean), false(Boolean), 1(Long)
2026-01-08T17:35:17.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.insertExpenseReport            : <==    Updates: 1
2026-01-08T17:35:17.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.backend.service.ExpenseService       : 상세 항목 저장 시작 - 항목 수: 1
2026-01-08T17:35:17.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de] from current transaction
2026-01-08T17:35:17.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, NULL, ?, NULL, ?, ? )
2026-01-08T17:35:17.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 36(Long), 식비/회식(String), test(String), 1(String), 10000(Long), null, CASH(String), (String), (String), 1(Long)
2026-01-08T17:35:17.762+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-08T17:35:17.762+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.762+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.backend.service.ExpenseService       : 상세 항목 저장 완료
2026-01-08T17:35:17.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de] from current transaction
2026-01-08T17:35:17.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-08T17:35:17.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:17.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 0
2026-01-08T17:35:17.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.768+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.backend.service.ExpenseService       : 결재 라인은 setApprovalLines API를 통해 별도로 설정됩니다.
2026-01-08T17:35:17.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de] from current transaction
2026-01-08T17:35:17.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T17:35:17.769+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:17.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T17:35:17.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de] from current transaction
2026-01-08T17:35:17.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T17:35:17.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:17.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T17:35:17.782+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de] from current transaction
2026-01-08T17:35:17.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.A.findActiveByCompanyId          : ==>  Preparing: SELECT * FROM audit_rule_tb WHERE company_id = ? AND is_active = 1 ORDER BY rule_type, rule_name
2026-01-08T17:35:17.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.A.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-08T17:35:17.787+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.A.findActiveByCompanyId          : <==      Total: 0
2026-01-08T17:35:17.792+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.793+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.backend.service.ExpenseService       : 지출결의서 생성 완료 - expenseReportId: 36
2026-01-08T17:35:17.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.795+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350ac8de]
2026-01-08T17:35:17.818+09:00  INFO 23448 --- [http-nio-8080-exec-8] c.i.b.controller.ExpenseController       : 지출결의서 생성 완료 - expenseId: 36
2026-01-08T17:35:17.819+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:17.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=기안서 저장 성공, data=36)]
2026-01-08T17:35:17.820+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:17.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/36/approval-lines
2026-01-08T17:35:17.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/36/approval-lines
2026-01-08T17:35:17.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/36/approval-lines
2026-01-08T17:35:17.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/36/approval-lines
2026-01-08T17:35:17.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/36/approval-lines", parameters={}
2026-01-08T17:35:17.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#setApprovalLines(Long, ApprovalLineRequest)
2026-01-08T17:35:17.843+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseController.ApprovalLineRequest(approvalLines=[ApprovalLineDto(approvalLineId=null, expenseRep (truncated)...]
2026-01-08T17:35:17.847+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:17.849+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440f990e]
2026-01-08T17:35:17.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@880676137 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will be managed by Spring
2026-01-08T17:35:17.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.insertApprovalLine             : ==>  Preparing: INSERT INTO approval_line_tb ( expense_report_id, approver_id, step_order, status, approval_date, signature_data, rejection_reason, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-08T17:35:17.851+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.insertApprovalLine             : ==> Parameters: 36(Long), 1(Long), 1(Integer), WAIT(String), null, null, null, 1(Long)
2026-01-08T17:35:17.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.insertApprovalLine             : <==    Updates: 1
2026-01-08T17:35:17.886+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440f990e]
2026-01-08T17:35:17.889+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.backend.service.ExpenseService       : 결재 라인 저장 완료 - expenseReportId: 36, 라인 수: 1
2026-01-08T17:35:17.891+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440f990e]
2026-01-08T17:35:17.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440f990e]
2026-01-08T17:35:17.892+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440f990e]
2026-01-08T17:35:17.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:17.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재 라인 설정 성공, data=null)]
2026-01-08T17:35:17.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:17.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/36/receipt
2026-01-08T17:35:17.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/36/receipt
2026-01-08T17:35:17.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/36/receipt
2026-01-08T17:35:17.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/36/receipt
2026-01-08T17:35:17.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/36/receipt", parameters={multipart}
2026-01-08T17:35:17.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#uploadReceipt(Long, MultipartFile)
2026-01-08T17:35:17.997+09:00  INFO 23448 --- [http-nio-8080-exec-9] c.i.b.controller.ExpenseController       : 영수증 업로드 요청 - expenseId: 36, userId: 1, filename: 신용카드영수증샘플.pdf
2026-01-08T17:35:18.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:18.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334cbf3f]
2026-01-08T17:35:18.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@255704365 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will be managed by Spring
2026-01-08T17:35:18.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T17:35:18.057+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:18.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T17:35:18.114+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334cbf3f]
2026-01-08T17:35:18.115+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334cbf3f] from current transaction
2026-01-08T17:35:18.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:35:18.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:35:18.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:35:18.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334cbf3f]
2026-01-08T17:35:19.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334cbf3f] from current transaction
2026-01-08T17:35:19.216+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.insertReceipt      : ==>  Preparing: INSERT INTO receipt_tb ( expense_report_id, file_path, original_filename, file_size, uploaded_by, uploaded_at, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-08T17:35:19.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.insertReceipt      : ==> Parameters: 36(Long), uploads/receipts/36/4410f62e-3d1f-4a4d-bca6-5bd6f07399e4/receipt_20260108173519_신용카드영수증샘플.pdf(String), 신용카드영수증샘플.pdf(String), 313289(Long), 1(Long), 2026-01-08T17:35:19.081117900(LocalDateTime), 1(Long)
2026-01-08T17:35:19.440+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.insertReceipt      : <==    Updates: 1
2026-01-08T17:35:19.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334cbf3f]
2026-01-08T17:35:19.481+09:00  INFO 23448 --- [http-nio-8080-exec-9] SECURITY                                 : FILE_UPLOAD userId=1 expenseId=36 detail=신용카드영수증샘플.pdf
2026-01-08T17:35:19.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334cbf3f]
2026-01-08T17:35:19.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334cbf3f]
2026-01-08T17:35:19.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334cbf3f]
2026-01-08T17:35:19.592+09:00  INFO 23448 --- [http-nio-8080-exec-9] c.i.b.controller.ExpenseController       : 영수증 업로드 완료 - expenseId: 36
2026-01-08T17:35:19.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:19.639+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 업로드 완료, data=null)]
2026-01-08T17:35:19.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:20.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:35:20.722+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:35:20.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:35:20.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/36
2026-01-08T17:35:20.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T17:35:20.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/36
2026-01-08T17:35:20.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T17:35:20.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:35:20.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:35:20.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:35:20.878+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:35:20.879+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/36
2026-01-08T17:35:20.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/36
2026-01-08T17:35:20.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T17:35:20.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:35:20.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:35:20.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:35:20.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/36
2026-01-08T17:35:20.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me/signatures
2026-01-08T17:35:20.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:35:20.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:35:20.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:35:20.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/36", parameters={}
2026-01-08T17:35:20.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/36
2026-01-08T17:35:20.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T17:35:20.948+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:35:20.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:35:20.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:35:20.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T17:35:20.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/36
2026-01-08T17:35:20.966+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T17:35:20.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:35:20.967+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:20.975+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:35:20.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:20.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/36
2026-01-08T17:35:20.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T17:35:20.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:20.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68da4ab7] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:20.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:20.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79a01012] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:20.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/36", parameters={}
2026-01-08T17:35:20.984+09:00  INFO 23448 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 1, companyId: 1
2026-01-08T17:35:20.991+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T17:35:20.984+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@137d6716] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:20.985+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82f8d7b] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:20.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:20.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:20.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296244699 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:35:20.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a91faf] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:20.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d687c5b] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:20.998+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:35:21.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:21.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@147737315 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:35:21.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2061869192 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:35:21.001+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1760306352 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:21.009+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:35:21.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:35:21.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T17:35:21.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:35:21.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:21.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:21.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1272548823 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:21.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@303013850 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:35:21.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T17:35:21.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T17:35:21.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:21.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:21.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:35:21.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:35:21.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@137d6716]
2026-01-08T17:35:21.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T17:35:21.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:35:21.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68da4ab7]
2026-01-08T17:35:21.019+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.023+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79a01012]
2026-01-08T17:35:21.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82f8d7b]
2026-01-08T17:35:21.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T17:35:21.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-08T17:35:21.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e2cf4d] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d687c5b]
2026-01-08T17:35:21.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:21.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b1be61] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a91faf]
2026-01-08T17:35:21.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3adc6e4c] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1399780162 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:35:21.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:35:21.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1563388578 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:35:21.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:21.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@466285708 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:21.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:35:21.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af63c30] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:21.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:21.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=8, userId=1, si (truncated)...]
2026-01-08T17:35:21.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T17:35:21.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:35:21.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355991415 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:35:21.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:21.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:21.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T17:35:21.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:21.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T17:35:21.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me/signatures
2026-01-08T17:35:21.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:21.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T17:35:21.046+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T17:35:21.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T17:35:21.050+09:00  INFO 23448 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 1, companyId: 1
2026-01-08T17:35:21.050+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:35:21.052+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T17:35:21.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T17:35:21.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:21.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.053+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e2cf4d]
2026-01-08T17:35:21.058+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3adc6e4c]
2026-01-08T17:35:21.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af63c30]
2026-01-08T17:35:21.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b1be61]
2026-01-08T17:35:21.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c7a8724] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:21.059+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:21.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1549950793 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:35:21.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:35:21.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd78e38] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a39d8e2] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:35:21.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T17:35:21.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:21.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@639644032 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:21.061+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@290811433 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:35:21.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:21.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:21.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T17:35:21.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T17:35:21.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:21.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:21.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-08T17:35:21.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-08T17:35:21.069+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a39d8e2]
2026-01-08T17:35:21.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd78e38]
2026-01-08T17:35:21.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d81a1] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c990d6f] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@648521668 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:35:21.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T17:35:21.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1870454922 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:21.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:21.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T17:35:21.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:35:21.080+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-08T17:35:21.081+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c7a8724]
2026-01-08T17:35:21.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:21.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T17:35:21.083+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=8, userId=1, si (truncated)...]
2026-01-08T17:35:21.084+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d81a1]
2026-01-08T17:35:21.085+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:21.086+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.093+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f103431] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T17:35:21.095+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1896795899 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:35:21.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c990d6f]
2026-01-08T17:35:21.096+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:21.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:21.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:21.097+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3473aeb9] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:21.098+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1348808493 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:21.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:21.100+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:21.100+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:21.100+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f103431]
2026-01-08T17:35:21.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:21.101+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=36, drafterId=1, r (truncated)...]
2026-01-08T17:35:21.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:21.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:21.102+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3473aeb9]
2026-01-08T17:35:21.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:21.116+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=36, drafterId=1, r (truncated)...]
2026-01-08T17:35:21.118+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:35:22.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:35:22.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:35:22.468+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:35:22.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:35:22.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:35:22.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:35:22.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:35:22.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:35:22.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:35:22.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:35:22.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:35:22.542+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:35:22.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:35:22.551+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:35:22.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:35:22.557+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:35:22.557+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:35:22.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:35:22.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:35:22.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:35:22.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:35:22.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:35:22.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:35:22.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:35:22.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:35:22.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:35:22.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:35:22.565+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:35:22.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:35:22.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:35:22.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:35:22.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:35:22.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:35:22.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a101080] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.567+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:35:22.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b6381e] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.568+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:35:22.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:35:22.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:35:22.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:35:22.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.584+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@717594b7] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.597+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bd7656b] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.582+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fb39f01] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.583+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:35:22.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1838791373 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:35:22.585+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2053507795 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:35:22.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.600+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:35:22.602+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:35:22.606+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac4df6a] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.609+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:35:22.610+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:22.610+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056700735 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:22.610+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1270367222 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:35:22.610+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@156782187 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:35:22.611+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:35:22.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:35:22.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:35:22.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@433843656 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:22.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:35:22.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:22.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:22.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a101080]
2026-01-08T17:35:22.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b6381e]
2026-01-08T17:35:22.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e25fcbc] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:35:22.617+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:35:22.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598236143 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:35:22.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bd7656b]
2026-01-08T17:35:22.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fb39f01]
2026-01-08T17:35:22.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.618+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a0c2055] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@717594b7]
2026-01-08T17:35:22.619+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.620+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.621+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.622+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4c2b9c] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693512233 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:35:22.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ac4df6a]
2026-01-08T17:35:22.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:35:22.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1845680829 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:22.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:35:22.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af1bb4f] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:35:22.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1096134460 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:35:22.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15f10e6a] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:35:22.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e25fcbc]
2026-01-08T17:35:22.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2012664865 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:22.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:35:22.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:35:22.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:35:22.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:35:22.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a0c2055]
2026-01-08T17:35:22.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4c2b9c]
2026-01-08T17:35:22.633+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.634+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:35:22.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.635+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.639+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:35:22.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:35:22.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:35:22.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af1bb4f]
2026-01-08T17:35:22.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@779a2ab5] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:35:22.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15f10e6a]
2026-01-08T17:35:22.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@443019025 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:22.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4241f284] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:35:22.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:35:22.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:35:22.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:35:22.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@534650395 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:35:22.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:35:22.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de62668] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:35:22.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:35:22.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:35:22.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:35:22.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1618605536 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:22.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:35:22.651+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:35:22.652+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:22.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.659+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:35:22.659+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:35:22.660+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:35:22.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:35:22.660+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:35:22.660+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b7708] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:35:22.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@779a2ab5]
2026-01-08T17:35:22.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:35:22.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:35:22.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588630350 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:35:22.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623b0a34] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6cbb8e] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.664+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4241f284]
2026-01-08T17:35:22.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:35:22.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:35:22.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1154632516 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:22.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@625189230 wrapping com.mysql.cj.jdbc.ConnectionImpl@14f35e05] will not be managed by Spring
2026-01-08T17:35:22.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:35:22.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.666+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:35:22.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:22.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:35:22.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de62668]
2026-01-08T17:35:22.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f3503b] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.668+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:35:22.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@770399091 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:35:22.669+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b17d70d] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee0e487] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1920553045 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:35:22.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.674+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:35:22.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@45658800 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:22.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.674+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.674+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.674+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b7708]
2026-01-08T17:35:22.674+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:35:22.674+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:35:22.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623b0a34]
2026-01-08T17:35:22.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6cbb8e]
2026-01-08T17:35:22.676+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.677+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:35:22.677+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434c28de] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.677+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72fd374f] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.678+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f3503b]
2026-01-08T17:35:22.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee0e487]
2026-01-08T17:35:22.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2040324137 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:22.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@791907631 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:35:22.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:35:22.685+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:35:22.686+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.686+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.686+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:35:22.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.691+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.692+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b17d70d]
2026-01-08T17:35:22.693+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:35:22.693+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5fb5f] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.694+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:35:22.694+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.696+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1046012912 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:35:22.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cd7aed8] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.701+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:35:22.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@435007472 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:22.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:35:22.702+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.703+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.703+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:35:22.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72fd374f]
2026-01-08T17:35:22.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434c28de]
2026-01-08T17:35:22.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.707+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55bba03d] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd7571e] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323807370 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:35:22.709+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@771720418 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:22.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:35:22.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:35:22.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:35:22.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:35:22.711+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:35:22.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cd7aed8]
2026-01-08T17:35:22.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5fb5f]
2026-01-08T17:35:22.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a82b883] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064805477 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:22.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:35:22.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:35:22.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@582d1a5f] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.719+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:35:22.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1887071494 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:35:22.723+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd7571e]
2026-01-08T17:35:22.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:35:22.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:35:22.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:35:22.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:35:22.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55bba03d]
2026-01-08T17:35:22.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c602532] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a82b883]
2026-01-08T17:35:22.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@968551431 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:22.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a9a228] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8a0ba2] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:35:22.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@856944656 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:35:22.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@437998088 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:35:22.734+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@582d1a5f]
2026-01-08T17:35:22.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ba2663] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.741+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.742+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1618289097 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:35:22.742+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c602532]
2026-01-08T17:35:22.742+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.744+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ebf34d8] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872144776 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:22.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a9a228]
2026-01-08T17:35:22.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8a0ba2]
2026-01-08T17:35:22.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:35:22.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:35:22.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:35:22.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ba2663]
2026-01-08T17:35:22.751+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:35:22.756+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.752+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@689715e9] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.759+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1763688358 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:35:22.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:35:22.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:35:22.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:35:22.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ebf34d8]
2026-01-08T17:35:22.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b3524c] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877850742 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:35:22.773+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.773+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:35:22.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@689715e9]
2026-01-08T17:35:22.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:35:22.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401d662e] was not registered for synchronization because synchronization is not active
2026-01-08T17:35:22.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@276110233 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:35:22.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:35:22.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:35:22.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b3524c]
2026-01-08T17:35:22.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:35:22.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:35:22.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401d662e]
2026-01-08T17:35:22.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:35:22.785+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:35:22.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:35:22.786+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:29.742+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:36:29.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:36:29.753+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:36:29.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:36:29.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:36:29.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:36:29.743+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:36:29.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:36:29.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:36:29.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-08T17:36:29.759+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:36:29.761+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:36:29.762+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:36:29.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:36:29.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:36:29.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:36:29.811+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:36:29.812+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:36:29.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:36:29.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:36:29.815+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:36:29.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:36:29.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:36:29.839+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:36:29.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:36:29.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:36:29.837+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:36:29.839+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:36:29.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:36:29.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:36:29.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:36:29.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:36:29.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:36:29.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:36:29.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:36:29.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:36:29.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:36:29.842+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:36:29.850+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:36:29.858+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:36:29.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:36:29.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:36:29.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:36:29.859+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:36:29.897+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:36:29.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:36:29.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:29.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ddb323a] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:29.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:29.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:29.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:29.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:29.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:29.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67241f8] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:29.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e4920e3] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:29.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4683d01a] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:29.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab79747] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:29.922+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2152be0f] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:29.925+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@376942888 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:29.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:36:29.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1213716948 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:29.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@903394568 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:29.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:29.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:36:29.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:36:29.932+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:29.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116677706 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:29.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708688179 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:36:29.937+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1182034321 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:36:29.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:29.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:36:29.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:36:29.949+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:29.950+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:36:29.958+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:36:29.959+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ddb323a]
2026-01-08T17:36:29.960+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:29.961+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:36:29.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:36:29.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:29.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e4920e3]
2026-01-08T17:36:29.970+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:36:29.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:29.971+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:29.973+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635e4822] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:29.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@692069904 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:29.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:29.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:29.976+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:36:29.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:36:29.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:36:29.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:36:29.997+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:36:30.013+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67241f8]
2026-01-08T17:36:30.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.014+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ccb8b2] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.012+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:36:30.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1983365999 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:30.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:30.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:30.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6898b3] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.024+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@299925357 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:30.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:36:30.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:36:30.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:36:30.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:30.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635e4822]
2026-01-08T17:36:30.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2152be0f]
2026-01-08T17:36:30.031+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4683d01a]
2026-01-08T17:36:30.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab79747]
2026-01-08T17:36:30.032+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ccb8b2]
2026-01-08T17:36:30.033+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.039+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:30.043+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:30.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62964a01] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.044+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@beb152] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ed4966] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1474021461 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:30.067+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:36:30.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:36:30.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:36:30.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:36:30.063+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930957097 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:30.064+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2110013805 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:36:30.068+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:36:30.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:30.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:30.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:36:30.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:30.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6898b3]
2026-01-08T17:36:30.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:36:30.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:30.076+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712ab608] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.079+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1579681182 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:30.099+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:30.109+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:30.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:36:30.082+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:36:30.129+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.264+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@beb152]
2026-01-08T17:36:30.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:36:30.130+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:36:30.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:36:30.236+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712ab608]
2026-01-08T17:36:30.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:30.254+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:36:30.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:36:30.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:36:30.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad9d214] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62964a01]
2026-01-08T17:36:30.265+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ed4966]
2026-01-08T17:36:30.266+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:36:30.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:36:30.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:36:30.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253282364 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:36:30.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:30.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:36:30.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:30.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:36:30.296+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad29a6a] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:36:30.297+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:36:30.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:36:30.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72a144e6] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:36:30.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@709099891 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:30.313+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:30.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64bc13f8] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:36:30.315+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1321895435 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:36:30.316+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:30.317+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:36:30.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@995837349 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:30.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:36:30.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:36:30.348+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:36:30.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:30.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:36:30.360+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:36:30.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:36:30.358+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:36:30.359+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:30.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:36:30.445+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:36:30.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:36:30.494+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:36:30.540+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad9d214]
2026-01-08T17:36:30.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ad29a6a]
2026-01-08T17:36:30.541+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64bc13f8]
2026-01-08T17:36:30.544+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:36:30.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e24093] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:30.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:36:30.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:30.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbd864d] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1209692145 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:30.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:36:30.649+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:36:30.560+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.561+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56272fee] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658457676 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:36:30.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:30.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:30.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:36:30.659+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72a144e6]
2026-01-08T17:36:30.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:30.629+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1659204503 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:30.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:30.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ad0376] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:36:30.663+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:30.675+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-08T17:36:30.693+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:30.694+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.694+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:36:30.699+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-08T17:36:30.706+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:36:30.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56272fee]
2026-01-08T17:36:30.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@174292628 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:30.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.713+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbd864d]
2026-01-08T17:36:30.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-08T17:36:30.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:36:30.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:36:30.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e24093]
2026-01-08T17:36:30.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:30.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-08T17:36:30.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2f6506] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:36:30.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:30.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:36:30.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-08T17:36:30.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1436050930 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:36:30.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:36:30.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:36:30.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454d3ce5] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:30.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:36:30.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:36:30.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@519051783 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:30.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:36:30.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409e575c] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1871660084 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:36:30.748+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:30.749+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:36:30.750+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-08T17:36:30.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1e88df] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:36:30.759+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:30.759+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:36:30.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-08T17:36:30.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570222822 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:30.760+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65ad0376]
2026-01-08T17:36:30.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b9b7c1c] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@160718649 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:30.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:30.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:30.762+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:36:30.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:36:30.767+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:36:30.783+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:30.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16abddc2] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.784+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@848667625 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:30.794+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:36:30.796+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:30.797+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:36:30.808+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2f6506]
2026-01-08T17:36:30.809+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:30.809+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fa88cfb] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:30.810+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1592712541 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:36:30.814+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:36:30.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:36:30.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:30.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-08T17:36:30.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:36:31.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454d3ce5]
2026-01-08T17:36:31.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:36:31.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:36:31.178+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b9b7c1c]
2026-01-08T17:36:31.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.274+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7fef4d] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.246+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409e575c]
2026-01-08T17:36:31.276+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:31.267+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1e88df]
2026-01-08T17:36:31.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@293aa192] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.272+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.279+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d62f4f1] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fa88cfb]
2026-01-08T17:36:31.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a74754c] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.281+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1642129837 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:36:31.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:31.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16abddc2]
2026-01-08T17:36:31.283+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:31.284+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:36:31.275+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1304697186 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:31.277+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-08T17:36:31.279+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@4955162 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:31.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:31.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:31.280+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23351212 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:31.282+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:31.286+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:31.288+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:36:31.289+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:31.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:36:31.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:36:31.314+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:36:31.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:31.347+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:31.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@293aa192]
2026-01-08T17:36:31.356+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:36:31.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:36:31.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:36:31.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a74754c]
2026-01-08T17:36:31.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:31.373+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:36:31.366+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:36:31.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:36:31.367+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.374+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:31.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:36:31.375+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:36:31.376+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d139aeb] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.377+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:36:31.377+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:36:31.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1683250704 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:36:31.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:36:31.378+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:36:31.379+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:36:31.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e506f4] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.382+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39bede7a] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:36:31.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1911790947 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:36:31.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:36:31.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1934755410 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:31.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:36:31.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:31.426+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:36:31.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:36:31.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:36:31.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:36:31.471+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:36:31.499+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:31.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d62f4f1]
2026-01-08T17:36:31.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:36:31.517+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:36:31.520+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7fef4d]
2026-01-08T17:36:31.523+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d139aeb]
2026-01-08T17:36:31.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.524+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.524+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e506f4]
2026-01-08T17:36:31.524+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.524+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:36:31.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddb0900] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.525+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d94c158] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.526+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:31.526+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e2241ea] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.526+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:36:31.527+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291721362 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:36:31.527+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2003530087 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:31.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:36:31.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@475385572 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:31.529+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:36:31.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:31.563+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:36:31.573+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:31.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:31.580+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:31.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:36:31.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:31.581+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39bede7a]
2026-01-08T17:36:31.599+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:31.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:36:31.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:31.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:31.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:31.721+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:36:31.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68fb6b6a] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.764+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d15835] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:31.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d94c158]
2026-01-08T17:36:31.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddb0900]
2026-01-08T17:36:31.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:36:31.766+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544665210 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:31.841+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:31.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@139662267 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:31.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:31.930+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:31.991+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:36:32.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:36:32.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:36:32.015+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e2241ea]
2026-01-08T17:36:32.016+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:32.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192b9143] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:32.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:36:32.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:32.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:32.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:32.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:32.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:32.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1918770495 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:32.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca0abcc] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:32.077+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:36:32.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:36:32.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:36:32.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:36:32.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:32.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@283816443 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:32.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:36:32.558+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68fb6b6a]
2026-01-08T17:36:32.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:32.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691c619e] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:32.571+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1510995948 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:32.558+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:36:32.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:32.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:36:32.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d15835]
2026-01-08T17:36:32.566+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:36:32.572+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:32.572+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:36:32.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:36:32.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:32.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:32.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:36:32.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:36:32.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:36:32.714+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:36:32.790+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:36:32.951+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:36:32.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:32.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca0abcc]
2026-01-08T17:36:32.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:36:32.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192b9143]
2026-01-08T17:36:32.983+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:32.995+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:32.996+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:33.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:33.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691c619e]
2026-01-08T17:36:33.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4434f9b2] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:33.017+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747d23e2] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:33.018+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@552980] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:33.029+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160839488 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:33.030+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:36:33.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:33.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@710621844 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:33.049+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:36:33.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@493492330 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:33.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:36:33.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:36:33.045+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:36:33.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:36:33.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:33.051+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:36:33.113+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:36:33.114+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:36:33.132+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:33.133+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:36:33.150+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:36:33.151+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:36:33.162+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:36:33.232+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:36:33.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:36:33.456+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:36:33.473+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4434f9b2]
2026-01-08T17:36:33.473+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@552980]
2026-01-08T17:36:33.473+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:36:33.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:36:33.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:36:33.475+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:33.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:33.508+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:36:33.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:36:33.613+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:36:33.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:33.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:36:33.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8f69ec] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:33.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:33.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747d23e2]
2026-01-08T17:36:33.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:36:33.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:36:33.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97de1d] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:33.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624904404 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:33.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:33.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:33.667+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:36:33.671+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:36:33.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2093413108 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:33.828+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:33.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:36:33.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fe8b9e4] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:33.906+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:33.907+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:36:34.020+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:36:34.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:34.200+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:34.277+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@543edda4] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:34.277+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:36:34.278+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:34.310+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@225861820 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:36:34.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:36:34.327+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1869560324 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:34.328+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:34.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8f69ec]
2026-01-08T17:36:34.331+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:36:34.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:36:34.332+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:36:34.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:34.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d718dac] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:34.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:36:34.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:34.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:36:34.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051425767 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:34.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f72a9b] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:34.365+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:36:34.380+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:36:34.381+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:36:34.399+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1542772373 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:34.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:36:34.400+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:36:34.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@543edda4]
2026-01-08T17:36:34.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:34.483+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f38c59e] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:34.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1994708831 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:36:34.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@97de1d]
2026-01-08T17:36:34.416+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:36:34.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:36:34.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fe8b9e4]
2026-01-08T17:36:34.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:36:34.490+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:34.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:34.491+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d718dac]
2026-01-08T17:36:34.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:34.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:34.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6a44a] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:34.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:34.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e223ba4] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:34.508+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1068492127 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:36:34.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:36:34.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63bd1fb] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:34.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1269144293 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:36:34.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:34.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f72a9b]
2026-01-08T17:36:34.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@128327805 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:36:34.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:36:34.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:34.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:36:34.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:36:34.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:36:34.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@877b546] was not registered for synchronization because synchronization is not active
2026-01-08T17:36:34.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:36:34.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:34.574+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@362024962 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:36:34.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:34.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:36:34.590+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f38c59e]
2026-01-08T17:36:34.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:36:34.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6a44a]
2026-01-08T17:36:34.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e223ba4]
2026-01-08T17:36:34.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:34.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:36:34.595+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:34.612+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:34.614+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:36:34.660+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:36:34.680+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:36:34.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:36:34.717+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:36:34.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63bd1fb]
2026-01-08T17:36:34.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:34.725+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:34.727+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:34.728+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@877b546]
2026-01-08T17:36:34.729+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:34.733+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:36:34.776+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:36:34.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:36:34.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:36:34.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:07.066+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:37:07.070+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:37:07.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:37:07.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:37:07.072+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:37:07.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:37:07.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:37:07.198+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:37:07.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:37:07.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:37:07.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:37:07.199+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:37:07.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:37:07.205+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:37:07.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:37:07.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29544e4] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b97b3fd] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.210+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:37:07.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:37:07.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:37:07.298+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457579796 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:07.299+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2133986717 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:37:07.322+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:37:07.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:37:07.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:37:07.474+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:07.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:37:07.479+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:37:07.480+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:37:07.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:37:07.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:37:07.489+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:07.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:07.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:37:07.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:37:07.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:37:07.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:37:07.519+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.521+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:37:07.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcae7e] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:07.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:37:07.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.532+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d95c6b1] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29544e4]
2026-01-08T17:37:07.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b97b3fd]
2026-01-08T17:37:07.546+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c98c233] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38fe77f9] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126a69ca] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.557+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@806751606 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:07.558+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@286201788 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:37:07.559+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:07.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:07.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:07.564+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:07.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1426124201 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:37:07.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@48695673 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:07.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@16114690 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:37:07.590+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:37:07.591+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:37:07.591+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:37:07.593+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:07.594+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:07.596+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:37:07.601+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:07.604+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:07.614+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38fe77f9]
2026-01-08T17:37:07.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126a69ca]
2026-01-08T17:37:07.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:37:07.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:37:07.615+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:37:07.624+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:07.626+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c98c233]
2026-01-08T17:37:07.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcae7e]
2026-01-08T17:37:07.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d95c6b1]
2026-01-08T17:37:07.628+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ed97f51] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:37:07.630+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:07.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:07.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1708360908 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:07.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:07.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:37:07.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:37:07.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@987028] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:37:07.648+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:07.650+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:07.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457962316 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:37:07.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:37:07.661+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:07.662+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:07.679+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:37:07.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ed97f51]
2026-01-08T17:37:07.690+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:07.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@987028]
2026-01-08T17:37:07.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6678f135] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.700+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@62798172 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:07.704+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76851d49] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:07.726+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@895429249 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:37:07.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:07.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:37:07.738+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:37:07.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:07.765+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:37:07.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6678f135]
2026-01-08T17:37:07.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76851d49]
2026-01-08T17:37:07.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d4e7c48] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19172595] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285474701 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:07.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1202064555 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:37:07.823+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:07.816+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:37:07.823+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:07.825+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:37:07.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:07.833+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:37:07.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19172595]
2026-01-08T17:37:07.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d4e7c48]
2026-01-08T17:37:07.845+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:07.846+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.872+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:37:07.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5581b86b] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.873+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:07.894+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1270031023 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:07.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:37:07.905+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:37:07.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:37:07.912+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5581b86b]
2026-01-08T17:37:07.913+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5207e0] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1414046945 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:07.914+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:07.915+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:07.917+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:07.923+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5207e0]
2026-01-08T17:37:07.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.926+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8bae5f] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830128393 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:07.928+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:37:07.929+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:37:07.931+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:37:07.933+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8bae5f]
2026-01-08T17:37:07.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:07.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c8924c] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:07.940+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@876688860 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:07.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:07.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:07.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:07.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c8924c]
2026-01-08T17:37:07.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:07.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:37:07.972+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:08.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:37:08.308+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:37:08.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:37:08.309+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:37:08.340+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:37:08.340+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:37:08.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:37:08.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:37:08.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:37:08.362+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:37:08.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:37:08.361+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:37:08.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:37:08.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:37:08.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:37:08.363+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:37:08.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:37:08.368+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:37:08.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:37:08.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:37:08.369+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:37:08.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:37:08.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:37:08.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:08.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed47038] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:08.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:37:08.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:08.371+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:08.389+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b988cca] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:08.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:08.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@981311050 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:08.372+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e954f75] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:08.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44354eb0] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:08.390+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:37:08.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:37:08.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@776983412 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:37:08.396+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:37:08.397+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:08.414+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1936893075 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:08.414+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2042378756 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:37:08.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:37:08.423+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:37:08.424+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:08.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:37:08.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:37:08.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b988cca]
2026-01-08T17:37:08.437+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:08.438+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e41959] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:08.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738874963 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:08.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:37:08.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:37:08.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:37:08.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:37:08.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e954f75]
2026-01-08T17:37:08.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed47038]
2026-01-08T17:37:08.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44354eb0]
2026-01-08T17:37:08.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:37:08.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:08.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:08.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:08.444+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@470a5555] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:08.446+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbf6819] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:08.448+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480fae79] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:08.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@679563723 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:08.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1096748027 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:37:08.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@782645651 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:37:08.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:08.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:08.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:37:08.462+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:08.463+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:08.465+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:37:08.478+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:37:08.481+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e41959]
2026-01-08T17:37:08.482+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:08.486+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:37:08.490+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:08.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:08.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:37:08.493+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:08.495+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbf6819]
2026-01-08T17:37:08.500+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480fae79]
2026-01-08T17:37:08.503+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@470a5555]
2026-01-08T17:37:08.504+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:08.506+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:08.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:08.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:37:08.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:37:08.509+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:37:08.510+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:08.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:08.516+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:20.603+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-08T17:37:20.605+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:37:20.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-08T17:37:20.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-08T17:37:20.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:37:20.608+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:37:20.625+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:37:20.631+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-08T17:37:20.632+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:37:20.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-08T17:37:20.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:37:20.636+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-08T17:37:20.637+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:37:20.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-08T17:37:20.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-08T17:37:20.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-08T17:37:20.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-08T17:37:20.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fec7a3] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:37:20.646+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:37:20.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:37:20.647+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:37:20.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:37:20.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e865d17] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-08T17:37:20.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/my-approvals
2026-01-08T17:37:20.641+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:37:20.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:37:20.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-08T17:37:20.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-08T17:37:20.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:37:20.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:37:20.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-08T17:37:20.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-08T17:37:20.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:37:20.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:37:20.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-08T17:37:20.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-08T17:37:20.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.659+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@197ae7fc] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.658+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:37:20.659+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.659+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.660+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53732999] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3c6a1a] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4580e5] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.680+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@868626552 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:20.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2119295559 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:37:20.681+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1091168816 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:37:20.683+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:37:20.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:37:20.689+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:37:20.690+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:20.691+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:37:20.692+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:20.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1214110009 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:37:20.697+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1861991205 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:37:20.698+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855303828 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:20.707+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:37:20.707+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:37:20.708+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:20.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:20.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:37:20.712+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:20.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:37:20.715+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:37:20.716+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:37:20.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fec7a3]
2026-01-08T17:37:20.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@197ae7fc]
2026-01-08T17:37:20.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e865d17]
2026-01-08T17:37:20.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:20.731+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.732+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-08T17:37:20.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5969e4cc] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:20.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 5
2026-01-08T17:37:20.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:37:20.763+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e3a58c4] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.778+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:20.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1780462771 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:20.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3c6a1a]
2026-01-08T17:37:20.779+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4580e5]
2026-01-08T17:37:20.780+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53732999]
2026-01-08T17:37:20.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1017826378 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:37:20.781+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:20.798+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:37:20.804+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.806+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:20.807+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:20.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:37:20.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164fd869] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.813+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc9777e] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.848+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5169015d] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.854+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:20.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:37:20.888+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@70822768 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:20.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:20.895+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@809563064 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:37:20.896+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1308961770 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:37:20.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:37:20.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:20.908+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5969e4cc]
2026-01-08T17:37:20.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:20.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:37:20.909+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:37:20.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:20.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:20.910+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:20.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:37:20.911+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.924+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:37:20.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:20.927+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:20.938+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545d93fe] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e3a58c4]
2026-01-08T17:37:20.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:20.939+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164fd869]
2026-01-08T17:37:20.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.940+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@747333373 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:20.940+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:20.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f6ed86] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.941+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:37:20.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:37:20.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789772673 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:20.942+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:20.943+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:20.944+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:37:20.957+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:37:20.962+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:20.963+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:37:20.964+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc9777e]
2026-01-08T17:37:20.965+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5169015d]
2026-01-08T17:37:20.977+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:37:20.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:20.978+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:20.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545d93fe]
2026-01-08T17:37:20.979+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d070042] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:20.980+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:37:20.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:20.981+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1256390171 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:37:20.982+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:20.987+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:37:20.988+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:37:20.992+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:20.994+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 26(Long), 25(Long), 5(Long), 4(Long), 1(Long)
2026-01-08T17:37:21.041+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:37:21.060+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f6ed86]
2026-01-08T17:37:21.062+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:21.065+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c2a8c0] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:21.071+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1722350915 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:21.075+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-08T17:37:21.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:21.087+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d070042]
2026-01-08T17:37:21.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:21.088+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:21.112+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78fbd045] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:21.114+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@496749064 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:37:21.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:21.142+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:21.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c2a8c0]
2026-01-08T17:37:21.156+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:21.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:21.157+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b4a073] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:21.172+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@917740205 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:21.177+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:37:21.181+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:21.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:37:21.192+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78fbd045]
2026-01-08T17:37:21.193+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:21.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=26, drafterI (truncated)...]
2026-01-08T17:37:21.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:21.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:37:21.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b4a073]
2026-01-08T17:37:21.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:21.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f41ee2f] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:21.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803632780 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:21.230+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-08T17:37:21.244+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-08T17:37:21.291+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-08T17:37:21.323+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f41ee2f]
2026-01-08T17:37:21.383+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:21.415+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b22a84] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:21.428+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590519883 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:21.439+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:21.447+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:21.528+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:21.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b22a84]
2026-01-08T17:37:21.554+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:21.555+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3dd5e8] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:21.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1876501697 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:21.556+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-08T17:37:21.557+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-08T17:37:21.591+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-08T17:37:21.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3dd5e8]
2026-01-08T17:37:21.607+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:21.653+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe5b73] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:21.665+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40852529 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:37:21.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:21.673+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:21.724+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:21.735+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe5b73]
2026-01-08T17:37:21.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:21.740+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-08T17:37:21.744+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:22.103+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:37:22.111+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:37:22.115+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:37:22.122+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:37:22.186+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:37:22.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:37:22.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:37:22.188+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:37:22.189+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:37:22.204+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:37:22.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:37:22.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:37:22.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:37:22.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:37:22.207+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:37:22.208+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:37:22.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:37:22.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:37:22.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:37:22.209+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:37:22.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:22.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:37:22.214+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:22.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:37:22.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:37:22.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162beb5a] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:22.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:37:22.215+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a1eb944] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:22.228+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:22.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:22.256+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a5109d] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:22.312+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@270083762 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:37:22.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810556504 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:22.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:37:22.364+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@178e94] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:22.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:37:22.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:22.422+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:37:22.431+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140443772 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:37:22.441+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:37:22.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2127570590 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:37:22.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:37:22.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:37:22.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:37:22.442+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:37:22.443+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162beb5a]
2026-01-08T17:37:22.453+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:37:22.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a1eb944]
2026-01-08T17:37:22.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:22.456+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:22.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c44872b] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:22.457+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb25933] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:22.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@758587877 wrapping com.mysql.cj.jdbc.ConnectionImpl@585bccac] will not be managed by Spring
2026-01-08T17:37:22.458+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457734397 wrapping com.mysql.cj.jdbc.ConnectionImpl@4af60de9] will not be managed by Spring
2026-01-08T17:37:22.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:37:22.459+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:22.460+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:37:22.461+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:22.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:22.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:37:22.496+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:37:22.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:37:22.497+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb25933]
2026-01-08T17:37:22.498+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a5109d]
2026-01-08T17:37:22.507+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c44872b]
2026-01-08T17:37:22.512+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@178e94]
2026-01-08T17:37:22.514+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:22.515+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:22.530+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:22.531+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:37:22.547+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:37:22.548+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@165a01f4] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:22.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:37:22.570+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:22.549+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b5e0bf1] was not registered for synchronization because synchronization is not active
2026-01-08T17:37:22.562+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:22.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1665688380 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:37:22.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1784893612 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:37:22.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:37:22.575+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:37:22.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:37:22.577+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:37:22.627+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:37:22.639+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@165a01f4]
2026-01-08T17:37:22.640+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:37:22.644+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:22.645+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b5e0bf1]
2026-01-08T17:37:22.654+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:37:22.655+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:37:22.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:37:22.656+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:37:22.657+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:39:01.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-08T17:39:01.153+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-08T17:39:01.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-08T17:39:01.155+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/36
2026-01-08T17:39:01.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T17:39:01.158+09:00 DEBUG 23448 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/36
2026-01-08T17:39:01.170+09:00 DEBUG 23448 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-08T17:39:01.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-08T17:39:01.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-08T17:39:01.190+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-08T17:39:01.201+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/36
2026-01-08T17:39:01.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T17:39:01.202+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/36
2026-01-08T17:39:01.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-08T17:39:01.213+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-08T17:39:01.203+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-08T17:39:01.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-08T17:39:01.211+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/36
2026-01-08T17:39:01.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me/signatures
2026-01-08T17:39:01.212+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/36
2026-01-08T17:39:01.218+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-08T17:39:01.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-08T17:39:01.219+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-08T17:39:01.221+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-08T17:39:01.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/36
2026-01-08T17:39:01.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T17:39:01.222+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/36
2026-01-08T17:39:01.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.223+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-08T17:39:01.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-08T17:39:01.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/36", parameters={}
2026-01-08T17:39:01.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T17:39:01.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/36", parameters={}
2026-01-08T17:39:01.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f35fde9] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.224+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-08T17:39:01.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-08T17:39:01.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T17:39:01.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T17:39:01.225+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-08T17:39:01.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.226+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.241+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c12d5b] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.227+09:00  INFO 23448 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 1, companyId: 1
2026-01-08T17:39:01.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.227+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a013a89] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.242+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57320e57] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.243+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.260+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@525558879 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:39:01.262+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281d3335] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.273+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1880139098 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:39:01.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3a189a] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.293+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-08T17:39:01.295+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-08T17:39:01.304+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:39:01.305+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:39:01.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085477962 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:39:01.306+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1800112213 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:39:01.319+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-08T17:39:01.327+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1470137931 wrapping com.mysql.cj.jdbc.ConnectionImpl@4eff1d1d] will not be managed by Spring
2026-01-08T17:39:01.329+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-08T17:39:01.329+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-08T17:39:01.339+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T17:39:01.341+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-08T17:39:01.356+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-08T17:39:01.388+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:39:01.356+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c12d5b]
2026-01-08T17:39:01.357+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f35fde9]
2026-01-08T17:39:01.370+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:39:01.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:39:01.392+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@987276499 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:39:01.394+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.411+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68299787] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.412+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T17:39:01.409+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-08T17:39:01.410+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T17:39:01.412+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146934666 wrapping com.mysql.cj.jdbc.ConnectionImpl@7b98b8f5] will not be managed by Spring
2026-01-08T17:39:01.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-08T17:39:01.413+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@281d3335]
2026-01-08T17:39:01.415+09:00 DEBUG 23448 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:39:01.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:39:01.420+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:39:01.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a013a89]
2026-01-08T17:39:01.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.425+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-08T17:39:01.492+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-08T17:39:01.511+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:39:01.569+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-08T17:39:01.616+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.642+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e60c674] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@952186192 wrapping com.mysql.cj.jdbc.ConnectionImpl@4eff1d1d] will not be managed by Spring
2026-01-08T17:39:01.730+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T17:39:01.643+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/me/signatures
2026-01-08T17:39:01.703+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57320e57]
2026-01-08T17:39:01.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3a189a]
2026-01-08T17:39:01.710+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcdd8d9] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.744+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:39:01.736+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:39:01.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-08T17:39:01.737+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.744+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2125095026 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c2f4229] will not be managed by Spring
2026-01-08T17:39:01.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=8, userId=1, si (truncated)...]
2026-01-08T17:39:01.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:39:01.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68299787]
2026-01-08T17:39:01.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-08T17:39:01.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d9d444f] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-08T17:39:01.747+09:00 DEBUG 23448 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:39:01.755+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:39:01.756+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-08T17:39:01.756+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@260740647 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:39:01.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-08T17:39:01.757+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=36, drafterId= (truncated)...]
2026-01-08T17:39:01.757+09:00  INFO 23448 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 1, companyId: 1
2026-01-08T17:39:01.758+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-08T17:39:01.761+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T17:39:01.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:39:01.770+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:39:01.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e60c674]
2026-01-08T17:39:01.772+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.771+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3841f326] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.773+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51c795b7] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:01.774+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1403741788 wrapping com.mysql.cj.jdbc.ConnectionImpl@15e46d80] will not be managed by Spring
2026-01-08T17:39:01.777+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1495050909 wrapping com.mysql.cj.jdbc.ConnectionImpl@4eff1d1d] will not be managed by Spring
2026-01-08T17:39:01.835+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-08T17:39:01.836+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-08T17:39:01.840+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-08T17:39:01.860+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T17:39:01.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d9d444f]
2026-01-08T17:39:01.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcdd8d9]
2026-01-08T17:39:01.861+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 1(Long), 1(Long)
2026-01-08T17:39:01.862+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:39:01.867+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:01.880+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:39:01.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-08T17:39:01.993+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-08T17:39:02.010+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67ee6713] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:02.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-08T17:39:02.025+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3841f326]
2026-01-08T17:39:02.026+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51c795b7]
2026-01-08T17:39:02.027+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1081534621 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:39:02.028+09:00 DEBUG 23448 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:39:02.034+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:39:02.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:02.035+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-08T17:39:02.048+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=8, userId=1, si (truncated)...]
2026-01-08T17:39:02.090+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d81218] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:02.144+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:39:02.163+09:00 DEBUG 23448 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:39:02.171+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1843348889 wrapping com.mysql.cj.jdbc.ConnectionImpl@4eff1d1d] will not be managed by Spring
2026-01-08T17:39:02.354+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-08T17:39:02.421+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T17:39:02.455+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67ee6713]
2026-01-08T17:39:02.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:39:02.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:02.476+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a917d] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:02.477+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@310949976 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:39:02.522+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-08T17:39:02.576+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 36(Long), 1(Long)
2026-01-08T17:39:02.579+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T17:39:02.672+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d81218]
2026-01-08T17:39:02.676+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-08T17:39:02.705+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:02.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a4cc324] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:02.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a917d]
2026-01-08T17:39:02.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1245993127 wrapping com.mysql.cj.jdbc.ConnectionImpl@4eff1d1d] will not be managed by Spring
2026-01-08T17:39:02.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-08T17:39:02.745+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:39:02.746+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5b0f82] was not registered for synchronization because synchronization is not active
2026-01-08T17:39:02.834+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:39:02.936+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533245485 wrapping com.mysql.cj.jdbc.ConnectionImpl@11fd8f5f] will not be managed by Spring
2026-01-08T17:39:03.074+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:39:03.092+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-08T17:39:03.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a4cc324]
2026-01-08T17:39:03.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-08T17:39:03.107+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:39:03.123+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=36, drafterId=1, r (truncated)...]
2026-01-08T17:39:03.125+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-08T17:39:03.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-08T17:39:03.134+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5b0f82]
2026-01-08T17:39:03.138+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-08T17:39:03.174+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=36, drafterId=1, r (truncated)...]
2026-01-08T17:39:03.175+09:00 DEBUG 23448 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
