2026-01-21T11:09:24.660+09:00  INFO 35404 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 35404 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-21T11:09:24.680+09:00 DEBUG 35404 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-21T11:09:24.690+09:00  INFO 35404 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-21T11:09:27.746+09:00 DEBUG 35404 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-21T11:09:27.755+09:00 DEBUG 35404 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-21T11:09:28.121+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-21T11:09:28.123+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-21T11:09:28.125+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-21T11:09:28.126+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-21T11:09:28.130+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-21T11:09:28.145+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-21T11:09:28.156+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-21T11:09:28.159+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-21T11:09:28.160+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-21T11:09:28.161+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-21T11:09:28.162+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-21T11:09:28.211+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-21T11:09:28.230+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-21T11:09:28.238+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-21T11:09:28.239+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-21T11:09:28.239+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-21T11:09:28.240+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-21T11:09:28.241+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-21T11:09:28.253+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-21T11:09:28.259+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-21T11:09:28.261+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-21T11:09:28.264+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-21T11:09:28.271+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-21T11:09:28.273+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-21T11:09:28.275+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-21T11:09:28.277+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-21T11:09:28.279+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-21T11:09:28.283+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-21T11:09:28.288+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-21T11:09:28.289+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-21T11:09:28.291+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-21T11:09:28.294+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-21T11:09:28.295+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-21T11:09:28.297+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-21T11:09:28.299+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-21T11:09:28.301+09:00 DEBUG 35404 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-21T11:09:38.884+09:00  INFO 35404 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-21T11:09:38.905+09:00  INFO 35404 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-21T11:09:38.908+09:00  INFO 35404 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-21T11:09:39.052+09:00  INFO 35404 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-21T11:09:39.056+09:00  INFO 35404 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 14131 ms
2026-01-21T11:09:39.203+09:00 DEBUG 35404 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-21T11:09:39.204+09:00 DEBUG 35404 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-21T11:09:39.792+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-21T11:09:39.823+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-21T11:09:39.861+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-21T11:09:39.894+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-21T11:09:39.958+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-21T11:09:39.992+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-21T11:09:40.066+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-21T11:09:40.092+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-21T11:09:40.184+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-21T11:09:40.202+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-21T11:09:40.227+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-21T11:09:40.256+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-21T11:09:40.276+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-21T11:09:40.289+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-21T11:09:40.315+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-21T11:09:40.327+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-21T11:09:40.356+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-21T11:09:40.372+09:00 DEBUG 35404 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-21T11:09:42.425+09:00 DEBUG 35404 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 162 mappings in 'requestMappingHandlerMapping'
2026-01-21T11:09:42.644+09:00 DEBUG 35404 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-21T11:09:42.784+09:00  WARN 35404 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 12f53552-e2dd-4456-b1a7-2d75e1cdbf29

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-21T11:09:42.816+09:00  INFO 35404 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-21T11:09:43.161+09:00 DEBUG 35404 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-21T11:09:43.417+09:00 DEBUG 35404 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-21T11:09:43.554+09:00 DEBUG 35404 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-21T11:09:43.568+09:00 DEBUG 35404 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-21T11:09:44.219+09:00  INFO 35404 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-21T11:09:44.243+09:00  INFO 35404 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 20.708 seconds (process running for 21.535)
2026-01-21T11:10:54.481+09:00  INFO 35404 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-21T11:10:54.483+09:00  INFO 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-21T11:10:54.492+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-21T11:10:54.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-21T11:10:54.496+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-21T11:10:54.502+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3ea84e01
2026-01-21T11:10:54.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@51f34185
2026-01-21T11:10:54.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-21T11:10:54.515+09:00  INFO 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 23 ms
2026-01-21T11:10:54.663+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-21T11:10:54.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-21T11:10:54.738+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-21T11:10:54.744+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-21T11:10:54.748+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-21T11:10:54.750+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-21T11:10:54.877+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user3, password=1234)]
2026-01-21T11:10:54.901+09:00  INFO 35404 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user3
2026-01-21T11:10:54.957+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:54.995+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e313a9b] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:55.013+09:00  INFO 35404 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-21T11:10:55.447+09:00  INFO 35404 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@474835f4
2026-01-21T11:10:55.453+09:00  INFO 35404 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-21T11:10:55.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982389856 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:10:55.479+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-21T11:10:55.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user3(String)
2026-01-21T11:10:55.623+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-21T11:10:55.630+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e313a9b]
2026-01-21T11:10:55.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:55.749+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1466e4d6] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:55.751+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@85217360 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:10:55.754+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T11:10:55.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-21T11:10:55.774+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-21T11:10:55.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1466e4d6]
2026-01-21T11:10:55.995+09:00  INFO 35404 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 4, role: ACCOUNTANT, companyId: 1
2026-01-21T11:10:56.006+09:00  INFO 35404 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=4 username=test_user3 role=ACCOUNTANT
2026-01-21T11:10:56.036+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:10:56.088+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=4, username=test_user3, password (truncated)...]
2026-01-21T11:10:56.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:10:56.724+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-21T11:10:56.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T11:10:56.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-21T11:10:56.996+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T11:10:56.998+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T11:10:57.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T11:10:57.009+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:57.019+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@573c41df] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:57.026+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627414976 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:10:57.032+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T11:10:57.037+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-21T11:10:57.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-21T11:10:57.058+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@573c41df]
2026-01-21T11:10:57.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:10:57.079+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-21T11:10:57.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:10:58.501+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-21T11:10:58.506+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-21T11:10:58.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-21T11:10:58.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:10:58.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:10:58.547+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.566+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-21T11:10:58.576+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-21T11:10:58.618+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.580+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:10:58.585+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:10:58.602+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.614+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.622+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:10:58.623+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:10:58.638+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.625+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.627+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:10:58.635+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.640+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:10:58.642+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:10:58.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:10:58.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T11:10:58.657+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T11:10:58.670+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T11:10:58.671+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:10:58.672+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:10:58.672+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.673+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.682+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:10:58.678+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:10:58.680+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:58.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:10:58.682+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:10:58.682+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T11:10:58.683+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T11:10:58.683+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T11:10:58.688+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:10:58.688+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:10:58.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:10:58.701+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:10:58.704+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:58.707+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T11:10:58.708+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T11:10:58.737+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:58.720+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:58.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:58.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:58.732+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:58.745+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:58.745+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:58.746+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e83e9ae] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:58.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751708ff] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:58.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@174dc8d6] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:58.770+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:58.771+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:58.832+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:58.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729920b3] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:58.867+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:58.884+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cabab7a] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:58.868+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77cbbf85] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:58.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@442443887 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:10:58.907+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:10:58.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@365016360 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:10:58.916+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:10:58.914+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:10:58.918+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:10:58.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596449752 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:10:58.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:10:58.974+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:10:59.015+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:10:59.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@567160031 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:10:59.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:10:59.036+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@985812848 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:10:59.041+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751708ff]
2026-01-21T11:10:59.041+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T11:10:59.042+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@174dc8d6]
2026-01-21T11:10:59.102+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:59.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1730edad] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:59.104+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868505652 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:10:59.106+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:10:59.043+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T11:10:59.055+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:59.055+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2045133591 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:10:59.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T11:10:59.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:10:59.117+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T11:10:59.119+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f9aba5] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:59.120+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T11:10:59.142+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T11:10:59.222+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T11:10:59.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T11:10:59.265+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:10:59.304+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1730edad]
2026-01-21T11:10:59.267+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T11:10:59.302+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cabab7a]
2026-01-21T11:10:59.302+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77cbbf85]
2026-01-21T11:10:59.307+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:59.307+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728336635 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:10:59.321+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729920b3]
2026-01-21T11:10:59.322+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:10:59.323+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54013f6] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:59.327+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:10:59.341+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:10:59.342+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:10:59.343+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T11:10:59.349+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@361618294 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:10:59.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T11:10:59.352+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:10:59.353+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T11:10:59.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:10:59.393+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:10:59.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:10:59.489+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:10:59.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:10:59.521+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:10:59.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e83e9ae]
2026-01-21T11:10:59.532+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T11:10:59.535+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:59.548+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T11:10:59.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:10:59.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T11:10:59.549+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:59.557+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae26cec] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:59.555+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T11:10:59.557+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T11:10:59.559+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544762556 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:10:59.561+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:59.570+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:59.585+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:59.586+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:10:59.586+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:10:59.588+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:59.589+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:10:59.590+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T11:10:59.591+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T11:10:59.595+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:59.607+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:10:59.635+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:10:59.636+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:10:59.645+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:59.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@186b6033] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:59.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:10:59.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f9aba5]
2026-01-21T11:10:59.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae26cec]
2026-01-21T11:10:59.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:59.654+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@380407118 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:10:59.656+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T11:10:59.666+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:59.669+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:10:59.809+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T11:10:59.822+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:59.671+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:59.838+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b411958] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:59.893+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:10:59.937+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T11:10:59.941+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54013f6]
2026-01-21T11:10:59.946+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:59.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f73ef30] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:59.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416077418 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:10:59.952+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:10:59.956+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:10:59.939+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T11:10:59.964+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:10:59.939+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:10:59.944+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1686777622 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:10:59.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:10:59.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:10:59.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4b5573] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:59.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162a01e] was not registered for synchronization because synchronization is not active
2026-01-21T11:10:59.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262495810 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:10:59.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T11:10:59.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-21T11:10:59.968+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T11:11:00.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:00.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@297134142 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:00.010+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T11:11:00.019+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:00.021+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T11:11:00.026+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-21T11:11:00.056+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b411958]
2026-01-21T11:11:00.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.058+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393004b4] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.033+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f73ef30]
2026-01-21T11:11:00.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T11:11:00.037+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162a01e]
2026-01-21T11:11:00.052+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:00.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:00.055+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@186b6033]
2026-01-21T11:11:00.060+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330992863 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:00.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.071+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T11:11:00.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:00.073+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T11:11:00.074+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:00.107+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:00.075+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:00.075+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4bcff] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:00.107+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T11:11:00.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:00.112+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360420609 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:00.112+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:00.169+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T11:11:00.170+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:00.183+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:00.184+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.191+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4b5573]
2026-01-21T11:11:00.222+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T11:11:00.223+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7522d84f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.224+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:00.225+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:00.230+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2078619803 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:00.232+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:00.231+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T11:11:00.232+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393004b4]
2026-01-21T11:11:00.237+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:00.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:00.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.281+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152b1314] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.286+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:00.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@747085985 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:00.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T11:11:00.302+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7522d84f]
2026-01-21T11:11:00.306+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:00.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4bcff]
2026-01-21T11:11:00.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.320+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad832a0] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.318+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-21T11:11:00.320+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.321+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1507554580 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:00.333+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc292d0] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.334+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:00.341+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248319353 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:00.342+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:00.343+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:00.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:00.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:00.382+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152b1314]
2026-01-21T11:11:00.385+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.395+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:00.458+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef14d5e] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.472+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad832a0]
2026-01-21T11:11:00.473+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:00.473+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2045205851 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:00.482+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T11:11:00.489+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:00.489+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:00.491+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc292d0]
2026-01-21T11:11:00.502+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:00.504+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.506+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6339fab] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.504+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:00.507+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1194084079 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:00.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:00.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:00.539+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:00.550+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:00.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:00.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:00.555+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:00.652+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.709+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-21T11:11:00.711+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:00.787+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6339fab]
2026-01-21T11:11:00.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0a7740] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.786+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef14d5e]
2026-01-21T11:11:00.804+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.789+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.793+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2030789117 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:00.806+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440fd168] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.818+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441837488 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:00.820+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:00.807+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5b6d74] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.816+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:00.822+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:00.830+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1183809427 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:00.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:00.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:00.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T11:11:00.957+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:00.963+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440fd168]
2026-01-21T11:11:00.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:00.968+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T11:11:00.972+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.973+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0a7740]
2026-01-21T11:11:00.973+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5b6d74]
2026-01-21T11:11:00.974+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8dc99d7] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.974+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.975+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:00.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@853712181 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:00.986+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a723d73] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.998+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a60ab3] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:00.998+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:01.001+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184823562 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:01.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@747258819 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:01.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:01.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-21T11:11:01.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:01.019+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:01.042+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:01.071+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:01.074+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:01.074+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:01.076+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8dc99d7]
2026-01-21T11:11:01.085+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a60ab3]
2026-01-21T11:11:01.088+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a723d73]
2026-01-21T11:11:01.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:01.101+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:01.106+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fdb58bb] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.107+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:01.107+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:01.140+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1404515903 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:01.152+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:01.152+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:01.154+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:01.157+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:01.201+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:01.204+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:01.259+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:01.267+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:01.276+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fdb58bb]
2026-01-21T11:11:01.276+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:11:01.277+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:01.284+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:11:01.285+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:01.287+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:01.292+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:01.293+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:01.299+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:01.306+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T11:11:01.317+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T11:11:01.324+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T11:11:01.325+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:01.337+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:01.332+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:11:01.332+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:01.333+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:11:01.334+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:01.335+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:01.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:11:01.359+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.385+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512cd3f5] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T11:11:01.374+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:11:01.375+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:11:01.378+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.386+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1609250720 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:01.386+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T11:11:01.387+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T11:11:01.387+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T11:11:01.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4826407a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:01.402+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:11:01.405+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:01.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:01.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:01.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:01.504+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728393062 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:01.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:11:01.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:01.521+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:01.522+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:01.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:01.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:11:01.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.557+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f8ff3f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.571+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1934140163 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:01.533+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.573+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb40048] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:01.555+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T11:11:01.579+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:11:01.572+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T11:11:01.574+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436390245 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:01.589+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T11:11:01.574+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c547c52] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.586+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.587+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T11:11:01.591+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T11:11:01.601+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db73fc0] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.629+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:01.635+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T11:11:01.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512cd3f5]
2026-01-21T11:11:01.657+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f8ff3f]
2026-01-21T11:11:01.686+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.687+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:01.688+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f828262] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T11:11:01.690+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366038407 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:01.691+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:01.696+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:01.699+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-21T11:11:01.737+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:01.738+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@428603351 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:01.738+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1851520391 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:01.738+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:01.739+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T11:11:01.744+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:11:01.752+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T11:11:01.752+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:01.755+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4826407a]
2026-01-21T11:11:01.755+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb40048]
2026-01-21T11:11:01.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T11:11:01.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T11:11:01.771+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:01.772+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.773+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:01.778+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T11:11:01.780+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88d08ca] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.781+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T11:11:01.788+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:01.795+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T11:11:01.805+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918746968 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:01.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:01.809+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f828262]
2026-01-21T11:11:01.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T11:11:01.816+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:01.819+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-21T11:11:01.820+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:01.850+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-21T11:11:01.822+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:01.824+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:01.850+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:01.850+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-21T11:11:01.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:01.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:01.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T11:11:01.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:01.889+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-21T11:11:01.889+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.890+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db73fc0]
2026-01-21T11:11:01.892+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:01.966+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88d08ca]
2026-01-21T11:11:01.971+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.915+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c547c52]
2026-01-21T11:11:01.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:01.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-21T11:11:01.932+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5631c430] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.952+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:01.972+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29555665] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:01.978+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:01.986+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T11:11:02.002+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:02.006+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@270839409 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:02.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T11:11:02.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28326ca2] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.041+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1233047773 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:02.054+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T11:11:02.056+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:02.067+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:02.070+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T11:11:02.071+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102487170 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:02.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:02.086+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:02.087+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:11:02.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.184+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:02.193+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:02.197+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T11:11:02.198+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32a8bc3a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.198+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:02.208+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:02.299+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:02.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:02.316+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:02.318+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:02.315+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:02.319+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:02.320+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.321+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.321+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca40e60] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.335+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T11:11:02.344+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T11:11:02.395+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29555665]
2026-01-21T11:11:02.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.382+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eced192] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.393+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5631c430]
2026-01-21T11:11:02.399+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e0b057] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.400+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1531266672 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:02.400+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:02.401+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2047162224 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:02.402+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@140340781 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:02.402+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:02.423+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28326ca2]
2026-01-21T11:11:02.402+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:02.420+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T11:11:02.422+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:02.423+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-21T11:11:02.424+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.427+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:02.430+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:02.437+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:02.438+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-21T11:11:02.438+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc99a73] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:02.449+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1774279040 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:02.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@606446164 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:02.466+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T11:11:02.466+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T11:11:02.467+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:02.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T11:11:02.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T11:11:02.470+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:02.470+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:02.471+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:02.473+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T11:11:02.474+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e0b057]
2026-01-21T11:11:02.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eced192]
2026-01-21T11:11:02.484+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.479+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T11:11:02.483+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.484+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54a4593d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.485+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:02.486+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11858d9e] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.486+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826504826 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:02.487+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:02.488+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1830548977 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:02.489+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:02.491+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.491+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:02.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-21T11:11:02.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-21T11:11:02.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:02.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5490ed06] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.511+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T11:11:02.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32a8bc3a]
2026-01-21T11:11:02.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc99a73]
2026-01-21T11:11:02.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:02.522+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-21T11:11:02.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e40eefd] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:02.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@335848142 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:02.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:02.533+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:02.553+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T11:11:02.585+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ca40e60]
2026-01-21T11:11:02.602+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T11:11:02.615+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2112357221 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:02.631+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:02.642+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11858d9e]
2026-01-21T11:11:02.642+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T11:11:02.644+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:02.644+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T11:11:02.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:02.674+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.683+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T11:11:02.684+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54a4593d]
2026-01-21T11:11:02.685+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e40eefd]
2026-01-21T11:11:02.685+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:02.685+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c20a2ce] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.704+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:02.704+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.705+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366567849 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:02.706+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:02.706+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f313b51] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.707+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:02.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:02.720+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1988041548 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:02.723+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:02.732+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:02.745+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:02.751+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-21T11:11:02.751+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:02.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:02.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:02.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:02.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T11:11:02.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5490ed06]
2026-01-21T11:11:02.770+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea980] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.772+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:02.774+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1109073829 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:02.774+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T11:11:02.774+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:02.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:02.784+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:02.786+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T11:11:02.798+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c20a2ce]
2026-01-21T11:11:02.803+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.846+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:02.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f313b51]
2026-01-21T11:11:02.856+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:02.854+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8157a9] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.857+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69cf1b23] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:02.857+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@56536805 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:02.858+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1864523512 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:02.864+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:02.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:02.871+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:02.871+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:02.884+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:02.899+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea980]
2026-01-21T11:11:02.975+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:03.088+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-21T11:11:03.249+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cecf8c9] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.362+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8157a9]
2026-01-21T11:11:03.383+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69cf1b23]
2026-01-21T11:11:03.384+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228653181 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:03.390+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.390+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.391+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:03.391+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c1788f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.392+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7780ce] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.392+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:03.393+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1729973185 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:03.395+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28979374 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:03.396+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:03.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:03.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T11:11:03.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:03.458+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:03.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:03.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T11:11:03.467+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cecf8c9]
2026-01-21T11:11:03.467+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7780ce]
2026-01-21T11:11:03.471+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c1788f]
2026-01-21T11:11:03.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:03.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.476+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:03.483+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28fd0b97] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.485+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dab9bf9] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.487+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:03.532+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@949788598 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:03.534+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361221059 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:03.541+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:03.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:03.595+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:03.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:03.617+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-21T11:11:03.617+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:03.618+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:03.634+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:03.638+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:03.642+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.650+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea52c58] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:03.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:03.675+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dab9bf9]
2026-01-21T11:11:03.676+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28fd0b97]
2026-01-21T11:11:03.677+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:03.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.684+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63701b81] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.684+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:03.685+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@596706763 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:03.701+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:03.703+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:03.707+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:03.713+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@673629348 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:03.725+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:03.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:03.751+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:03.752+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:03.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63701b81]
2026-01-21T11:11:03.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea52c58]
2026-01-21T11:11:03.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:03.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:03.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35acbc35] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:03.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@519716379 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:03.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:03.776+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:03.833+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:11:03.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:03.857+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-21T11:11:03.857+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-21T11:11:03.869+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:11:03.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35acbc35]
2026-01-21T11:11:03.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:11:03.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:03.883+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T11:11:03.884+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:03.884+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:11:03.885+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:03.886+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.887+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@398ce8bf] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.902+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-21T11:11:03.903+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:03.908+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1651160908 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:03.919+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-21T11:11:03.922+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:03.923+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:03.924+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-21T11:11:03.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:03.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:03.926+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-21T11:11:03.927+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:03.936+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-21T11:11:03.941+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:03.941+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.942+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:03.946+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@86ee31c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@398ce8bf]
2026-01-21T11:11:03.948+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87a3a7d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@936020619 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:03.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.954+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-21T11:11:03.954+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f562c9] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:03.955+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T11:11:03.955+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1305232513 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:03.957+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:03.959+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:03.969+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803356446 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:03.969+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-21T11:11:03.973+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:03.973+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@86ee31c]
2026-01-21T11:11:03.975+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:03.976+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:03.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:03.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f562c9]
2026-01-21T11:11:03.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:03.989+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-21T11:11:03.999+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16077158] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.002+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:04.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@443071099 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:04.019+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:04.021+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-21T11:11:04.026+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:04.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:04.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87a3a7d]
2026-01-21T11:11:04.036+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.037+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-21T11:11:04.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b5c393d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.058+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-21T11:11:04.058+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@724341243 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:04.058+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-21T11:11:04.058+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:04.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-21T11:11:04.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:04.085+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.134+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:04.135+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-21T11:11:04.154+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397eee78] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.261+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b5c393d]
2026-01-21T11:11:04.331+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16077158]
2026-01-21T11:11:04.345+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.345+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:04.349+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157137bf] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:04.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953223672 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:04.352+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:04.353+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:04.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@940520332 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:04.361+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:04.369+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-21T11:11:04.371+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T11:11:04.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:04.374+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157137bf]
2026-01-21T11:11:04.376+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab85e23] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.378+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-21T11:11:04.380+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@921192452 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:04.382+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@397eee78]
2026-01-21T11:11:04.383+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:04.384+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:04.385+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-21T11:11:04.385+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-21T11:11:04.387+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:04.414+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:04.419+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab85e23]
2026-01-21T11:11:04.422+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f850cc4] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.426+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665066065 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:04.431+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:04.434+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:04.446+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-21T11:11:04.448+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f850cc4]
2026-01-21T11:11:04.449+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.449+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c78417] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.450+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@46352199 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:04.450+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:04.450+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:04.453+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:04.453+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c78417]
2026-01-21T11:11:04.454+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.454+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10293b35] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.455+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1234690587 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:04.456+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:04.457+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-21T11:11:04.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:04.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10293b35]
2026-01-21T11:11:04.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ca88a0] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.467+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@409199423 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:04.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:04.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:04.472+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:04.472+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ca88a0]
2026-01-21T11:11:04.473+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:04.474+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:04.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:04.478+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:11:04.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:11:04.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-21T11:11:04.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T11:11:04.628+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:11:04.721+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.779+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2570c088] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.868+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1502500302 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:04.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:04.877+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:04.908+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:04.915+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2570c088]
2026-01-21T11:11:04.916+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.916+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1123e73b] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.917+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428455654 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:04.917+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:04.918+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:04.921+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:04.921+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1123e73b]
2026-01-21T11:11:04.922+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.924+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c62227c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1651903220 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:04.926+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:04.933+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:04.939+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-21T11:11:04.940+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c62227c]
2026-01-21T11:11:04.941+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.941+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11f402e6] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.942+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1828234086 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:04.943+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:04.946+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:04.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:04.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11f402e6]
2026-01-21T11:11:04.952+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.953+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b7cc7f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.954+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946146461 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:04.954+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:04.955+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-21T11:11:04.958+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:04.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9b7cc7f]
2026-01-21T11:11:04.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766ed2fb] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.970+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1099771005 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:04.971+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:04.975+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:04.985+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-21T11:11:04.986+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@766ed2fb]
2026-01-21T11:11:04.987+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:04.988+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b026439] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:04.989+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997949608 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:04.993+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:04.996+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:04.999+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:05.002+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b026439]
2026-01-21T11:11:05.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:05.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241f5355] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:05.016+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@211081283 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:05.020+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:05.067+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-21T11:11:05.078+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:05.089+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241f5355]
2026-01-21T11:11:05.091+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:05.092+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152571fb] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:05.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1266552305 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:05.104+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:05.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:05.124+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:05.133+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152571fb]
2026-01-21T11:11:05.134+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:05.138+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:05.139+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:05.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-21T11:11:05.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-21T11:11:05.484+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-21T11:11:05.492+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-21T11:11:05.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-21T11:11:05.501+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-21T11:11:05.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:05.506+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8922631] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:05.555+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1086941020 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:05.558+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-21T11:11:05.563+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 4(Long)
2026-01-21T11:11:05.573+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveByUserId             : <==      Total: 0
2026-01-21T11:11:05.573+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8922631]
2026-01-21T11:11:05.575+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:05.576+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[])]
2026-01-21T11:11:05.577+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:12.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-21T11:11:12.205+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/cards/user
2026-01-21T11:11:12.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-21T11:11:12.329+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/cards/user
2026-01-21T11:11:12.346+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/cards/user", parameters={}
2026-01-21T11:11:12.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#createUserCard(UserCardDto)
2026-01-21T11:11:12.482+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserCardDto(cardId=null, userId=null, cardName=개인카드1, cardNumber=1111222233334443, cardNumberEncrypt (truncated)...]
2026-01-21T11:11:12.685+09:00  INFO 35404 --- [http-nio-8080-exec-7] c.i.backend.controller.CardController    : 개인 카드 생성 요청 - userId: 4, cardName: 개인카드1
2026-01-21T11:11:12.744+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:12.750+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f49b3f1]
2026-01-21T11:11:12.751+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1318873345 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will be managed by Spring
2026-01-21T11:11:12.752+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserCardMapper.insert       : ==>  Preparing: INSERT INTO user_card_tb (user_id, card_name, card_number_encrypted, card_last_four, is_active, is_default, created_at, updated_at) VALUES (?, ?, ?, ?, COALESCE(?, 1), 0, NOW(), NOW())
2026-01-21T11:11:12.754+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserCardMapper.insert       : ==> Parameters: 4(Long), 개인카드1(String), 9zdUt8s6z/mO0jeCuHD4xcCDqIMn1WdKWfXWtIIkIRI=(String), 4443(String), true(Boolean)
2026-01-21T11:11:12.810+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserCardMapper.insert       : <==    Updates: 1
2026-01-21T11:11:12.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f49b3f1]
2026-01-21T11:11:12.877+09:00  INFO 35404 --- [http-nio-8080-exec-7] c.i.backend.service.UserCardService      : 개인 카드 생성 완료 - cardId: 4, userId: 4, cardName: 개인카드1
2026-01-21T11:11:12.896+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f49b3f1] from current transaction
2026-01-21T11:11:12.904+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserCardMapper.findById     : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.card_id = ? LIMIT 1
2026-01-21T11:11:12.908+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserCardMapper.findById     : ==> Parameters: 4(Long)
2026-01-21T11:11:12.997+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserCardMapper.findById     : <==      Total: 1
2026-01-21T11:11:13.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f49b3f1]
2026-01-21T11:11:13.038+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f49b3f1]
2026-01-21T11:11:13.075+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f49b3f1]
2026-01-21T11:11:13.083+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f49b3f1]
2026-01-21T11:11:13.374+09:00  INFO 35404 --- [http-nio-8080-exec-7] c.i.backend.controller.CardController    : 개인 카드 생성 완료 - cardId: 4
2026-01-21T11:11:13.392+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:13.417+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드가 생성되었습니다., data=UserCardDto(cardId=4, userId=4, cardName=개인카 (truncated)...]
2026-01-21T11:11:13.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:14.443+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-21T11:11:14.633+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-21T11:11:14.704+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-21T11:11:14.790+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-21T11:11:14.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-21T11:11:14.958+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:15.065+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aeae459] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:15.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@517390995 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:15.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-21T11:11:15.104+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 4(Long)
2026-01-21T11:11:15.123+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-21T11:11:15.142+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aeae459]
2026-01-21T11:11:15.144+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:15.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=4, userId=4, cardName=개인카 (truncated)...]
2026-01-21T11:11:15.157+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:21.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user/4
2026-01-21T11:11:21.771+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing PUT /api/cards/user/4
2026-01-21T11:11:21.773+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user/4
2026-01-21T11:11:21.773+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured PUT /api/cards/user/4
2026-01-21T11:11:21.774+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/api/cards/user/4", parameters={}
2026-01-21T11:11:21.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#updateUserCard(Long, UserCardDto)
2026-01-21T11:11:21.780+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserCardDto(cardId=null, userId=null, cardName=개인카드1, cardNumber=1111222233334444, cardNumberEncrypt (truncated)...]
2026-01-21T11:11:21.782+09:00  INFO 35404 --- [http-nio-8080-exec-3] c.i.backend.controller.CardController    : 개인 카드 수정 요청 - cardId: 4, userId: 4
2026-01-21T11:11:21.789+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:21.790+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74469938]
2026-01-21T11:11:21.791+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1037182694 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will be managed by Spring
2026-01-21T11:11:21.791+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserCardMapper.findById     : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.card_id = ? LIMIT 1
2026-01-21T11:11:21.793+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserCardMapper.findById     : ==> Parameters: 4(Long)
2026-01-21T11:11:21.800+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserCardMapper.findById     : <==      Total: 1
2026-01-21T11:11:21.819+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74469938]
2026-01-21T11:11:21.820+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74469938] from current transaction
2026-01-21T11:11:21.821+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserCardMapper.update       : ==>  Preparing: UPDATE user_card_tb SET card_name = ?, card_number_encrypted = ?, card_last_four = ?, updated_at = NOW() WHERE card_id = ?
2026-01-21T11:11:21.822+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserCardMapper.update       : ==> Parameters: 개인카드1(String), PHo8kgcqR/w/KQeRWOVk7MCDqIMn1WdKWfXWtIIkIRI=(String), 4444(String), 4(Long)
2026-01-21T11:11:21.830+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserCardMapper.update       : <==    Updates: 1
2026-01-21T11:11:21.830+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74469938]
2026-01-21T11:11:21.832+09:00  INFO 35404 --- [http-nio-8080-exec-3] c.i.backend.service.UserCardService      : 개인 카드 수정 완료 - cardId: 4
2026-01-21T11:11:21.833+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74469938] from current transaction
2026-01-21T11:11:21.833+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserCardMapper.findById     : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.card_id = ? LIMIT 1
2026-01-21T11:11:21.834+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserCardMapper.findById     : ==> Parameters: 4(Long)
2026-01-21T11:11:21.835+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserCardMapper.findById     : <==      Total: 1
2026-01-21T11:11:21.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74469938]
2026-01-21T11:11:21.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74469938]
2026-01-21T11:11:21.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74469938]
2026-01-21T11:11:21.838+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74469938]
2026-01-21T11:11:21.843+09:00  INFO 35404 --- [http-nio-8080-exec-3] c.i.backend.controller.CardController    : 개인 카드 수정 완료 - cardId: 4
2026-01-21T11:11:21.843+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:21.849+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드가 수정되었습니다., data=UserCardDto(cardId=4, userId=4, cardName=개인카 (truncated)...]
2026-01-21T11:11:21.850+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:22.749+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-21T11:11:22.754+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-21T11:11:22.754+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-21T11:11:22.756+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-21T11:11:22.756+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-21T11:11:22.757+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:22.757+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@320694cc] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:22.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1235362007 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:22.766+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-21T11:11:22.766+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 4(Long)
2026-01-21T11:11:22.770+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-21T11:11:22.770+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@320694cc]
2026-01-21T11:11:22.771+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:22.771+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=4, userId=4, cardName=개인카 (truncated)...]
2026-01-21T11:11:22.772+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:23.895+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-21T11:11:23.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-21T11:11:23.903+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-21T11:11:23.905+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-21T11:11:23.906+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-21T11:11:23.911+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:23.974+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5526ddd] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:24.023+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14801608 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:24.025+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-21T11:11:24.026+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T11:11:24.040+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-21T11:11:24.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5526ddd]
2026-01-21T11:11:24.051+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:24.052+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-21T11:11:24.054+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:25.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-21T11:11:25.464+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:25.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-21T11:11:25.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-21T11:11:25.473+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:25.473+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-21T11:11:25.476+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-21T11:11:25.482+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:25.503+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:25.484+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:11:25.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-21T11:11:25.504+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:25.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-21T11:11:25.506+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.506+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:11:25.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-21T11:11:25.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6838375] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.518+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-21T11:11:25.521+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b3c1131] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.521+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-21T11:11:25.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-21T11:11:25.532+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-21T11:11:25.536+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@425405626 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:25.536+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@640253777 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:25.537+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.537+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:25.537+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:25.538+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65511ab2] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.539+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:25.540+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:25.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:25.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:25.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@150680728 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:25.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b3c1131]
2026-01-21T11:11:25.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6838375]
2026-01-21T11:11:25.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:25.569+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.569+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.602+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:25.634+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb12f8] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.637+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d54414b] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@499054223 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:25.642+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@363562311 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:25.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:25.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:25.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:25.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:25.703+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:25.704+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:25.706+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 20
2026-01-21T11:11:25.707+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d54414b]
2026-01-21T11:11:25.708+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb12f8]
2026-01-21T11:11:25.709+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65511ab2]
2026-01-21T11:11:25.709+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:25.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:25.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7b3377] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.713+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de91c11] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.714+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:25.715+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123794578 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:25.716+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2048144866 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:25.746+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:25.750+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:25.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:25.754+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:25.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:25.771+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:25.799+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:25.806+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T11:11:25.806+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:25.810+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de91c11]
2026-01-21T11:11:25.812+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7b3377]
2026-01-21T11:11:25.813+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:25.813+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.813+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:25.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0ba350] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee98706] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.824+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@239548340 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:25.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432989991 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:25.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31c9db13] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:25.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:25.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1561928051 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:25.830+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 58(Long), 47(Long), 41(Long), 40(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-21T11:11:25.831+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:25.841+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:25.847+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:25.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:25.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:25.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 27
2026-01-21T11:11:25.885+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee98706]
2026-01-21T11:11:25.885+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31c9db13]
2026-01-21T11:11:25.893+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0ba350]
2026-01-21T11:11:25.895+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.896+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.898+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.899+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112b056c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.899+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e1cd40] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.899+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acc5722] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@65565176 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:25.900+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1821347180 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:25.902+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1019961352 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:25.902+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:25.903+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:25.904+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:25.908+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T11:11:25.909+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:25.909+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:25.924+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:25.924+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:25.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acc5722]
2026-01-21T11:11:25.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e1cd40]
2026-01-21T11:11:25.927+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:25.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:25.929+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=58, drafterI (truncated)...]
2026-01-21T11:11:25.930+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:25.932+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:25.936+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:25.956+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-21T11:11:25.956+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:25.963+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-21T11:11:25.966+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:25.968+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-21T11:11:25.971+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T11:11:25.972+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:25.973+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-21T11:11:25.985+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112b056c]
2026-01-21T11:11:25.986+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:25.986+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-21T11:11:25.990+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.995+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df2f2a4] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:25.991+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:25.992+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.997+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1413190675 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:25.997+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:25.997+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f291771] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.000+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:26.000+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@419e520c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1879449917 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:26.009+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:26.030+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:26.033+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:26.033+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1765858296 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:26.040+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:26.042+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T11:11:26.054+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:26.054+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df2f2a4]
2026-01-21T11:11:26.062+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.067+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 20
2026-01-21T11:11:26.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c14192] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f291771]
2026-01-21T11:11:26.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2032986780 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:26.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.070+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.070+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b15c28d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.070+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@470867457 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:26.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.073+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:26.078+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.078+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@419e520c]
2026-01-21T11:11:26.079+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.085+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.086+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab4b19c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.087+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c14192]
2026-01-21T11:11:26.087+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@112414173 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:26.088+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.088+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.088+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71396fc] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.089+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.089+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2116524637 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:26.090+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.091+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:26.091+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b15c28d]
2026-01-21T11:11:26.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T11:11:26.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.096+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.097+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab4b19c]
2026-01-21T11:11:26.097+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c7f22d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.098+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:26.098+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14896562 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:26.098+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:26.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:26.102+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:26.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 58(Long), 47(Long), 41(Long), 40(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-21T11:11:26.120+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T11:11:26.121+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:26.122+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 27
2026-01-21T11:11:26.123+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71396fc]
2026-01-21T11:11:26.125+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c7f22d]
2026-01-21T11:11:26.125+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:26.126+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.129+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.130+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:26.130+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae183e3] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b14efe] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:26.132+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1902005301 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:26.132+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@763204799 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:26.133+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:26.134+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.134+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.136+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.136+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.136+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.136+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326a6439] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.138+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955962165 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:26.139+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:26.141+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.141+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.142+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:26.151+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b14efe]
2026-01-21T11:11:26.154+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae183e3]
2026-01-21T11:11:26.154+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:26.155+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:26.156+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=58, drafterI (truncated)...]
2026-01-21T11:11:26.167+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:26.168+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:26.169+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:26.200+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:26.201+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-21T11:11:26.204+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326a6439]
2026-01-21T11:11:26.205+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:11:26.208+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.213+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-21T11:11:26.213+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff06db2] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.213+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-21T11:11:26.220+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@777688025 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:26.220+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:11:26.221+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.235+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.246+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e095f9b] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.255+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.255+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@524635115 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:26.286+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff06db2]
2026-01-21T11:11:26.287+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.288+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.288+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:26.307+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:26.316+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:26.323+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.331+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:26.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e095f9b]
2026-01-21T11:11:26.376+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:26.383+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.384+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:26.384+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@734483c7] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.385+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:26.385+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1787731321 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:26.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:26.389+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.389+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.390+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.390+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f3ce14] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.391+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1107002043 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:26.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:26.430+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:26.443+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@734483c7]
2026-01-21T11:11:26.456+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.457+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5765135e] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@15268046 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:26.467+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:26.471+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:26.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:26.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f3ce14]
2026-01-21T11:11:26.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.503+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@797c9b9] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@775762993 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:26.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.525+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T11:11:26.537+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5765135e]
2026-01-21T11:11:26.557+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.558+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dafbde4] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.559+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.560+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@841988332 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:26.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@797c9b9]
2026-01-21T11:11:26.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:26.569+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.570+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:26.573+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:26.577+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.585+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dafbde4]
2026-01-21T11:11:26.586+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.586+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75927288] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.589+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1164091715 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:26.592+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:26.597+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T11:11:26.619+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T11:11:26.620+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75927288]
2026-01-21T11:11:26.621+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.621+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f81790c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.622+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@694240326 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:26.622+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:26.624+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:26.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T11:11:26.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f81790c]
2026-01-21T11:11:26.650+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ff4d521] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.652+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@469339850 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:26.652+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.653+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.658+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.664+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ff4d521]
2026-01-21T11:11:26.666+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.667+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d717014] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.669+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960177990 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:26.670+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:26.672+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T11:11:26.683+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T11:11:26.688+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d717014]
2026-01-21T11:11:26.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:26.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5635f5bc] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:26.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1346559678 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:26.690+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:26.690+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:26.692+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:26.693+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5635f5bc]
2026-01-21T11:11:26.695+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:26.696+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:26.698+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:28.202+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-21T11:11:28.202+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-01-21T11:11:28.206+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:28.207+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-21T11:11:28.214+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:28.217+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expense-categories/merged
2026-01-21T11:11:28.217+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:28.218+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-21T11:11:28.219+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:28.219+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-21T11:11:28.220+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:28.222+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-21T11:11:28.222+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:28.223+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-21T11:11:28.223+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d31c327] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:28.225+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-21T11:11:28.230+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:28.232+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a32b877] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:28.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@948962204 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:28.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:28.235+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1196483801 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:28.236+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:28.236+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-21T11:11:28.239+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:28.248+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d31c327]
2026-01-21T11:11:28.241+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-21T11:11:28.249+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:28.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@275cf77d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:28.253+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1905584208 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:28.254+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:28.255+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:28.257+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:28.258+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@275cf77d]
2026-01-21T11:11:28.258+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:28.259+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:28.263+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:28.322+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-21T11:11:28.323+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a32b877]
2026-01-21T11:11:28.326+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:28.330+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-21T11:11:28.336+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:28.342+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-01-21T11:11:28.354+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expense-categories/merged
2026-01-21T11:11:28.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-01-21T11:11:28.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-01-21T11:11:28.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-01-21T11:11:28.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-21T11:11:28.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-01-21T11:11:28.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:28.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7353d6f4] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:28.361+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@225127165 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:28.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-01-21T11:11:28.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : ==> Parameters: 1(Long), 1(Long)
2026-01-21T11:11:28.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-01-21T11:11:28.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7353d6f4]
2026-01-21T11:11:28.390+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:28.390+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-01-21T11:11:28.392+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:28.419+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/4/approvers/active
2026-01-21T11:11:28.419+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/4/approvers/active
2026-01-21T11:11:28.424+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers/active
2026-01-21T11:11:28.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers/active
2026-01-21T11:11:28.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers/active
2026-01-21T11:11:28.430+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers/active", parameters={}
2026-01-21T11:11:28.432+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-21T11:11:28.433+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-21T11:11:28.434+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-21T11:11:28.435+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:28.435+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c1d4953] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:28.436+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2004191736 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:28.436+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-21T11:11:28.437+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:28.638+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 2
2026-01-21T11:11:28.639+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c1d4953]
2026-01-21T11:11:28.640+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:28.640+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=5, username=test_user4, password=null, (truncated)...]
2026-01-21T11:11:28.641+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:28.643+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers/active
2026-01-21T11:11:28.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers/active
2026-01-21T11:11:28.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers/active
2026-01-21T11:11:28.650+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers/active", parameters={}
2026-01-21T11:11:28.653+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-21T11:11:28.654+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-21T11:11:28.655+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-21T11:11:28.656+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:28.656+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140be69e] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:28.658+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1420561533 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:28.658+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-21T11:11:28.659+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:28.667+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 2
2026-01-21T11:11:28.667+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140be69e]
2026-01-21T11:11:28.668+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:28.668+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=5, username=test_user4, password=null, (truncated)...]
2026-01-21T11:11:28.669+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:29.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-21T11:11:29.685+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-21T11:11:29.724+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-21T11:11:29.758+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-21T11:11:29.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-21T11:11:29.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-21T11:11:29.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-21T11:11:29.764+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-21T11:11:29.764+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-21T11:11:29.764+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-21T11:11:29.764+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:29.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:29.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@667ab548] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:29.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6bbfc5] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:29.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@446201444 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:29.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790478726 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:29.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-21T11:11:29.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-21T11:11:29.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T11:11:29.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 4(Long)
2026-01-21T11:11:29.773+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-21T11:11:29.774+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@667ab548]
2026-01-21T11:11:29.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-21T11:11:29.776+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:29.776+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6bbfc5]
2026-01-21T11:11:29.777+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-21T11:11:29.780+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:29.781+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:29.784+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=4, userId=4, cardName=개인카 (truncated)...]
2026-01-21T11:11:29.786+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:29.800+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-21T11:11:29.800+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-21T11:11:29.804+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-21T11:11:29.804+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-21T11:11:29.807+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-21T11:11:29.807+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-21T11:11:29.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-21T11:11:29.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-21T11:11:29.812+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-21T11:11:29.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-21T11:11:29.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:29.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:29.815+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cff25dc] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:29.819+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e1250f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:29.824+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1326371672 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:29.824+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@970688438 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:29.824+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.created_at DESC
2026-01-21T11:11:29.824+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-21T11:11:29.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 4(Long)
2026-01-21T11:11:29.826+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T11:11:29.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-21T11:11:29.837+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveByUserId             : <==      Total: 1
2026-01-21T11:11:29.837+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cff25dc]
2026-01-21T11:11:29.838+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e1250f]
2026-01-21T11:11:29.839+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:29.839+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:29.840+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-21T11:11:29.840+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[UserCardDto(cardId=4, userId=4, cardName=개인카 (truncated)...]
2026-01-21T11:11:29.842+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:29.853+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:36.012+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:36.013+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-21T11:11:36.016+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-21T11:11:36.022+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:36.022+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:11:36.024+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-21T11:11:36.025+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:36.025+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-21T11:11:36.030+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-21T11:11:36.031+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:36.032+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-21T11:11:36.034+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-21T11:11:36.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:36.036+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:11:36.037+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-21T11:11:36.037+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.038+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.043+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299fd026] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6547c859] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4573ce6f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2053358970 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:36.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1691126922 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:36.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@423631477 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:36.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.063+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:36.064+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:36.065+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:36.071+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 20
2026-01-21T11:11:36.073+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:36.080+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6547c859]
2026-01-21T11:11:36.082+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4573ce6f]
2026-01-21T11:11:36.088+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299fd026]
2026-01-21T11:11:36.088+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.089+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.092+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@723c680a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.102+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18162165] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.102+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31bba1d5] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1562543484 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@913436692 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:36.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1526413303 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:36.104+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.105+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.106+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.107+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.125+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.125+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.125+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.130+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18162165]
2026-01-21T11:11:36.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31bba1d5]
2026-01-21T11:11:36.134+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@723c680a]
2026-01-21T11:11:36.134+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.135+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:36.136+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.136+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d41350c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.136+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:36.140+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671150c0] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.140+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1425354440 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:36.143+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:36.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1996228624 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:36.150+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:36.154+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:36.154+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 58(Long), 47(Long), 41(Long), 40(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-21T11:11:36.156+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:36.157+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:36.157+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:36.158+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:36.164+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:36.168+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.185+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dc0f9c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.218+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18804754 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:36.218+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 27
2026-01-21T11:11:36.219+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T11:11:36.220+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:36.221+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d41350c]
2026-01-21T11:11:36.221+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671150c0]
2026-01-21T11:11:36.222+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:36.223+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.224+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52829b13] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.233+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e83925] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@639577370 wrapping com.mysql.cj.jdbc.ConnectionImpl@40fd6599] will not be managed by Spring
2026-01-21T11:11:36.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477634056 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.237+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.238+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.241+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.241+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.249+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:36.268+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dc0f9c]
2026-01-21T11:11:36.269+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.269+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.269+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.271+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52829b13]
2026-01-21T11:11:36.271+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e83925]
2026-01-21T11:11:36.271+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49cb65b2] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.272+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:36.273+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.274+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738234328 wrapping com.mysql.cj.jdbc.ConnectionImpl@1057da1c] will not be managed by Spring
2026-01-21T11:11:36.274+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@120efe59] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.274+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=58, drafterI (truncated)...]
2026-01-21T11:11:36.275+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.276+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1725684780 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.277+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:36.280+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.282+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-21T11:11:36.283+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:36.289+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-21T11:11:36.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T11:11:36.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-21T11:11:36.292+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-21T11:11:36.293+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-21T11:11:36.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5619da9a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.302+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1894270683 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:36.304+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:36.305+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:36.307+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T11:11:36.315+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49cb65b2]
2026-01-21T11:11:36.318+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@120efe59]
2026-01-21T11:11:36.318+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:36.319+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.324+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 20
2026-01-21T11:11:36.325+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:36.331+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214a7caa] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.332+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5619da9a]
2026-01-21T11:11:36.333+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:36.334+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1146331884 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.336+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.351+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:36.353+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:36.354+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f69e82a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:36.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:36.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2008818263 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:36.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:36.366+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.375+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:36.376+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:36.393+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T11:11:36.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214a7caa]
2026-01-21T11:11:36.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f89a1f9] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.400+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645d35a9] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f69e82a]
2026-01-21T11:11:36.420+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@369142436 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.420+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.420+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.421+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276035bb] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.422+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.423+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@124301765 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:36.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@805747350 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:36.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.433+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:36.434+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:36.436+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645d35a9]
2026-01-21T11:11:36.437+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 58(Long), 47(Long), 41(Long), 40(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-21T11:11:36.440+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:36.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5e1dd3] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 27
2026-01-21T11:11:36.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@933463884 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276035bb]
2026-01-21T11:11:36.470+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:36.471+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.472+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a1e46e] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.472+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T11:11:36.477+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:36.478+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909120716 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:36.482+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f89a1f9]
2026-01-21T11:11:36.483+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.483+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.486+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550f9b0f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1024876975 wrapping com.mysql.cj.jdbc.ConnectionImpl@4ba8562f] will not be managed by Spring
2026-01-21T11:11:36.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.542+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.543+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.544+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T11:11:36.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550f9b0f]
2026-01-21T11:11:36.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a1e46e]
2026-01-21T11:11:36.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5e1dd3]
2026-01-21T11:11:36.553+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:36.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:36.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.557+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:36.559+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=58, drafterI (truncated)...]
2026-01-21T11:11:36.559+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ccb3e] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.569+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:36.577+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:36.583+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1222045229 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.604+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.607+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.609+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:36.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:36.635+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:36.637+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:36.650+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ccb3e]
2026-01-21T11:11:36.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:36.652+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:36.652+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.659+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:36.659+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507804ac] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.665+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:36.669+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@94529693 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.684+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:36.700+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-21T11:11:36.703+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:36.705+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-21T11:11:36.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-21T11:11:36.780+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:36.789+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-21T11:11:36.796+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507804ac]
2026-01-21T11:11:36.798+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T11:11:36.798+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.801+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.803+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@665a9b4e] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.804+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3992b64a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.820+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1981263437 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b067225] will not be managed by Spring
2026-01-21T11:11:36.821+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.824+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@775191455 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:36.841+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.850+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.854+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@665a9b4e]
2026-01-21T11:11:36.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:36.864+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.866+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:36.866+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3992b64a]
2026-01-21T11:11:36.869+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:36.870+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.871+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4b3186] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1002980179 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:36.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:36.889+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:36.893+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T11:11:36.915+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T11:11:36.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T11:11:36.929+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:36.930+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T11:11:36.932+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4b3186]
2026-01-21T11:11:36.932+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T11:11:36.935+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.937+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:36.937+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aec6bde] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.938+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61929174] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:36.938+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090710020 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:36.939+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1638674686 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:36.939+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:36.953+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:36.940+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T11:11:36.958+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-21T11:11:37.002+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 14
2026-01-21T11:11:37.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T11:11:37.017+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61929174]
2026-01-21T11:11:37.017+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aec6bde]
2026-01-21T11:11:37.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:37.031+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:37.032+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74d6e1ab] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:37.032+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3df910] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:37.033+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@29022068 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:37.033+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1931922194 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:37.034+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:37.034+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:37.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:37.046+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:37.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:37.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:37.073+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3df910]
2026-01-21T11:11:37.073+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74d6e1ab]
2026-01-21T11:11:37.073+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:37.074+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:37.074+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529c9ce2] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:37.075+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T11:11:37.076+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1734089432 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:37.079+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:37.081+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:37.083+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T11:11:37.189+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T11:11:37.208+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529c9ce2]
2026-01-21T11:11:37.209+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:37.210+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133b868c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:37.219+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@636904325 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:37.239+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:37.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:37.272+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T11:11:37.278+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133b868c]
2026-01-21T11:11:37.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:37.289+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391c3cff] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:37.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1985790646 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:37.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:37.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:37.313+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:37.315+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391c3cff]
2026-01-21T11:11:37.317+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:37.317+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b19cc71] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:37.318+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1136324649 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:37.321+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:37.323+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T11:11:37.339+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T11:11:37.343+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b19cc71]
2026-01-21T11:11:37.346+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:37.347+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304de1b0] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:37.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1709365644 wrapping com.mysql.cj.jdbc.ConnectionImpl@5f2a8c0b] will not be managed by Spring
2026-01-21T11:11:37.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:37.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:37.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:37.351+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@304de1b0]
2026-01-21T11:11:37.352+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:37.353+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T11:11:37.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:37.837+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/export/tax-review/start
2026-01-21T11:11:37.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/export/tax-review/start
2026-01-21T11:11:37.867+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/export/tax-review/start
2026-01-21T11:11:37.873+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/export/tax-review/start
2026-01-21T11:11:37.889+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/export/tax-review/start", parameters={masked}
2026-01-21T11:11:37.908+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#startTaxReviewExport(String, String)
2026-01-21T11:11:37.917+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.startTaxReviewExport(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:37.919+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.startTaxReviewExport(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:37.929+09:00  INFO 35404 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 세무 검토 자료 다운로드 작업 시작 - userId: 4, startDate: null, endDate: null, jobId: aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:37.938+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:37.939+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a227e79] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:37.944+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@521082902 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:37.947+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T11:11:37.952+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-21T11:11:37.955+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:37.956+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=처리 중, data=ExpenseController.ExpenseCreationResponse(jobId=aee0fbd (truncated)...]
2026-01-21T11:11:37.957+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:37.975+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 27
2026-01-21T11:11:37.976+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a227e79]
2026-01-21T11:11:37.979+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:37.979+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7206ad8f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:37.980+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2095651723 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:37.980+09:00 DEBUG 35404 --- [async-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T11:11:37.980+09:00 DEBUG 35404 --- [async-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-21T11:11:38.003+09:00 DEBUG 35404 --- [async-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T11:11:38.003+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7206ad8f]
2026-01-21T11:11:38.003+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.004+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@514c36c0] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.005+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375489459 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.005+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:38.006+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 58(Long), 57(Long), 47(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-21T11:11:38.074+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:38.089+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@514c36c0]
2026-01-21T11:11:38.099+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.102+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18803127] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.105+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1031282895 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.106+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:38.107+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long), 6(Long), 8(Long), 13(Long), 14(Long), 16(Long), 17(Long), 18(Long), 19(Long), 20(Long), 24(Long), 25(Long), 26(Long), 27(Long), 31(Long), 32(Long), 33(Long), 34(Long), 36(Long), 37(Long), 39(Long), 40(Long), 41(Long), 47(Long), 57(Long), 58(Long), 68(Long)
2026-01-21T11:11:38.116+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:38.117+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18803127]
2026-01-21T11:11:38.120+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.121+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4291fca3] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.122+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1049870950 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.122+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T11:11:38.123+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long), 6(Long), 8(Long), 13(Long), 14(Long), 16(Long), 17(Long), 18(Long), 19(Long), 20(Long), 24(Long), 25(Long), 26(Long), 27(Long), 31(Long), 32(Long), 33(Long), 34(Long), 36(Long), 37(Long), 39(Long), 40(Long), 41(Long), 47(Long), 57(Long), 58(Long), 68(Long)
2026-01-21T11:11:38.130+09:00 DEBUG 35404 --- [async-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 37
2026-01-21T11:11:38.130+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4291fca3]
2026-01-21T11:11:38.132+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.132+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@adc2e88] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.135+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206235028 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.139+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.142+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T11:11:38.402+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.403+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@adc2e88]
2026-01-21T11:11:38.403+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.404+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dbc3e4c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.404+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1719662877 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.404+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.405+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 7(Long), 1(Long)
2026-01-21T11:11:38.406+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.407+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dbc3e4c]
2026-01-21T11:11:38.407+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.408+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45af3d11] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.409+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@688727478 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.411+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.412+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 10(Long), 1(Long)
2026-01-21T11:11:38.414+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.415+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45af3d11]
2026-01-21T11:11:38.415+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.415+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdaadfd] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.416+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1671513250 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.416+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.417+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 16(Long), 1(Long)
2026-01-21T11:11:38.418+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.419+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdaadfd]
2026-01-21T11:11:38.419+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.419+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffa3048] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.420+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@88457487 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.420+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.420+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 17(Long), 1(Long)
2026-01-21T11:11:38.422+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.422+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffa3048]
2026-01-21T11:11:38.423+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.423+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402a6764] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.423+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@512522073 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.424+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.425+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 19(Long), 1(Long)
2026-01-21T11:11:38.428+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.428+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402a6764]
2026-01-21T11:11:38.428+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.429+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e4bd4b] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.430+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@174520404 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.430+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.433+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 20(Long), 1(Long)
2026-01-21T11:11:38.435+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.435+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e4bd4b]
2026-01-21T11:11:38.436+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.437+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a7e555] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.437+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@706022447 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.438+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.440+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 21(Long), 1(Long)
2026-01-21T11:11:38.449+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.449+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a7e555]
2026-01-21T11:11:38.450+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.450+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3addee] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.451+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@580783249 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.451+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.451+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 22(Long), 1(Long)
2026-01-21T11:11:38.454+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.454+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3addee]
2026-01-21T11:11:38.455+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.456+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50bf4608] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.457+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@221721692 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.457+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.458+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 23(Long), 1(Long)
2026-01-21T11:11:38.726+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.728+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50bf4608]
2026-01-21T11:11:38.729+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.729+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:38.729+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f53bc55] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.729+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360063665 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.730+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.730+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 24(Long), 1(Long)
2026-01-21T11:11:38.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:38.732+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.732+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f53bc55]
2026-01-21T11:11:38.732+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.733+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4328661] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.733+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:38.734+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@648094630 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.735+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:38.735+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.735+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:38.735+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 25(Long), 1(Long)
2026-01-21T11:11:38.736+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:38.739+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:38.739+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.740+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4328661]
2026-01-21T11:11:38.746+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.748+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18277c6b] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=50, message=영수증 데이터를 조회하는 중... (truncated)...]
2026-01-21T11:11:38.750+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@146202752 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.751+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.753+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:38.754+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 26(Long), 1(Long)
2026-01-21T11:11:38.758+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.758+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18277c6b]
2026-01-21T11:11:38.763+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.766+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1285f908] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.771+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@836897559 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.772+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.773+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 27(Long), 1(Long)
2026-01-21T11:11:38.777+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.786+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1285f908]
2026-01-21T11:11:38.787+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.788+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b64ce3] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.789+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1044817956 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.789+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.790+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 28(Long), 1(Long)
2026-01-21T11:11:38.803+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.805+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b64ce3]
2026-01-21T11:11:38.805+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.806+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3cb7ff] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.807+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1524379439 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.807+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.808+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 32(Long), 1(Long)
2026-01-21T11:11:38.818+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.820+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3cb7ff]
2026-01-21T11:11:38.822+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.822+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23cda84c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.823+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@759193733 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.823+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.824+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 33(Long), 1(Long)
2026-01-21T11:11:38.835+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.837+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23cda84c]
2026-01-21T11:11:38.838+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.839+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4284e02d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.839+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@205893625 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.840+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.841+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 34(Long), 1(Long)
2026-01-21T11:11:38.847+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.850+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4284e02d]
2026-01-21T11:11:38.851+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.852+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a9fd93] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.852+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@625600547 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.853+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.855+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 35(Long), 1(Long)
2026-01-21T11:11:38.897+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.897+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a9fd93]
2026-01-21T11:11:38.897+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.898+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b37c960] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.898+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1425928944 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.898+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.899+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 36(Long), 1(Long)
2026-01-21T11:11:38.900+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.901+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b37c960]
2026-01-21T11:11:38.901+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.901+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f544c6a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.901+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246620713 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.902+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.903+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 42(Long), 1(Long)
2026-01-21T11:11:38.907+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:38.909+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f544c6a]
2026-01-21T11:11:38.911+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:38.911+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c0198d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:38.912+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@989475843 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:38.912+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:38.912+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 43(Long), 1(Long)
2026-01-21T11:11:38.983+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:38.986+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:38.988+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:38.995+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:38.997+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:39.000+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:39.001+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=50, message=영수증 데이터를 조회하는 중... (truncated)...]
2026-01-21T11:11:39.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:39.119+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.133+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c0198d]
2026-01-21T11:11:39.134+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.134+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@916a620] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.167+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1043192574 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.168+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.180+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 44(Long), 1(Long)
2026-01-21T11:11:39.188+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.191+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@916a620]
2026-01-21T11:11:39.203+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.204+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57332f45] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.222+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1806218277 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.225+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.246+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 45(Long), 1(Long)
2026-01-21T11:11:39.290+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.296+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57332f45]
2026-01-21T11:11:39.300+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.301+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf6a1fb] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.302+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1173483207 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.303+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.304+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 46(Long), 1(Long)
2026-01-21T11:11:39.361+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.362+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf6a1fb]
2026-01-21T11:11:39.363+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.363+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b07977] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.364+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2113401219 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.364+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.365+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 47(Long), 1(Long)
2026-01-21T11:11:39.367+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.375+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b07977]
2026-01-21T11:11:39.388+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.401+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2a8268] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.415+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@798041403 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.419+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.426+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 49(Long), 1(Long)
2026-01-21T11:11:39.458+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.464+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2a8268]
2026-01-21T11:11:39.473+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.480+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0923e5] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.481+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:39.484+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@881576366 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.488+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.488+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:39.489+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 50(Long), 1(Long)
2026-01-21T11:11:39.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:39.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:39.501+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:39.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:39.515+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=50, message=영수증 데이터를 조회하는 중... (truncated)...]
2026-01-21T11:11:39.516+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0923e5]
2026-01-21T11:11:39.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:39.519+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.528+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a800fa2] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.529+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085618972 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.532+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.536+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 52(Long), 1(Long)
2026-01-21T11:11:39.554+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.556+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a800fa2]
2026-01-21T11:11:39.558+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.559+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2800f7e5] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.566+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@306647128 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.566+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.569+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 53(Long), 1(Long)
2026-01-21T11:11:39.575+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.580+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2800f7e5]
2026-01-21T11:11:39.581+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.583+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b66bfcd] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.583+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@888589467 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.588+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.590+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 55(Long), 1(Long)
2026-01-21T11:11:39.624+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.638+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b66bfcd]
2026-01-21T11:11:39.659+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.663+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd72760] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.664+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122067936 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.665+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.667+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 68(Long), 1(Long)
2026-01-21T11:11:39.671+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-21T11:11:39.674+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd72760]
2026-01-21T11:11:39.681+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.684+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1044a117] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.686+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1165846616 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.702+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.704+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 69(Long), 1(Long)
2026-01-21T11:11:39.708+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-21T11:11:39.717+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1044a117]
2026-01-21T11:11:39.717+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.723+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@439d11ad] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.724+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1994673360 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.725+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.732+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 95(Long), 1(Long)
2026-01-21T11:11:39.750+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-21T11:11:39.755+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@439d11ad]
2026-01-21T11:11:39.767+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.768+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e34db] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.769+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@691359070 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.770+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.771+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 96(Long), 1(Long)
2026-01-21T11:11:39.781+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-21T11:11:39.782+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e34db]
2026-01-21T11:11:39.783+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.783+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4f6611] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.786+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2023011151 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.786+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.797+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 97(Long), 1(Long)
2026-01-21T11:11:39.806+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-21T11:11:39.808+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4f6611]
2026-01-21T11:11:39.824+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:39.831+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efdb795] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:39.832+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852978613 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:39.837+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-21T11:11:39.840+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 110(Long), 1(Long)
2026-01-21T11:11:39.847+09:00 DEBUG 35404 --- [async-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-21T11:11:39.848+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efdb795]
2026-01-21T11:11:39.973+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:39.975+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:39.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:39.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:39.978+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:39.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:39.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:39.981+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:40.562+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:40.570+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:40.571+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:40.573+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:40.574+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:40.618+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:40.639+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:40.644+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:40.970+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:40.985+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:41.000+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:41.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:41.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:41.006+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:41.007+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:41.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:41.480+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:41.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:41.522+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:41.534+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:41.538+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:41.541+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:41.547+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:41.563+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:41.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:41.980+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:41.980+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:41.981+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:41.982+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:41.983+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:41.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:41.985+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:42.483+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:42.487+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:42.488+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:42.491+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:42.494+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:42.501+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:42.503+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:42.504+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:42.949+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:42.949+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f453d46] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:42.952+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@425621614 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:42.953+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:42.955+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:42.965+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:42.969+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f453d46]
2026-01-21T11:11:42.973+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:42.974+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:42.979+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414d87ce] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:42.981+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1149647446 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:42.981+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:42.984+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:42.985+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:42.985+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:42.985+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:42.986+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:42.987+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:42.988+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:42.988+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:42.989+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414d87ce]
2026-01-21T11:11:42.990+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:42.997+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.006+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1538b041] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.007+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@954611423 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.008+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.012+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.015+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.016+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1538b041]
2026-01-21T11:11:43.020+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.021+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65dd0a4f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.021+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@901186573 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.021+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.022+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.024+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.025+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65dd0a4f]
2026-01-21T11:11:43.030+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.032+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea3333f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.032+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1134675926 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.033+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.033+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.037+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.040+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea3333f]
2026-01-21T11:11:43.044+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.048+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@678ea72] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.049+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1360333641 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.049+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.049+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.051+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.052+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@678ea72]
2026-01-21T11:11:43.055+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.056+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4ddbbd] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.056+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1244105692 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.057+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.057+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.069+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.070+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4ddbbd]
2026-01-21T11:11:43.074+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.080+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bba893] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.082+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1968048394 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.083+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.088+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.091+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.092+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bba893]
2026-01-21T11:11:43.098+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.098+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9b6ef0] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.099+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1906947776 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.099+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.100+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.103+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.103+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c9b6ef0]
2026-01-21T11:11:43.106+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.112+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f48b592] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.113+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415479909 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.113+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.117+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.121+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.164+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f48b592]
2026-01-21T11:11:43.167+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.180+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75456e6] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.187+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1032492987 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.249+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.258+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.265+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.266+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75456e6]
2026-01-21T11:11:43.269+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.272+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cdb3daf] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.274+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@966638516 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.275+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.280+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.297+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.297+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cdb3daf]
2026-01-21T11:11:43.300+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.304+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100bbe6c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.305+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442373511 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.307+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.313+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.321+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.324+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100bbe6c]
2026-01-21T11:11:43.329+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.332+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f42a295] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.333+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@41393615 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.334+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.335+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.347+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.350+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f42a295]
2026-01-21T11:11:43.353+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.363+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b6f998] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.366+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@36932121 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.366+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.368+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:43.382+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.391+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b6f998]
2026-01-21T11:11:43.398+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.402+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7d1f4] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.403+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@646277165 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.404+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.405+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:43.421+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.422+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7d1f4]
2026-01-21T11:11:43.456+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.473+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d172b7] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.481+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@80040726 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.489+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:43.490+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.492+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:43.500+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 버거킹(String), 1(Long)
2026-01-21T11:11:43.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:43.501+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:43.504+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:43.506+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:43.507+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:43.508+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d172b7]
2026-01-21T11:11:43.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:43.515+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.517+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fb6c395] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.518+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883068958 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.521+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.526+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 다이소(String), 1(Long)
2026-01-21T11:11:43.556+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.559+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fb6c395]
2026-01-21T11:11:43.562+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.566+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769881cb] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.567+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134597350 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.568+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.569+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:43.581+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.581+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769881cb]
2026-01-21T11:11:43.585+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.589+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7c197a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.590+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128105447 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.591+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.596+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-21T11:11:43.606+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.607+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7c197a]
2026-01-21T11:11:43.612+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.616+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4d3ec9] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.617+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1926650803 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.618+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.621+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:43.625+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.629+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e4d3ec9]
2026-01-21T11:11:43.631+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.636+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1abd7a56] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.637+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@766616766 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.638+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.640+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-21T11:11:43.653+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.655+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1abd7a56]
2026-01-21T11:11:43.658+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.662+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fbedfe3] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.664+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050698632 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.665+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.666+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 123(String), 1(Long)
2026-01-21T11:11:43.669+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:43.669+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fbedfe3]
2026-01-21T11:11:43.672+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.673+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@209bafb5] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.674+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@434322818 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.675+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.681+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:43.686+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:43.688+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@209bafb5]
2026-01-21T11:11:43.690+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.698+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f68803b] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.699+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660121700 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.700+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.701+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:43.708+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:43.714+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f68803b]
2026-01-21T11:11:43.717+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.720+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532733d6] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.721+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@143984849 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.721+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.722+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-21T11:11:43.724+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:43.730+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532733d6]
2026-01-21T11:11:43.732+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.733+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7114c9b5] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.734+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@466091458 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.739+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.742+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), test(String), 1(Long)
2026-01-21T11:11:43.757+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:43.780+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7114c9b5]
2026-01-21T11:11:43.789+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.819+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b77fafb] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.861+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096748353 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.865+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.866+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:43.886+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:43.888+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b77fafb]
2026-01-21T11:11:43.889+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.890+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4631b9f1] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.891+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1384457198 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.892+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.897+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:43.900+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:43.900+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4631b9f1]
2026-01-21T11:11:43.902+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.904+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189f2e4b] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.905+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1395323544 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.906+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.907+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:43.926+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:43.930+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189f2e4b]
2026-01-21T11:11:43.932+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.933+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd3dccc] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.934+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@207575627 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.935+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.936+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:43.940+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:43.941+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dd3dccc]
2026-01-21T11:11:43.945+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:43.951+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7955a607] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:43.952+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169025629 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:43.953+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:43.954+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 해림(String), 1(Long)
2026-01-21T11:11:43.981+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:43.983+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:43.986+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7955a607]
2026-01-21T11:11:43.989+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:44.001+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:44.002+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:44.002+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a906836] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:44.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:44.003+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@237082877 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:44.004+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:44.005+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:44.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:44.006+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), ktx(String), 1(Long)
2026-01-21T11:11:44.006+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:44.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:44.038+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:44.041+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a906836]
2026-01-21T11:11:44.044+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:44.048+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6c5312] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:44.049+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2018331235 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:44.049+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:44.050+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 상호명1(String), 1(Long)
2026-01-21T11:11:44.054+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:44.056+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6c5312]
2026-01-21T11:11:44.066+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:44.067+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61b75023] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:44.069+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086566852 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:44.071+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:44.074+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 상호명2(String), 1(Long)
2026-01-21T11:11:44.089+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:44.090+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61b75023]
2026-01-21T11:11:44.092+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:44.096+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19336319] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:44.097+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113464404 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:44.099+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:44.101+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 상호명1(String), 1(Long)
2026-01-21T11:11:44.124+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:44.134+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19336319]
2026-01-21T11:11:44.139+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:44.140+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32bf0d9c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:44.155+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@806783865 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:44.158+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:44.171+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 상호명1(String), 1(Long)
2026-01-21T11:11:44.185+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:44.189+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32bf0d9c]
2026-01-21T11:11:44.486+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:44.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:44.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:44.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:44.522+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:44.532+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:44.533+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:44.553+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:45.047+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:45.057+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.059+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50025a8d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.062+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:45.124+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:45.125+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1732721899 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.178+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:45.191+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.192+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:45.194+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.194+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:45.200+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:45.203+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:45.207+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.212+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50025a8d]
2026-01-21T11:11:45.215+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.216+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cf1ca7] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.217+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1734888381 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.217+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.218+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.220+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.221+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cf1ca7]
2026-01-21T11:11:45.222+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.223+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e34239] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.224+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1303464454 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.224+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.225+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.234+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.235+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e34239]
2026-01-21T11:11:45.238+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.239+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ad3486] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.240+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1282428992 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.240+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.241+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.247+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.248+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ad3486]
2026-01-21T11:11:45.249+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.249+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3c7ad3] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.250+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1740602102 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.250+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.251+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.253+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.254+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3c7ad3]
2026-01-21T11:11:45.255+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.256+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@147d50c1] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.256+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@437869183 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.257+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.258+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.264+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.264+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@147d50c1]
2026-01-21T11:11:45.266+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.266+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f99490] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.267+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1341927734 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.267+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.268+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.273+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.280+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f99490]
2026-01-21T11:11:45.283+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.286+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ba8d13] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.287+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186305088 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.287+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.287+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.289+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.290+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ba8d13]
2026-01-21T11:11:45.292+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.296+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88abdc8] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.298+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@721058783 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.299+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.300+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.302+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.303+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@88abdc8]
2026-01-21T11:11:45.304+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.305+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7e40ec] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.305+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@105370294 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.306+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.309+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.313+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.314+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b7e40ec]
2026-01-21T11:11:45.315+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.316+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771d4977] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.318+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590496856 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.318+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.320+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.417+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.423+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771d4977]
2026-01-21T11:11:45.427+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.453+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a386fd6] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.453+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1467207959 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.456+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.458+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.465+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.466+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a386fd6]
2026-01-21T11:11:45.468+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.468+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2c3618] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.468+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862173268 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.470+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.471+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.484+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:45.486+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:45.491+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2c3618]
2026-01-21T11:11:45.491+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:45.502+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.503+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eccc8b1] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.504+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@361479046 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.502+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:45.504+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:45.507+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:45.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:45.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:45.535+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.540+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eccc8b1]
2026-01-21T11:11:45.549+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.550+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c42841] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.551+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1625684136 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.565+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.567+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:45.584+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.596+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c42841]
2026-01-21T11:11:45.600+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.606+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e67205] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.607+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518977560 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.608+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.610+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:45.626+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.634+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e67205]
2026-01-21T11:11:45.636+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.638+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca00cbc] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.639+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1817591159 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.649+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.650+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 버거킹(String), 1(Long)
2026-01-21T11:11:45.668+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.669+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca00cbc]
2026-01-21T11:11:45.670+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.672+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f90513c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.673+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@867791774 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.675+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.680+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 다이소(String), 1(Long)
2026-01-21T11:11:45.682+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.683+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f90513c]
2026-01-21T11:11:45.684+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.686+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf847b4] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.687+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@373093958 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.688+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.689+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:45.712+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.714+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf847b4]
2026-01-21T11:11:45.716+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.716+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af4ebce] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.717+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1127796931 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.717+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.718+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-21T11:11:45.741+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.758+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af4ebce]
2026-01-21T11:11:45.765+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.765+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56d6c142] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.766+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@991034061 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.766+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.767+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:45.775+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.775+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56d6c142]
2026-01-21T11:11:45.780+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.782+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e26af5] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:45.783+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1356751226 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:45.784+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:45.785+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-21T11:11:45.816+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:45.824+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e26af5]
2026-01-21T11:11:45.828+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:45.965+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e307ea4] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:46.072+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@765855829 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.082+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:46.098+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.099+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:46.100+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 123(String), 1(Long)
2026-01-21T11:11:46.109+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:46.116+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:46.121+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:46.137+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:46.150+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e307ea4]
2026-01-21T11:11:46.148+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:46.151+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.152+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3816a00] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.153+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:46.153+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@248115594 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.154+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.170+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:46.187+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.190+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3816a00]
2026-01-21T11:11:46.191+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.201+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea496d3] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.202+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@377302637 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.206+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.206+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:46.234+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.237+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea496d3]
2026-01-21T11:11:46.244+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.247+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393b08d0] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.250+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@224811686 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.253+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.270+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-21T11:11:46.279+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.281+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393b08d0]
2026-01-21T11:11:46.283+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.285+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76c6857d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.288+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@391806717 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.290+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.291+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), test(String), 1(Long)
2026-01-21T11:11:46.302+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.304+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76c6857d]
2026-01-21T11:11:46.306+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.315+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dade333] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.321+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1325556374 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.322+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.336+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:46.401+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.402+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dade333]
2026-01-21T11:11:46.408+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.414+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@168e4cdf] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.417+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1951957318 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.419+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.420+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:46.443+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.445+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@168e4cdf]
2026-01-21T11:11:46.447+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.450+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79289d2e] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.456+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@497340000 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.464+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.466+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:46.483+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:46.488+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.496+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:46.499+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79289d2e]
2026-01-21T11:11:46.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:46.501+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:46.501+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.501+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:46.501+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b27601] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.502+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:46.502+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@709777460 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.503+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:46.503+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:46.506+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:46.614+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.636+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b27601]
2026-01-21T11:11:46.645+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.647+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0947f2] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.648+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@160377388 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.650+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.670+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 해림(String), 1(Long)
2026-01-21T11:11:46.736+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.746+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0947f2]
2026-01-21T11:11:46.747+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.748+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52df0ef5] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.750+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355394955 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.751+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.752+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), ktx(String), 1(Long)
2026-01-21T11:11:46.783+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.797+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52df0ef5]
2026-01-21T11:11:46.814+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.819+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ad15fd] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.822+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554978171 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.823+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.825+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 상호명1(String), 1(Long)
2026-01-21T11:11:46.836+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.838+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ad15fd]
2026-01-21T11:11:46.840+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.841+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58330f7a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.842+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177545596 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.848+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.850+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 상호명2(String), 1(Long)
2026-01-21T11:11:46.866+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.870+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58330f7a]
2026-01-21T11:11:46.871+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.872+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@210d86f7] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.873+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1627723123 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.888+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.897+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 상호명1(String), 1(Long)
2026-01-21T11:11:46.919+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.925+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@210d86f7]
2026-01-21T11:11:46.932+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:46.933+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@438c6070] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:46.933+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@251362504 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:46.936+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:46.938+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 상호명1(String), 1(Long)
2026-01-21T11:11:46.954+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:46.955+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@438c6070]
2026-01-21T11:11:46.983+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:46.998+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:46.999+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:47.000+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:47.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:47.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:47.017+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:47.021+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.029+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33663d37] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.030+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:47.030+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@22925693 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.032+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.036+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.039+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:47.039+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33663d37]
2026-01-21T11:11:47.040+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.042+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@216a18a7] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.046+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602347064 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.047+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.047+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.050+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.050+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@216a18a7]
2026-01-21T11:11:47.051+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.054+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c0941f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.055+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958268032 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.056+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.065+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.070+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:47.073+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c0941f]
2026-01-21T11:11:47.076+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.079+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195e4afa] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.079+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441944994 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.080+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.081+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.086+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:47.086+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195e4afa]
2026-01-21T11:11:47.089+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.090+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@227650b8] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.091+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1226098582 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.093+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.097+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.101+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.101+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@227650b8]
2026-01-21T11:11:47.104+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.105+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18176fbb] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.105+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@141823889 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.105+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.106+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.108+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.112+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18176fbb]
2026-01-21T11:11:47.124+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.125+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f752f97] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.125+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750576501 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.132+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.134+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.135+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.136+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f752f97]
2026-01-21T11:11:47.137+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.153+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d960a8] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.155+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1610015123 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.156+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.157+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.170+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.171+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d960a8]
2026-01-21T11:11:47.172+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.173+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ae0efd] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.174+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1094773760 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.175+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.177+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.205+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.216+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ae0efd]
2026-01-21T11:11:47.220+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.220+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3ec425] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.221+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852110489 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.223+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.225+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.242+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.252+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3ec425]
2026-01-21T11:11:47.265+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.272+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d4290c] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.272+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@156293279 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.273+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.274+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.302+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.322+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12d4290c]
2026-01-21T11:11:47.324+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.334+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79cf7f4d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.335+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1256236337 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.358+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.366+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.373+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.389+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79cf7f4d]
2026-01-21T11:11:47.392+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.404+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c03d6d8] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.405+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312091394 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.406+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.407+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.420+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.439+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c03d6d8]
2026-01-21T11:11:47.452+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.452+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c12b5b4] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.453+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1316296184 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.453+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.455+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.458+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.458+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c12b5b4]
2026-01-21T11:11:47.463+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.464+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3665dd29] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.466+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1062433092 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.469+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.470+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.474+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.482+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3665dd29]
2026-01-21T11:11:47.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:47.490+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.500+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b63b992] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:47.501+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1677176642 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.521+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:47.522+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.522+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:47.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:47.534+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:47.538+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:47.540+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.544+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:47.546+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b63b992]
2026-01-21T11:11:47.548+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.548+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@650bf13a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.549+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@63073056 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.551+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.552+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.566+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.567+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@650bf13a]
2026-01-21T11:11:47.568+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.569+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd4725d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.569+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1911347260 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.570+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.570+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.584+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.587+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd4725d]
2026-01-21T11:11:47.597+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.597+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ec87b2] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.601+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1581403560 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.601+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.602+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.613+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.616+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ec87b2]
2026-01-21T11:11:47.618+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.620+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11f57977] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.621+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1140239852 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.622+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.623+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.639+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.641+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11f57977]
2026-01-21T11:11:47.643+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.647+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd96d2] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.649+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056532987 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.651+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.652+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), null, 1(Long)
2026-01-21T11:11:47.659+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.665+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd96d2]
2026-01-21T11:11:47.666+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.671+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b99b01f] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.672+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@54194360 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.674+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.675+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:47.700+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.708+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b99b01f]
2026-01-21T11:11:47.710+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.717+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f46bd4d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.718+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@704245234 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.723+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.731+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 버거킹(String), 1(Long)
2026-01-21T11:11:47.735+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.736+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f46bd4d]
2026-01-21T11:11:47.736+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.737+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ee623d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.738+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121798456 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.740+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.741+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 다이소(String), 1(Long)
2026-01-21T11:11:47.788+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.797+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ee623d]
2026-01-21T11:11:47.798+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.814+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764e0373] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.814+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1099331597 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.815+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.821+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:47.858+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.867+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764e0373]
2026-01-21T11:11:47.874+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.874+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b55962] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.877+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@652641180 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.878+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.880+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-21T11:11:47.906+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.916+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20b55962]
2026-01-21T11:11:47.919+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.921+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6128e6e3] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.923+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1801244141 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.924+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.935+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:47.939+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:47.939+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6128e6e3]
2026-01-21T11:11:47.951+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:47.952+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3baeb72b] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:47.968+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@488067395 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:47.969+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:47.970+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-21T11:11:48.019+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:48.021+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.023+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3baeb72b]
2026-01-21T11:11:48.025+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.038+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8d3854] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.039+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@97831393 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.040+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.024+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.047+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 비품비(String), 1(Long), 123(String), 1(Long)
2026-01-21T11:11:48.049+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.050+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:48.052+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:48.054+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:48.054+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 0
2026-01-21T11:11:48.055+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:48.056+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8d3854]
2026-01-21T11:11:48.056+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:48.057+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.063+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3c0929] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.064+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1582416226 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.064+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.065+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:48.068+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.068+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3c0929]
2026-01-21T11:11:48.070+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.070+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fbf9ee1] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.070+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869707646 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.070+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.071+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:48.073+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.073+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fbf9ee1]
2026-01-21T11:11:48.074+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.079+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52808384] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.080+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18569123 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.081+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.084+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), 지하철(String), 1(Long)
2026-01-21T11:11:48.086+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.087+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52808384]
2026-01-21T11:11:48.089+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.089+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57be66a] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.090+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1404160482 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.090+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.090+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), test(String), 1(Long)
2026-01-21T11:11:48.093+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.094+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57be66a]
2026-01-21T11:11:48.095+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.096+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a530b6d] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.096+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1346499835 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.096+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.098+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:48.102+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.102+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a530b6d]
2026-01-21T11:11:48.103+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.103+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6494bdf6] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.104+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1980680810 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.104+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.104+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:48.107+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.107+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6494bdf6]
2026-01-21T11:11:48.108+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.112+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3280be1b] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.113+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1941622448 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.114+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.116+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:48.118+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.118+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3280be1b]
2026-01-21T11:11:48.120+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.120+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b223d9] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.121+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442130418 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.121+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.122+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 맥도날드(String), 1(Long)
2026-01-21T11:11:48.123+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.124+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b223d9]
2026-01-21T11:11:48.125+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.128+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0add29] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.129+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1221959034 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.132+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.133+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 해림(String), 1(Long)
2026-01-21T11:11:48.134+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.135+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0add29]
2026-01-21T11:11:48.136+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.136+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3994b939] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.137+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1411045559 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.138+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.138+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 출장/교통비(String), 1(Long), ktx(String), 1(Long)
2026-01-21T11:11:48.141+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.146+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3994b939]
2026-01-21T11:11:48.147+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.148+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c2d2ff] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.148+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@75754927 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.150+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.152+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 상호명1(String), 1(Long)
2026-01-21T11:11:48.155+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.156+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c2d2ff]
2026-01-21T11:11:48.157+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.158+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3323b389] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.158+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1039718968 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.158+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.160+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 상호명2(String), 1(Long)
2026-01-21T11:11:48.167+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.167+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3323b389]
2026-01-21T11:11:48.168+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.171+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52b0f986] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.171+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090968994 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.172+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.173+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 식비/회식(String), 1(Long), 상호명1(String), 1(Long)
2026-01-21T11:11:48.175+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.177+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52b0f986]
2026-01-21T11:11:48.180+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T11:11:48.182+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c007d09] was not registered for synchronization because synchronization is not active
2026-01-21T11:11:48.183+09:00 DEBUG 35404 --- [async-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@422166982 wrapping com.mysql.cj.jdbc.ConnectionImpl@474835f4] will not be managed by Spring
2026-01-21T11:11:48.184+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==>  Preparing: SELECT * FROM account_code_mapping_tb WHERE category = ? AND (company_id = ? OR company_id IS NULL) AND ( merchant_keyword IS NULL OR merchant_keyword = '' OR ? LIKE CONCAT('%', merchant_keyword, '%') ) ORDER BY CASE WHEN company_id = ? THEN 0 ELSE 1 END, CASE WHEN merchant_keyword IS NOT NULL AND merchant_keyword != '' THEN 0 ELSE 1 END LIMIT 1
2026-01-21T11:11:48.185+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : ==> Parameters: 거래처 접대(String), 1(Long), 상호명1(String), 1(Long)
2026-01-21T11:11:48.189+09:00 DEBUG 35404 --- [async-1] c.i.b.m.A.findByCategoryAndMerchant      : <==      Total: 1
2026-01-21T11:11:48.189+09:00 DEBUG 35404 --- [async-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c007d09]
2026-01-21T11:11:48.482+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.489+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/progress/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:48.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getProgress(String)
2026-01-21T11:11:48.550+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T11:11:48.559+09:00  INFO 35404 --- [async-1] c.i.backend.service.ExpenseService       : 세무 검토 자료 생성 완료 - 파일명: tax_review_2315929750905146352.xlsx, 건수: 27
2026-01-21T11:11:48.572+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=진행률 조회, data=ProgressDto(percentage=60, message=엑셀 파일을 생성하는 중...,  (truncated)...]
2026-01-21T11:11:48.581+09:00  INFO 35404 --- [async-1] c.i.backend.service.ExpenseService       : 세무 검토 자료 비동기 생성 완료 - jobId: aee0fbda-8588-4a1d-a8dd-98523957b113, 건수: 27
2026-01-21T11:11:48.582+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T11:11:48.591+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/export/tax-review/download/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.624+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/export/tax-review/download/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.631+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/export/tax-review/download/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.634+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/export/tax-review/download/aee0fbda-8588-4a1d-a8dd-98523957b113
2026-01-21T11:11:48.661+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/export/tax-review/download/aee0fbda-8588-4a1d-a8dd-98523957b113", parameters={}
2026-01-21T11:11:48.663+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#downloadTaxReviewFile(String, String, String)
2026-01-21T11:11:48.666+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.downloadTaxReviewFile(java.lang.String,java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:48.673+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.downloadTaxReviewFile(java.lang.String,java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T11:11:48.685+09:00  INFO 35404 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 세무 검토 자료 파일 다운로드 - jobId: aee0fbda-8588-4a1d-a8dd-98523957b113, filename: 세무검토_전체_전체.xlsx
2026-01-21T11:11:48.687+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Found 'Content-Type:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' in response
2026-01-21T11:11:48.688+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [file [C:\Users\owner\AppData\Local\Temp\tax_review_2315929750905146352.xlsx]]
2026-01-21T11:11:48.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:19.075+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-21T17:08:19.167+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:08:19.257+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-21T17:08:19.269+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:08:19.282+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:08:19.292+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:08:19.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:19.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c18420] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:19.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847007976 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:19.482+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:08:19.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-21T17:08:19.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-21T17:08:19.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c18420]
2026-01-21T17:08:19.798+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:19.806+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-21T17:08:19.832+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:29.367+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-21T17:08:29.374+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-21T17:08:29.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-21T17:08:29.378+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-21T17:08:29.380+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-21T17:08:29.380+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-21T17:08:29.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user4, password=1234)]
2026-01-21T17:08:29.396+09:00  INFO 35404 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user4
2026-01-21T17:08:29.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:29.399+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfbea88] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:29.400+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991416244 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:29.401+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-21T17:08:29.402+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user4(String)
2026-01-21T17:08:29.413+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-21T17:08:29.414+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfbea88]
2026-01-21T17:08:29.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:29.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0559e] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:29.506+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1598021629 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:29.506+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:29.507+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:29.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:29.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0559e]
2026-01-21T17:08:29.522+09:00  INFO 35404 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 성공 - userId: 5, role: ADMIN, companyId: 1
2026-01-21T17:08:29.522+09:00  INFO 35404 --- [http-nio-8080-exec-7] SECURITY                                 : LOGIN_SUCCESS userId=5 username=test_user4 role=ADMIN
2026-01-21T17:08:29.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:29.527+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=5, username=test_user4, password (truncated)...]
2026-01-21T17:08:29.528+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:29.969+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:08:30.170+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-21T17:08:30.173+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-21T17:08:30.173+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-21T17:08:30.174+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-21T17:08:30.175+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-21T17:08:30.245+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/companies
2026-01-21T17:08:30.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-21T17:08:30.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-21T17:08:30.438+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-21T17:08:30.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-21T17:08:30.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-21T17:08:30.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:08:30.445+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:30.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:08:30.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:08:30.467+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:30.491+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:30.494+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:30.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.496+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:30.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:30.498+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:30.498+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:30.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d6bdb9] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.502+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-21T17:08:30.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-21T17:08:30.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:30.527+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ee13a3] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-21T17:08:30.533+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/my-approvals
2026-01-21T17:08:30.533+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:30.534+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-21T17:08:30.539+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-21T17:08:30.544+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1685141838 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:30.562+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1120096292 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:30.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-21T17:08:30.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cffa401] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-21T17:08:30.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:08:30.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:30.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:08:30.569+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-21T17:08:30.579+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 5(Long)
2026-01-21T17:08:30.580+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:30.581+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.583+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0bba4] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.586+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@190725614 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:30.626+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:30.630+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.633+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:30.633+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b5cfe9] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.635+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:30.636+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-21T17:08:30.639+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.641+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d6bdb9]
2026-01-21T17:08:30.643+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:30.645+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-21T17:08:30.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451169110 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:30.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@652143952 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:30.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.650+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:30.659+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:30.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:30.660+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:30.661+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:30.662+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-21T17:08:30.663+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-21T17:08:30.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:30.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.697+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.708+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.709+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-21T17:08:30.725+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-21T17:08:30.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:30.741+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.745+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:08:30.746+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:08:30.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:30.781+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.781+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:08:30.782+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:08:30.781+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:30.795+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:08:30.796+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:30.796+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:30.797+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:30.809+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b5cfe9]
2026-01-21T17:08:30.812+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:30.811+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:30.813+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:30.816+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.817+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6b7182] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.817+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cffa401]
2026-01-21T17:08:30.818+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae7fa4b] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@439736415 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:30.826+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:30.826+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.828+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:30.828+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76f56d35] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.833+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:30.850+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689433414 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:30.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6b7182]
2026-01-21T17:08:30.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.858+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:08:30.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1567900776 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:30.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55588740] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.862+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:08:30.863+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b0be27] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.863+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:08:30.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@798191944 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:30.867+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:08:30.868+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:30.877+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:30.902+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:08:30.905+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:30.905+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:30.908+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:08:30.910+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55588740]
2026-01-21T17:08:30.909+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae7fa4b]
2026-01-21T17:08:30.910+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ee13a3]
2026-01-21T17:08:30.911+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76f56d35]
2026-01-21T17:08:30.911+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 8
2026-01-21T17:08:30.912+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322038531 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:30.912+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:30.913+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.914+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:30.914+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:30.916+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0bba4]
2026-01-21T17:08:30.916+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:08:30.917+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:08:30.917+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570f867e] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.918+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:08:30.919+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:30.922+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:30.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T17:08:30.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:30.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@607469088 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:30.932+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:30.933+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ada5a8] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:30.933+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:30.938+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.941+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:30.964+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:30.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:08:30.948+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096608197 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:30.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.966+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:30.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:08:30.973+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.976+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-21T17:08:30.969+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:30.969+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/companies
2026-01-21T17:08:30.976+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:30.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:30.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:08:30.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:08:30.983+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:30.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:30.985+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:08:30.990+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:30.992+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@570f867e]
2026-01-21T17:08:30.992+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:08:30.993+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:30.994+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:08:30.995+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:30.998+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:30.999+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ada5a8]
2026-01-21T17:08:30.999+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.000+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.013+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a2fc4b8] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.001+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.011+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:31.012+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.012+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6690825a] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.015+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ffa3e0] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.015+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@968337903 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:31.017+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb4980b] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.017+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:31.061+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1744652211 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:31.063+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064362904 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:31.063+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:08:31.064+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1694427280 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:31.081+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:08:31.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:31.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:08:31.093+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:08:31.093+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 5(Long)
2026-01-21T17:08:31.115+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:08:31.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:31.112+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:08:31.115+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 68(Long), 41(Long), 37(Long), 34(Long), 32(Long), 26(Long), 25(Long), 1(Long)
2026-01-21T17:08:31.126+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:08:31.127+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:08:31.129+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:31.129+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-21T17:08:31.130+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:08:31.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6690825a]
2026-01-21T17:08:31.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a2fc4b8]
2026-01-21T17:08:31.133+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.133+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:31.133+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f03b8e8] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.133+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-21T17:08:31.135+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:08:31.143+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@224617728 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:31.144+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:31.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:31.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:31.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:08:31.153+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 11
2026-01-21T17:08:31.165+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb4980b]
2026-01-21T17:08:31.157+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:08:31.160+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:08:31.163+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ffa3e0]
2026-01-21T17:08:31.166+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.168+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e237544] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.168+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:31.175+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.178+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-21T17:08:31.178+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1683872843 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:31.179+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:08:31.184+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:31.179+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5830d108] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.180+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:08:31.182+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:31.198+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:31.199+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714692838 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:31.199+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:08:31.199+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:31.207+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:08:31.211+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:08:31.212+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:08:31.233+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:31.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:08:31.235+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:08:31.241+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:08:31.244+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:31.246+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T17:08:31.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:08:31.251+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:08:31.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f03b8e8]
2026-01-21T17:08:31.259+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b0be27]
2026-01-21T17:08:31.262+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:31.263+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.265+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:31.264+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.264+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.265+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23759fcf] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.267+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.267+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ffdd6c5] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.267+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:31.268+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18889295] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.278+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371776945 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:31.280+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2103e056] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.281+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1778242304 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:31.281+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e237544]
2026-01-21T17:08:31.281+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1033377389 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:31.282+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:08:31.283+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1780032643 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:31.283+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:31.285+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:31.295+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:08:31.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:08:31.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:08:31.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:31.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=68, drafterI (truncated)...]
2026-01-21T17:08:31.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:08:31.301+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:08:31.361+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:31.376+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:31.412+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:31.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:08:31.467+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ffdd6c5]
2026-01-21T17:08:31.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:31.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:31.479+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:08:31.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e0a01f] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.481+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:31.485+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1150946200 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:31.492+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:31.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:08:31.535+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.543+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T17:08:31.543+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62856619] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.546+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:08:31.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:08:31.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23759fcf]
2026-01-21T17:08:31.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2103e056]
2026-01-21T17:08:31.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@402241112 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:31.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.594+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:31.595+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:08:31.596+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@341d80a4] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.598+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@991558159 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:31.596+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:08:31.597+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:08:31.598+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:31.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:31.609+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:31.618+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T17:08:31.643+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e0a01f]
2026-01-21T17:08:31.644+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e13f44] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82938271 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:31.664+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:31.667+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:08:31.680+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:31.695+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-21T17:08:31.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:31.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:31.713+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:31.717+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7135f29d] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.729+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1167643842 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:31.729+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:31.737+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:08:31.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62856619]
2026-01-21T17:08:31.752+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:31.743+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:31.746+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:31.748+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 41
2026-01-21T17:08:31.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:08:31.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@341d80a4]
2026-01-21T17:08:31.764+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e13f44]
2026-01-21T17:08:31.766+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:31.766+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4499c008] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16f3b5eb] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1804972910 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:31.776+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484012191 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:31.782+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:31.783+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:31.784+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:08:31.785+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:31.794+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:31.794+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:08:31.795+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:31.796+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:31.809+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:31.813+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:31.813+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:31.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:08:31.816+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.816+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16f3b5eb]
2026-01-21T17:08:31.816+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7135f29d]
2026-01-21T17:08:31.826+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4499c008]
2026-01-21T17:08:31.826+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c20223] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.827+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.827+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.834+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.841+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1062554291 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:31.843+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2dfbc0] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.844+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6453119c] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.846+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@460655db] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.847+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:31.850+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1694127907 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:31.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@976004753 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:31.852+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1276466323 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:31.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:31.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:08:31.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:31.863+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:08:31.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-21T17:08:31.866+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:31.869+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:08:31.877+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:31.883+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c20223]
2026-01-21T17:08:31.885+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.896+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 56
2026-01-21T17:08:31.899+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3670516e] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.900+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2dfbc0]
2026-01-21T17:08:31.900+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@849845913 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:31.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:31.906+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:31.908+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e5d747] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:31.908+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6453119c]
2026-01-21T17:08:31.911+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:31.913+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117177632 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:31.913+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:31.914+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:31.914+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:31.914+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:31.917+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:31.934+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:31.935+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:31.956+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:08:31.957+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3670516e]
2026-01-21T17:08:31.958+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:31.959+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:31.960+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:31.960+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e5d747]
2026-01-21T17:08:31.966+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:31.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:31.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:31.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:08:31.978+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@460655db]
2026-01-21T17:08:31.968+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:08:31.970+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:08:31.976+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:31.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:31.980+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:31.997+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:32.009+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:32.014+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5276cb8c] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:32.028+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:32.033+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:32.042+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:32.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@640345236 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:32.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:32.052+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:32.060+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:32.061+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:08:32.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:32.067+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:32.067+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@661b63bf] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:32.070+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18889295]
2026-01-21T17:08:32.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:32.079+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:32.079+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:32.080+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1645572544 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:32.083+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:32.083+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:32.083+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:32.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:08:32.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:08:32.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:32.091+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a46bc5e] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:32.093+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:08:32.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:32.094+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:32.094+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588786773 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:32.097+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:32.111+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d274d8] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:32.112+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:32.112+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5276cb8c]
2026-01-21T17:08:32.113+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2075623435 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:32.114+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:08:32.116+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:08:32.117+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:32.117+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:32.118+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:32.118+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@661b63bf]
2026-01-21T17:08:32.123+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c5e2bf] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:32.124+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-21T17:08:32.151+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:08:32.129+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:32.135+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:32.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1124820832 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:32.160+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:08:32.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:08:32.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:08:32.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:08:32.178+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:08:32.191+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:32.195+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:08:32.259+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:32.262+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:08:32.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:08:32.372+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:32.411+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:08:32.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a46bc5e]
2026-01-21T17:08:32.430+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c5e2bf]
2026-01-21T17:08:32.430+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:08:32.483+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d274d8]
2026-01-21T17:08:32.485+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:32.492+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:32.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:32.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:32.499+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a7ebb2b] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:32.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4ddb7c] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:32.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d4bdca6] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:32.501+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2538407e] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:32.502+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@58894803 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:32.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378864144 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:32.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@945428323 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:32.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:08:32.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1524874443 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:32.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:08:32.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:32.527+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:32.528+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:08:32.534+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:32.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:32.543+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:32.530+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:08:32.534+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:32.535+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5830d108]
2026-01-21T17:08:32.572+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:32.574+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:32.575+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:32.575+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:08:32.575+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:32.601+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d4bdca6]
2026-01-21T17:08:32.608+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4ddb7c]
2026-01-21T17:08:32.609+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a7ebb2b]
2026-01-21T17:08:32.610+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2538407e]
2026-01-21T17:08:32.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:32.617+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:32.630+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:32.631+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:32.631+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:32.632+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:08:32.634+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:08:32.717+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:08:32.806+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:32.815+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:32.817+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:32.840+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:32.848+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:32.856+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:32.862+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:32.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:32.909+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:08:32.911+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:32.911+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:32.911+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:08:32.995+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:33.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-21T17:08:33.107+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:33.130+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-21T17:08:33.140+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:33.150+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:33.151+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:08:33.157+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:08:33.163+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:33.164+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:33.164+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:33.164+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:08:33.165+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:33.166+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:33.167+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:33.168+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.168+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:08:33.209+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:08:33.172+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:08:33.190+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:08:33.215+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:08:33.199+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:08:33.216+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.200+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:33.202+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7144f106] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.213+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:08:33.214+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:08:33.217+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.218+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.218+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:08:33.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d7419d] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.263+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1386280528 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:33.264+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.278+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c531f9f] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7043f782] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.284+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:08:33.286+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:33.294+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e9062a] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.295+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1514112068 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:33.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:08:33.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:33.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246838411 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:33.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026425172 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:33.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:33.301+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:08:33.301+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:08:33.302+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:33.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:33.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.312+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:08:33.313+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:33.315+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e67a3] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.316+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051910265 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:33.326+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:08:33.330+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:08:33.335+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:33.336+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:33.338+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925650321 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:33.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:33.349+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7144f106]
2026-01-21T17:08:33.349+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d7419d]
2026-01-21T17:08:33.349+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:08:33.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c531f9f]
2026-01-21T17:08:33.351+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:08:33.351+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.351+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:08:33.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7043f782]
2026-01-21T17:08:33.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c669f1] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.359+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480da30f] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.359+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@228e6369] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.360+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:33.360+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@77126547 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:33.362+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093342448 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:33.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991505600 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:33.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:08:33.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:08:33.367+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:33.371+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:33.372+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:33.374+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:33.376+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e9062a]
2026-01-21T17:08:33.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:33.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:33.378+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:33.380+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:08:33.382+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:33.382+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:33.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:08:33.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:33.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:33.401+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:08:33.411+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37c669f1]
2026-01-21T17:08:33.412+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480da30f]
2026-01-21T17:08:33.413+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:33.413+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:08:33.414+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:33.417+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.426+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:33.426+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:33.427+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2141195e] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.427+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:33.427+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:33.428+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:33.430+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74568610 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:33.431+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:08:33.432+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@228e6369]
2026-01-21T17:08:33.435+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:08:33.436+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:33.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:08:33.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:33.446+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:08:33.449+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:33.450+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.455+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-21T17:08:33.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:08:33.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:33.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:08:33.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:33.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.467+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:33.478+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:08:33.479+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62e67a3]
2026-01-21T17:08:33.492+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:33.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:33.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:08:33.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:08:33.507+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:33.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:08:33.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ddf708] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2141195e]
2026-01-21T17:08:33.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:08:33.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:33.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:33.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533047259 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:33.525+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.560+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:08:33.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:08:33.576+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:33.576+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:08:33.577+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3ffccc] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.601+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1453162908 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:33.601+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:33.577+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df4a16e] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.578+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:08:33.580+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-21T17:08:33.629+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:08:33.629+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-21T17:08:33.598+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:33.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:08:33.608+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:33.627+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1838292887 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:33.628+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.630+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-21T17:08:33.643+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:33.721+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.645+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:08:33.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:08:33.645+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.693+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:33.734+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3ffccc]
2026-01-21T17:08:33.735+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.693+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:08:33.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ddf708]
2026-01-21T17:08:33.748+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:33.708+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.750+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:33.751+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f37d196] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.724+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1013fdc2] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@899970590 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:33.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:33.734+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.778+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57ab88ca] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@677e8a72] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.780+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739047885 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:33.781+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:08:33.750+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:08:33.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1064405139 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:33.784+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-21T17:08:33.791+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-21T17:08:33.777+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:33.780+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1901245930 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:33.783+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:08:33.784+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:33.793+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:08:33.795+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:08:33.798+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:33.853+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:08:33.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:08:33.867+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@677e8a72]
2026-01-21T17:08:33.869+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:33.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df4a16e]
2026-01-21T17:08:33.873+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:33.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:33.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd7aa8f] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:33.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:08:33.877+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1332315773 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:33.879+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:33.880+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:33.880+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:08:33.882+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:33.941+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:08:33.943+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5341a910] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:33.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:08:33.953+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:08:34.013+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57ab88ca]
2026-01-21T17:08:34.015+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:34.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@357221953 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:34.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:08:34.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-21T17:08:34.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:08:34.020+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:08:34.022+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:34.097+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:08:34.134+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:34.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f37d196]
2026-01-21T17:08:34.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:08:34.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1013fdc2]
2026-01-21T17:08:34.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cd7aa8f]
2026-01-21T17:08:34.149+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:34.150+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:34.158+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:34.159+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:08:34.171+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:34.183+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:34.193+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-21T17:08:34.194+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:08:34.194+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16f3be1a] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:34.195+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4772fc] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:34.195+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:34.196+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:08:34.196+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@427928811 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:34.197+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1269114601 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:34.292+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:34.212+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:34.213+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:34.262+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:34.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:34.367+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748574c8] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:34.293+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:34.294+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:34.296+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:08:34.396+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:34.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:34.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:08:34.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5341a910]
2026-01-21T17:08:34.368+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@333050262 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:34.401+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:08:34.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:08:34.384+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:34.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:08:34.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:34.401+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:34.415+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:34.443+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:34.518+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:08:34.445+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:34.525+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16f3be1a]
2026-01-21T17:08:34.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:34.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:08:34.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6717ca40] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:34.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:34.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:34.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:34.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4772fc]
2026-01-21T17:08:34.527+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:08:34.528+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1454463569 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:34.544+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:34.550+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:08:34.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:34.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:34.596+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:08:34.624+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:34.695+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe30324] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:34.708+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:34.709+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:34.717+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c0594a] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:34.718+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:08:34.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:34.728+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329939368 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:34.991+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:08:34.728+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14eb03e9] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:34.830+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:34.912+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@50403708 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:34.973+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748574c8]
2026-01-21T17:08:34.992+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:08:35.049+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:35.049+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@435403387 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.051+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:35.059+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:08:35.059+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.060+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6717ca40]
2026-01-21T17:08:35.060+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:08:35.061+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:35.061+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:08:35.062+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:08:35.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.080+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:08:35.080+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:35.081+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:08:35.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:35.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.096+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:35.102+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fe30324]
2026-01-21T17:08:35.109+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.112+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.113+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.114+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ced9393] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.115+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:08:35.116+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@63396017 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:35.116+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:35.116+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.136+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:08:35.148+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:08:35.155+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:35.225+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:35.245+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14eb03e9]
2026-01-21T17:08:35.246+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c0594a]
2026-01-21T17:08:35.248+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:35.248+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.249+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.249+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:35.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:08:35.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:35.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4979a240] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.251+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.257+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:35.257+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1499707436 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:35.258+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.260+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.332+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37ce7378] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.336+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:35.346+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ced9393]
2026-01-21T17:08:35.349+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@422c5adc] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1922733039 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:35.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660758017 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:35.365+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:35.372+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:35.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.375+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4979a240]
2026-01-21T17:08:35.382+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:35.383+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.384+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:08:35.415+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:35.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:35.428+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@422c5adc]
2026-01-21T17:08:35.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37ce7378]
2026-01-21T17:08:35.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.448+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.449+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d945f4d] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.449+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:35.450+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1744937338 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:35.451+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.451+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:35.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:35.478+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:35.481+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-21T17:08:35.485+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:35.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:08:35.496+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:08:35.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:08:35.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:35.499+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:35.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:35.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b98b8c] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d945f4d]
2026-01-21T17:08:35.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:35.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@718197887 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:35.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:35.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.522+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c035c70] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:35.539+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2106171143 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:35.540+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:35.542+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:35.548+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:35.549+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:35.549+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:35.549+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:35.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b98b8c]
2026-01-21T17:08:35.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:35.557+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.557+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:35.559+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.562+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@104b0c3f] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.563+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c035c70]
2026-01-21T17:08:35.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c38ef7f] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1792282705 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739624332 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:35.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.566+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21038c51] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2000004317 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:35.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:35.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.575+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:35.583+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.593+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:35.597+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@104b0c3f]
2026-01-21T17:08:35.598+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.598+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:35.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@460bc52c] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21038c51]
2026-01-21T17:08:35.601+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250155814 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.601+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.609+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:08:35.610+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:35.612+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:08:35.613+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:35.613+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c38ef7f]
2026-01-21T17:08:35.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.618+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af65733] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.624+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918193094 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:35.625+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:35.627+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:35.629+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:35.635+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:35.643+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:35.644+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:08:35.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:35.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@460bc52c]
2026-01-21T17:08:35.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:35.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:35.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.650+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af65733]
2026-01-21T17:08:35.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58eedf78] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc5f22f] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.653+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.660+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1087656940 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.664+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323813120 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:35.665+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:35.665+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.667+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:35.668+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.668+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.676+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:35.680+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:35.693+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:35.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:35.698+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:35.698+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58eedf78]
2026-01-21T17:08:35.699+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:35.699+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.699+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:35.699+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9cd051] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.702+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.703+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1118291877 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.711+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:35.711+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ebd9e37] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.713+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:08:35.713+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc5f22f]
2026-01-21T17:08:35.714+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:08:35.715+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.717+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@853381016 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:35.717+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4095a143] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.719+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:35.725+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@539064308 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:35.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:35.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:08:35.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9cd051]
2026-01-21T17:08:35.728+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.729+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:35.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bd164c] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ebd9e37]
2026-01-21T17:08:35.732+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1017726610 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.735+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.746+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:08:35.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13bd6591] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.752+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:08:35.761+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:35.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1401061199 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:08:35.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:35.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4095a143]
2026-01-21T17:08:35.776+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:35.778+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.778+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:08:35.779+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:35.783+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bd164c]
2026-01-21T17:08:35.784+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.791+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.795+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15adccad] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.795+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:35.803+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1274853154 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:35.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.809+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:35.810+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:35.811+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.815+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:35.817+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13bd6591]
2026-01-21T17:08:35.817+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:35.818+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.818+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.818+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bc05fd3] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.818+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:35.827+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.826+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1549631916 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:35.828+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:35.832+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:35.848+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:35.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:35.864+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15adccad]
2026-01-21T17:08:35.867+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44343aa] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.857+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:35.877+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146451243 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.878+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:35.878+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:08:35.880+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:35.878+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:35.880+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:08:35.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bc05fd3]
2026-01-21T17:08:35.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:35.883+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.883+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.883+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb285da] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.884+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae8312d] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.884+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1471508760 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:35.885+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358887459 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:35.885+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.885+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:35.886+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.891+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:35.896+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:08:35.917+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44343aa]
2026-01-21T17:08:35.918+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:35.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:35.927+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb285da]
2026-01-21T17:08:35.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae8312d]
2026-01-21T17:08:35.935+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:35.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5326ca57] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.934+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:35.935+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26fa42c3] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:35.944+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1306955146 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:08:35.945+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:35.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1566604904 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:35.950+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:35.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:35.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:35.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:35.952+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:35.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:08:36.009+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:08:36.028+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:36.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:36.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:08:36.123+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5326ca57]
2026-01-21T17:08:36.133+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26fa42c3]
2026-01-21T17:08:36.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:08:36.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:36.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:36.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:08:36.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:36.168+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.169+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:08:36.169+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:36.179+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c916a77] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.181+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:36.198+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:36.216+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:36.228+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090392044 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:36.266+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:36.275+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:08:36.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:36.280+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:08:36.281+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:36.284+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.295+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cec249e] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.299+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1010202469 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:36.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:08:36.306+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:36.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c916a77]
2026-01-21T17:08:36.311+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:36.313+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.314+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0d4fa8] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.318+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075715218 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:08:36.326+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:08:36.328+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:36.328+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:08:36.331+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cec249e]
2026-01-21T17:08:36.333+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9b8213] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@648971562 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:36.360+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:36.361+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:36.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:08:36.368+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0d4fa8]
2026-01-21T17:08:36.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:36.383+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:08:36.385+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:36.417+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:36.417+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9b8213]
2026-01-21T17:08:36.427+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:36.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:36.431+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:36.439+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:36.450+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:36.459+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:36.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:36.464+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:36.464+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a467f88] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.494+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615354901 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:36.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:36.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:36.498+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:36.499+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a467f88]
2026-01-21T17:08:36.499+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@526c1e3] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@956345370 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:08:36.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:36.501+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:36.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:36.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@526c1e3]
2026-01-21T17:08:36.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:36.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:36.511+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:36.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:36.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:36.527+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:36.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:36.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:36.530+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e04f7d] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211905172 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:36.535+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:36.545+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:36.547+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:36.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e04f7d]
2026-01-21T17:08:36.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.560+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f89c563] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.562+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@149284424 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:36.563+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:36.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:36.591+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:36.593+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f89c563]
2026-01-21T17:08:36.594+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:36.594+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:36.595+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:36.598+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:36.612+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:36.625+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:36.627+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:36.628+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:36.629+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.630+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c26e368] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.644+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1179085301 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:36.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:36.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:36.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:36.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c26e368]
2026-01-21T17:08:36.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@795d73c0] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.652+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1445152529 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:08:36.660+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:36.661+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:36.664+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:36.665+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@795d73c0]
2026-01-21T17:08:36.666+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:36.666+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:36.667+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:08:36.673+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:08:36.683+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:08:36.683+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:08:36.684+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:08:36.684+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:08:36.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.691+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668a2277] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.693+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006030841 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:36.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:08:36.697+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:08:36.700+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:08:36.701+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668a2277]
2026-01-21T17:08:36.714+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:08:36.714+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476f1960] was not registered for synchronization because synchronization is not active
2026-01-21T17:08:36.715+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883312736 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:08:36.746+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:08:36.748+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:08:36.761+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:08:36.761+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476f1960]
2026-01-21T17:08:36.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:08:36.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:08:36.764+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:01.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:11:01.935+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:01.938+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:11:01.956+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:11:01.959+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:11:01.960+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:01.960+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/companies
2026-01-21T17:11:01.960+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:11:01.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:01.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:11:01.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:11:01.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:01.975+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:11:01.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:01.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:01.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:11:01.978+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d271ca9] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:01.978+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:01.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:01.980+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1808681e] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:01.981+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767a4d7e] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@48359046 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@687618905 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:02.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250310764 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.024+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:11:02.025+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:11:02.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:02.044+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:11:02.061+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 5(Long)
2026-01-21T17:11:02.062+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:11:02.090+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:11:02.090+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-21T17:11:02.091+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:11:02.096+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1808681e]
2026-01-21T17:11:02.096+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767a4d7e]
2026-01-21T17:11:02.097+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d271ca9]
2026-01-21T17:11:02.097+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f06524] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-21T17:11:02.109+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@574574071 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.109+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7beef200] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.109+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:02.110+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.110+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@711715855 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.111+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:02.113+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.125+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.126+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:02.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53f06524]
2026-01-21T17:11:02.132+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.136+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:02.139+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.142+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:02.160+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:02.171+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:02.178+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7beef200]
2026-01-21T17:11:02.178+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:02.179+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.179+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:02.181+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:11:02.186+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.190+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.192+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e53f84] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.195+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1031701153 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.203+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:02.197+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:11:02.207+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:11:02.209+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:11:02.211+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:11:02.212+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:11:02.213+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:11:02.213+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.214+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58860b74] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.220+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585157099 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:02.221+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:11:02.221+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:11:02.221+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e53f84]
2026-01-21T17:11:02.224+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:11:02.225+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.226+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76c4dca4] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.227+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@299632805 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.228+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:02.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:11:02.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:02.230+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58860b74]
2026-01-21T17:11:02.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@176888ab] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.236+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2145254553 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:02.237+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:02.239+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.239+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76c4dca4]
2026-01-21T17:11:02.240+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.240+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:02.243+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.243+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.244+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@176888ab]
2026-01-21T17:11:02.245+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:02.247+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:11:02.253+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:02.255+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:02.255+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.258+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:02.259+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:02.260+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.262+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:11:02.265+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44aaa154] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.271+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:11:02.272+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:11:02.273+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:11:02.273+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2088484205 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:02.274+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:11:02.274+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:02.275+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.275+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:11:02.275+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba2f6e7] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.277+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@263872266 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.278+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:11:02.278+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:11:02.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:11:02.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44aaa154]
2026-01-21T17:11:02.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c096933] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.281+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@784710434 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:02.282+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:02.287+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:02.287+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:11:02.288+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba2f6e7]
2026-01-21T17:11:02.289+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.289+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e604110] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.289+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:02.289+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@43620341 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c096933]
2026-01-21T17:11:02.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.291+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:02.294+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.296+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.299+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e604110]
2026-01-21T17:11:02.305+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.309+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:11:02.309+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.406+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:11:02.406+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:02.406+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:02.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.411+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:11:02.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.412+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:11:02.412+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:11:02.412+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:02.412+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:02.413+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:11:02.413+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.415+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-21T17:11:02.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:11:02.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:02.419+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:11:02.419+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:11:02.419+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:02.420+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.420+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:11:02.420+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:02.421+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:11:02.421+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.422+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:11:02.423+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:02.424+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:02.424+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.424+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.424+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:02.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:11:02.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.426+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c17a71a] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.427+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.427+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:11:02.428+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2310780] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.431+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f2d5cf] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.432+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.436+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.437+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c693c7] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.437+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544602826 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:02.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@511596536 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1327691a] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.443+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441534667 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:02.443+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@783551341 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.443+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:11:02.444+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:11:02.444+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.444+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@674212751 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:02.445+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.445+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:02.446+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:11:02.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:11:02.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d13d46] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:11:02.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.451+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:11:02.455+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@844672381 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:02.456+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:11:02.456+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:11:02.456+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:11:02.457+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:11:02.457+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f2d5cf]
2026-01-21T17:11:02.459+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:11:02.458+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c17a71a]
2026-01-21T17:11:02.458+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.458+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:11:02.459+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.459+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.460+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c693c7]
2026-01-21T17:11:02.460+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:11:02.460+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2310780]
2026-01-21T17:11:02.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:11:02.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:11:02.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1327691a]
2026-01-21T17:11:02.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da5cd78] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d13d46]
2026-01-21T17:11:02.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63118331] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912255295 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:02.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aab7bfa] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.464+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.464+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1977580607 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:11:02.474+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:11:02.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1813576110 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:02.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:11:02.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.485+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.476+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.477+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.480+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:02.480+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.484+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:11:02.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:02.489+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:11:02.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:02.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:11:02.498+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:11:02.503+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:11:02.504+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:02.504+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:11:02.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:11:02.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:02.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:11:02.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-21T17:11:02.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:02.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:02.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:11:02.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aab7bfa]
2026-01-21T17:11:02.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63118331]
2026-01-21T17:11:02.511+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.511+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da5cd78]
2026-01-21T17:11:02.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:11:02.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2af5009a] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:11:02.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7472334c] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:02.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2055522460 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:11:02.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c95fae] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:02.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@462761720 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:11:02.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323937525 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:02.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:02.525+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:02.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:02.530+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:11:02.532+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.539+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:11:02.548+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:11:02.548+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.560+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:11:02.560+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.560+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:11:02.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:02.561+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2bdedd] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:02.570+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:11:02.570+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:02.574+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:11:02.576+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1549087299 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:02.576+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:11:02.576+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:11:02.577+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7472334c]
2026-01-21T17:11:02.577+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:11:02.577+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.578+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:11:02.578+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c95fae]
2026-01-21T17:11:02.579+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.579+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.580+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.581+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:11:02.581+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.582+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:11:02.588+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:11:02.585+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.585+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e361b1] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.586+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.587+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:11:02.589+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2af5009a]
2026-01-21T17:11:02.590+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:11:02.590+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.591+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2087639442 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.591+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a93ffc9] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.591+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.592+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.593+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f2bdedd]
2026-01-21T17:11:02.598+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.594+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31020043] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.594+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.595+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803956682 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:02.597+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:02.597+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:11:02.599+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:11:02.608+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.603+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560719282 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.604+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:11:02.604+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.605+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.606+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:02.611+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:11:02.612+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:11:02.614+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:11:02.625+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:02.626+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:11:02.628+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:02.627+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:11:02.629+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:02.629+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:11:02.630+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:11:02.634+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.637+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:11:02.637+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@752c6e3] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.637+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:11:02.639+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:11:02.639+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.639+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:11:02.639+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:11:02.639+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@134293355 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:02.640+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.640+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:11:02.640+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e361b1]
2026-01-21T17:11:02.641+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31020043]
2026-01-21T17:11:02.641+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a93ffc9]
2026-01-21T17:11:02.641+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:02.642+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ea6728] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.644+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:11:02.644+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.645+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.645+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:11:02.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756211606 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.647+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:11:02.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771bc0e0] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:11:02.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:11:02.652+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:11:02.655+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:02.656+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1979177307 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.662+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.662+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.665+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-21T17:11:02.667+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:02.668+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:02.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:02.673+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:11:02.680+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:11:02.687+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.691+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@752c6e3]
2026-01-21T17:11:02.693+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.692+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3acef3] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.693+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-21T17:11:02.695+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7025370f] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.695+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1743448383 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:02.696+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:11:02.696+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1632731702 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:02.696+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:11:02.696+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:11:02.697+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:02.706+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-21T17:11:02.708+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:11:02.709+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ea6728]
2026-01-21T17:11:02.708+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:11:02.709+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:02.710+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.710+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:02.710+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f70e135] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.711+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:02.711+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1278217940 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.713+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.714+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:02.723+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea9a218] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:02.724+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771bc0e0]
2026-01-21T17:11:02.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223639224 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:02.728+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7025370f]
2026-01-21T17:11:02.728+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.729+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.728+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:11:02.729+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47894f4e] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.729+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:02.730+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:11:02.739+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:11:02.730+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:11:02.736+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1857850271 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.738+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:02.748+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:02.746+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:02.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:11:02.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ea9a218]
2026-01-21T17:11:02.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:02.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f70e135]
2026-01-21T17:11:02.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:02.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:02.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:11:02.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.761+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:11:02.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:11:02.761+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:02.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.762+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=69, drafterId= (truncated)...]
2026-01-21T17:11:02.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c3acef3]
2026-01-21T17:11:02.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:11:02.772+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.780+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38d796b6] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@654150189 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:02.810+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:02.812+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47894f4e]
2026-01-21T17:11:02.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.815+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f25c49] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.812+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:02.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780960838 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.826+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:11:02.826+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.827+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.829+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.829+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:11:02.829+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f25c49]
2026-01-21T17:11:02.829+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38d796b6]
2026-01-21T17:11:02.830+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.830+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.830+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@540cb6df] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.831+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583383f9] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.837+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1697490947 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.839+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1557515375 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:02.840+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:02.840+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:02.842+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:02.845+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:02.856+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:02.858+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583383f9]
2026-01-21T17:11:02.858+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:02.858+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.858+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@540cb6df]
2026-01-21T17:11:02.858+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:02.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b28841c] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.861+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:02.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170092520 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.877+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:02.878+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.878+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:02.879+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.879+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:02.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:02.889+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.890+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212f9eee] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.890+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:02.891+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1881370912 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:02.891+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b28841c]
2026-01-21T17:11:02.891+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:02.892+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:02.892+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:11:02.892+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:11:02.896+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:02.896+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:11:02.897+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.909+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212f9eee]
2026-01-21T17:11:02.910+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.912+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-21T17:11:02.929+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e3499f] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.929+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.930+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969650307 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:02.930+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:02.931+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:02.931+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:11:02.936+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:02.938+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.958+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f5498a] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.960+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:02.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:11:02.962+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1466235857 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:02.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:11:02.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.974+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:02.968+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:11:02.968+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:02.971+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:02.974+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:11:02.975+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:02.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.975+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:02.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:02.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:11:02.978+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:11:02.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:11:02.980+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.980+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.982+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.981+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:02.981+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c13b51] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.989+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.989+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:02.989+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1040573929 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:02.992+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:11:02.989+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276d2e8a] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.990+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:02.991+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a543ec4] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:02.997+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:11:02.998+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840298521 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:02.999+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e3499f]
2026-01-21T17:11:03.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:03.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534405077 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:03.006+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:11:03.007+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f5498a]
2026-01-21T17:11:03.008+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:11:03.010+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:11:03.011+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:11:03.012+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:03.012+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.013+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:11:03.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c13b51]
2026-01-21T17:11:03.019+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.020+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5bb028] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.021+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.029+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@799083824 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:03.029+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:11:03.029+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:03.030+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.030+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:03.030+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:03.042+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:11:03.043+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a543ec4]
2026-01-21T17:11:03.037+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:03.038+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:11:03.043+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.043+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:03.045+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276d2e8a]
2026-01-21T17:11:03.045+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:11:03.045+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:11:03.051+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:03.046+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:03.047+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.059+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:03.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5bb028]
2026-01-21T17:11:03.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:03.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:03.057+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:11:03.059+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:03.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.078+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:11:03.079+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:03.080+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.087+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:11:03.090+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:03.090+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ec15374] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.091+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:03.113+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:03.159+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:11:03.160+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596617844 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:03.162+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:03.173+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ad0b80] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.174+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:03.175+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:03.211+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:03.220+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.245+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@300403887 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:03.248+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:11:03.254+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:11:03.257+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f28a9c] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.257+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:03.266+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@274803884 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:03.257+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:03.263+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:11:03.264+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:11:03.264+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:03.268+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:11:03.272+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:11:03.274+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-21T17:11:03.277+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:03.278+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:03.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:11:03.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:11:03.283+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:03.289+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:03.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.291+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:11:03.291+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-21T17:11:03.292+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ec15374]
2026-01-21T17:11:03.292+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9c27c4] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.293+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.293+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ad0b80]
2026-01-21T17:11:03.293+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-21T17:11:03.295+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.296+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:11:03.296+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1958548011 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:03.296+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51de4254] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.296+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7924a4a3] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:03.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f28a9c]
2026-01-21T17:11:03.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:11:03.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355872733 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:03.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c730961] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@488247808 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:03.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:03.305+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.306+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:11:03.306+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:11:03.306+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@101245540 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:03.307+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:03.307+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:11:03.310+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:11:03.310+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:03.311+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:03.311+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@609f1e1d] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.312+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.312+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:11:03.314+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:03.319+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:11:03.320+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@526941814 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:03.322+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9c27c4]
2026-01-21T17:11:03.322+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51de4254]
2026-01-21T17:11:03.323+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-21T17:11:03.324+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:03.328+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.329+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.329+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-21T17:11:03.330+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7924a4a3]
2026-01-21T17:11:03.331+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:11:03.331+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:11:03.332+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.339+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.339+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.339+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40da8046] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.340+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:03.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@470234434 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:03.347+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-21T17:11:03.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c730961]
2026-01-21T17:11:03.351+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:03.354+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@609f1e1d]
2026-01-21T17:11:03.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:03.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-21T17:11:03.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:03.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.360+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.422+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:03.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:03.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-21T17:11:03.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:03.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:03.591+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-21T17:11:03.596+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:03.610+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40da8046]
2026-01-21T17:11:03.627+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/logout
2026-01-21T17:11:03.674+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:03.678+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad49faf] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.679+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-21T17:11:03.683+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-21T17:11:03.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.683+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@781770755 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:03.685+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-21T17:11:03.687+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17add51d] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.691+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@623958470 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:03.687+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:03.692+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:03.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:03.695+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-21T17:11:03.705+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI1IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-21T17:11:03.715+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:03.722+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ad49faf]
2026-01-21T17:11:03.722+09:00  INFO 35404 --- [http-nio-8080-exec-3] SECURITY                                 : LOGOUT userId=5
2026-01-21T17:11:03.724+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-21T17:11:03.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.730+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f72742b] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.730+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.730+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095086477 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:03.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-21T17:11:03.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17add51d]
2026-01-21T17:11:03.740+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:03.741+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.742+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.744+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:03.752+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403b02d8] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.755+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@969356031 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:03.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:03.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:03.779+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:03.801+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f72742b]
2026-01-21T17:11:03.801+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:03.805+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.805+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403b02d8]
2026-01-21T17:11:03.810+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20c1e43a] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.811+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.812+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:03.812+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826492197 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:03.813+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:03.813+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:03.823+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:03.844+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:03.847+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20c1e43a]
2026-01-21T17:11:03.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:03.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e8bc592] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:03.863+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@566497357 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:03.869+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:03.869+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-21T17:11:03.890+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:03.893+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e8bc592]
2026-01-21T17:11:03.895+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:03.897+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:11:03.909+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:04.743+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-21T17:11:04.744+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-21T17:11:04.777+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-21T17:11:04.779+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-21T17:11:05.850+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-21T17:11:05.853+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-21T17:11:05.853+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-21T17:11:05.853+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-21T17:11:05.854+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-21T17:11:05.857+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-21T17:11:05.858+09:00  INFO 35404 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-21T17:11:05.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:05.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2274f25c] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:05.862+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@259748056 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:05.863+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-21T17:11:05.867+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-21T17:11:05.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-21T17:11:05.873+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2274f25c]
2026-01-21T17:11:05.959+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:05.964+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581ecedb] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:05.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2131258934 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:05.966+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:05.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:05.971+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:05.971+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581ecedb]
2026-01-21T17:11:05.972+09:00  INFO 35404 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 1
2026-01-21T17:11:05.973+09:00  INFO 35404 --- [http-nio-8080-exec-1] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-21T17:11:05.974+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:05.975+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-21T17:11:05.977+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.261+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:11:06.270+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-21T17:11:06.275+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:11:06.279+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:11:06.280+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:11:06.281+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.286+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f35e0a] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.330+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-21T17:11:06.340+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:11:06.340+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:06.341+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.341+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:06.354+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:11:06.347+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.352+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:06.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:06.351+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:11:06.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:11:06.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:11:06.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:06.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:11:06.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:06.359+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:06.359+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.360+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:06.360+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:11:06.360+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120357893 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:06.362+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:11:06.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:11:06.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:06.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:11:06.365+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:11:06.367+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:11:06.368+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.368+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:11:06.369+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523a4466] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.369+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.371+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-21T17:11:06.372+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.372+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cc1ac4] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.374+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.375+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@122463781 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:06.375+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-21T17:11:06.375+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.376+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.379+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2105329033 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:06.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.378+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:06.378+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f35e0a]
2026-01-21T17:11:06.379+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f11c3f] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.379+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.379+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:11:06.380+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae291b3] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.380+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:06.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095039003 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:06.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a688b8] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.384+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:11:06.386+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-21T17:11:06.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:11:06.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:06.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@225315617 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.390+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.391+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@683689110 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:06.392+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:11:06.392+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523a4466]
2026-01-21T17:11:06.405+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.407+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:11:06.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cc1ac4]
2026-01-21T17:11:06.392+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:11:06.394+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:11:06.407+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2ef4d] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.408+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.409+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:11:06.412+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-21T17:11:06.412+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:11:06.413+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1972055145 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:06.414+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:11:06.423+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.423+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:06.424+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.424+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:06.425+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:06.426+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:11:06.428+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:11:06.428+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:11:06.436+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:11:06.438+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f11c3f]
2026-01-21T17:11:06.438+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:11:06.438+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:11:06.440+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:11:06.440+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.440+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.440+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a688b8]
2026-01-21T17:11:06.440+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae291b3]
2026-01-21T17:11:06.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:11:06.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:11:06.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f8f75c] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.441+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:11:06.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:11:06.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.442+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@59251774 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:06.443+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:11:06.446+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:11:06.444+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:06.445+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.454+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:06.457+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.460+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3866ed] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.446+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:06.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.455+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-21T17:11:06.456+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-21T17:11:06.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@628034686 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:06.464+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:11:06.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:06.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-21T17:11:06.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-21T17:11:06.471+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-21T17:11:06.472+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-21T17:11:06.462+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:11:06.464+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:11:06.464+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:11:06.473+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:11:06.474+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:11:06.474+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:06.474+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:11:06.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:06.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:11:06.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:11:06.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe1bc80] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.476+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:11:06.476+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.476+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf5dcf1] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.477+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@815597601 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.478+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:11:06.479+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:11:06.480+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:06.481+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d2ef4d]
2026-01-21T17:11:06.481+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.484+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:06.485+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.487+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.492+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:11:06.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:06.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:11:06.494+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232939629 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:06.494+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:11:06.494+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.494+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:11:06.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d02102d] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:11:06.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.496+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1315779387 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:06.496+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:11:06.496+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:06.496+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:06.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:11:06.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f8f75c]
2026-01-21T17:11:06.497+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cd05b] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.503+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:06.503+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf5dcf1]
2026-01-21T17:11:06.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:11:06.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:11:06.507+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.507+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099965808 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:06.508+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:11:06.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe1bc80]
2026-01-21T17:11:06.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf86d24] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:11:06.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:11:06.511+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3866ed]
2026-01-21T17:11:06.511+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:06.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529491728 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:11:06.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.522+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:11:06.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:11:06.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d02102d]
2026-01-21T17:11:06.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:06.521+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:06.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:06.527+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.528+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:11:06.536+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:06.528+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:06.536+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:11:06.570+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-21T17:11:06.620+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:11:06.657+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:06.657+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:11:06.661+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:06.663+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:11:06.664+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.664+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf86d24]
2026-01-21T17:11:06.668+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.669+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cd05b]
2026-01-21T17:11:06.676+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:06.679+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:06.677+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.678+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:06.678+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.679+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.679+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:06.687+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.687+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:11:06.688+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66474275] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.688+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:11:06.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a528dae] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.690+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.691+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1851687636 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.692+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.693+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477bdd9b] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1536391231 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:06.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:06.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:06.695+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1824276382 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:06.695+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:11:06.696+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.708+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a96714] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.702+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:11:06.704+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:11:06.705+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:06.706+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:06.708+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:11:06.711+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@797161896 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:06.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:11:06.718+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:11:06.713+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:11:06.714+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:06.714+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:11:06.719+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:11:06.722+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:11:06.719+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:11:06.721+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:11:06.722+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:06.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66474275]
2026-01-21T17:11:06.722+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:11:06.723+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:11:06.724+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a528dae]
2026-01-21T17:11:06.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.726+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:06.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:11:06.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:11:06.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7996ea00] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b91b8e5] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477bdd9b]
2026-01-21T17:11:06.728+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a96714]
2026-01-21T17:11:06.728+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:06.728+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:11:06.729+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@622742445 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.730+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546559069 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:06.730+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:06.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:06.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:11:06.735+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d357a63] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.735+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:11:06.736+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.739+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:11:06.745+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.743+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:06.744+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:11:06.744+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1958475099 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:06.745+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@591d0c6] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.746+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-21T17:11:06.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:06.752+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1742833361 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:06.754+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:06.754+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:11:06.755+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:11:06.756+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:06.756+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:11:06.757+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7996ea00]
2026-01-21T17:11:06.757+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b91b8e5]
2026-01-21T17:11:06.758+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:11:06.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:11:06.759+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.761+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:11:06.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:11:06.760+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:06.761+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0fcdd3] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:06.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:11:06.770+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:11:06.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d357a63]
2026-01-21T17:11:06.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@562560216 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.770+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:06.774+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:11:06.774+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:06.775+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.777+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:06.777+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:11:06.778+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:06.778+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb01f8c] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.778+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:11:06.779+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.779+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:11:06.786+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:11:06.787+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:11:06.781+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:06.782+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@748888598 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:06.782+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:11:06.788+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.789+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:06.791+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:06.791+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:11:06.791+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@591d0c6]
2026-01-21T17:11:06.791+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d935d66] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.793+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.791+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0fcdd3]
2026-01-21T17:11:06.792+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:06.792+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:11:06.793+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@842414396 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:06.793+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:11:06.793+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.794+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@282e80b9] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.793+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:06.794+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:11:06.794+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.795+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@970891578 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.797+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:11:06.797+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:06.798+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:11:06.802+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:11:06.804+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:06.804+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.805+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb01f8c]
2026-01-21T17:11:06.805+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:11:06.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:06.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55437a98] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.809+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.809+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:11:06.809+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:11:06.810+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1089901045 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:06.811+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:11:06.811+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d935d66]
2026-01-21T17:11:06.811+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:11:06.811+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:06.812+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.812+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.815+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:11:06.815+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:06.816+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:06.817+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:11:06.818+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:11:06.819+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:06.819+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@282e80b9]
2026-01-21T17:11:06.821+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.822+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-21T17:11:06.823+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:11:06.824+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.827+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:11:06.829+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.831+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d9b07df] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.835+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@292318621 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.832+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:11:06.832+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:06.834+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df1fe15] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.835+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:06.835+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:11:06.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55437a98]
2026-01-21T17:11:06.838+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1535672320 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:06.838+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:06.839+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:06.839+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.841+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:11:06.839+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:11:06.841+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72656b81] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.842+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.842+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:11:06.843+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1018976495 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:06.844+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4cdbc] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.845+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:06.845+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:06.846+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@849178753 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:06.847+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d9b07df]
2026-01-21T17:11:06.847+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:06.848+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:11:06.848+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:11:06.852+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7521ff63] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.854+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1611774951 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:11:06.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:06.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:11:06.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:06.856+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e4cdbc]
2026-01-21T17:11:06.856+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:06.857+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:11:06.857+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72656b81]
2026-01-21T17:11:06.858+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:11:06.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:06.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:11:06.861+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:06.861+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.861+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:06.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7521ff63]
2026-01-21T17:11:06.868+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:11:06.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:06.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df1fe15]
2026-01-21T17:11:06.873+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:06.873+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71b8995b] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.874+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.878+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:11:06.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:06.876+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194554600 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:06.879+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:06.879+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:06.880+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:06.882+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ccca9f4] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.884+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.889+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1465312446 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:06.890+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:06.906+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:06.907+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:06.909+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71b8995b]
2026-01-21T17:11:06.915+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.921+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:11:06.922+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:06.923+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:06.925+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ccca9f4]
2026-01-21T17:11:06.939+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.940+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.942+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-21T17:11:06.942+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbe0782] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.943+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:06.943+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1115980296 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:06.943+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:06.944+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:06.944+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:11:06.945+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:06.946+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:06.955+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414441f2] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:06.956+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@131375023 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:06.958+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:06.958+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:06.959+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:06.963+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbe0782]
2026-01-21T17:11:06.964+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:06.971+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:06.972+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.002+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:07.002+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:07.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.006+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:11:07.007+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:07.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.004+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.006+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:07.007+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:11:07.007+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:11:07.009+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:11:07.009+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@414441f2]
2026-01-21T17:11:07.010+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:07.010+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.010+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:11:07.011+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.011+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.012+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:07.012+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:07.014+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:11:07.012+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.013+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:07.013+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f24a5fe] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.013+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:07.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.019+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.019+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:11:07.020+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1821130297 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:07.020+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.021+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.022+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.024+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.024+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:07.024+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec070a2] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.025+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.025+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b9c90f] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.026+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.027+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:07.027+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1751179643 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:07.029+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e60f7c9] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.030+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@428154503 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:07.030+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.031+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:07.037+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1655757814 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:07.038+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:11:07.038+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2448fb1d] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.040+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:07.040+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:11:07.041+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:11:07.046+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@51903135 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.054+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:11:07.055+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:11:07.056+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:11:07.056+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.063+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f24a5fe]
2026-01-21T17:11:07.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:11:07.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:11:07.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:07.073+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.075+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b9c90f]
2026-01-21T17:11:07.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:11:07.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e60f7c9]
2026-01-21T17:11:07.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec070a2]
2026-01-21T17:11:07.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a3aabb] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.079+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.079+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2448fb1d]
2026-01-21T17:11:07.080+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.080+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.080+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1266874404 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:07.080+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:11:07.081+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.089+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:11:07.081+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:11:07.081+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9c2067b] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.081+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:07.085+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.091+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.092+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:07.092+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@606741121 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:07.125+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:07.101+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:07.105+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.113+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.123+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:11:07.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:07.144+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:11:07.144+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:11:07.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:11:07.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:11:07.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:07.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:07.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:11:07.151+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.154+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:11:07.156+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:11:07.157+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.157+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e4585e] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.158+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.158+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.158+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1365784953 wrapping com.mysql.cj.jdbc.ConnectionImpl@4d97cbd4] will not be managed by Spring
2026-01-21T17:11:07.160+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.160+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:11:07.160+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.161+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:11:07.161+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c8fc09c] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.161+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.162+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1914905310 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:07.162+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db61293] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.162+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:11:07.163+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116088030 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:07.163+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:11:07.163+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:11:07.164+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:11:07.171+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:07.173+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9c2067b]
2026-01-21T17:11:07.173+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.174+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:07.174+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:07.174+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a3aabb]
2026-01-21T17:11:07.175+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.175+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.175+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e63e658] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122596189 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:07.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:07.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:07.190+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:07.191+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:07.192+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:07.192+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:07.192+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:07.192+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.193+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44540f] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.193+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485011645 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:07.193+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:07.194+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:07.195+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:11:07.195+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:11:07.195+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e4585e]
2026-01-21T17:11:07.196+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c8fc09c]
2026-01-21T17:11:07.196+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:11:07.196+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.197+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.197+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6db61293]
2026-01-21T17:11:07.197+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:11:07.197+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:11:07.198+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.200+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.201+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:11:07.201+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.202+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.202+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.203+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e63e658]
2026-01-21T17:11:07.204+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.205+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b05e11b] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.206+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794477829 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:07.210+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:07.210+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:07.227+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:07.227+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:07.227+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44540f]
2026-01-21T17:11:07.228+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b05e11b]
2026-01-21T17:11:07.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fb7549e] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.230+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a571716] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.230+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1620871499 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:07.231+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@784218750 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:07.231+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:07.231+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:07.231+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:07.236+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:07.239+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:07.240+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:07.240+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fb7549e]
2026-01-21T17:11:07.241+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a571716]
2026-01-21T17:11:07.241+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7137570a] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:07.242+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@61473181 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:07.243+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.243+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:07.245+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:07.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:07.255+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:07.256+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:07.257+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.258+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7137570a]
2026-01-21T17:11:07.257+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:07.259+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.260+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:07.260+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c05ad99] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.261+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.261+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1472275988 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:07.261+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1542eac4] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.262+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:07.262+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@508263929 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:07.263+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:07.263+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:07.267+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:07.267+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:07.270+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c05ad99]
2026-01-21T17:11:07.273+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.273+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d878f04] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.273+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:07.274+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@752844872 wrapping com.mysql.cj.jdbc.ConnectionImpl@662b023a] will not be managed by Spring
2026-01-21T17:11:07.274+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1542eac4]
2026-01-21T17:11:07.275+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:07.275+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.276+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:07.276+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@655c2262] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.277+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1732964551 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:07.277+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:07.278+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:07.278+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.280+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d878f04]
2026-01-21T17:11:07.280+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:07.281+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@655c2262]
2026-01-21T17:11:07.282+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.291+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:11:07.292+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:07.295+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:11:07.297+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.308+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-21T17:11:07.318+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:11:07.320+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-21T17:11:07.322+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.324+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:11:07.327+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-21T17:11:07.325+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-21T17:11:07.327+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:11:07.328+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:11:07.329+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.340+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:11:07.343+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.330+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:11:07.331+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:11:07.344+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c381bd1] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.347+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1618297064 wrapping com.mysql.cj.jdbc.ConnectionImpl@11595b1b] will not be managed by Spring
2026-01-21T17:11:07.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-21T17:11:07.345+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:11:07.345+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:11:07.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-21T17:11:07.351+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:11:07.352+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@797752e3] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62701b24] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@5254331 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:07.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-21T17:11:07.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17007716 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:11:07.357+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c381bd1]
2026-01-21T17:11:07.358+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:07.359+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:11:07.359+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.359+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:07.360+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-21T17:11:07.361+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.361+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:11:07.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62701b24]
2026-01-21T17:11:07.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@797752e3]
2026-01-21T17:11:07.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a94572] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.365+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc6545] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.371+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23255832 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.372+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1193267067 wrapping com.mysql.cj.jdbc.ConnectionImpl@13defc8c] will not be managed by Spring
2026-01-21T17:11:07.372+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:07.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:07.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:11:07.375+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:11:07.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:11:07.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.378+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc6545]
2026-01-21T17:11:07.378+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a94572]
2026-01-21T17:11:07.379+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.379+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.380+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:11:07.380+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4352032b] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.382+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794723046 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.387+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:07.389+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:07.395+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:07.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4352032b]
2026-01-21T17:11:07.402+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.403+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b12b01b] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.404+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1208656649 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.409+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:07.410+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:07.475+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.480+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b12b01b]
2026-01-21T17:11:07.489+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212ca64c] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.491+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1796643363 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.492+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:07.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:07.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:07.525+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212ca64c]
2026-01-21T17:11:07.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28222a1] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1180236411 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.527+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:11:07.528+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:11:07.540+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:11:07.540+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28222a1]
2026-01-21T17:11:07.540+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.540+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ff016b6] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.541+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@477412035 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.541+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:07.542+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:07.544+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.545+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ff016b6]
2026-01-21T17:11:07.545+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.545+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a4495] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.546+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@248559542 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.547+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:11:07.547+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:11:07.558+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:11:07.558+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19a4495]
2026-01-21T17:11:07.559+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.559+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad8ee50] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.560+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154511218 wrapping com.mysql.cj.jdbc.ConnectionImpl@7cc2ad86] will not be managed by Spring
2026-01-21T17:11:07.560+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:11:07.561+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:11:07.563+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:11:07.563+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad8ee50]
2026-01-21T17:11:07.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:11:07.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:11:07.797+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:11:07.799+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-21T17:11:07.801+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:11:07.802+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:11:07.803+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:11:07.804+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:11:07.805+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee1fffa] was not registered for synchronization because synchronization is not active
2026-01-21T17:11:07.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@851625929 wrapping com.mysql.cj.jdbc.ConnectionImpl@103d1906] will not be managed by Spring
2026-01-21T17:11:07.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:11:07.810+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-21T17:11:07.815+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-21T17:11:07.821+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee1fffa]
2026-01-21T17:11:07.821+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:11:07.822+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-21T17:11:07.825+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:09.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:09.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:09.366+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:49:09.368+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:09.369+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:09.369+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:09.370+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:09.371+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72a7a6fa] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:09.367+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:09.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:09.400+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:09.401+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:09.417+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:09.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1576270391 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:09.430+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:09.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b0ccc66] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:09.470+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:49:09.777+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1000558385 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:09.867+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:09.937+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:10.027+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:10.180+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72a7a6fa]
2026-01-21T17:49:10.370+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:10.404+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:10.416+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:10.419+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b0ccc66]
2026-01-21T17:49:10.433+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:10.471+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:10.535+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5298826a] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:10.535+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1952053197 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:10.536+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:10.537+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:10.583+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:10.644+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5298826a]
2026-01-21T17:49:10.715+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:10.750+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:10.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:22.944+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/switch-company
2026-01-21T17:49:22.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/switch-company
2026-01-21T17:49:22.949+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/switch-company
2026-01-21T17:49:22.950+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/users/switch-company
2026-01-21T17:49:22.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/users/switch-company", parameters={}
2026-01-21T17:49:22.952+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#switchCompany(CompanySwitchRequest)
2026-01-21T17:49:22.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanySwitchRequest(companyId=7, currentToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwid (truncated)...]
2026-01-21T17:49:22.963+09:00  INFO 35404 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 회사 전환 시도 - userId: 1, companyId: 7
2026-01-21T17:49:22.963+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:22.963+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424853d] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:22.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891176077 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:22.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:22.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:22.970+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:22.970+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@424853d]
2026-01-21T17:49:22.981+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:22.982+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d445e3]
2026-01-21T17:49:22.983+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@238466018 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will be managed by Spring
2026-01-21T17:49:22.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:22.985+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:22.987+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:22.987+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d445e3]
2026-01-21T17:49:22.991+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d445e3] from current transaction
2026-01-21T17:49:22.993+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.setPrimaryCompany     : ==>  Preparing: UPDATE user_company_tb SET is_primary = CASE WHEN user_id = ? AND company_id = ? THEN 1 ELSE 0 END, updated_at = NOW() WHERE user_id = ?
2026-01-21T17:49:22.994+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.setPrimaryCompany     : ==> Parameters: 1(Long), 7(Long), 1(Long)
2026-01-21T17:49:23.019+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.setPrimaryCompany     : <==    Updates: 7
2026-01-21T17:49:23.019+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d445e3]
2026-01-21T17:49:23.020+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d445e3] from current transaction
2026-01-21T17:49:23.021+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.updateUserCompanyId   : ==>  Preparing: UPDATE user_tb SET company_id = ? WHERE user_id = ?
2026-01-21T17:49:23.021+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.updateUserCompanyId   : ==> Parameters: 7(Long), 1(Long)
2026-01-21T17:49:23.026+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.updateUserCompanyId   : <==    Updates: 1
2026-01-21T17:49:23.027+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d445e3]
2026-01-21T17:49:23.027+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d445e3]
2026-01-21T17:49:23.028+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d445e3]
2026-01-21T17:49:23.028+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d445e3]
2026-01-21T17:49:23.046+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.046+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2adadc52] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.046+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@868307747 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:23.047+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:23.047+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:23.049+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:23.049+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2adadc52]
2026-01-21T17:49:23.050+09:00  INFO 35404 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 회사 전환 완료 - userId: 1, companyId: 7
2026-01-21T17:49:23.051+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:23.051+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 전환이 완료되었습니다., data={user=UserDto(userId=1, username=test_ceo, p (truncated)...]
2026-01-21T17:49:23.052+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:23.097+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:49:23.098+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/companies
2026-01-21T17:49:23.098+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:49:23.099+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:49:23.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:49:23.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@692e8fe6] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.101+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@863001229 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:23.101+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:49:23.101+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-21T17:49:23.105+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-21T17:49:23.105+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@692e8fe6]
2026-01-21T17:49:23.106+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:23.106+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT, companyNa (truncated)...]
2026-01-21T17:49:23.108+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:23.505+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:23.506+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:23.511+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:49:23.558+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/pending-approvals
2026-01-21T17:49:23.603+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:23.599+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/pending
2026-01-21T17:49:23.603+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/companies
2026-01-21T17:49:23.603+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:23.604+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:23.604+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:49:23.604+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:23.605+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:23.605+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:49:23.605+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.606+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:23.619+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:49:23.619+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a357742] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.619+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.620+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.620+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a12f3b2] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.620+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@272ace85] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.630+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1536910742 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:23.645+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:23.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603604932 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:23.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699673006 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:23.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 7(Long)
2026-01-21T17:49:23.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:49:23.649+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:23.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-21T17:49:23.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:23.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:23.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-21T17:49:23.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:23.682+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a357742]
2026-01-21T17:49:23.683+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@272ace85]
2026-01-21T17:49:23.684+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a12f3b2]
2026-01-21T17:49:23.685+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:23.685+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:23.686+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.686+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:23.688+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=7, companyCode=PC8UJT, companyNa (truncated)...]
2026-01-21T17:49:23.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c4fff0] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.692+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:23.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:23.699+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1109511346 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:23.719+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:23.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 7(Long)
2026-01-21T17:49:23.701+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:23.733+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/pending-approvals
2026-01-21T17:49:23.744+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:23.744+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:23.745+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:23.776+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:23.781+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40c4fff0]
2026-01-21T17:49:23.782+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.782+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:23.782+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1364ef35] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.799+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:23.800+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:23.799+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@397381641 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:23.810+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:23.813+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 7(Long)
2026-01-21T17:49:23.822+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:23.829+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/pending
2026-01-21T17:49:23.864+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:23.866+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:23.868+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:23.868+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:23.869+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:23.869+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:23.870+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1364ef35]
2026-01-21T17:49:23.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:23.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/payment-method-summary
2026-01-21T17:49:23.873+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:49:23.873+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:49:23.873+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:23.873+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses
2026-01-21T17:49:23.875+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:23.878+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:23.878+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:23.878+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:23.879+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:23.879+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:23.880+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.880+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:49:23.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:23.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:23.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:23.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:23.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55fff734] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.882+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:49:23.883+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:49:23.884+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:49:23.884+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:49:23.886+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:49:23.894+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948364064 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:23.895+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:23.895+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:23.896+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:23.898+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.899+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/subscriptions/current
2026-01-21T17:49:23.899+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:23.900+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:23.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:23.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:23.909+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.913+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c2796c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.902+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70596559] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.902+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:49:23.903+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:23.904+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.905+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.913+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1970647114 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:23.914+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203235148 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:23.914+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:49:23.915+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@121e1a11] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.916+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d0542f8] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.916+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:49:23.916+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:23.916+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:49:23.919+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 7(Long)
2026-01-21T17:49:23.919+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:23.919+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:49:23.920+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:49:23.921+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.921+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ccb047c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@302057485 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:23.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:23.929+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:49:23.929+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55fff734]
2026-01-21T17:49:23.930+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:49:23.930+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.930+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1888649011 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:23.931+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513bb212] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.931+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:49:23.933+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 7(Long)
2026-01-21T17:49:23.933+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@736256596 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:23.933+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 1
2026-01-21T17:49:23.934+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:23.936+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:49:23.938+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c2796c]
2026-01-21T17:49:23.939+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70596559]
2026-01-21T17:49:23.944+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:49:23.945+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:23.945+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2077731158 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:23.946+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:23.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=1, userName=tes (truncated)...]
2026-01-21T17:49:23.956+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:23.963+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162975da] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:23.965+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:23.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 7(Long)
2026-01-21T17:49:23.967+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@769767915 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:23.970+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:49:23.978+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 0
2026-01-21T17:49:23.979+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:49:23.982+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:23.983+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d0542f8]
2026-01-21T17:49:23.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ccb047c]
2026-01-21T17:49:23.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/credits/total
2026-01-21T17:49:23.986+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:24.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:24.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.004+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:49:24.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513bb212]
2026-01-21T17:49:24.016+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[])]
2026-01-21T17:49:24.018+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=7, companyId=7, planId= (truncated)...]
2026-01-21T17:49:24.020+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:24.031+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162975da]
2026-01-21T17:49:24.021+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:49:24.023+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.028+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.031+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.035+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.036+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:49:24.036+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:24.052+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.038+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-21T17:49:24.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:24.050+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2619ca] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.052+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:49:24.054+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.067+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:49:24.064+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/companies
2026-01-21T17:49:24.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1098659889 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:24.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/pending-approvals
2026-01-21T17:49:24.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:49:24.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-21T17:49:24.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:49:24.069+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:24.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f34e7c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.078+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.081+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-21T17:49:24.083+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:49:24.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:24.090+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2034765123 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:24.096+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 0
2026-01-21T17:49:24.093+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:24.094+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-21T17:49:24.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:24.096+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:49:24.099+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@121e1a11]
2026-01-21T17:49:24.099+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:49:24.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.100+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.102+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 7(Long), 2026-01-21(LocalDate)
2026-01-21T17:49:24.105+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.106+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.106+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2dcc75] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.106+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27afbf90] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.113+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[])]
2026-01-21T17:49:24.113+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-21T17:49:24.118+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2619ca]
2026-01-21T17:49:24.116+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.116+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:49:24.117+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@988945729 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:24.117+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1089732586 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:24.118+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.119+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.121+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.122+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f34e7c]
2026-01-21T17:49:24.122+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:24.123+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:24.126+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@396b365a] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aee2f86] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.132+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.133+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:24.134+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 7(Long)
2026-01-21T17:49:24.135+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@363827444 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:24.135+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:49:24.135+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858567849 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:24.137+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-21T17:49:24.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:49:24.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:49:24.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:49:24.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:24.149+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:49:24.155+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.148+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 7(Long)
2026-01-21T17:49:24.150+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:49:24.156+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.165+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.162+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/subscriptions/current
2026-01-21T17:49:24.166+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:49:24.165+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df7cd9b] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.166+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:49:24.167+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@914740304 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:24.167+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:49:24.168+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:49:24.169+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:49:24.167+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:49:24.170+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.171+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:49:24.171+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e50b96b] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.172+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@129115465 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d691789] will not be managed by Spring
2026-01-21T17:49:24.175+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:49:24.176+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 7(Long)
2026-01-21T17:49:24.176+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:24.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2dcc75]
2026-01-21T17:49:24.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.178+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=17, userId=1, companyId= (truncated)...]
2026-01-21T17:49:24.179+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.181+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:24.184+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/pending
2026-01-21T17:49:24.186+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:24.187+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:24.187+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:24.188+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.188+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523683c7] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.188+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750916156 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:24.189+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:24.189+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:24.204+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-21T17:49:24.205+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@396b365a]
2026-01-21T17:49:24.206+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.208+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=1000, totalE (truncated)...]
2026-01-21T17:49:24.209+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.210+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 1
2026-01-21T17:49:24.210+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aee2f86]
2026-01-21T17:49:24.210+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 0
2026-01-21T17:49:24.211+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.211+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df7cd9b]
2026-01-21T17:49:24.211+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=1, userName=tes (truncated)...]
2026-01-21T17:49:24.211+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.211+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:49:24.212+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[])]
2026-01-21T17:49:24.212+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.212+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.212+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e50b96b]
2026-01-21T17:49:24.214+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.214+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=7, companyId=7, planId= (truncated)...]
2026-01-21T17:49:24.214+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.222+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:24.222+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523683c7]
2026-01-21T17:49:24.223+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.225+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbe51b8] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.225+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@737205107 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:24.226+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:24.226+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 7(Long)
2026-01-21T17:49:24.227+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:24.227+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:49:24.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/credits/total
2026-01-21T17:49:24.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/payment-method-summary
2026-01-21T17:49:24.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:49:24.229+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:24.230+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:49:24.230+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:49:24.232+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:49:24.231+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:49:24.233+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:49:24.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:49:24.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.265+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.270+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:24.286+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.299+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.303+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:24.304+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbe51b8]
2026-01-21T17:49:24.305+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739ac5dc] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.305+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses
2026-01-21T17:49:24.312+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:49:24.313+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.313+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27afbf90]
2026-01-21T17:49:24.314+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.314+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@142044995 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:24.315+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.315+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.315+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43fa400f] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.320+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.327+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:24.322+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:24.323+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:49:24.323+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:24.326+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:24.327+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1339932992 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:24.329+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.330+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.332+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 7(Long), 2026-01-21(LocalDate)
2026-01-21T17:49:24.333+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:49:24.333+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:49:24.333+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:49:24.336+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.338+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:24.339+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.339+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.344+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:49:24.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:49:24.347+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:49:24.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/pending-approvals
2026-01-21T17:49:24.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2d6493] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.351+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@739ac5dc]
2026-01-21T17:49:24.362+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.362+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-21T17:49:24.353+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.353+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:24.354+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 0
2026-01-21T17:49:24.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.365+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36cd0b16] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.361+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141144036 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:24.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:24.367+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:49:24.368+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.370+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.364+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:24.365+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43fa400f]
2026-01-21T17:49:24.373+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.376+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[])]
2026-01-21T17:49:24.365+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@655505374 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:24.379+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:49:24.380+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:49:24.365+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:24.381+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:24.367+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:24.372+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.383+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434edc3d] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.384+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@603450344 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:24.384+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:49:24.372+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:24.379+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.383+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/pending
2026-01-21T17:49:24.388+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:24.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:24.385+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 7(Long)
2026-01-21T17:49:24.386+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.393+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:24.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:24.401+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5ceeed] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.402+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.403+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/payment-method-summary
2026-01-21T17:49:24.403+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 0
2026-01-21T17:49:24.403+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:24.404+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@367359167 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:24.405+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436535d1] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.407+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 1
2026-01-21T17:49:24.412+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434edc3d]
2026-01-21T17:49:24.410+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:24.410+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36cd0b16]
2026-01-21T17:49:24.410+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2d6493]
2026-01-21T17:49:24.410+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:24.411+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@806204211 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:24.413+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.414+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:49:24.414+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.415+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.416+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 7(Long)
2026-01-21T17:49:24.417+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:24.417+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=1, userName=tes (truncated)...]
2026-01-21T17:49:24.417+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:49:24.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[])]
2026-01-21T17:49:24.418+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f8a590] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.419+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:24.421+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.421+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.422+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.423+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658275936 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:24.431+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.433+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.435+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.436+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:24.437+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:49:24.439+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.443+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:49:24.444+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:24.445+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.446+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:24.446+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db6f4f8] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:24.448+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:24.448+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:24.449+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5ceeed]
2026-01-21T17:49:24.451+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1488355224 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d691789] will not be managed by Spring
2026-01-21T17:49:24.451+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:24.452+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:24.453+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436535d1]
2026-01-21T17:49:24.453+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:49:24.453+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.453+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:49:24.454+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:49:24.454+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f8a590]
2026-01-21T17:49:24.454+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.454+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.454+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:24.455+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:49:24.455+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.456+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.456+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1009d58f] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 0
2026-01-21T17:49:24.460+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.464+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e99675] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.465+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057871842 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:24.466+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db6f4f8]
2026-01-21T17:49:24.467+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.470+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:24.471+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.473+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@54290333 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:24.478+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:24.478+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.481+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[])]
2026-01-21T17:49:24.482+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.478+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4542f2e8] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.486+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@525043439 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:24.480+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c15f75b] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.480+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/pending-approvals
2026-01-21T17:49:24.480+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:49:24.481+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 7(Long)
2026-01-21T17:49:24.487+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:49:24.491+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:24.495+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@857294064 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:24.496+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:24.498+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:49:24.502+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 7(Long)
2026-01-21T17:49:24.502+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:49:24.503+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/payment-method-summary
2026-01-21T17:49:24.503+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:24.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:49:24.511+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:24.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:24.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-21T17:49:24.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:24.513+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 1
2026-01-21T17:49:24.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:49:24.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1009d58f]
2026-01-21T17:49:24.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e99675]
2026-01-21T17:49:24.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 0
2026-01-21T17:49:24.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4542f2e8]
2026-01-21T17:49:24.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:49:24.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.518+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c15f75b]
2026-01-21T17:49:24.518+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8142a04] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.518+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:24.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d804e] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755350271 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:24.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=1, userName=tes (truncated)...]
2026-01-21T17:49:24.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.521+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736044840 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:24.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[])]
2026-01-21T17:49:24.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:24.530+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.540+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 7(Long)
2026-01-21T17:49:24.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.532+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:49:24.534+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:24.538+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.544+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cd6d2e] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.547+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:49:24.548+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/pending
2026-01-21T17:49:24.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@682010656 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:24.553+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:24.553+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:49:24.555+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 7(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:49:24.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:24.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:24.562+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:24.562+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-21T17:49:24.563+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8142a04]
2026-01-21T17:49:24.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 0
2026-01-21T17:49:24.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.564+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d804e]
2026-01-21T17:49:24.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cd6d2e]
2026-01-21T17:49:24.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bdbad5b] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.565+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.566+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.566+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:24.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1581329193 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:24.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=1000, totalE (truncated)...]
2026-01-21T17:49:24.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[])]
2026-01-21T17:49:24.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:24.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.570+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.578+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.580+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:24.599+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:49:24.604+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/expenses/dashboard/monthly-trend
2026-01-21T17:49:24.605+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:24.614+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:49:24.615+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bdbad5b]
2026-01-21T17:49:24.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-21T17:49:24.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-21T17:49:24.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8450d9] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.617+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.617+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@151225095 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:24.618+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:24.618+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:24.619+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 7(Long)
2026-01-21T17:49:24.620+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.620+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3185d656] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.621+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1875836619 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:24.623+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-21T17:49:24.628+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 7(Long)
2026-01-21T17:49:24.628+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:24.629+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8450d9]
2026-01-21T17:49:24.631+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.632+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:24.632+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 0
2026-01-21T17:49:24.634+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.634+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3185d656]
2026-01-21T17:49:24.636+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.637+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:24.638+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[])]
2026-01-21T17:49:24.638+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/pending
2026-01-21T17:49:24.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.646+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:24.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:24.650+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:24.654+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.656+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593dd8a8] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.660+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@5209828 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:24.662+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:24.663+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:24.672+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:24.672+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593dd8a8]
2026-01-21T17:49:24.672+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.673+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6df4b116] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.675+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1522261144 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:24.675+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:24.676+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 7(Long)
2026-01-21T17:49:24.679+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:24.679+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6df4b116]
2026-01-21T17:49:24.679+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.680+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:24.680+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.687+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:24.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/pending
2026-01-21T17:49:24.689+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:24.690+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:24.690+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:24.693+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb99995] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638762958 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d691789] will not be managed by Spring
2026-01-21T17:49:24.694+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:24.695+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:24.697+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:24.698+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb99995]
2026-01-21T17:49:24.699+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.699+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@478cb3e6] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.700+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388628403 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d691789] will not be managed by Spring
2026-01-21T17:49:24.700+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:24.700+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 7(Long)
2026-01-21T17:49:24.702+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:24.703+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@478cb3e6]
2026-01-21T17:49:24.704+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.704+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:24.705+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.706+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:24.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/pending
2026-01-21T17:49:24.712+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:24.713+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:24.714+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:24.715+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.715+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195ce003] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.716+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1202191114 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:24.717+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:24.718+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:24.720+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:24.722+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195ce003]
2026-01-21T17:49:24.723+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.723+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57fcef6c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.727+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702431592 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:24.729+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:24.730+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 7(Long)
2026-01-21T17:49:24.731+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:24.733+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57fcef6c]
2026-01-21T17:49:24.734+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.734+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:24.735+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:24.737+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:24.739+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/pending
2026-01-21T17:49:24.742+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:24.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:24.748+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:24.749+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.749+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13c80275] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.750+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104111446 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:24.750+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:24.753+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:24.756+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:24.761+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13c80275]
2026-01-21T17:49:24.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:24.768+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dbf95d] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:24.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1347655929 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:24.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:24.770+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 7(Long)
2026-01-21T17:49:24.772+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:24.773+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dbf95d]
2026-01-21T17:49:24.780+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:24.782+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:24.782+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:25.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/users/switch-company
2026-01-21T17:49:25.518+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 7, uri: /api/users/switch-company
2026-01-21T17:49:25.518+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/users/switch-company
2026-01-21T17:49:25.518+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/users/switch-company", parameters={}
2026-01-21T17:49:25.519+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#switchCompany(CompanySwitchRequest)
2026-01-21T17:49:25.520+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanySwitchRequest(companyId=1, currentToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwid (truncated)...]
2026-01-21T17:49:25.520+09:00  INFO 35404 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 회사 전환 시도 - userId: 1, companyId: 1
2026-01-21T17:49:25.521+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:25.521+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72923fd4] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:25.524+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@676938213 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:25.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:25.527+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:25.530+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:25.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72923fd4]
2026-01-21T17:49:25.534+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:25.535+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b56da]
2026-01-21T17:49:25.535+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794821379 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will be managed by Spring
2026-01-21T17:49:25.535+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:25.536+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:25.540+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:25.540+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b56da]
2026-01-21T17:49:25.543+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b56da] from current transaction
2026-01-21T17:49:25.543+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.setPrimaryCompany     : ==>  Preparing: UPDATE user_company_tb SET is_primary = CASE WHEN user_id = ? AND company_id = ? THEN 1 ELSE 0 END, updated_at = NOW() WHERE user_id = ?
2026-01-21T17:49:25.544+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.setPrimaryCompany     : ==> Parameters: 1(Long), 1(Long), 1(Long)
2026-01-21T17:49:25.548+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.setPrimaryCompany     : <==    Updates: 7
2026-01-21T17:49:25.549+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b56da]
2026-01-21T17:49:25.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b56da] from current transaction
2026-01-21T17:49:25.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.updateUserCompanyId   : ==>  Preparing: UPDATE user_tb SET company_id = ? WHERE user_id = ?
2026-01-21T17:49:25.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.updateUserCompanyId   : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:49:25.553+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.updateUserCompanyId   : <==    Updates: 1
2026-01-21T17:49:25.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b56da]
2026-01-21T17:49:25.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b56da]
2026-01-21T17:49:25.555+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b56da]
2026-01-21T17:49:25.555+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c7b56da]
2026-01-21T17:49:25.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:25.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@353f81cd] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:25.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152777766 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:25.568+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:25.569+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:25.570+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:25.571+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@353f81cd]
2026-01-21T17:49:25.572+09:00  INFO 35404 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 회사 전환 완료 - userId: 1, companyId: 1
2026-01-21T17:49:25.572+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:25.573+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 전환이 완료되었습니다., data={user=UserDto(userId=1, username=test_ceo, p (truncated)...]
2026-01-21T17:49:25.574+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:25.848+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:25.848+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:25.849+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:49:25.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:49:25.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:25.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:25.852+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-21T17:49:25.858+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:25.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:25.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:49:25.860+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:25.867+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:25.922+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:49:25.928+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:25.935+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:25.935+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:49:25.935+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:25.936+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@596967df] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:25.937+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:25.948+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54a88be3] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:25.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@320aa797] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:25.969+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1627134181 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:25.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:49:25.997+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-21T17:49:25.998+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2098675821 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:25.998+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@874225997 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.004+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:26.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:26.007+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:49:26.017+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:26.024+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:26.025+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-21T17:49:26.032+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54a88be3]
2026-01-21T17:49:26.032+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@320aa797]
2026-01-21T17:49:26.032+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.033+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.044+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:26.044+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:26.047+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-21T17:49:26.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@596967df]
2026-01-21T17:49:26.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.051+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:26.053+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.065+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a9d359a] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:49:26.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1766285830 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.076+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:26.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:26.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:26.078+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:26.078+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:26.079+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.083+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35cf2935] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.084+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@676373965 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:26.090+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:26.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:49:26.095+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:26.097+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a9d359a]
2026-01-21T17:49:26.101+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.102+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:26.102+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:26.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35cf2935]
2026-01-21T17:49:26.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.107+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.114+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:26.118+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:26.119+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.122+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:26.127+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:26.128+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:26.129+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:26.130+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:49:26.138+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:26.139+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:26.143+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:26.145+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550b2e07] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:26.146+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1243837846 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:26.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:26.148+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126c50c6] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.149+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:26.155+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585674051 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:26.155+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:26.156+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:26.159+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550b2e07]
2026-01-21T17:49:26.164+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:49:26.164+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.165+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2febbd14] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.172+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@597480952 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:26.177+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:26.179+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:26.183+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:26.186+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126c50c6]
2026-01-21T17:49:26.186+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.187+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:26.189+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:26.195+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2febbd14]
2026-01-21T17:49:26.198+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.212+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.213+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:26.214+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.230+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:26.230+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:26.231+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:26.231+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:26.233+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:26.231+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:49:26.232+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.233+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:49:26.233+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:26.233+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:26.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:26.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:26.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:49:26.236+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.234+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:26.235+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:49:26.236+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.237+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:49:26.237+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.236+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56cc85e9] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.237+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:26.237+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:49:26.237+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.238+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:49:26.238+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.238+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.238+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.243+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.238+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.245+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:49:26.239+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.239+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73631ee4] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.243+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-21T17:49:26.244+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.246+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.247+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.249+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.248+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.249+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.248+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f023b42] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.249+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.249+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:49:26.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e5d78a6] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@860825326 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:26.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.250+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da031e1] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.251+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1470473033 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:26.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2119013682 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:26.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:49:26.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71874a74] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:49:26.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:49:26.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:49:26.253+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:49:26.252+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@383155660 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.256+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:26.253+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:49:26.258+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:26.261+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@157169939 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d691789] will not be managed by Spring
2026-01-21T17:49:26.261+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1039486821 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.263+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:26.263+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:26.264+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:49:26.265+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:26.267+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:26.268+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:49:26.269+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:49:26.269+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:49:26.270+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71874a74]
2026-01-21T17:49:26.270+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e5d78a6]
2026-01-21T17:49:26.271+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f023b42]
2026-01-21T17:49:26.272+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da031e1]
2026-01-21T17:49:26.272+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.273+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.277+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:26.277+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:26.286+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.287+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.287+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59fff0b7] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.287+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:49:26.288+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73631ee4]
2026-01-21T17:49:26.288+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56cc85e9]
2026-01-21T17:49:26.288+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:49:26.289+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:49:26.289+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@316724502 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.290+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.294+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.294+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.298+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:26.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:49:26.300+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:26.302+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1267bc0b] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.316+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@681112731 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.316+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:26.304+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:49:26.305+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-21T17:49:26.305+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:26.309+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:49:26.313+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.319+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:26.320+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-21T17:49:26.322+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-21T17:49:26.325+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:49:26.330+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.333+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:49:26.336+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:49:26.336+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:49:26.334+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-21T17:49:26.334+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:49:26.338+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:49:26.335+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:49:26.338+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:49:26.338+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-21T17:49:26.339+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:49:26.339+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.342+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:49:26.346+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-21T17:49:26.347+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:49:26.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:26.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:26.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.348+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.349+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.349+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1267bc0b]
2026-01-21T17:49:26.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59fff0b7]
2026-01-21T17:49:26.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:49:26.350+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@460112c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.352+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e8a0b1b] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.352+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fce8306] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.353+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.353+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.354+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.354+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1210713620 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:26.354+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1429596553 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:26.359+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:26.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1014775936 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:26.355+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4acbc3db] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.356+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:49:26.360+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:26.361+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:49:26.362+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.362+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1821898877 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:26.363+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.365+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:49:26.366+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:49:26.367+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:26.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:49:26.377+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f191935] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.378+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:26.382+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:49:26.383+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:49:26.385+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1298665695 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.386+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e8a0b1b]
2026-01-21T17:49:26.386+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:26.386+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:49:26.395+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@460112c]
2026-01-21T17:49:26.387+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:49:26.387+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.389+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:49:26.393+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:49:26.396+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.396+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:49:26.397+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-21T17:49:26.398+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:49:26.399+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:49:26.399+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:49:26.401+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.402+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.406+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.409+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.420+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.415+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.421+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-21T17:49:26.422+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cd72874] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.428+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:49:26.429+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-21T17:49:26.430+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2042296576 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:26.430+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.431+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-21T17:49:26.431+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:49:26.438+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.439+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-21T17:49:26.439+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:49:26.439+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:49:26.440+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:49:26.446+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:49:26.447+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:49:26.449+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-21T17:49:26.451+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:49:26.451+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f191935]
2026-01-21T17:49:26.451+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4acbc3db]
2026-01-21T17:49:26.461+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fce8306]
2026-01-21T17:49:26.463+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.468+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4f7dbe] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:49:26.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:49:26.469+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@207a9434] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.470+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.470+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@307002543 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:26.471+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:49:26.472+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.484+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cd72874]
2026-01-21T17:49:26.485+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@884690683 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.486+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7007c49e] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.486+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-21T17:49:26.487+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.488+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:26.489+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.490+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:26.493+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@237058551 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:26.498+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-21T17:49:26.500+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-21T17:49:26.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:49:26.509+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:26.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:26.510+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:49:26.511+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-21T17:49:26.512+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.514+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:26.515+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:49:26.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-21T17:49:26.516+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:26.517+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-21T17:49:26.522+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-21T17:49:26.522+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:26.523+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-21T17:49:26.525+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-21T17:49:26.528+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-21T17:49:26.526+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.527+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:49:26.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:26.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-21T17:49:26.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-21T17:49:26.529+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b763ba] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-21T17:49:26.531+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@207a9434]
2026-01-21T17:49:26.532+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4f7dbe]
2026-01-21T17:49:26.533+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-21T17:49:26.533+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@891769017 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d691789] will not be managed by Spring
2026-01-21T17:49:26.533+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.534+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.536+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.543+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:49:26.545+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:49:26.545+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:26.546+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b12d68d] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.546+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41152742] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.547+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-21T17:49:26.548+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-21T17:49:26.549+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7007c49e]
2026-01-21T17:49:26.550+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:26.551+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@79339520 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.552+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@901431392 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.554+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.555+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.577+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2869a50d] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.556+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.579+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:49:26.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-21T17:49:26.567+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:49:26.579+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@738469981 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:26.581+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.582+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-21(LocalDate)
2026-01-21T17:49:26.583+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:49:26.584+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-21T17:49:26.586+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-21T17:49:26.588+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:26.594+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b763ba]
2026-01-21T17:49:26.595+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-21T17:49:26.596+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:49:26.597+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.597+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b12d68d]
2026-01-21T17:49:26.597+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41152742]
2026-01-21T17:49:26.598+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108ce21d] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.598+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-21T17:49:26.599+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1533933829 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d691789] will not be managed by Spring
2026-01-21T17:49:26.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-21T17:49:26.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-21T17:49:26.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c435fcc] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.600+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:26.601+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.601+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@881089585 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.604+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:49:26.602+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:26.604+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-21T17:49:26.606+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:49:26.606+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-21T17:49:26.610+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2869a50d]
2026-01-21T17:49:26.611+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.614+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-21T17:49:26.615+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:26.616+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:49:26.617+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.617+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108ce21d]
2026-01-21T17:49:26.618+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c435fcc]
2026-01-21T17:49:26.621+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.622+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.623+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:26.623+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bc880c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.624+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.629+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@247923688 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.630+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:26.631+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:26.632+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:26.648+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:26.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bc880c]
2026-01-21T17:49:26.650+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:26.651+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.652+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:26.652+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e545de9] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.653+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:26.653+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@302276295 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.653+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:26.654+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:49:26.654+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.654+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:49:26.655+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba03bd5] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.660+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@634709451 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:26.662+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:26.663+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:49:26.664+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e545de9]
2026-01-21T17:49:26.664+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:26.665+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.667+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19fd727f] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.668+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@89837500 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.669+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:26.670+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:26.670+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:26.671+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba03bd5]
2026-01-21T17:49:26.671+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.672+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1e8ba4] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.672+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:26.673+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19fd727f]
2026-01-21T17:49:26.672+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@618296609 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:26.678+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.679+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:26.679+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:49:26.680+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:26.681+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.686+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.691+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-21T17:49:26.697+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:26.700+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.700+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1e8ba4]
2026-01-21T17:49:26.701+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.702+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.702+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-21T17:49:26.703+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:26.703+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.704+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.706+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e64e90f] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.717+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432244039 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.718+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:26.718+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:26.719+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:26.720+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:26.723+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:26.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.747+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:26.748+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:49:26.754+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:26.763+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:26.764+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:49:26.765+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:49:26.766+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:26.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:26.767+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e64e90f]
2026-01-21T17:49:26.787+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.788+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbba794] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.769+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.771+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.771+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:49:26.795+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:49:26.787+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.788+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@618534845 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.797+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:26.789+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.790+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.796+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.796+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581bcd0c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.798+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:26.798+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:49:26.799+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:49:26.803+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.804+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@113110735 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.808+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.810+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.814+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.820+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:26.822+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.822+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.823+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c73be8a] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.827+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:26.827+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.829+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.832+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:26.832+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230155256 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:26.832+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c5de22e] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.834+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5bcb3] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.835+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbba794]
2026-01-21T17:49:26.835+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:49:26.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154846358 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:26.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1250470789 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:26.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.836+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:26.837+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:49:26.838+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:49:26.838+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:49:26.838+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31002172] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.838+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581bcd0c]
2026-01-21T17:49:26.841+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:49:26.842+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:49:26.844+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20428737 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.844+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.844+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:49:26.846+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:49:26.846+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@404392c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.846+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c73be8a]
2026-01-21T17:49:26.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:49:26.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:49:26.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:49:26.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@41023245 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.851+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.852+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c5de22e]
2026-01-21T17:49:26.852+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5bcb3]
2026-01-21T17:49:26.853+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:26.853+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:49:26.856+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:49:26.854+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.855+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.856+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:26.856+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.859+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31002172]
2026-01-21T17:49:26.861+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:49:26.861+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:49:26.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.861+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:26.862+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.872+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@663f9a6e] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.865+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.877+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1451502698 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.871+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/payment-method-summary
2026-01-21T17:49:26.880+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:26.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-21T17:49:26.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:26.881+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-21T17:49:26.882+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.883+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:26.883+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.889+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-21T17:49:26.890+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@404392c]
2026-01-21T17:49:26.892+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-21T17:49:26.900+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-21T17:49:26.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:26.901+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.902+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.903+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-21T17:49:26.904+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:26.904+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@663f9a6e]
2026-01-21T17:49:26.911+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.905+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.905+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.905+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-21T17:49:26.907+09:00 DEBUG 35404 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.912+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb8d334] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.915+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@617529959 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.912+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-21T17:49:26.912+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c1ba08f] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.913+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-21T17:49:26.922+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1635824447 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:26.914+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:26.920+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:49:26.921+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.923+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.923+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-21T17:49:26.927+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:26.927+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:49:26.929+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.930+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:26.930+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-21T17:49:26.933+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:26.935+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.936+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.938+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52821f67] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.937+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:26.938+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7993358c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.940+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627675936 wrapping com.mysql.cj.jdbc.ConnectionImpl@1d691789] will not be managed by Spring
2026-01-21T17:49:26.944+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:49:26.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:26.947+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960356899 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:26.948+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-21T17:49:26.949+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb8d334]
2026-01-21T17:49:26.949+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.950+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-21T17:49:26.950+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 3
2026-01-21T17:49:26.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-21T17:49:26.951+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:26.952+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4739a98e] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.953+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-21T17:49:26.954+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c1ba08f]
2026-01-21T17:49:26.954+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@318bd077] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:26.955+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@891635100 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:26.956+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.957+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 9
2026-01-21T17:49:26.960+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1238533121 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:26.960+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:26.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-21T17:49:26.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-21T17:49:26.961+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52821f67]
2026-01-21T17:49:26.963+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-21T17:49:26.964+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:26.966+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7993358c]
2026-01-21T17:49:26.966+09:00 DEBUG 35404 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.968+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.970+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-21T17:49:26.971+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:26.972+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=5, userName=tes (truncated)...]
2026-01-21T17:49:26.978+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1078 (truncated)...]
2026-01-21T17:49:26.983+09:00 DEBUG 35404 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.984+09:00 DEBUG 35404 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:26.989+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 25
2026-01-21T17:49:26.989+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:27.002+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@318bd077]
2026-01-21T17:49:27.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4739a98e]
2026-01-21T17:49:27.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.003+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4d8538] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.004+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e3792c] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.004+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428873838 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:27.005+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@454874951 wrapping com.mysql.cj.jdbc.ConnectionImpl@367e7c85] will not be managed by Spring
2026-01-21T17:49:27.011+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:27.012+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:27.014+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:27.015+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:27.022+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:27.022+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:27.023+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e3792c]
2026-01-21T17:49:27.023+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4d8538]
2026-01-21T17:49:27.026+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:27.026+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.027+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:27.028+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7efb157a] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.030+09:00 DEBUG 35404 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:27.034+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@684276696 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:27.043+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:27.044+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:49:27.044+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-21T17:49:27.045+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:27.045+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-21T17:49:27.047+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 69(Long), 68(Long), 67(Long), 58(Long), 57(Long), 56(Long), 55(Long), 47(Long), 45(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-21T17:49:27.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:27.048+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-21T17:49:27.051+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-21T17:49:27.050+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:27.051+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-21T17:49:27.052+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 34
2026-01-21T17:49:27.052+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:27.053+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:27.053+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7efb157a]
2026-01-21T17:49:27.053+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.054+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-21T17:49:27.055+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.055+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2306eacd] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.055+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.056+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee18183] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.056+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227822754 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:27.056+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199b5245] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.061+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@672597472 wrapping com.mysql.cj.jdbc.ConnectionImpl@50c471d1] will not be managed by Spring
2026-01-21T17:49:27.061+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2029860882 wrapping com.mysql.cj.jdbc.ConnectionImpl@25a078ec] will not be managed by Spring
2026-01-21T17:49:27.061+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:27.061+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-21T17:49:27.062+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-21T17:49:27.062+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:27.063+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-21T17:49:27.063+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-21T17:49:27.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-21T17:49:27.066+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:27.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee18183]
2026-01-21T17:49:27.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2306eacd]
2026-01-21T17:49:27.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:27.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-21T17:49:27.068+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.070+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-21T17:49:27.070+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199b5245]
2026-01-21T17:49:27.070+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9084494] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.071+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:27.071+09:00 DEBUG 35404 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:27.071+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@499943418 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:27.072+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-21T17:49:27.077+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:27.078+09:00 DEBUG 35404 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:27.082+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:27.103+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:27.104+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9084494]
2026-01-21T17:49:27.105+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:27.105+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:27.106+09:00 DEBUG 35404 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:27.115+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-21T17:49:27.118+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-21T17:49:27.119+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-21T17:49:27.119+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-21T17:49:27.127+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-21T17:49:27.128+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.129+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf2b4c0] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.129+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253587426 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:27.129+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-21T17:49:27.131+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-21T17:49:27.134+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-21T17:49:27.140+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf2b4c0]
2026-01-21T17:49:27.143+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.144+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b95045a] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.147+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@41481052 wrapping com.mysql.cj.jdbc.ConnectionImpl@24e5a2cf] will not be managed by Spring
2026-01-21T17:49:27.148+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-21T17:49:27.149+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-21T17:49:27.162+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-21T17:49:27.163+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b95045a]
2026-01-21T17:49:27.163+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:27.164+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-21T17:49:27.173+09:00 DEBUG 35404 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-21T17:49:27.299+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-21T17:49:27.301+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-21T17:49:27.301+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-21T17:49:27.301+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-21T17:49:27.302+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-21T17:49:27.302+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-21T17:49:27.302+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119a2dcb] was not registered for synchronization because synchronization is not active
2026-01-21T17:49:27.303+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@951257967 wrapping com.mysql.cj.jdbc.ConnectionImpl@5904425e] will not be managed by Spring
2026-01-21T17:49:27.303+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-21T17:49:27.304+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-21T17:49:27.307+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-21T17:49:27.311+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119a2dcb]
2026-01-21T17:49:27.314+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-21T17:49:27.314+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-21T17:49:27.315+09:00 DEBUG 35404 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
