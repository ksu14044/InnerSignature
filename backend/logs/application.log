2026-01-20T15:08:40.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:40.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-20T15:08:40.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:40.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-20T15:08:40.722+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-20T15:08:40.722+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.701+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:40.730+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.701+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:40.716+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-20T15:08:40.720+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-20T15:08:40.721+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-20T15:08:40.736+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-20T15:08:40.748+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.762+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.730+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-20T15:08:40.730+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:40.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25560bfc]
2026-01-20T15:08:40.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-20T15:08:40.733+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.768+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:40.770+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-20T15:08:40.770+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b84165] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:40.771+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:40.771+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.784+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.772+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.772+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3164afd5] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:40.776+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.796+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.781+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468872393 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:40.800+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-20T15:08:40.781+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:40.805+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-20T15:08:40.810+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:40.786+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:40.787+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:40.787+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1400526046 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:40.872+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-20T15:08:40.799+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:40.814+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2683e9] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:40.832+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:40.867+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a69601] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:40.882+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-20T15:08:40.877+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-20T15:08:40.877+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e7186d4] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:40.878+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1525516050 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:40.882+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@482454509 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:40.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:40.884+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1931404710 wrapping com.mysql.cj.jdbc.ConnectionImpl@26a64825] will not be managed by Spring
2026-01-20T15:08:40.884+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-20T15:08:40.884+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T15:08:40.885+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-20T15:08:40.885+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-20T15:08:40.886+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-20T15:08:40.889+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-20T15:08:40.891+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-20T15:08:40.895+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-01-20T15:08:40.901+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-20T15:08:40.904+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.904+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b84165]
2026-01-20T15:08:40.911+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:40.911+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:40.912+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-20T15:08:40.916+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:40.919+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=68, drafte (truncated)...]
2026-01-20T15:08:40.920+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3164afd5]
2026-01-20T15:08:40.929+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c75a45e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:40.930+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:40.935+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-20T15:08:40.935+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-20T15:08:40.935+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T15:08:40.936+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:40.937+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906422689 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:40.937+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2683e9]
2026-01-20T15:08:40.942+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-20T15:08:40.952+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e7186d4]
2026-01-20T15:08:40.952+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a69601]
2026-01-20T15:08:40.983+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:40.953+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-20T15:08:40.975+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-20T15:08:40.979+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:40.981+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-20T15:08:40.982+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:40.983+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5180f3a8] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:40.984+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:40.985+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-20T15:08:40.987+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-20T15:08:40.988+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-20T15:08:40.988+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-01, complet (truncated)...]
2026-01-20T15:08:40.989+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1418944775 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:40.994+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:40.996+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-20T15:08:40.996+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:40.999+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:41.004+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-20T15:08:41.005+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-20T15:08:41.005+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-20T15:08:41.027+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-01-20T15:08:41.029+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-20T15:08:41.031+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.032+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.032+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c75a45e]
2026-01-20T15:08:41.033+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.033+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-20T15:08:41.033+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:41.038+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:41.048+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-20T15:08:41.050+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-20T15:08:41.052+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=68, drafte (truncated)...]
2026-01-20T15:08:41.063+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eae177a] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:41.064+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.064+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5180f3a8]
2026-01-20T15:08:41.065+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:41.069+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:41.068+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1777733092 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:41.072+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T15:08:41.069+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.071+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-01-20T15:08:41.077+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-20T15:08:41.078+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:41.080+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21e68625] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:41.080+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:41.082+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2039968251 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:41.086+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-20T15:08:41.089+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-20T15:08:41.096+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T15:08:41.098+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eae177a]
2026-01-20T15:08:41.100+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:41.100+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a14bd00] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:41.101+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1479140960 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:41.101+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-20T15:08:41.103+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-20T15:08:41.103+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21e68625]
2026-01-20T15:08:41.105+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-20T15:08:41.105+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:41.108+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-01, complet (truncated)...]
2026-01-20T15:08:41.109+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:41.165+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.166+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.167+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-20T15:08:41.176+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.224+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-20T15:08:41.250+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a14bd00]
2026-01-20T15:08:41.251+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:41.252+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-01-20T15:08:41.253+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:41.267+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.269+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.271+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-20T15:08:41.271+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.291+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-20T15:08:41.295+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-20T15:08:41.297+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-20T15:08:41.297+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-20T15:08:41.297+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.297+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.298+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31
2026-01-20T15:08:41.300+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-20T15:08:41.302+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-20T15:08:41.302+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-20T15:08:41.303+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-20T15:08:41.303+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-20T15:08:41.303+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-20T15:08:41.304+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-20T15:08:41.304+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-20T15:08:41.304+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-20T15:08:41.305+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.305+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.305+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.305+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.307+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.308+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.309+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.310+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:41.311+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:41.315+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:41.316+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:41.317+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:41.317+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca76d8b] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:41.317+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7abd635d] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:41.317+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5494628b] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:41.321+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280c854f] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:41.325+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780277229 wrapping com.mysql.cj.jdbc.ConnectionImpl@26a64825] will not be managed by Spring
2026-01-20T15:08:41.325+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1972084264 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:41.325+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574686904 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:41.327+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@693801796 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:41.330+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-20T15:08:41.330+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-20T15:08:41.330+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? AND report_date >= ? AND report_date <= ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-20T15:08:41.330+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T15:08:41.332+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-20T15:08:41.334+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-20T15:08:41.336+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-20T15:08:41.336+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-20T15:08:41.373+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-01-20T15:08:41.373+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-20T15:08:41.373+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T15:08:41.387+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7abd635d]
2026-01-20T15:08:41.387+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5494628b]
2026-01-20T15:08:41.387+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280c854f]
2026-01-20T15:08:41.388+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:41.390+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:41.390+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:41.391+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=68, drafte (truncated)...]
2026-01-20T15:08:41.399+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2026-01, complet (truncated)...]
2026-01-20T15:08:41.399+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2993bbdc] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:41.400+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:41.401+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:41.407+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1702458716 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:41.414+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-20T15:08:41.437+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-20T15:08:41.438+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca76d8b]
2026-01-20T15:08:41.441+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-20T15:08:41.443+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:41.443+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=17, pendingCoun (truncated)...]
2026-01-20T15:08:41.449+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:41.462+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-20T15:08:41.465+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2993bbdc]
2026-01-20T15:08:41.467+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:41.469+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식비/회식, totalAmou (truncated)...]
2026-01-20T15:08:41.471+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:42.474+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:42.475+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-20T15:08:42.480+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-20T15:08:42.482+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.483+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.484+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-20T15:08:42.487+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-20T15:08:42.493+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.495+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.497+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-20T15:08:42.498+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-20T15:08:42.502+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.506+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.507+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-20T15:08:42.590+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-20T15:08:42.640+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.641+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:42.641+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.642+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-20T15:08:42.642+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-20T15:08:42.643+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-20T15:08:42.643+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.647+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-20T15:08:42.675+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.675+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-20T15:08:42.685+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.683+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:42.683+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-20T15:08:42.684+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-20T15:08:42.684+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-20T15:08:42.686+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-20T15:08:42.687+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-20T15:08:42.686+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.690+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-20T15:08:42.687+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:42.687+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-20T15:08:42.687+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-20T15:08:42.687+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.688+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-20T15:08:42.754+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-20T15:08:42.756+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:42.757+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-20T15:08:42.759+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-20T15:08:42.759+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-20T15:08:42.799+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-20T15:08:42.794+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-20T15:08:42.796+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.797+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.797+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-20T15:08:42.799+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.802+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.800+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.800+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.800+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.801+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d0beeb] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.802+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.802+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.803+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.818+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.818+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da78d60] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.803+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.820+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.821+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e99260] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.803+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.804+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.807+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.807+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1576682508 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:42.827+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:42.826+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ea0c73] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.826+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@184d7c5e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.827+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319cac67] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-20T15:08:42.832+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1854276205 wrapping com.mysql.cj.jdbc.ConnectionImpl@26a64825] will not be managed by Spring
2026-01-20T15:08:42.832+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254053649 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:42.833+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-20T15:08:42.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T15:08:42.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@215575278 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:42.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@634115975 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:42.835+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-20T15:08:42.837+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:42.838+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-20T15:08:42.838+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-20T15:08:42.839+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-20T15:08:42.842+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d0beeb]
2026-01-20T15:08:42.843+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@731445926 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:42.845+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:42.844+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-20T15:08:42.845+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-20T15:08:42.845+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T15:08:42.845+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-20T15:08:42.845+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-20T15:08:42.846+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:42.849+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-20T15:08:42.847+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1da78d60]
2026-01-20T15:08:42.848+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e99260]
2026-01-20T15:08:42.850+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:42.851+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.852+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:42.863+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=27, pendingCoun (truncated)...]
2026-01-20T15:08:42.858+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-20T15:08:42.862+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79dcac3] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.869+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@543496816 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:42.864+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:42.867+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-20T15:08:42.871+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-20T15:08:42.874+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.877+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-20T15:08:42.880+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-20T15:08:42.880+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-20T15:08:42.880+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@184d7c5e]
2026-01-20T15:08:42.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-20T15:08:42.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-20T15:08:42.882+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:42.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-20T15:08:42.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-20T15:08:42.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.885+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=27, pendingCoun (truncated)...]
2026-01-20T15:08:42.885+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ea0c73]
2026-01-20T15:08:42.887+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.887+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-20T15:08:42.888+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:42.888+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:42.893+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.898+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.894+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-20T15:08:42.895+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-20T15:08:42.896+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.897+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-01-20T15:08:42.903+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319cac67]
2026-01-20T15:08:42.899+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31da1b3b] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.900+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.901+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:42.910+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.904+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.905+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:42.907+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@617021207 wrapping com.mysql.cj.jdbc.ConnectionImpl@26a64825] will not be managed by Spring
2026-01-20T15:08:42.912+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-20T15:08:42.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-20T15:08:42.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-20T15:08:42.917+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=68, drafte (truncated)...]
2026-01-20T15:08:42.918+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-20T15:08:42.919+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1147901c] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.919+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-20T15:08:42.919+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-20T15:08:42.924+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79dcac3]
2026-01-20T15:08:42.926+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:42.930+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-20T15:08:42.931+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1719879736 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:42.931+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-20T15:08:42.931+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-20T15:08:42.932+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:42.936+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-20T15:08:42.938+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T15:08:42.940+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-20T15:08:42.946+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-20T15:08:42.941+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.942+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-20T15:08:42.944+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-20T15:08:42.946+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-20T15:08:42.948+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.951+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:42.952+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-20T15:08:42.953+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.954+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.958+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.965+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-20T15:08:42.965+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.966+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ad58879] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.967+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-20T15:08:42.968+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-20T15:08:42.985+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:42.968+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.970+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-01-20T15:08:42.971+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T15:08:42.993+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1147901c]
2026-01-20T15:08:42.994+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:42.983+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1844016541 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:42.984+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.985+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-20T15:08:42.986+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6f4710] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.988+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31da1b3b]
2026-01-20T15:08:42.994+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d03a0ea] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:42.994+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-20T15:08:42.995+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:42.995+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-20T15:08:42.996+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1586631379 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:42.996+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:42.997+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@283705382 wrapping com.mysql.cj.jdbc.ConnectionImpl@26a64825] will not be managed by Spring
2026-01-20T15:08:42.998+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-20T15:08:42.999+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:43.003+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23384388] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:43.004+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@664675438 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:43.000+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.000+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-20T15:08:43.000+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=68, drafte (truncated)...]
2026-01-20T15:08:43.001+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-20T15:08:43.007+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-20T15:08:43.004+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-20T15:08:43.004+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.006+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.013+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:43.014+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501d38bd] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:43.016+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1559491458 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:43.020+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T15:08:43.024+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-20T15:08:43.008+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-20T15:08:43.012+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-20T15:08:43.015+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-20T15:08:43.028+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-20T15:08:43.029+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-20T15:08:43.029+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-20T15:08:43.030+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-20T15:08:43.030+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.032+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.033+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:43.033+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15b171c4] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:43.034+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@917240080 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:43.034+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-20T15:08:43.035+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-20T15:08:43.061+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-01-20T15:08:43.061+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-20T15:08:43.061+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-20T15:08:43.075+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23384388]
2026-01-20T15:08:43.076+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ad58879]
2026-01-20T15:08:43.076+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d03a0ea]
2026-01-20T15:08:43.076+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.077+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.077+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.078+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=68, drafte (truncated)...]
2026-01-20T15:08:43.078+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-20T15:08:43.078+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-20T15:08:43.079+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.084+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.084+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.117+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:43.120+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-20T15:08:43.121+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=APPROVED
2026-01-20T15:08:43.121+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=APPROVED", parameters={masked}
2026-01-20T15:08:43.135+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean)
2026-01-20T15:08:43.137+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.095+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-20T15:08:43.154+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-20T15:08:43.113+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-20T15:08:43.152+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.160+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-20T15:08:43.159+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-20T15:08:43.160+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:43.161+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-20T15:08:43.161+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-20T15:08:43.161+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d79a6d8] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:43.161+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-20T15:08:43.163+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-20T15:08:43.165+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574784365 wrapping com.mysql.cj.jdbc.ConnectionImpl@26a64825] will not be managed by Spring
2026-01-20T15:08:43.165+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-20T15:08:43.166+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.166+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T15:08:43.168+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T15:08:43.168+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-20T15:08:43.168+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-20T15:08:43.245+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.272+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.279+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-20T15:08:43.282+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501d38bd]
2026-01-20T15:08:43.283+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15b171c4]
2026-01-20T15:08:43.283+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f6f4710]
2026-01-20T15:08:43.293+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.290+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.291+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:43.292+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:43.311+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2180dbc3] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:43.293+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.312+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-20T15:08:43.295+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=27, pendingCoun (truncated)...]
2026-01-20T15:08:43.305+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:43.305+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b9ca1de] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:43.312+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@417453982 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:43.317+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@507196859 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:43.314+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.315+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.316+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479f286e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:43.317+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-20T15:08:43.317+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN tax_collected_at IS NULL THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_collected_at IS NOT NULL THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ?
2026-01-20T15:08:43.319+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874106234 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:43.367+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-20T15:08:43.320+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T15:08:43.324+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-20T15:08:43.361+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-20T15:08:43.367+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'APPROVED' AND r.tax_collected_at IS NULL AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-20T15:08:43.371+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d79a6d8]
2026-01-20T15:08:43.380+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-20T15:08:43.383+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-20T15:08:43.383+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:43.384+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-20T15:08:43.385+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-20T15:08:43.388+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53281df6] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:43.393+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1666657837 wrapping com.mysql.cj.jdbc.ConnectionImpl@26a64825] will not be managed by Spring
2026-01-20T15:08:43.388+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-20T15:08:43.389+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b9ca1de]
2026-01-20T15:08:43.394+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-20T15:08:43.394+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-20T15:08:43.394+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.395+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), APPROVED(String)
2026-01-20T15:08:43.395+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.395+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 자료 수집 현황 통계 조회 성공, data=TaxStatusDto(totalCount=27, pendingCoun (truncated)...]
2026-01-20T15:08:43.397+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-20T15:08:43.398+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.400+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:43.419+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ff5457] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:43.420+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532844825 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:43.421+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN COALESCE(actual_paid_amount, total_amount) ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'APPROVED' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-20T15:08:43.430+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-20T15:08:43.432+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-20T15:08:43.433+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 1
2026-01-20T15:08:43.445+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2180dbc3]
2026-01-20T15:08:43.447+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479f286e]
2026-01-20T15:08:43.448+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.448+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.450+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-20T15:08:43.450+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=68, drafte (truncated)...]
2026-01-20T15:08:43.451+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.451+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.481+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategorySummary          : <==      Total: 6
2026-01-20T15:08:43.485+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53281df6]
2026-01-20T15:08:43.486+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.493+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 2
2026-01-20T15:08:43.496+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-20T15:08:43.497+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ff5457]
2026-01-20T15:08:43.498+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:43.513+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:43.516+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, complet (truncated)...]
2026-01-20T15:08:43.517+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:50.409+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-20T15:08:50.416+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-20T15:08:50.418+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/logout
2026-01-20T15:08:50.428+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-20T15:08:50.434+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-20T15:08:50.446+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-20T15:08:50.452+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMiIsInVzZXJuYW1lIjo (truncated)...]
2026-01-20T15:08:50.454+09:00  INFO 45320 --- [http-nio-8080-exec-3] SECURITY                                 : LOGOUT userId=12
2026-01-20T15:08:50.455+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:50.463+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-20T15:08:50.465+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:54.891+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-20T15:08:54.894+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-20T15:08:54.895+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-20T15:08:54.896+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-20T15:08:54.896+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-20T15:08:54.899+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-20T15:08:54.904+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user1, password=1234)]
2026-01-20T15:08:54.909+09:00  INFO 45320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user1
2026-01-20T15:08:54.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:54.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e9fd6e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:54.916+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1698859606 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:54.916+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-20T15:08:54.917+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user1(String)
2026-01-20T15:08:54.918+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-20T15:08:54.919+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e9fd6e]
2026-01-20T15:08:55.000+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.000+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40518f64] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.001+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@140276585 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.001+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-20T15:08:55.002+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-20T15:08:55.005+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-20T15:08:55.005+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40518f64]
2026-01-20T15:08:55.006+09:00  INFO 45320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 2, role: USER, companyId: 2
2026-01-20T15:08:55.008+09:00  INFO 45320 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=2 username=test_user1 role=USER
2026-01-20T15:08:55.009+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.011+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=2, username=test_user1, password (truncated)...]
2026-01-20T15:08:55.012+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.341+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-20T15:08:55.348+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-20T15:08:55.350+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/companies
2026-01-20T15:08:55.351+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-20T15:08:55.351+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-20T15:08:55.352+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-20T15:08:55.352+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.353+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25287228] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.359+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@740676410 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.360+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-20T15:08:55.362+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-20T15:08:55.367+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-20T15:08:55.370+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25287228]
2026-01-20T15:08:55.371+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.372+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-20T15:08:55.379+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.433+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:55.438+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:55.457+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.450+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.452+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:55.453+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.453+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.467+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:55.469+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.472+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:55.470+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:55.470+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.471+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:55.474+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:08:55.476+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:55.476+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.478+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:55.478+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:55.478+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:08:55.479+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.479+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:55.480+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:08:55.480+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:55.480+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:55.481+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.481+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:08:55.482+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:55.482+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.482+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:55.483+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:55.484+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:08:55.485+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:08:55.485+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:55.487+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.485+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:08:55.486+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:55.487+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.492+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c7f33c] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.487+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:08:55.488+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.488+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@329fafe0] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.489+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:08:55.492+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.522+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dc1dcf1] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.493+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1486972015 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.494+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.496+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153db176] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.530+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203336231 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.499+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.523+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1388195677 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.524+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:55.524+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f82307] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.532+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:55.532+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29bc5b5f] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.533+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:55.534+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@622878181 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:55.535+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:55.537+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:55.546+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:55.546+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.548+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1178287098 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:55.548+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.550+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.551+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.553+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:55.553+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:55.554+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.558+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153db176]
2026-01-20T15:08:55.555+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:55.555+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@329fafe0]
2026-01-20T15:08:55.562+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dc1dcf1]
2026-01-20T15:08:55.555+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c7f33c]
2026-01-20T15:08:55.555+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.560+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.561+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@403617801 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:55.563+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.563+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.564+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.564+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f82307]
2026-01-20T15:08:55.565+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f591fa9] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.566+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.566+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:55.567+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:55.568+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:55.568+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.568+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@769160384 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.569+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.570+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.570+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.571+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5371d7a9] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.571+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.571+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.583+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.603+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:55.610+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1953566161 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:55.612+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.612+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.614+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:08:55.618+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.624+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:55.625+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.630+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:55.628+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.629+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.630+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:08:55.630+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:55.632+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:08:55.633+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.633+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:55.633+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:08:55.634+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:08:55.635+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.635+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.636+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:55.637+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.637+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:08:55.639+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.646+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.639+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29bc5b5f]
2026-01-20T15:08:55.643+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f591fa9]
2026-01-20T15:08:55.648+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.644+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.644+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3da42edb] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.646+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5371d7a9]
2026-01-20T15:08:55.647+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c759ff] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.648+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.649+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70dc0cc1] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.649+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10c2cd11] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.650+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787501876 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.650+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.651+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177766167 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.651+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62182161] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.651+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@126869796 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:55.652+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1896347778 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:55.652+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.652+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e582a86] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.652+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.652+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122427097 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.653+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.654+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:55.654+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.654+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1068169286 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:55.654+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.655+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.661+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.662+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:55.663+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.664+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.664+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.665+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.669+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.669+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:55.670+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3da42edb]
2026-01-20T15:08:55.671+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23c759ff]
2026-01-20T15:08:55.674+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10c2cd11]
2026-01-20T15:08:55.675+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.679+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.676+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.678+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.679+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.680+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62182161]
2026-01-20T15:08:55.680+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:55.680+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70dc0cc1]
2026-01-20T15:08:55.680+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1533bfc6] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.680+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@663ade30] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.680+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.680+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.681+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.681+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159222093 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.682+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141944745 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.683+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fbd216] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.684+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657c8a3a] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.684+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.685+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.686+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172748129 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.687+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976973392 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:55.687+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.687+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.688+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.692+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.696+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.697+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.699+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.699+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1533bfc6]
2026-01-20T15:08:55.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@663ade30]
2026-01-20T15:08:55.701+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.703+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.704+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.704+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657c8a3a]
2026-01-20T15:08:55.704+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309500ad] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.705+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.705+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f425a4] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.705+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.706+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@944788726 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.706+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fbd216]
2026-01-20T15:08:55.709+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636805364 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.709+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7a5728] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.709+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.709+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.709+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.710+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.710+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@450245415 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:55.712+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.712+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e582a86]
2026-01-20T15:08:55.712+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea96b68] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.713+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.713+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.714+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.715+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154500553 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.715+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.716+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baaed92] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.716+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.717+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.718+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1404624446 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:55.719+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.720+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309500ad]
2026-01-20T15:08:55.720+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.720+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.720+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.720+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.721+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.722+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7a5728]
2026-01-20T15:08:55.725+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f425a4]
2026-01-20T15:08:55.725+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ca897f] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.728+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@541226659 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.726+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.727+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.727+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.729+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.730+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.730+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea96b68]
2026-01-20T15:08:55.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e82e53] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@160bc70] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baaed92]
2026-01-20T15:08:55.732+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.732+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.732+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1499654257 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:55.734+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.733+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909027069 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.733+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.734+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52b6a6d6] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.736+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.736+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.736+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.736+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70d6b5d2] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.737+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1743877571 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.741+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.737+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ca897f]
2026-01-20T15:08:55.737+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.738+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082213927 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:55.744+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.745+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.745+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.745+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.746+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ee5fad] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.746+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e82e53]
2026-01-20T15:08:55.746+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.747+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.748+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1057203678 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.748+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.749+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@160bc70]
2026-01-20T15:08:55.750+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.751+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188e6f80] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.751+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.752+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.753+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1237667956 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:55.753+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4760fddf] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.754+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.755+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1130846847 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.758+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.759+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.763+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.766+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.780+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52b6a6d6]
2026-01-20T15:08:55.780+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.780+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.784+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.784+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188e6f80]
2026-01-20T15:08:55.784+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70d6b5d2]
2026-01-20T15:08:55.785+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5a65fa] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.785+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.785+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.786+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2067652785 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.787+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.787+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.788+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40500af6] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.789+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a6b707] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.789+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.792+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53ee5fad]
2026-01-20T15:08:55.792+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4760fddf]
2026-01-20T15:08:55.793+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726241043 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:55.793+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1419507908 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:55.795+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.797+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.797+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.797+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.797+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.798+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d24117b] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.798+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ff1b12] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.800+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.801+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.802+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.802+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1276524613 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.802+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967942135 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.803+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5a65fa]
2026-01-20T15:08:55.805+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.805+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.807+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:55.808+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.813+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.813+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40500af6]
2026-01-20T15:08:55.814+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.815+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b9e6d7] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.815+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:55.816+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.816+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11a6b707]
2026-01-20T15:08:55.817+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1501766735 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.817+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f532d5e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.818+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.818+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.819+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.819+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1595180024 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:55.820+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f58327] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.820+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.820+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:55.821+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d24117b]
2026-01-20T15:08:55.821+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.824+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.821+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@105846513 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:55.822+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ff1b12]
2026-01-20T15:08:55.822+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.827+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.827+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.827+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.828+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b34ffdf] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.828+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.828+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25a90251] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.828+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16b9e6d7]
2026-01-20T15:08:55.829+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@383160843 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.829+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.829+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@605010557 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f532d5e]
2026-01-20T15:08:55.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cab9e66] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.831+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.831+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.831+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.832+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f58327]
2026-01-20T15:08:55.832+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1979538042 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.833+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:55.833+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a3a548] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.835+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25a90251]
2026-01-20T15:08:55.835+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b34ffdf]
2026-01-20T15:08:55.836+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432136224 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:55.845+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.846+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.846+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.847+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.846+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35dc2760] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.846+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f08339e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.847+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.847+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cab9e66]
2026-01-20T15:08:55.848+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485443072 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.848+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@859764647 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.849+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.849+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.849+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:55.849+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378329c] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.851+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.851+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:55.853+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1943065659 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.853+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.854+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.855+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17a3a548]
2026-01-20T15:08:55.857+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.858+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.859+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.859+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:55.859+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26863a08] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.859+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35dc2760]
2026-01-20T15:08:55.860+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.861+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f08339e]
2026-01-20T15:08:55.862+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@746930805 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:55.862+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.862+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378329c]
2026-01-20T15:08:55.862+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.863+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.863+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3675ef84] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.863+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9040ca] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.863+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.863+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.864+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648765197 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:55.864+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235542405 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.864+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:55.865+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.865+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.866+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.868+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.869+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.869+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.878+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26863a08]
2026-01-20T15:08:55.879+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.879+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.879+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:55.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3675ef84]
2026-01-20T15:08:55.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9040ca]
2026-01-20T15:08:55.882+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.895+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.896+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:55.899+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:55.900+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:55.901+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.904+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:55.927+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.930+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.936+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.937+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.938+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:08:55.940+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:08:55.941+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.941+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:08:55.942+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:08:55.942+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:08:55.942+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:08:55.942+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:08:55.944+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.944+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@404a4461] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.944+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@564698256 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55824700] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@496495627 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.946+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.948+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.949+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.950+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@404a4461]
2026-01-20T15:08:55.950+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55824700]
2026-01-20T15:08:55.950+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.950+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.950+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646c5783] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.950+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645349ee] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:55.952+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1990750281 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:55.951+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588363337 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:55.952+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.952+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:55.952+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.953+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:55.957+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.958+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645349ee]
2026-01-20T15:08:55.957+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:55.962+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646c5783]
2026-01-20T15:08:55.960+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:55.965+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.003+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e16efdc] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.003+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@321deaee] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.065+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@877355873 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:56.067+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:56.063+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1886702537 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:56.069+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:56.069+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:56.071+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:56.084+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:56.093+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:56.093+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@321deaee]
2026-01-20T15:08:56.094+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e16efdc]
2026-01-20T15:08:56.095+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.095+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.095+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2832d2] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.096+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f8080a5] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.096+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1631581475 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:56.096+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716644998 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:56.097+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:56.097+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:56.098+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:56.098+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:56.100+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:56.100+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:56.101+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2832d2]
2026-01-20T15:08:56.101+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f8080a5]
2026-01-20T15:08:56.101+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.101+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.101+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@252f8751] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.101+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b60eec2] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.102+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1483513732 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:56.103+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891550883 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:56.103+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:56.103+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:56.104+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:56.104+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:56.109+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:56.109+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:56.110+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@252f8751]
2026-01-20T15:08:56.111+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b60eec2]
2026-01-20T15:08:56.111+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.112+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.112+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4efcd537] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.113+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43dd2ebd] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.113+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@397461174 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:56.113+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877462778 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:56.113+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:56.114+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:56.114+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:56.115+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:56.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:56.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:56.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43dd2ebd]
2026-01-20T15:08:56.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4efcd537]
2026-01-20T15:08:56.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.120+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@610f37f9] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.120+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a632788] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.121+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1259160995 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:56.121+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1654527646 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:56.121+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:56.121+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:56.122+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:56.122+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:56.125+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:56.127+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a632788]
2026-01-20T15:08:56.127+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:56.127+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.127+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@610f37f9]
2026-01-20T15:08:56.127+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f010334] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.128+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.129+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2728d64a] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.129+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1812806715 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:56.129+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1057000873 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:56.129+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:56.130+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:56.132+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:56.132+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:56.135+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:56.135+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:56.135+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f010334]
2026-01-20T15:08:56.136+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.135+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2728d64a]
2026-01-20T15:08:56.136+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a532198] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.137+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:56.137+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1836880197 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:56.137+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a0dba3] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:56.137+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:56.137+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@64736059 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:56.138+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:56.138+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:56.138+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:56.142+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:56.142+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:56.143+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a532198]
2026-01-20T15:08:56.143+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a0dba3]
2026-01-20T15:08:56.144+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:56.144+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:56.144+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:56.144+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:56.145+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:56.145+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:58.199+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:58.202+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T15:08:58.206+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:58.208+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T15:08:58.209+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:58.210+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-20T15:08:58.213+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:58.214+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-20T15:08:58.215+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:58.235+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:58.236+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T15:08:58.251+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:08:58.237+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T15:08:58.241+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:58.245+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-20T15:08:58.246+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-20T15:08:58.249+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:58.278+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/my-approvals
2026-01-20T15:08:58.254+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T15:08:58.268+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/my-approvals
2026-01-20T15:08:58.274+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:58.276+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:08:58.278+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:58.279+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T15:08:58.279+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T15:08:58.279+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-20T15:08:58.280+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:58.280+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-20T15:08:58.280+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:58.281+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T15:08:58.284+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T15:08:58.282+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:08:58.282+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-20T15:08:58.282+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:58.282+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-20T15:08:58.283+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:58.284+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.285+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.285+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-20T15:08:58.286+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:58.286+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:08:58.286+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.286+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171f7146] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.287+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bb50dcf] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.287+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.287+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.290+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.295+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292097c5] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.296+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e0ee24] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.296+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce328f2] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.297+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6164b125] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.299+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1125439796 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:58.300+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1565715315 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:58.300+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@283554830 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:58.303+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.303+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823425243 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:58.303+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197747678 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:58.304+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:58.304+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:58.304+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1882583856 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:58.305+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.306+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:58.308+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:58.309+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:58.312+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.312+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:58.313+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:58.314+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:58.314+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.314+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.316+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bb50dcf]
2026-01-20T15:08:58.316+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:58.316+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-20T15:08:58.318+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.319+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292097c5]
2026-01-20T15:08:58.320+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171f7146]
2026-01-20T15:08:58.322+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:58.320+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27bbb023] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.320+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:58.325+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-20T15:08:58.326+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1702832546 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:58.327+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:58.328+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:58.329+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.340+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.331+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:58.333+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:58.346+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:58.352+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 0
2026-01-20T15:08:58.352+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:58.352+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.365+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:58.365+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e0ee24]
2026-01-20T15:08:58.365+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:58.365+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce328f2]
2026-01-20T15:08:58.365+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6164b125]
2026-01-20T15:08:58.366+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:58.367+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:58.367+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:58.369+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:58.369+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.370+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:58.370+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[])]
2026-01-20T15:08:58.370+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:58.371+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:58.371+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15d7b6df] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.385+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327711047 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:58.371+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:58.372+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.378+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:58.381+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:58.383+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:58.385+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.402+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.388+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.388+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27bbb023]
2026-01-20T15:08:58.394+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:58.396+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.404+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8bd8411] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.404+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.405+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36aa2d9e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.408+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:58.409+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@178852828 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:58.410+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce8b4cf] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.410+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1709132270 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:58.410+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:58.414+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:58.412+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:58.413+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1713907161 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:58.413+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.413+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:58.416+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:58.417+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:58.417+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:58.417+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15d7b6df]
2026-01-20T15:08:58.426+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.418+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:58.418+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.425+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:58.426+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:58.428+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@374b838e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.429+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2063507e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.429+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8bd8411]
2026-01-20T15:08:58.434+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@528661238 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:58.435+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:58.434+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194386269 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:58.435+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:58.436+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:58.436+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:58.444+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:58.444+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:58.445+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:58.460+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:58.460+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36aa2d9e]
2026-01-20T15:08:58.468+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:58.469+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:58.469+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce8b4cf]
2026-01-20T15:08:58.469+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:58.469+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.471+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:58.472+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:58.479+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f77116] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.483+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@534834123 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:58.480+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:58.480+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2063507e]
2026-01-20T15:08:58.486+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.488+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:58.487+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@374b838e]
2026-01-20T15:08:58.488+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.488+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:58.488+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.491+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:58.495+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e059812] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.497+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@901330863 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:58.498+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.498+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.503+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.503+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.504+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46f77116]
2026-01-20T15:08:58.504+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e059812]
2026-01-20T15:08:58.508+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.510+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.511+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73188c86] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.511+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec7509] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.512+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236596274 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:58.512+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1885055054 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:58.512+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:58.513+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:58.513+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:58.513+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:58.516+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:58.516+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:58.517+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73188c86]
2026-01-20T15:08:58.518+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ec7509]
2026-01-20T15:08:58.518+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.518+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.519+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d5e046] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.519+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bea39b] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.520+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@295576742 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:58.520+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1629215416 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:58.520+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:58.520+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:08:58.522+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:58.527+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:08:58.531+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:58.531+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:08:58.531+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bea39b]
2026-01-20T15:08:58.531+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d5e046]
2026-01-20T15:08:58.532+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.532+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.533+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f7205f8] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.533+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f5283d] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.533+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@707123190 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:58.533+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@816527509 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:58.534+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.534+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.534+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.535+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.537+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.537+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.537+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f5283d]
2026-01-20T15:08:58.537+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f7205f8]
2026-01-20T15:08:58.538+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.538+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.539+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49db000e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.542+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21777cc8] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.544+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1501527496 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:58.544+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1860559067 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:58.545+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:58.545+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:08:58.545+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:58.545+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:08:58.548+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:58.548+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:08:58.548+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21777cc8]
2026-01-20T15:08:58.549+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49db000e]
2026-01-20T15:08:58.550+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.550+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:58.551+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5faaff4f] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.551+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6454f7de] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:58.551+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1168202062 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:08:58.552+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1964920874 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:58.552+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.552+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:58.552+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.552+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:58.556+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.558+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5faaff4f]
2026-01-20T15:08:58.556+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:58.561+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:58.561+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6454f7de]
2026-01-20T15:08:58.561+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:58.562+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:58.562+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:08:58.562+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:58.563+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:59.467+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:08:59.468+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:08:59.469+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T15:08:59.471+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:08:59.471+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-20T15:08:59.481+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:08:59.481+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:08:59.481+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T15:08:59.485+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:08:59.488+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:08:59.488+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-20T15:08:59.491+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:08:59.494+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/me/signatures
2026-01-20T15:08:59.495+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:08:59.495+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:08:59.496+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:08:59.496+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/users/me/signatures
2026-01-20T15:08:59.496+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T15:08:59.496+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:08:59.497+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:08:59.497+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:08:59.498+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-20T15:08:59.498+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T15:08:59.499+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:08:59.499+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:08:59.500+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:08:59.500+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-20T15:08:59.504+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T15:08:59.501+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-20T15:08:59.501+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:08:59.502+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.502+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.504+09:00  INFO 45320 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 2
2026-01-20T15:08:59.505+09:00  INFO 45320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 2
2026-01-20T15:08:59.510+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.510+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a8e94e] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.511+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747db7ad] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.512+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.512+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.513+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1a88f] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.512+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493b013d] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.513+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2be747e2] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.517+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@252069694 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:08:59.517+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1391586816 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:59.517+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@123522291 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:08:59.517+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@536777371 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:59.519+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:59.520+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:08:59.520+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867918708 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:08:59.520+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T15:08:59.520+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:08:59.521+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:59.521+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.521+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-20T15:08:59.521+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:59.522+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.526+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:08:59.529+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-20T15:08:59.529+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:08:59.529+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-20T15:08:59.529+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:08:59.529+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:08:59.529+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2be747e2]
2026-01-20T15:08:59.529+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493b013d]
2026-01-20T15:08:59.529+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1a88f]
2026-01-20T15:08:59.529+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747db7ad]
2026-01-20T15:08:59.532+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.531+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a8e94e]
2026-01-20T15:08:59.531+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:59.532+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.532+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:59.532+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1368615a] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.532+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:59.533+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-20T15:08:59.533+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32dc732f] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.533+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-20T15:08:59.534+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@580675288 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:59.534+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:08:59.535+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:59.537+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@600695002 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:59.537+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:59.537+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:08:59.539+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:59.546+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:08:59.553+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.562+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.569+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:08:59.570+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:08:59.570+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32dc732f]
2026-01-20T15:08:59.570+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1368615a]
2026-01-20T15:08:59.582+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.582+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.582+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3]
2026-01-20T15:08:59.583+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f]
2026-01-20T15:08:59.584+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186279199 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will be managed by Spring
2026-01-20T15:08:59.584+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@806486030 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will be managed by Spring
2026-01-20T15:08:59.584+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:59.584+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:08:59.585+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:08:59.585+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:08:59.588+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:08:59.588+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:08:59.597+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f]
2026-01-20T15:08:59.597+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3]
2026-01-20T15:08:59.599+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f] from current transaction
2026-01-20T15:08:59.599+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3] from current transaction
2026-01-20T15:08:59.600+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:08:59.600+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:08:59.601+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.601+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.603+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:08:59.603+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:08:59.604+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3]
2026-01-20T15:08:59.605+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f]
2026-01-20T15:08:59.605+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3] from current transaction
2026-01-20T15:08:59.605+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f] from current transaction
2026-01-20T15:08:59.605+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:08:59.605+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:08:59.610+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.610+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.613+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:08:59.613+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:08:59.613+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f]
2026-01-20T15:08:59.614+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3]
2026-01-20T15:08:59.615+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f] from current transaction
2026-01-20T15:08:59.615+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3] from current transaction
2026-01-20T15:08:59.615+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:08:59.615+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:08:59.616+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:08:59.616+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:08:59.619+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:08:59.619+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:08:59.620+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3]
2026-01-20T15:08:59.620+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f]
2026-01-20T15:08:59.621+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3]
2026-01-20T15:08:59.621+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f]
2026-01-20T15:08:59.621+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3]
2026-01-20T15:08:59.621+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f]
2026-01-20T15:08:59.621+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1609daf3]
2026-01-20T15:08:59.622+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2127f]
2026-01-20T15:08:59.630+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.630+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.631+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71efc911] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.632+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5051d7] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.632+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1645963179 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:59.632+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278050632 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:59.633+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:08:59.633+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:08:59.633+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.634+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.636+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:08:59.636+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:08:59.637+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5051d7]
2026-01-20T15:08:59.638+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71efc911]
2026-01-20T15:08:59.638+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.641+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.641+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47cdcf7a] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.642+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd65b96] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.642+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1167192253 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:59.643+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1618911292 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:59.643+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:08:59.643+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:08:59.644+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.644+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:08:59.647+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:08:59.647+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:08:59.648+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47cdcf7a]
2026-01-20T15:08:59.649+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd65b96]
2026-01-20T15:08:59.649+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.649+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:08:59.649+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f7cd4a2] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.650+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a58f16d] was not registered for synchronization because synchronization is not active
2026-01-20T15:08:59.651+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@652438568 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:08:59.651+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1052785948 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:08:59.651+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:59.651+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:08:59.651+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:59.652+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:08:59.654+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:59.654+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:08:59.654+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a58f16d]
2026-01-20T15:08:59.654+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f7cd4a2]
2026-01-20T15:08:59.655+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:59.658+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:08:59.659+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:08:59.661+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:08:59.662+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:08:59.662+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:10:06.073+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:10:06.077+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:10:06.078+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:10:06.078+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:10:06.078+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:10:06.079+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:10:06.080+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:06.080+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5e0c99] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:06.082+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500368162 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:06.086+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:10:06.088+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:06.095+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:10:06.097+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5e0c99]
2026-01-20T15:10:06.098+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:06.098+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac98dc4] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:06.099+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1685151042 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:06.100+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:06.100+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:06.103+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:06.105+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac98dc4]
2026-01-20T15:10:06.114+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:06.115+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260]
2026-01-20T15:10:06.115+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2034325700 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will be managed by Spring
2026-01-20T15:10:06.115+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:10:06.116+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:10:06.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:10:06.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260]
2026-01-20T15:10:06.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260] from current transaction
2026-01-20T15:10:06.119+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:06.120+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:06.127+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:06.127+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260]
2026-01-20T15:10:06.128+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260] from current transaction
2026-01-20T15:10:06.129+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:06.129+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:06.131+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:06.132+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260]
2026-01-20T15:10:06.132+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260] from current transaction
2026-01-20T15:10:06.132+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:06.132+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:10:06.135+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:10:06.135+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260]
2026-01-20T15:10:06.135+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260]
2026-01-20T15:10:06.136+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260]
2026-01-20T15:10:06.136+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21259260]
2026-01-20T15:10:06.142+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:06.142+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679bbe62] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:06.143+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@660221155 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:06.143+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:06.144+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:06.146+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:06.146+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679bbe62]
2026-01-20T15:10:06.147+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:06.147+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7307fa50] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:06.147+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230320380 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:06.148+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:06.148+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:06.150+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:10:06.151+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7307fa50]
2026-01-20T15:10:06.151+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:06.152+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f581143] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:06.153+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@599892866 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:06.153+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:10:06.154+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:10:06.158+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:10:06.159+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f581143]
2026-01-20T15:10:06.160+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:10:06.161+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:10:06.161+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:10:08.951+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:10:09.014+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:10:09.041+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:10:09.090+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:10:09.136+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:10:09.178+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:10:09.259+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:09.309+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d9d5fc1] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:09.490+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@420667797 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:09.500+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:10:09.500+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:09.646+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:10:09.705+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d9d5fc1]
2026-01-20T15:10:09.714+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:09.715+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ce364d] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:09.785+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2012589963 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:09.793+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:09.796+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:09.801+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:09.819+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ce364d]
2026-01-20T15:10:09.851+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:09.855+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27]
2026-01-20T15:10:09.857+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155826804 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will be managed by Spring
2026-01-20T15:10:09.859+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:10:09.861+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:10:09.865+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:10:09.866+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27]
2026-01-20T15:10:09.867+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27] from current transaction
2026-01-20T15:10:09.868+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:09.869+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:09.873+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:09.874+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27]
2026-01-20T15:10:09.876+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27] from current transaction
2026-01-20T15:10:09.877+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:09.877+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:09.880+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:09.880+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27]
2026-01-20T15:10:09.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27] from current transaction
2026-01-20T15:10:09.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:09.884+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:10:09.887+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:10:09.894+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27]
2026-01-20T15:10:09.895+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27]
2026-01-20T15:10:09.895+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27]
2026-01-20T15:10:09.896+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ceef27]
2026-01-20T15:10:09.911+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:09.912+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@310b58d8] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:09.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1189079922 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:09.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:09.914+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:09.916+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:09.916+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@310b58d8]
2026-01-20T15:10:09.917+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:09.918+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76493d22] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:09.918+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@502228651 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:09.919+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:09.919+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:09.932+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:10:09.935+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76493d22]
2026-01-20T15:10:10.014+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:10.015+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d26c40e] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:10.294+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@45702821 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:10.360+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:10:10.385+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:10:10.412+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:10:10.413+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d26c40e]
2026-01-20T15:10:10.417+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:10:10.428+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:10:10.446+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:10:10.628+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:10:10.636+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:10:10.656+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:10:10.657+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:10:10.681+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:10:10.682+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:10:10.683+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:10.685+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b7f4c2] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:10.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787218742 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:10.701+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:10:10.703+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:10.712+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:10:10.714+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b7f4c2]
2026-01-20T15:10:10.714+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:10.714+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f917d0] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:10.715+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590357165 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:10.715+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:10.716+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:10.718+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:10.718+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f917d0]
2026-01-20T15:10:10.725+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:10.726+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96]
2026-01-20T15:10:10.726+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1753316215 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will be managed by Spring
2026-01-20T15:10:10.727+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:10:10.728+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:10:10.730+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:10:10.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96]
2026-01-20T15:10:10.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96] from current transaction
2026-01-20T15:10:10.732+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:10.733+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:10.735+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:10.736+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96]
2026-01-20T15:10:10.736+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96] from current transaction
2026-01-20T15:10:10.737+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:10.737+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:10.741+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:10.745+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96]
2026-01-20T15:10:10.745+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96] from current transaction
2026-01-20T15:10:10.745+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:10.746+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:10:10.748+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:10:10.748+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96]
2026-01-20T15:10:10.749+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96]
2026-01-20T15:10:10.749+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96]
2026-01-20T15:10:10.749+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bcd96]
2026-01-20T15:10:10.753+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:10.753+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3456ee17] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:10.753+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@260758348 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:10.754+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:10.759+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:10.762+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:10.763+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3456ee17]
2026-01-20T15:10:10.764+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:10.764+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202be94d] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:10.765+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588160265 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:10.765+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:10.765+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:10.768+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:10:10.768+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@202be94d]
2026-01-20T15:10:10.770+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:10.770+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d26b7df] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:10.771+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1110986935 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:10.777+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:10:10.778+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:10:10.780+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:10:10.780+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d26b7df]
2026-01-20T15:10:10.781+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:10:10.782+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:10:10.783+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:10:12.734+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:10:12.765+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:10:12.781+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:10:12.791+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:10:12.797+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:10:12.810+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:10:12.811+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:12.815+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7132410b] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:12.861+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702188875 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:12.867+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:10:12.867+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:12.882+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:10:12.905+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7132410b]
2026-01-20T15:10:12.910+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:12.911+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443e78c4] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:12.911+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1737950299 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:12.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:12.914+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:12.928+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:12.930+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443e78c4]
2026-01-20T15:10:12.933+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:12.934+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49]
2026-01-20T15:10:12.934+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1878798523 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will be managed by Spring
2026-01-20T15:10:12.935+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:10:12.941+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:10:12.966+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:10:12.968+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49]
2026-01-20T15:10:12.983+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49] from current transaction
2026-01-20T15:10:12.984+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:12.986+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:13.001+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:13.002+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49]
2026-01-20T15:10:13.002+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49] from current transaction
2026-01-20T15:10:13.002+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:13.003+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:13.013+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:13.014+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49]
2026-01-20T15:10:13.016+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49] from current transaction
2026-01-20T15:10:13.017+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:13.018+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:10:13.025+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:10:13.027+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49]
2026-01-20T15:10:13.029+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49]
2026-01-20T15:10:13.030+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49]
2026-01-20T15:10:13.031+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@759ef49]
2026-01-20T15:10:13.061+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:13.070+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b8b604] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:13.075+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1980305984 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:13.076+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:13.076+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:13.090+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:13.094+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b8b604]
2026-01-20T15:10:13.098+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:13.103+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@442a0a8c] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:13.111+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1997642907 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:13.113+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:13.114+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:13.135+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:10:13.144+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@442a0a8c]
2026-01-20T15:10:13.145+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:13.147+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b06a6ea] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:13.147+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1600957292 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:13.149+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:10:13.150+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:10:13.165+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:10:13.181+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b06a6ea]
2026-01-20T15:10:13.182+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:10:13.195+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:10:13.197+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:10:15.505+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:10:15.516+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:10:15.523+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:10:15.549+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:10:15.559+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:10:15.561+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:10:15.562+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:15.563+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399faf08] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:15.566+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1937524478 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:10:15.567+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:10:15.568+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:15.576+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:10:15.577+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399faf08]
2026-01-20T15:10:15.577+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:15.577+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@732f5e8e] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:15.578+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@293369791 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:10:15.578+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:15.579+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:15.582+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:15.584+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@732f5e8e]
2026-01-20T15:10:15.592+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:15.592+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4]
2026-01-20T15:10:15.593+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@781888126 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will be managed by Spring
2026-01-20T15:10:15.593+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:10:15.594+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:10:15.598+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:10:15.601+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4]
2026-01-20T15:10:15.606+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4] from current transaction
2026-01-20T15:10:15.609+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:15.609+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:15.615+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:15.616+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4]
2026-01-20T15:10:15.617+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4] from current transaction
2026-01-20T15:10:15.628+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:15.629+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:15.672+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:15.672+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4]
2026-01-20T15:10:15.674+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4] from current transaction
2026-01-20T15:10:15.674+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:15.675+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:10:15.678+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:10:15.680+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4]
2026-01-20T15:10:15.681+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4]
2026-01-20T15:10:15.681+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4]
2026-01-20T15:10:15.682+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557b10d4]
2026-01-20T15:10:15.689+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:15.693+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1151bf0b] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:15.694+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883673320 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:10:15.696+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:15.701+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:15.711+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:15.712+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1151bf0b]
2026-01-20T15:10:15.713+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:15.713+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f866c36] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:15.716+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53686570 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:10:15.717+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:15.717+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:15.719+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:10:15.722+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f866c36]
2026-01-20T15:10:15.722+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:15.723+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6850ee87] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:15.723+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1142671463 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:10:15.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:10:15.732+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:10:15.746+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:10:15.748+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6850ee87]
2026-01-20T15:10:15.749+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:10:15.750+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:10:15.751+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:10:18.108+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:10:18.124+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:10:18.131+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:10:18.147+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:10:18.151+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:10:18.152+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:10:18.162+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:18.166+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da39b93] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:18.180+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@204286743 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:18.183+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:10:18.191+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:18.199+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:10:18.212+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da39b93]
2026-01-20T15:10:18.212+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:18.213+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c08684] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:18.213+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323347128 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:18.228+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:18.229+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:18.244+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:18.265+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c08684]
2026-01-20T15:10:18.293+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:18.294+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27]
2026-01-20T15:10:18.295+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@679699577 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will be managed by Spring
2026-01-20T15:10:18.295+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:10:18.296+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:10:18.300+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:10:18.305+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27]
2026-01-20T15:10:18.306+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27] from current transaction
2026-01-20T15:10:18.306+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:18.309+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:18.313+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:18.314+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27]
2026-01-20T15:10:18.316+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27] from current transaction
2026-01-20T15:10:18.317+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:18.318+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:18.331+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:18.332+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27]
2026-01-20T15:10:18.333+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27] from current transaction
2026-01-20T15:10:18.334+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:18.335+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:10:18.350+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:10:18.365+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27]
2026-01-20T15:10:18.367+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27]
2026-01-20T15:10:18.368+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27]
2026-01-20T15:10:18.368+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dc5c27]
2026-01-20T15:10:18.396+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:18.397+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1c0ba7] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:18.399+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1273400788 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:18.400+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:18.407+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:18.428+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:18.431+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1c0ba7]
2026-01-20T15:10:18.432+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:18.444+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60137164] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:18.449+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1066213362 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:18.449+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:18.450+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:18.482+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:10:18.495+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60137164]
2026-01-20T15:10:18.496+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:18.501+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd05b7] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:18.502+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2050940089 wrapping com.mysql.cj.jdbc.ConnectionImpl@1509eebc] will not be managed by Spring
2026-01-20T15:10:18.509+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:10:18.520+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:10:18.563+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:10:18.599+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd05b7]
2026-01-20T15:10:18.600+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:10:18.641+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:10:18.676+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:10:24.685+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:10:24.699+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:10:24.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:10:24.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:10:24.701+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:10:24.702+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:10:24.702+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:24.702+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7db94895] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:24.706+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@599619675 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:24.706+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:10:24.707+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:24.711+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:10:24.773+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7db94895]
2026-01-20T15:10:24.774+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:24.774+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78668a6] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:24.775+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991630789 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:24.777+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:24.777+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:24.896+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:24.902+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78668a6]
2026-01-20T15:10:24.909+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:24.912+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1]
2026-01-20T15:10:24.912+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23546259 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will be managed by Spring
2026-01-20T15:10:24.914+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:10:24.916+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:10:24.960+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:10:24.965+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1]
2026-01-20T15:10:24.971+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1] from current transaction
2026-01-20T15:10:24.974+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:24.979+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:25.002+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:25.011+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1]
2026-01-20T15:10:25.012+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1] from current transaction
2026-01-20T15:10:25.012+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:25.013+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:25.031+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:25.034+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1]
2026-01-20T15:10:25.034+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1] from current transaction
2026-01-20T15:10:25.035+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:25.035+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:10:25.051+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:10:25.054+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1]
2026-01-20T15:10:25.054+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1]
2026-01-20T15:10:25.056+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1]
2026-01-20T15:10:25.056+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8378d1]
2026-01-20T15:10:25.061+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:25.061+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54853474] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:25.063+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2000653585 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:25.063+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:25.064+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:25.065+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:25.066+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54853474]
2026-01-20T15:10:25.066+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:25.066+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b66e307] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:25.067+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918378635 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:25.067+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:25.069+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:25.077+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:10:25.077+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b66e307]
2026-01-20T15:10:25.078+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:25.079+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b7ae5c] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:25.079+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2092239766 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:10:25.079+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:10:25.079+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:10:25.081+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:10:25.082+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b7ae5c]
2026-01-20T15:10:25.082+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:10:25.083+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:10:25.084+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:10:31.168+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:10:31.172+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:10:31.173+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:10:31.173+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:10:31.174+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:10:31.183+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:10:31.184+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:31.189+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545bf088] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:31.201+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1559655253 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:31.207+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:10:31.209+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:31.211+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:10:31.211+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545bf088]
2026-01-20T15:10:31.212+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:31.212+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9accc9b] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:31.213+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@202264472 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:31.213+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:31.214+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:31.215+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:31.216+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9accc9b]
2026-01-20T15:10:31.224+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:31.225+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9]
2026-01-20T15:10:31.226+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@889613733 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will be managed by Spring
2026-01-20T15:10:31.227+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:10:31.227+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:10:31.231+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:10:31.231+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9]
2026-01-20T15:10:31.231+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9] from current transaction
2026-01-20T15:10:31.232+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:31.232+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:31.235+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:31.236+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9]
2026-01-20T15:10:31.240+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9] from current transaction
2026-01-20T15:10:31.240+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:31.241+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:31.243+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:31.244+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9]
2026-01-20T15:10:31.244+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9] from current transaction
2026-01-20T15:10:31.244+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:31.246+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:10:31.249+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:10:31.250+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9]
2026-01-20T15:10:31.251+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9]
2026-01-20T15:10:31.251+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9]
2026-01-20T15:10:31.252+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242d41c9]
2026-01-20T15:10:31.259+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:31.260+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8634581] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:31.260+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228264881 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:31.261+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:31.261+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:31.263+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:31.264+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8634581]
2026-01-20T15:10:31.264+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:31.265+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2628ec87] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:31.266+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@880147086 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:31.266+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:31.267+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:31.268+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:10:31.269+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2628ec87]
2026-01-20T15:10:31.269+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:31.271+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be584eb] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:31.272+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051542980 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:10:31.273+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:10:31.273+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:10:31.275+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:10:31.275+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be584eb]
2026-01-20T15:10:31.275+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:10:31.276+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:10:31.277+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:10:37.148+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:10:37.158+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:10:37.168+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:10:37.172+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:10:37.173+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:10:37.176+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:10:37.176+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:37.177+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298e8874] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:37.179+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@33250488 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:37.180+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:10:37.181+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:37.183+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:10:37.184+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298e8874]
2026-01-20T15:10:37.185+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:37.191+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7adf94cb] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:37.193+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@812937075 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:37.193+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:37.193+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:37.195+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:37.196+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7adf94cb]
2026-01-20T15:10:37.201+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:37.202+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4]
2026-01-20T15:10:37.202+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@577395352 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will be managed by Spring
2026-01-20T15:10:37.202+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:10:37.207+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:10:37.213+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:10:37.215+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4]
2026-01-20T15:10:37.216+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4] from current transaction
2026-01-20T15:10:37.222+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:10:37.224+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:37.228+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:10:37.229+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4]
2026-01-20T15:10:37.230+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4] from current transaction
2026-01-20T15:10:37.231+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:37.232+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:37.236+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:37.237+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4]
2026-01-20T15:10:37.240+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4] from current transaction
2026-01-20T15:10:37.240+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:37.240+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:10:37.242+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:10:37.243+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4]
2026-01-20T15:10:37.243+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4]
2026-01-20T15:10:37.243+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4]
2026-01-20T15:10:37.243+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@378917d4]
2026-01-20T15:10:37.246+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:37.246+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@230e6e69] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:37.248+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1980115222 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:37.260+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:10:37.262+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:37.268+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:10:37.269+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@230e6e69]
2026-01-20T15:10:37.271+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:37.272+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d4a83c] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:37.273+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662302089 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:37.274+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:10:37.276+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:10:37.294+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:10:37.296+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d4a83c]
2026-01-20T15:10:37.313+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:10:37.330+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4344f336] was not registered for synchronization because synchronization is not active
2026-01-20T15:10:37.330+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@293811754 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:10:37.330+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:10:37.331+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:10:37.332+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:10:37.333+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4344f336]
2026-01-20T15:10:37.333+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:10:37.334+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:10:37.335+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:11:19.348+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/70
2026-01-20T15:11:19.394+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/70
2026-01-20T15:11:19.401+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/70
2026-01-20T15:11:19.407+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/70
2026-01-20T15:11:19.408+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/70", parameters={}
2026-01-20T15:11:19.408+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-20T15:11:19.414+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:19.423+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f8379c] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:19.435+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1567711411 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:19.442+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-20T15:11:19.443+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:11:19.475+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-20T15:11:19.477+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28f8379c]
2026-01-20T15:11:19.477+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:19.490+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32bce6e8] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:19.496+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1808827693 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:19.497+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:11:19.499+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:11:19.513+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:11:19.516+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32bce6e8]
2026-01-20T15:11:19.578+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:19.603+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285]
2026-01-20T15:11:19.613+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1468866992 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will be managed by Spring
2026-01-20T15:11:19.614+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:11:19.616+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 2(Long)
2026-01-20T15:11:19.665+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 8
2026-01-20T15:11:19.671+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285]
2026-01-20T15:11:19.679+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285] from current transaction
2026-01-20T15:11:19.680+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-20T15:11:19.684+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:11:19.696+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-20T15:11:19.698+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285]
2026-01-20T15:11:19.700+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285] from current transaction
2026-01-20T15:11:19.701+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:11:19.701+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:11:19.706+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:11:19.706+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285]
2026-01-20T15:11:19.708+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285] from current transaction
2026-01-20T15:11:19.711+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:11:19.711+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 114(Long), 2(Long)
2026-01-20T15:11:19.715+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-20T15:11:19.725+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285]
2026-01-20T15:11:19.726+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285]
2026-01-20T15:11:19.726+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285]
2026-01-20T15:11:19.727+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dc51285]
2026-01-20T15:11:19.785+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:19.798+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac4b047] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:19.799+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@107258990 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:19.801+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-20T15:11:19.813+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:11:19.828+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-20T15:11:19.829+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac4b047]
2026-01-20T15:11:19.829+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:19.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4943621d] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:19.831+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714071034 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:19.831+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-20T15:11:19.832+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 70(Long), 2(Long)
2026-01-20T15:11:19.840+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-20T15:11:19.842+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4943621d]
2026-01-20T15:11:19.843+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:19.843+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4444df3] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:19.844+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1447400684 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:19.844+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:19.844+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:19.851+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:19.856+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4444df3]
2026-01-20T15:11:19.857+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:11:19.858+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=70, drafterId=2, r (truncated)...]
2026-01-20T15:11:19.858+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:11:21.156+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-20T15:11:21.171+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.182+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.188+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.188+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.546+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-20T15:11:21.594+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.655+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.661+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-20T15:11:21.663+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:11:21.665+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:11:21.667+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.668+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-20T15:11:21.673+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-20T15:11:21.668+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.671+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.673+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:11:21.674+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-20T15:11:21.697+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.678+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:11:21.699+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:11:21.679+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:11:21.679+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.698+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63b5ab12] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.706+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.712+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.713+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:11:21.714+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:11:21.721+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:11:21.723+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e128833] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.724+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.725+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:11:21.726+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:21.727+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1818ea86] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.728+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.728+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:11:21.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858910752 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:21.730+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@461999bf] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.731+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:11:21.732+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-20T15:11:21.734+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.738+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 2(Long)
2026-01-20T15:11:21.739+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51ddea92] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.740+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1328079831 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:21.740+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1956330552 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:11:21.742+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.742+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.742+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.743+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.744+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@97753379 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:11:21.744+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-20T15:11:21.746+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.747+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63b5ab12]
2026-01-20T15:11:21.747+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@222824045 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:21.748+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.748+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.748+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.750+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:11:21.751+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.751+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1818ea86]
2026-01-20T15:11:21.751+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e128833]
2026-01-20T15:11:21.756+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-20T15:11:21.756+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.756+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.757+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.758+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.758+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:11:21.759+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@265a40dc] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.760+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@461999bf]
2026-01-20T15:11:21.762+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b6748dc] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.775+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1362308368 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:11:21.775+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.776+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258238632 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:21.776+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.798+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@586d9ded] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.798+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.799+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.799+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@43184526 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:11:21.799+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.800+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.809+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.813+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.817+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51ddea92]
2026-01-20T15:11:21.824+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.824+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.826+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.827+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b6748dc]
2026-01-20T15:11:21.827+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@265a40dc]
2026-01-20T15:11:21.827+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49035ac7] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.829+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1053851934 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:21.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a0f54e] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.830+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.831+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd73bd6] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.832+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925212750 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:21.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.834+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@586d9ded]
2026-01-20T15:11:21.841+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1065344720 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:11:21.841+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:21.842+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.842+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:21.844+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:21.845+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507a4363] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.848+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:21.849+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682718324 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:11:21.849+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:21.850+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:21.861+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.862+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49035ac7]
2026-01-20T15:11:21.863+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.863+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213e681d] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.864+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924717471 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:21.865+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:21.866+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:21.866+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:21.866+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:21.867+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:21.867+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd73bd6]
2026-01-20T15:11:21.867+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a0f54e]
2026-01-20T15:11:21.867+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507a4363]
2026-01-20T15:11:21.871+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.871+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.871+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.872+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5e6bbc] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.872+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a3181a] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.872+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6115eb2e] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.873+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1545989162 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:11:21.873+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1025349349 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:21.873+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1677122868 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:11:21.874+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.874+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.873+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.874+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.875+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.875+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:21.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5e6bbc]
2026-01-20T15:11:21.881+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a3181a]
2026-01-20T15:11:21.882+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6115eb2e]
2026-01-20T15:11:21.882+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213e681d]
2026-01-20T15:11:21.882+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b6b0c30] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.882+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@468bf35d] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.883+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1454740842 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:11:21.884+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1475956830 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:21.884+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa869a6] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.884+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe536d0] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.890+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1680517958 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:11:21.885+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:21.889+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:21.890+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1565116849 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:21.891+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.890+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:21.891+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:21.891+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:21.891+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.892+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:21.908+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:21.908+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.908+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:21.912+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b6b0c30]
2026-01-20T15:11:21.912+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe536d0]
2026-01-20T15:11:21.912+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@468bf35d]
2026-01-20T15:11:21.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.913+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.914+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.914+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@519abf8a] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.914+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72bde374] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.915+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:21.915+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a88e1b1] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.916+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@37954309 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:11:21.924+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1422395461 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:21.926+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa869a6]
2026-01-20T15:11:21.927+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@595655846 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:21.929+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:21.929+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:21.930+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.930+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:21.932+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:21.933+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:21.933+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a8eae6] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.935+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:21.939+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1503940620 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:11:21.941+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:21.942+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:21.942+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:21.942+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:21.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:21.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72bde374]
2026-01-20T15:11:21.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@519abf8a]
2026-01-20T15:11:21.945+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a88e1b1]
2026-01-20T15:11:21.946+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.947+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.947+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.947+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ceded6] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.948+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e2a6beb] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.948+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a07df80] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.949+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146777016 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:21.949+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1246296907 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:11:21.950+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:21.950+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1467954712 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:21.954+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:21.955+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.955+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a8eae6]
2026-01-20T15:11:21.957+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.959+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:21.959+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.959+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.960+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.963+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f9e64e6] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.966+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@672553513 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:11:21.966+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.967+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:21.967+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.967+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.968+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e2a6beb]
2026-01-20T15:11:21.968+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ceded6]
2026-01-20T15:11:21.972+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a07df80]
2026-01-20T15:11:21.973+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.973+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.974+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.974+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.976+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16af2027] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.976+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5630de45] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.976+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c4e07b1] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.978+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@189228074 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:11:21.978+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1109168699 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:21.978+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1755393127 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:21.979+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:21.979+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.980+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.980+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:21.980+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:21.981+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.981+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f9e64e6]
2026-01-20T15:11:21.981+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:21.988+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.988+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ee3b03] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.990+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@981189740 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:11:21.990+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:21.991+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:21.991+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:21.991+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:21.991+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:21.992+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16af2027]
2026-01-20T15:11:21.992+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5630de45]
2026-01-20T15:11:21.992+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c4e07b1]
2026-01-20T15:11:21.993+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.993+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.994+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12540ebf] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.993+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:21.993+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4155efa5] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.994+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2106960586 wrapping com.mysql.cj.jdbc.ConnectionImpl@43497a7b] will not be managed by Spring
2026-01-20T15:11:21.994+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23cfc70e] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:21.995+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1294601137 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:21.995+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.995+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1935538116 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:21.996+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:21.996+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.996+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:21.996+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:21.997+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:21.999+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:22.000+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ee3b03]
2026-01-20T15:11:22.000+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.000+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:22.000+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39aee0f8] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.001+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23cfc70e]
2026-01-20T15:11:22.001+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585439469 wrapping com.mysql.cj.jdbc.ConnectionImpl@1dc1238c] will not be managed by Spring
2026-01-20T15:11:22.001+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.002+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d812da] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.001+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.001+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.002+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.004+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@225593464 wrapping com.mysql.cj.jdbc.ConnectionImpl@6e222584] will not be managed by Spring
2026-01-20T15:11:22.005+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.005+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12540ebf]
2026-01-20T15:11:22.005+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4155efa5]
2026-01-20T15:11:22.006+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.007+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:11:22.006+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:11:22.008+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:11:22.007+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.008+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:11:22.009+09:00 DEBUG 45320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:11:22.010+09:00 DEBUG 45320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:11:22.028+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.028+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.028+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d812da]
2026-01-20T15:11:22.028+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39aee0f8]
2026-01-20T15:11:22.029+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:11:22.029+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:11:22.029+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:11:22.029+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:11:22.030+09:00 DEBUG 45320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:11:22.030+09:00 DEBUG 45320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:11:22.063+09:00 DEBUG 45320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:22.065+09:00 DEBUG 45320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:22.123+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:22.134+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:11:22.137+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:22.139+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:11:22.140+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:22.142+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:11:22.146+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/expenses
2026-01-20T15:11:22.147+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.147+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1
2026-01-20T15:11:22.147+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cdcaf29] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.148+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user1", parameters={masked}
2026-01-20T15:11:22.149+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1898118726 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:22.150+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.149+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-20T15:11:22.151+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.155+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.156+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1526268d] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.157+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@677297979 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:22.163+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.164+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.165+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cdcaf29]
2026-01-20T15:11:22.166+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.167+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.173+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a3b1ae] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.174+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20968564 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:22.176+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.176+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.181+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.183+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1526268d]
2026-01-20T15:11:22.184+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.186+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.189+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbcae3f] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.190+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38a3b1ae]
2026-01-20T15:11:22.191+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064316683 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:22.192+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.192+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.193+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f76394] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.193+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.194+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620534981 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:22.195+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:22.197+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:22.214+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.224+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbcae3f]
2026-01-20T15:11:22.225+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:22.225+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.226+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f76394]
2026-01-20T15:11:22.226+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b001e5] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.227+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.227+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2143781434 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:22.228+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@726926c0] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.228+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:22.230+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220022490 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:22.232+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:22.232+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.233+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.242+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:22.245+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b001e5]
2026-01-20T15:11:22.248+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.248+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.249+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@744f23bd] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.250+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@726926c0]
2026-01-20T15:11:22.251+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@833993720 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:22.255+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.256+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.258+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20d7bb4a] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.258+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.259+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@456378038 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:22.261+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:22.262+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:22.266+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.266+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:22.271+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@744f23bd]
2026-01-20T15:11:22.272+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20d7bb4a]
2026-01-20T15:11:22.273+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.274+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.274+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e664324] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.275+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e47a151] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.276+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1664731038 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:22.276+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@332875320 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:22.276+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:22.278+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:22.278+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:22.279+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:22.282+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:22.283+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:22.283+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e664324]
2026-01-20T15:11:22.284+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e47a151]
2026-01-20T15:11:22.285+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.289+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.293+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c51212c] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.294+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3516e9] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.294+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1358052577 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:22.294+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@525039383 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:22.295+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-20T15:11:22.300+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.307+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-20T15:11:22.307+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.331+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.331+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 6
2026-01-20T15:11:22.339+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3516e9]
2026-01-20T15:11:22.340+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c51212c]
2026-01-20T15:11:22.340+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.341+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.341+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@143d626] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.341+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c478d8d] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.342+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@88410809 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:22.343+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2040171368 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:22.343+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:22.344+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.345+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:22.345+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.350+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.351+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:22.352+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c478d8d]
2026-01-20T15:11:22.358+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@143d626]
2026-01-20T15:11:22.358+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.359+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.359+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@159b7e65] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.359+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57c20ca3] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.360+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1433449150 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:22.363+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211040411 wrapping com.mysql.cj.jdbc.ConnectionImpl@841759e] will not be managed by Spring
2026-01-20T15:11:22.364+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-20T15:11:22.364+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.366+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 70(Long), 35(Long), 30(Long), 29(Long), 28(Long), 23(Long)
2026-01-20T15:11:22.366+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.379+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-01-20T15:11:22.380+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@159b7e65]
2026-01-20T15:11:22.381+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.383+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-20T15:11:22.384+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57c20ca3]
2026-01-20T15:11:22.384+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b39aeb] was not registered for synchronization because synchronization is not active
2026-01-20T15:11:22.385+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:11:22.386+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2065015406 wrapping com.mysql.cj.jdbc.ConnectionImpl@13a1dbeb] will not be managed by Spring
2026-01-20T15:11:22.387+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:11:22.387+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-20T15:11:22.388+09:00 DEBUG 45320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:11:22.388+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-20T15:11:22.431+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-20T15:11:22.437+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35b39aeb]
2026-01-20T15:11:22.440+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:11:22.445+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-20T15:11:22.447+09:00 DEBUG 45320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-20T15:11:25.200+09:00 DEBUG 45320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-20T15:11:25.208+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-20T15:11:25.217+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 2, uri: /api/logout
2026-01-20T15:11:25.241+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-20T15:11:25.247+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-20T15:11:25.250+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-20T15:11:25.260+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIyIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-20T15:11:25.266+09:00  INFO 45320 --- [http-nio-8080-exec-6] SECURITY                                 : LOGOUT userId=2
2026-01-20T15:11:25.268+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-20T15:11:25.275+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-20T15:11:25.276+09:00 DEBUG 45320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
