2026-01-07T14:22:31.867+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1103098865 wrapping com.mysql.cj.jdbc.ConnectionImpl@7debe61f] will not be managed by Spring
2026-01-07T14:22:31.868+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172924999 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:31.868+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:22:31.869+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:31.877+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T14:22:31.877+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:22:31.877+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:22:31.878+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:31.879+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-07T14:22:31.887+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:22:31.887+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:22:31.894+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503c6689]
2026-01-07T14:22:31.895+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a6396aa]
2026-01-07T14:22:31.897+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:22:31.897+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T14:22:31.899+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:31.902+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:31.910+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@303b4ac7]
2026-01-07T14:22:31.911+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e09e251]
2026-01-07T14:22:31.911+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:22:31.912+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:31.911+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513ed096] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:31.912+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:31.915+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@691254416 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:31.912+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:31.913+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T14:22:31.915+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6d653f] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:31.916+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:31.920+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:31.918+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:31.919+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1847110721 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:31.922+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:22:31.929+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-07T14:22:31.935+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T14:22:31.950+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T14:22:31.953+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:31.953+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:22:31.953+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T14:22:31.953+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513ed096]
2026-01-07T14:22:31.954+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6d653f]
2026-01-07T14:22:31.954+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T14:22:31.956+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:31.958+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:31.959+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T14:22:31.959+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33fc096a] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:31.960+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44461dfd] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:31.961+09:00  INFO 23508 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T14:22:31.961+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@350340579 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:31.961+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1124457687 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:31.961+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:31.962+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:31.962+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:22:31.962+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112afe14] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:31.962+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:22:31.962+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 27(Long), 1(Long)
2026-01-07T14:22:31.963+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1234537899 wrapping com.mysql.cj.jdbc.ConnectionImpl@7debe61f] will not be managed by Spring
2026-01-07T14:22:31.964+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T14:22:31.965+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:31.965+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:22:31.967+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:22:31.968+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33fc096a]
2026-01-07T14:22:31.969+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44461dfd]
2026-01-07T14:22:31.970+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T14:22:31.970+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:31.970+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:31.970+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112afe14]
2026-01-07T14:22:31.970+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e97a407] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:31.970+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221f0b88] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:31.971+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:31.971+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1030969318 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:31.971+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1447187395 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:31.979+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T14:22:31.979+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:31.980+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:22:31.982+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:31.983+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:31.983+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-07T14:22:31.999+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:31.999+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T14:22:32.000+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e97a407]
2026-01-07T14:22:32.000+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221f0b88]
2026-01-07T14:22:32.000+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:32.001+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:32.001+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:22:32.001+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73824509] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:32.003+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:32.003+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689656762 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:32.005+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:32.010+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:32.015+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:32.016+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73824509]
2026-01-07T14:22:32.016+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:32.017+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=27, drafterId=2, r (truncated)...]
2026-01-07T14:22:32.018+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:32.021+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/27
2026-01-07T14:22:32.026+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/27
2026-01-07T14:22:32.035+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/27
2026-01-07T14:22:32.036+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/27", parameters={}
2026-01-07T14:22:32.037+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:22:32.038+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:32.038+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f084cea] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:32.040+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1049513044 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:32.043+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:22:32.045+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-07T14:22:32.048+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:22:32.048+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f084cea]
2026-01-07T14:22:32.049+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:32.050+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a9834c9] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:32.051+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@660227692 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:32.051+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:22:32.051+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-07T14:22:32.054+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:22:32.054+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a9834c9]
2026-01-07T14:22:32.055+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:32.061+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@953482a] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:32.062+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1118178229 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:32.063+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:22:32.064+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 27(Long), 1(Long)
2026-01-07T14:22:32.066+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:22:32.067+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@953482a]
2026-01-07T14:22:32.067+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:32.068+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee88bc9] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:32.069+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@493457446 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:32.069+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:22:32.069+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-07T14:22:32.071+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T14:22:32.071+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee88bc9]
2026-01-07T14:22:32.074+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:32.075+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a5a8dde] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:32.076+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1076291999 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:32.077+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:32.077+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:32.079+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:32.079+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a5a8dde]
2026-01-07T14:22:32.080+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:32.080+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=27, drafterId=2, r (truncated)...]
2026-01-07T14:22:32.081+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.263+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:22:39.263+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:22:39.264+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T14:22:39.265+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T14:22:39.267+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:22:39.276+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:22:39.269+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:22:39.271+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:22:39.275+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T14:22:39.276+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:22:39.276+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:22:39.277+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T14:22:39.277+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T14:22:39.279+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:22:39.279+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:22:39.279+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T14:22:39.282+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:22:39.279+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T14:22:39.281+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.285+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51fa1bcd] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.281+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:22:39.289+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.293+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8fc4b6] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.284+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.285+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T14:22:39.301+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40dddf1e] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.302+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.313+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82361612 wrapping com.mysql.cj.jdbc.ConnectionImpl@67cfd4ae] will not be managed by Spring
2026-01-07T14:22:39.314+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@475908862 wrapping com.mysql.cj.jdbc.ConnectionImpl@7530fc59] will not be managed by Spring
2026-01-07T14:22:39.316+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6666fc7] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.317+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:22:39.318+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@730054985 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.318+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:22:39.322+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665870028 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.325+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:39.326+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.327+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:22:39.327+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:22:39.329+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.331+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:39.332+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:22:39.333+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a8fc4b6]
2026-01-07T14:22:39.333+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:22:39.333+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.335+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.335+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51fa1bcd]
2026-01-07T14:22:39.336+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T14:22:39.336+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40dddf1e]
2026-01-07T14:22:39.337+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4152f03d] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.337+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.337+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6666fc7]
2026-01-07T14:22:39.338+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.338+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1057802707 wrapping com.mysql.cj.jdbc.ConnectionImpl@67cfd4ae] will not be managed by Spring
2026-01-07T14:22:39.338+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:22:39.340+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.341+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57352fb7] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.341+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.343+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e1f7dd] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.343+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.343+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@219696020 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.343+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.344+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@655370240 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.345+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:22:39.345+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.348+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.349+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.349+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:22:39.349+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.351+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:22:39.351+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:22:39.352+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.352+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.352+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:22:39.353+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4152f03d]
2026-01-07T14:22:39.353+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57352fb7]
2026-01-07T14:22:39.354+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.354+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.354+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.359+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a87d0fc] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.354+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.355+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e1f7dd]
2026-01-07T14:22:39.357+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14650e82] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.360+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@738329737 wrapping com.mysql.cj.jdbc.ConnectionImpl@67cfd4ae] will not be managed by Spring
2026-01-07T14:22:39.360+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30470460] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.361+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.361+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:39.363+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1324469576 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.363+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b98e915] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.365+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:22:39.365+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:22:39.375+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:22:39.366+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572975268 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.367+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1141546683 wrapping com.mysql.cj.jdbc.ConnectionImpl@a5d5af6] will not be managed by Spring
2026-01-07T14:22:39.379+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:39.380+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:22:39.385+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:22:39.386+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T14:22:39.386+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a87d0fc]
2026-01-07T14:22:39.387+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:22:39.388+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:22:39.394+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.395+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30470460]
2026-01-07T14:22:39.395+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ddc5c0] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.396+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.396+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@656009591 wrapping com.mysql.cj.jdbc.ConnectionImpl@67cfd4ae] will not be managed by Spring
2026-01-07T14:22:39.396+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b937ac3] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.397+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.397+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327092693 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.398+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.398+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.399+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.402+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:22:39.402+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T14:22:39.403+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14650e82]
2026-01-07T14:22:39.403+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b98e915]
2026-01-07T14:22:39.404+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.404+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.411+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.405+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.410+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@637cd996] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.411+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:22:39.411+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b937ac3]
2026-01-07T14:22:39.412+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ddc5c0]
2026-01-07T14:22:39.413+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2142262445 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.413+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.414+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.414+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.415+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.416+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15301d1] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.417+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:22:39.419+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:22:39.420+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.421+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18232922 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.422+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.446+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:22:39.446+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:22:39.448+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:39.451+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:22:39.449+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:22:39.450+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.451+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:22:39.452+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:22:39.454+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:22:39.454+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@637cd996]
2026-01-07T14:22:39.461+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:22:39.461+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:22:39.462+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.462+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:22:39.463+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.463+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T14:22:39.464+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.469+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ac6306c] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.472+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.478+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:22:39.482+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cb81d] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.484+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15301d1]
2026-01-07T14:22:39.485+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1129331966 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.485+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.487+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T14:22:39.495+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:22:39.495+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f091cf] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.496+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T14:22:39.498+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:39.498+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@11818665 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.512+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:22:39.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T14:22:39.503+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@297474560 wrapping com.mysql.cj.jdbc.ConnectionImpl@7debe61f] will not be managed by Spring
2026-01-07T14:22:39.514+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:22:39.515+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T14:22:39.515+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:22:39.516+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T14:22:39.516+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:22:39.517+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.520+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f01fe5] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.528+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1192507104 wrapping com.mysql.cj.jdbc.ConnectionImpl@a5d5af6] will not be managed by Spring
2026-01-07T14:22:39.529+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:22:39.531+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:39.531+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:22:39.531+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:22:39.531+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:22:39.532+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cb81d]
2026-01-07T14:22:39.535+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ac6306c]
2026-01-07T14:22:39.536+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f091cf]
2026-01-07T14:22:39.536+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.536+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T14:22:39.537+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.538+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.538+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242acd3d] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.538+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f01fe5]
2026-01-07T14:22:39.543+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:22:39.544+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f53b8dd] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.545+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1153832437 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.545+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.546+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.547+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@573585425 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.547+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.548+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5e4609] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.550+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.551+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.552+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.551+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1774543216 wrapping com.mysql.cj.jdbc.ConnectionImpl@a5d5af6] will not be managed by Spring
2026-01-07T14:22:39.552+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.554+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.555+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.558+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.560+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242acd3d]
2026-01-07T14:22:39.561+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f53b8dd]
2026-01-07T14:22:39.562+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.563+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.563+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487f3d2a] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.567+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a33ffd] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.568+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@978211389 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.570+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@303365220 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.576+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:39.577+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:39.577+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:22:39.578+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:22:39.583+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.583+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:22:39.583+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:22:39.583+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5e4609]
2026-01-07T14:22:39.585+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487f3d2a]
2026-01-07T14:22:39.587+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a33ffd]
2026-01-07T14:22:39.588+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.588+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.597+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.597+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134f3660] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.597+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53cf1737] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.599+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2852076c] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.600+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@472798222 wrapping com.mysql.cj.jdbc.ConnectionImpl@a5d5af6] will not be managed by Spring
2026-01-07T14:22:39.600+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1659434505 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.600+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@19368268 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.600+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:39.601+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.601+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.602+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T14:22:39.603+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.603+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.606+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.610+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T14:22:39.613+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53cf1737]
2026-01-07T14:22:39.613+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134f3660]
2026-01-07T14:22:39.614+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.615+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.615+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.616+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:22:39.616+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56663659] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.616+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2852076c]
2026-01-07T14:22:39.617+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.620+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1022420675 wrapping com.mysql.cj.jdbc.ConnectionImpl@a5d5af6] will not be managed by Spring
2026-01-07T14:22:39.629+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.622+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:22:39.627+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.630+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.631+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:22:39.631+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:22:39.633+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.635+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:22:39.636+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T14:22:39.638+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:22:39.640+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:22:39.641+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:22:39.642+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.644+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T14:22:39.644+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3067eb07] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.644+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.646+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361861135 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.646+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T14:22:39.646+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56663659]
2026-01-07T14:22:39.647+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:22:39.647+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:22:39.648+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.649+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:39.649+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.650+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T14:22:39.650+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@784ab490] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.651+09:00 DEBUG 23508 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.652+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@639689274 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.654+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.655+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:22:39.659+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.659+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3067eb07]
2026-01-07T14:22:39.660+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.663+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a10300] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.664+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1578231264 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.665+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.665+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.665+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.665+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@784ab490]
2026-01-07T14:22:39.666+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.667+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d06010b] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.667+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.667+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@273013775 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.668+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a10300]
2026-01-07T14:22:39.668+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.668+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.669+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.670+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@547016a] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.670+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554492353 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.671+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:39.672+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.672+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:22:39.675+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d06010b]
2026-01-07T14:22:39.676+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.679+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cbe9048] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.681+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@29214349 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.681+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:22:39.683+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:22:39.684+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:22:39.685+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@547016a]
2026-01-07T14:22:39.685+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.695+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110afcbe] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.697+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:22:39.698+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@754709412 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:39.701+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cbe9048]
2026-01-07T14:22:39.701+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.702+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.702+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.702+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2084d85f] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.704+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480601815 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.715+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.716+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.716+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.717+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110afcbe]
2026-01-07T14:22:39.718+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.718+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:22:39.719+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:39.720+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.723+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2084d85f]
2026-01-07T14:22:39.724+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.724+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e31db46] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.726+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946973439 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.727+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:39.729+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:22:39.735+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:22:39.736+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e31db46]
2026-01-07T14:22:39.742+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.743+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66285293] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.744+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1458790139 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.745+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:22:39.748+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:22:39.751+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:22:39.751+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66285293]
2026-01-07T14:22:39.752+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.754+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75055cd9] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.754+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369252896 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.754+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.755+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.758+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.759+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75055cd9]
2026-01-07T14:22:39.759+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.760+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd33b2c] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.760+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544166811 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.761+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:39.761+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:22:39.764+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:22:39.765+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd33b2c]
2026-01-07T14:22:39.765+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:39.766+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@286d362d] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:39.766+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1308713559 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:22:39.766+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:39.767+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:39.769+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:39.769+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@286d362d]
2026-01-07T14:22:39.770+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:39.771+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:22:39.772+09:00 DEBUG 23508 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:42.444+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:22:42.444+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:22:42.446+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:22:42.447+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:22:42.447+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:22:42.447+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:22:42.447+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T14:22:42.448+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:22:42.448+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:22:42.448+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:22:42.449+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:22:42.449+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T14:22:42.449+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:22:42.449+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:22:42.449+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:22:42.450+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T14:22:42.450+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.450+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:22:42.450+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.450+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T14:22:42.451+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e496ff8] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.451+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:22:42.452+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c508553] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.452+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T14:22:42.453+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.454+09:00  INFO 23508 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T14:22:42.454+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26b3c3f0] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.454+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283624691 wrapping com.mysql.cj.jdbc.ConnectionImpl@a5d5af6] will not be managed by Spring
2026-01-07T14:22:42.461+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.462+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@161809611 wrapping com.mysql.cj.jdbc.ConnectionImpl@7530fc59] will not be managed by Spring
2026-01-07T14:22:42.462+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:22:42.463+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4f47ce] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.463+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:22:42.463+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1140324204 wrapping com.mysql.cj.jdbc.ConnectionImpl@67cfd4ae] will not be managed by Spring
2026-01-07T14:22:42.464+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:22:42.465+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:42.465+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@311605014 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:42.466+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:22:42.468+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T14:22:42.468+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:22:42.469+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:22:42.469+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:42.470+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:22:42.470+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e496ff8]
2026-01-07T14:22:42.472+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c508553]
2026-01-07T14:22:42.478+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:42.478+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.478+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:22:42.479+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@227b33e8] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.479+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:22:42.480+09:00 DEBUG 23508 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:42.480+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T14:22:42.481+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@821017160 wrapping com.mysql.cj.jdbc.ConnectionImpl@7530fc59] will not be managed by Spring
2026-01-07T14:22:42.481+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26b3c3f0]
2026-01-07T14:22:42.481+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a4f47ce]
2026-01-07T14:22:42.483+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:42.483+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.484+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:42.484+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:42.484+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5dbe66] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.484+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T14:22:42.486+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@954014775 wrapping com.mysql.cj.jdbc.ConnectionImpl@67cfd4ae] will not be managed by Spring
2026-01-07T14:22:42.487+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:22:42.487+09:00 DEBUG 23508 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:42.494+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:22:42.497+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:42.498+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@227b33e8]
2026-01-07T14:22:42.497+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T14:22:42.499+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.499+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:22:42.499+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11cb7215] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5dbe66]
2026-01-07T14:22:42.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1783953335 wrapping com.mysql.cj.jdbc.ConnectionImpl@7530fc59] will not be managed by Spring
2026-01-07T14:22:42.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T14:22:42.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:22:42.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T14:22:42.501+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a60723f] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.502+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:22:42.502+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T14:22:42.502+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1541364635 wrapping com.mysql.cj.jdbc.ConnectionImpl@67cfd4ae] will not be managed by Spring
2026-01-07T14:22:42.502+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T14:22:42.502+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:22:42.503+09:00  INFO 23508 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T14:22:42.503+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:22:42.504+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:22:42.504+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.505+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11cb7215]
2026-01-07T14:22:42.509+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:22:42.508+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a9cea26] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.509+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.511+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d0d191a] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.510+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a60723f]
2026-01-07T14:22:42.511+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@396133236 wrapping com.mysql.cj.jdbc.ConnectionImpl@7530fc59] will not be managed by Spring
2026-01-07T14:22:42.512+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.512+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f2caba] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.512+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:42.512+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1995918234 wrapping com.mysql.cj.jdbc.ConnectionImpl@7debe61f] will not be managed by Spring
2026-01-07T14:22:42.513+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1749726513 wrapping com.mysql.cj.jdbc.ConnectionImpl@67cfd4ae] will not be managed by Spring
2026-01-07T14:22:42.513+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:42.513+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T14:22:42.514+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:22:42.514+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:22:42.515+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:22:42.515+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:42.516+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d0d191a]
2026-01-07T14:22:42.518+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:42.518+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T14:22:42.518+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T14:22:42.518+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:22:42.518+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f2caba]
2026-01-07T14:22:42.518+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a9cea26]
2026-01-07T14:22:42.519+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.519+09:00 DEBUG 23508 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:42.519+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:42.519+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c8d013e] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.521+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T14:22:42.521+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1805494031 wrapping com.mysql.cj.jdbc.ConnectionImpl@67cfd4ae] will not be managed by Spring
2026-01-07T14:22:42.522+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:42.522+09:00 DEBUG 23508 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:42.524+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:42.529+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:42.529+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c8d013e]
2026-01-07T14:22:42.529+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:42.530+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:22:42.531+09:00 DEBUG 23508 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:22:42.534+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:22:42.535+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:22:42.536+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:22:42.536+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:22:42.536+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:22:42.537+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.537+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78f7a1c1] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.537+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1395287879 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:42.537+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:22:42.538+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:22:42.541+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:22:42.542+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78f7a1c1]
2026-01-07T14:22:42.542+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.543+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2000038b] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.543+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1706837987 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:42.543+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:22:42.544+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:22:42.546+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:22:42.551+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2000038b]
2026-01-07T14:22:42.552+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.553+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f6d204f] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.553+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@265380466 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:42.553+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:22:42.553+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:22:42.558+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:22:42.559+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f6d204f]
2026-01-07T14:22:42.560+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.560+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ddec406] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.560+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1274540714 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:42.561+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:22:42.561+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:22:42.563+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T14:22:42.563+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ddec406]
2026-01-07T14:22:42.563+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:22:42.563+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a38e189] was not registered for synchronization because synchronization is not active
2026-01-07T14:22:42.564+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@289269308 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:22:42.565+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:22:42.565+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:22:42.567+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:22:42.567+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a38e189]
2026-01-07T14:22:42.567+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:22:42.568+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:22:42.568+09:00 DEBUG 23508 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:23:22.495+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:23:22.499+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:23:22.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:23:22.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:23:22.502+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:23:22.508+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:22.509+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@385a015d] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:22.530+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1037802729 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:23:22.531+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:23:22.532+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:23:22.536+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:23:22.543+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@385a015d]
2026-01-07T14:23:22.544+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:22.544+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c096792] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:22.545+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@337168318 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:23:22.546+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:23:22.547+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:23:22.552+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:23:22.552+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c096792]
2026-01-07T14:23:22.553+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:22.554+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f8b9dd2] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:22.559+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480152134 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:23:22.559+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:23:22.560+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:23:22.569+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:23:22.569+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f8b9dd2]
2026-01-07T14:23:22.571+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:22.576+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@137e0ff3] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:22.576+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@256782134 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:23:22.577+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:23:22.578+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:23:22.582+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T14:23:22.583+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@137e0ff3]
2026-01-07T14:23:22.583+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:22.583+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32028bfd] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:22.584+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1373641689 wrapping com.mysql.cj.jdbc.ConnectionImpl@64761482] will not be managed by Spring
2026-01-07T14:23:22.584+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:23:22.585+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:23:22.587+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:23:22.593+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32028bfd]
2026-01-07T14:23:22.593+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:23:22.596+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:23:22.597+09:00 DEBUG 23508 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:23:38.476+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:23:38.477+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:23:38.478+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:23:38.478+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:23:38.479+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:23:38.480+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:38.480+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bfcc5e] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:38.484+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906199646 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:23:38.484+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:23:38.485+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:23:38.490+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:23:38.492+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bfcc5e]
2026-01-07T14:23:38.493+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:38.493+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b729c0b] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:38.494+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877770761 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:23:38.495+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:23:38.496+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:23:38.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:23:38.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b729c0b]
2026-01-07T14:23:38.500+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:38.501+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30fdc2b8] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:38.503+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1071682152 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:23:38.507+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:23:38.509+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:23:38.514+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:23:38.515+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30fdc2b8]
2026-01-07T14:23:38.516+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:38.516+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73bf04e8] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:38.517+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1725096387 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:23:38.518+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:23:38.518+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:23:38.523+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T14:23:38.525+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73bf04e8]
2026-01-07T14:23:38.526+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:23:38.527+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1700f53d] was not registered for synchronization because synchronization is not active
2026-01-07T14:23:38.528+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@471018353 wrapping com.mysql.cj.jdbc.ConnectionImpl@674d8483] will not be managed by Spring
2026-01-07T14:23:38.528+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:23:38.529+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:23:38.537+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:23:38.541+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1700f53d]
2026-01-07T14:23:38.542+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:23:38.543+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:23:38.544+09:00 DEBUG 23508 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:24:21.184+09:00  INFO 22744 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 22744 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-07T14:24:21.190+09:00 DEBUG 22744 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-07T14:24:21.191+09:00  INFO 22744 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-07T14:24:23.066+09:00 DEBUG 22744 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-07T14:24:23.067+09:00 DEBUG 22744 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-07T14:24:23.445+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-07T14:24:23.446+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-07T14:24:23.449+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-07T14:24:23.450+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-07T14:24:23.455+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-07T14:24:23.460+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-07T14:24:23.462+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-07T14:24:23.463+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-07T14:24:23.465+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-07T14:24:23.467+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-07T14:24:23.479+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-07T14:24:23.482+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-07T14:24:23.484+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-07T14:24:23.485+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-07T14:24:23.489+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-07T14:24:23.490+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-07T14:24:23.492+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-07T14:24:23.492+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-07T14:24:23.496+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-07T14:24:23.500+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-07T14:24:23.501+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-07T14:24:23.505+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-07T14:24:23.509+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-07T14:24:23.511+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-07T14:24:23.512+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-07T14:24:23.514+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-07T14:24:23.515+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-07T14:24:23.516+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-07T14:24:23.517+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-07T14:24:23.518+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-07T14:24:23.521+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-07T14:24:23.523+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-07T14:24:23.524+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-07T14:24:23.529+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-07T14:24:23.529+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-07T14:24:23.530+09:00 DEBUG 22744 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-07T14:24:25.979+09:00  INFO 22744 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-07T14:24:26.031+09:00  INFO 22744 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-07T14:24:26.033+09:00  INFO 22744 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-07T14:24:26.210+09:00  INFO 22744 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-07T14:24:26.226+09:00  INFO 22744 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4909 ms
2026-01-07T14:24:26.393+09:00 DEBUG 22744 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-07T14:24:26.401+09:00 DEBUG 22744 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-07T14:24:26.920+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-07T14:24:26.939+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-07T14:24:26.972+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-07T14:24:26.995+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-07T14:24:27.020+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-07T14:24:27.041+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-07T14:24:27.060+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-07T14:24:27.081+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-07T14:24:27.223+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-07T14:24:27.251+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-07T14:24:27.267+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-07T14:24:27.299+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-07T14:24:27.347+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-07T14:24:27.372+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-07T14:24:27.407+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-07T14:24:27.431+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-07T14:24:27.473+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-07T14:24:27.513+09:00 DEBUG 22744 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-07T14:24:28.923+09:00 DEBUG 22744 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 153 mappings in 'requestMappingHandlerMapping'
2026-01-07T14:24:29.129+09:00 DEBUG 22744 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-07T14:24:29.161+09:00  WARN 22744 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c2ee862d-086d-4757-8689-cd6b59a465c8

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-07T14:24:29.184+09:00  INFO 22744 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-07T14:24:29.459+09:00 DEBUG 22744 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-07T14:24:29.627+09:00 DEBUG 22744 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-07T14:24:29.707+09:00 DEBUG 22744 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-07T14:24:29.712+09:00 DEBUG 22744 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-07T14:24:30.051+09:00  INFO 22744 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-07T14:24:30.078+09:00  INFO 22744 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 9.846 seconds (process running for 10.366)
2026-01-07T14:35:55.495+09:00  INFO 22744 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-07T14:35:55.499+09:00  INFO 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-07T14:35:55.504+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-07T14:35:55.508+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-07T14:35:55.512+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-07T14:35:55.556+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@581918f6
2026-01-07T14:35:55.589+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@308a9264
2026-01-07T14:35:55.591+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-07T14:35:55.592+09:00  INFO 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 89 ms
2026-01-07T14:35:55.622+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:35:55.916+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:35:55.941+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:35:55.962+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:35:55.974+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:35:56.050+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:35:56.057+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e656c4e] was not registered for synchronization because synchronization is not active
2026-01-07T14:35:56.069+09:00  INFO 22744 --- [http-nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-07T14:35:56.464+09:00  INFO 22744 --- [http-nio-8080-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3e8e7280
2026-01-07T14:35:56.468+09:00  INFO 22744 --- [http-nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-07T14:35:56.475+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868713546 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:35:56.494+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:35:56.611+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:35:56.794+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:35:56.803+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e656c4e]
2026-01-07T14:35:56.840+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:35:56.843+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a325007] was not registered for synchronization because synchronization is not active
2026-01-07T14:35:56.853+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@483409011 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:35:56.861+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:35:56.866+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:35:56.905+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:35:56.910+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a325007]
2026-01-07T14:35:56.912+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:35:56.915+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68732274] was not registered for synchronization because synchronization is not active
2026-01-07T14:35:56.916+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615455509 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:35:56.927+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:35:56.929+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:35:56.946+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:35:56.948+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68732274]
2026-01-07T14:35:56.967+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:35:56.975+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@468db0d8] was not registered for synchronization because synchronization is not active
2026-01-07T14:35:56.990+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@999599618 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:35:56.997+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:35:57.013+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:35:57.026+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T14:35:57.034+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@468db0d8]
2026-01-07T14:35:57.040+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:35:57.043+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326bdc38] was not registered for synchronization because synchronization is not active
2026-01-07T14:35:57.045+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121056304 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:35:57.047+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:35:57.048+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:35:57.081+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:35:57.115+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326bdc38]
2026-01-07T14:35:57.204+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:35:57.347+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:35:57.815+09:00 DEBUG 22744 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:36:00.035+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T14:36:00.036+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:36:00.042+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T14:36:00.044+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T14:36:00.045+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T14:36:00.048+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T14:36:00.055+09:00  INFO 22744 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T14:36:00.057+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:00.047+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:36:00.060+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@236f653f] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:00.060+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:36:00.061+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:36:00.063+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:36:00.064+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@310822440 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:00.073+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T14:36:00.070+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:00.077+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:36:00.077+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78e351a7] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:00.082+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@924433136 wrapping com.mysql.cj.jdbc.ConnectionImpl@721b3ad7] will not be managed by Spring
2026-01-07T14:36:00.093+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:36:00.094+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:00.096+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T14:36:00.098+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@236f653f]
2026-01-07T14:36:00.099+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:36:00.104+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:36:00.104+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78e351a7]
2026-01-07T14:36:00.109+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T14:36:00.112+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:00.121+09:00 DEBUG 22744 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:36:00.123+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@573645bf] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:00.127+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@788875223 wrapping com.mysql.cj.jdbc.ConnectionImpl@721b3ad7] will not be managed by Spring
2026-01-07T14:36:00.128+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:36:00.131+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:00.144+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:36:00.145+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@573645bf]
2026-01-07T14:36:00.145+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:00.157+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4f1633] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:00.158+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@525476044 wrapping com.mysql.cj.jdbc.ConnectionImpl@721b3ad7] will not be managed by Spring
2026-01-07T14:36:00.159+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:36:00.165+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:00.177+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:36:00.178+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4f1633]
2026-01-07T14:36:00.178+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:00.178+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d044897] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:00.179+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620586240 wrapping com.mysql.cj.jdbc.ConnectionImpl@721b3ad7] will not be managed by Spring
2026-01-07T14:36:00.180+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:36:00.180+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:00.182+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T14:36:00.188+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d044897]
2026-01-07T14:36:00.189+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:00.189+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4d96c4] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:00.192+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1139941674 wrapping com.mysql.cj.jdbc.ConnectionImpl@721b3ad7] will not be managed by Spring
2026-01-07T14:36:00.192+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:36:00.193+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:36:00.196+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:36:00.197+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c4d96c4]
2026-01-07T14:36:00.198+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:36:00.198+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:36:00.203+09:00 DEBUG 22744 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:36:05.938+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:36:05.943+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:36:05.946+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:36:05.953+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:36:05.956+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:36:05.958+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:06.109+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5393fd3d] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:06.175+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1464273352 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:06.181+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:36:06.195+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:06.205+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:36:06.208+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5393fd3d]
2026-01-07T14:36:06.209+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:06.210+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42b18f93] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:06.211+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248379090 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:06.212+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:36:06.213+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:06.219+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:36:06.222+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42b18f93]
2026-01-07T14:36:06.223+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:06.224+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9445b9] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:06.224+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1612155631 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:06.225+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:36:06.226+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:06.228+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:36:06.230+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9445b9]
2026-01-07T14:36:06.230+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:06.230+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3273c8] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:06.231+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938245658 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:06.231+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:36:06.237+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:06.241+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T14:36:06.243+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3273c8]
2026-01-07T14:36:06.274+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:06.275+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b22caca] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:06.276+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1005234069 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:06.277+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:36:06.278+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:36:06.282+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:36:06.288+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b22caca]
2026-01-07T14:36:06.289+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:36:06.291+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:36:06.293+09:00 DEBUG 22744 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:36:16.542+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:36:16.556+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:36:16.560+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:36:16.561+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:36:16.562+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:36:16.563+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:16.564+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7265035f] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:16.574+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2023581743 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:16.575+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:36:16.577+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:16.581+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:36:16.590+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7265035f]
2026-01-07T14:36:16.593+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:16.593+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67ba6a4f] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:16.596+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@208184368 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:16.597+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:36:16.599+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:16.611+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:36:16.613+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67ba6a4f]
2026-01-07T14:36:16.615+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:16.616+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db00617] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:16.621+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1768749052 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:16.622+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:36:16.625+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:16.636+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:36:16.653+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db00617]
2026-01-07T14:36:16.654+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:16.655+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a30133] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:16.657+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1509834510 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:16.664+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:36:16.679+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:16.699+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T14:36:16.708+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a30133]
2026-01-07T14:36:16.708+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:16.711+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b59744] was not registered for synchronization because synchronization is not active
2026-01-07T14:36:16.713+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@251901592 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will not be managed by Spring
2026-01-07T14:36:16.715+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:36:16.724+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:36:16.743+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:36:16.747+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13b59744]
2026-01-07T14:36:16.748+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:36:16.751+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:36:16.758+09:00 DEBUG 22744 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:36:23.406+09:00 DEBUG 22744 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/33/receipt
2026-01-07T14:36:23.414+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/33/receipt
2026-01-07T14:36:23.426+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33/receipt
2026-01-07T14:36:23.427+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/33/receipt
2026-01-07T14:36:23.502+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/33/receipt", parameters={multipart}
2026-01-07T14:36:23.632+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#uploadReceipt(Long, MultipartFile)
2026-01-07T14:36:23.636+09:00  INFO 22744 --- [http-nio-8080-exec-7] c.i.b.controller.ExpenseController       : 영수증 업로드 요청 - expenseId: 33, userId: 4, filename: innersign_logo.png
2026-01-07T14:36:23.658+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:23.659+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d5370]
2026-01-07T14:36:23.661+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1448204399 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will be managed by Spring
2026-01-07T14:36:23.662+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:36:23.663+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:23.666+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:36:23.667+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d5370]
2026-01-07T14:36:23.670+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d5370]
2026-01-07T14:36:23.672+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d5370]
2026-01-07T14:36:23.686+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleBusinessException(BusinessException)
2026-01-07T14:36:23.687+09:00  WARN 22744 --- [http-nio-8080-exec-7] c.i.b.exception.GlobalExceptionHandler   : 비즈니스 예외: PAID 또는 WAIT 상태의 문서만 영수증을 첨부할 수 있습니다.
2026-01-07T14:36:23.691+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:36:23.693+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=PAID 또는 WAIT 상태의 문서만 영수증을 첨부할 수 있습니다., data=null)]
2026-01-07T14:36:23.694+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.innersignature.backend.exception.BusinessException: PAID 또는 WAIT 상태의 문서만 영수증을 첨부할 수 있습니다.]
2026-01-07T14:36:23.696+09:00 DEBUG 22744 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 400 BAD_REQUEST
2026-01-07T14:36:29.142+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/33/receipt
2026-01-07T14:36:29.158+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33/receipt
2026-01-07T14:36:29.162+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/33/receipt
2026-01-07T14:36:29.163+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/33/receipt", parameters={multipart}
2026-01-07T14:36:29.173+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#uploadReceipt(Long, MultipartFile)
2026-01-07T14:36:29.186+09:00  INFO 22744 --- [http-nio-8080-exec-8] c.i.b.controller.ExpenseController       : 영수증 업로드 요청 - expenseId: 33, userId: 4, filename: innersign_logo.png
2026-01-07T14:36:29.224+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:36:29.230+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d1ade6]
2026-01-07T14:36:29.231+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1223469021 wrapping com.mysql.cj.jdbc.ConnectionImpl@3e8e7280] will be managed by Spring
2026-01-07T14:36:29.231+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:36:29.232+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:36:29.238+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:36:29.239+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d1ade6]
2026-01-07T14:36:29.239+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d1ade6]
2026-01-07T14:36:29.240+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d1ade6]
2026-01-07T14:36:29.244+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleBusinessException(BusinessException)
2026-01-07T14:36:29.245+09:00  WARN 22744 --- [http-nio-8080-exec-8] c.i.b.exception.GlobalExceptionHandler   : 비즈니스 예외: PAID 또는 WAIT 상태의 문서만 영수증을 첨부할 수 있습니다.
2026-01-07T14:36:29.246+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:36:29.247+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=PAID 또는 WAIT 상태의 문서만 영수증을 첨부할 수 있습니다., data=null)]
2026-01-07T14:36:29.248+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [com.innersignature.backend.exception.BusinessException: PAID 또는 WAIT 상태의 문서만 영수증을 첨부할 수 있습니다.]
2026-01-07T14:36:29.250+09:00 DEBUG 22744 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 400 BAD_REQUEST
2026-01-07T14:37:29.016+09:00  INFO 21900 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 21900 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-07T14:37:29.033+09:00 DEBUG 21900 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-07T14:37:29.046+09:00  INFO 21900 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-07T14:37:31.263+09:00 DEBUG 21900 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-07T14:37:31.264+09:00 DEBUG 21900 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-07T14:37:31.642+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-07T14:37:31.650+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-07T14:37:31.658+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-07T14:37:31.658+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-07T14:37:31.662+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-07T14:37:31.663+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-07T14:37:31.667+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-07T14:37:31.670+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-07T14:37:31.671+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-07T14:37:31.672+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-07T14:37:31.672+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-07T14:37:31.673+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-07T14:37:31.673+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-07T14:37:31.674+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-07T14:37:31.675+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-07T14:37:31.676+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-07T14:37:31.676+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-07T14:37:31.677+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-07T14:37:31.692+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-07T14:37:31.710+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-07T14:37:31.713+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-07T14:37:31.722+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-07T14:37:31.727+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-07T14:37:31.730+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-07T14:37:31.736+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-07T14:37:31.738+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-07T14:37:31.740+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-07T14:37:31.742+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-07T14:37:31.744+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-07T14:37:31.746+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-07T14:37:31.747+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-07T14:37:31.750+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-07T14:37:31.752+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-07T14:37:31.753+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-07T14:37:31.758+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-07T14:37:31.761+09:00 DEBUG 21900 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-07T14:37:32.941+09:00  INFO 21900 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-07T14:37:32.966+09:00  INFO 21900 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-07T14:37:32.975+09:00  INFO 21900 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-07T14:37:33.138+09:00  INFO 21900 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-07T14:37:33.139+09:00  INFO 21900 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3912 ms
2026-01-07T14:37:33.279+09:00 DEBUG 21900 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-07T14:37:33.279+09:00 DEBUG 21900 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-07T14:37:33.813+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-07T14:37:33.840+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-07T14:37:33.873+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-07T14:37:33.903+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-07T14:37:33.927+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-07T14:37:33.975+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-07T14:37:34.043+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-07T14:37:34.071+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-07T14:37:34.163+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-07T14:37:34.179+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-07T14:37:34.196+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-07T14:37:34.258+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-07T14:37:34.284+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-07T14:37:34.306+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-07T14:37:34.328+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-07T14:37:34.355+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-07T14:37:34.399+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-07T14:37:34.411+09:00 DEBUG 21900 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-07T14:37:35.885+09:00 DEBUG 21900 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 153 mappings in 'requestMappingHandlerMapping'
2026-01-07T14:37:36.063+09:00 DEBUG 21900 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-07T14:37:36.106+09:00  WARN 21900 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 48a6f250-4e9b-4282-babc-a802a077d052

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-07T14:37:36.179+09:00  INFO 21900 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-07T14:37:36.459+09:00 DEBUG 21900 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-07T14:37:36.738+09:00 DEBUG 21900 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-07T14:37:36.879+09:00 DEBUG 21900 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-07T14:37:36.925+09:00 DEBUG 21900 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-07T14:37:37.271+09:00  INFO 21900 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-07T14:37:37.317+09:00  INFO 21900 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 9.359 seconds (process running for 10.101)
2026-01-07T14:41:52.070+09:00  INFO 17088 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 17088 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-07T14:41:52.073+09:00 DEBUG 17088 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-07T14:41:52.075+09:00  INFO 17088 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-07T14:41:54.171+09:00 DEBUG 17088 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-07T14:41:54.173+09:00 DEBUG 17088 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-07T14:41:54.577+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-07T14:41:54.578+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-07T14:41:54.579+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-07T14:41:54.579+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-07T14:41:54.579+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-07T14:41:54.580+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-07T14:41:54.580+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-07T14:41:54.581+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-07T14:41:54.581+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-07T14:41:54.582+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-07T14:41:54.582+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-07T14:41:54.584+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-07T14:41:54.584+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-07T14:41:54.584+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-07T14:41:54.585+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-07T14:41:54.585+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-07T14:41:54.586+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-07T14:41:54.586+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-07T14:41:54.589+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-07T14:41:54.594+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-07T14:41:54.598+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-07T14:41:54.600+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-07T14:41:54.602+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-07T14:41:54.605+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-07T14:41:54.608+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-07T14:41:54.611+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-07T14:41:54.613+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-07T14:41:54.616+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-07T14:41:54.618+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-07T14:41:54.620+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-07T14:41:54.621+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-07T14:41:54.622+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-07T14:41:54.625+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-07T14:41:54.628+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-07T14:41:54.629+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-07T14:41:54.631+09:00 DEBUG 17088 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-07T14:41:55.398+09:00  INFO 17088 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-07T14:41:55.423+09:00  INFO 17088 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-07T14:41:55.437+09:00  INFO 17088 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-07T14:41:55.571+09:00  INFO 17088 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-07T14:41:55.572+09:00  INFO 17088 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3420 ms
2026-01-07T14:41:55.697+09:00 DEBUG 17088 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-07T14:41:55.698+09:00 DEBUG 17088 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-07T14:41:56.468+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-07T14:41:56.505+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-07T14:41:56.555+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-07T14:41:56.589+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-07T14:41:56.639+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-07T14:41:56.666+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-07T14:41:56.684+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-07T14:41:56.732+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-07T14:41:56.844+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-07T14:41:56.891+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-07T14:41:56.940+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-07T14:41:56.967+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-07T14:41:56.997+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-07T14:41:57.006+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-07T14:41:57.025+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-07T14:41:57.041+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-07T14:41:57.072+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-07T14:41:57.086+09:00 DEBUG 17088 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-07T14:41:58.369+09:00 DEBUG 17088 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 153 mappings in 'requestMappingHandlerMapping'
2026-01-07T14:41:58.612+09:00 DEBUG 17088 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-07T14:41:58.730+09:00  WARN 17088 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 7bb91635-f8bf-4310-98a0-d63e0d50edae

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-07T14:41:58.780+09:00  INFO 17088 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-07T14:41:59.017+09:00 DEBUG 17088 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-07T14:41:59.255+09:00 DEBUG 17088 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-07T14:41:59.397+09:00 DEBUG 17088 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-07T14:41:59.405+09:00 DEBUG 17088 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-07T14:41:59.776+09:00  INFO 17088 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-07T14:41:59.810+09:00  INFO 17088 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 8.532 seconds (process running for 9.173)
2026-01-07T14:42:03.346+09:00  INFO 17088 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-07T14:42:03.356+09:00  INFO 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-07T14:42:03.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-07T14:42:03.360+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-07T14:42:03.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-07T14:42:03.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@460f1cdb
2026-01-07T14:42:03.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@7d4d65f5
2026-01-07T14:42:03.417+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-07T14:42:03.438+09:00  INFO 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 80 ms
2026-01-07T14:42:03.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/33/receipt
2026-01-07T14:42:03.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/33/receipt
2026-01-07T14:42:03.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33/receipt
2026-01-07T14:42:03.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/33/receipt
2026-01-07T14:42:03.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/33/receipt", parameters={multipart}
2026-01-07T14:42:03.922+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#uploadReceipt(Long, MultipartFile)
2026-01-07T14:42:03.987+09:00  INFO 17088 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 업로드 요청 - expenseId: 33, userId: 4, filename: innersign_logo.png
2026-01-07T14:42:04.004+09:00  INFO 17088 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-07T14:42:04.394+09:00  INFO 17088 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a2d5ce
2026-01-07T14:42:04.397+09:00  INFO 17088 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-07T14:42:04.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:04.471+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67454ea7]
2026-01-07T14:42:04.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1778953643 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will be managed by Spring
2026-01-07T14:42:04.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:42:04.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:04.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:42:04.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67454ea7]
2026-01-07T14:42:04.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67454ea7] from current transaction
2026-01-07T14:42:04.823+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-07T14:42:04.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-07T14:42:04.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-07T14:42:04.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67454ea7]
2026-01-07T14:42:05.155+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67454ea7] from current transaction
2026-01-07T14:42:05.159+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.insertReceipt      : ==>  Preparing: INSERT INTO receipt_tb ( expense_report_id, file_path, original_filename, file_size, uploaded_by, uploaded_at, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-07T14:42:05.162+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.insertReceipt      : ==> Parameters: 33(Long), uploads/receipts/33/14701aae-b2a4-496e-8839-4d8633de7e40/receipt_20260107144205_innersign_logo.png(String), innersign_logo.png(String), 5629(Long), 4(Long), 2026-01-07T14:42:05.154533600(LocalDateTime), 1(Long)
2026-01-07T14:42:05.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.insertReceipt      : <==    Updates: 1
2026-01-07T14:42:05.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67454ea7]
2026-01-07T14:42:05.286+09:00  INFO 17088 --- [http-nio-8080-exec-2] SECURITY                                 : FILE_UPLOAD userId=4 expenseId=33 detail=innersign_logo.png
2026-01-07T14:42:05.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67454ea7]
2026-01-07T14:42:05.289+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67454ea7]
2026-01-07T14:42:05.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67454ea7]
2026-01-07T14:42:05.321+09:00  INFO 17088 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 영수증 업로드 완료 - expenseId: 33
2026-01-07T14:42:05.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:05.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 업로드 완료, data=null)]
2026-01-07T14:42:05.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:06.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/33
2026-01-07T14:42:06.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:42:06.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:42:06.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:42:06.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:42:06.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:42:06.510+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:06.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca8f660] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:06.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323982890 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:06.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:42:06.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:06.538+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:42:06.538+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca8f660]
2026-01-07T14:42:06.540+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:06.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc0f649] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:06.548+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152254166 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:06.548+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:42:06.549+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:06.555+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:42:06.557+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bc0f649]
2026-01-07T14:42:06.562+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:06.564+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73024a80] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:06.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795687618 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:06.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:42:06.569+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:06.575+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:42:06.580+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73024a80]
2026-01-07T14:42:06.580+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:06.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270837e2] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:06.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924574234 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:06.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:42:06.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:06.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T14:42:06.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270837e2]
2026-01-07T14:42:06.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:06.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@89d359b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:06.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1850520653 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:06.588+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:06.588+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:06.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:06.597+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@89d359b]
2026-01-07T14:42:06.598+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:06.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:42:06.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:18.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/33/status
2026-01-07T14:42:18.637+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing PUT /api/expenses/33/status
2026-01-07T14:42:18.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33/status
2026-01-07T14:42:18.652+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured PUT /api/expenses/33/status
2026-01-07T14:42:18.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : PUT "/api/expenses/33/status", parameters={}
2026-01-07T14:42:18.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#updateExpenseStatus(Long, StatusUpdateRequest)
2026-01-07T14:42:18.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseController.StatusUpdateRequest(status=PAID, actualPaidAmount=10000, amountDifferenceReason=nu (truncated)...]
2026-01-07T14:42:18.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.updateExpenseStatus(java.lang.Long,com.innersignature.backend.controller.ExpenseController$StatusUpdateRequest); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:18.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.updateExpenseStatus(java.lang.Long,com.innersignature.backend.controller.ExpenseController$StatusUpdateRequest); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:18.744+09:00  INFO 17088 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 지출결의서 상태 변경 요청 - expenseId: 33, userId: 4, status: PAID, actualPaidAmount: 10000
2026-01-07T14:42:18.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:18.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829113884 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will be managed by Spring
2026-01-07T14:42:18.803+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:42:18.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:18.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:42:18.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6] from current transaction
2026-01-07T14:42:18.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-07T14:42:18.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-07T14:42:18.845+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-07T14:42:18.853+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6] from current transaction
2026-01-07T14:42:18.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:42:18.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:18.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T14:42:18.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.904+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6] from current transaction
2026-01-07T14:42:18.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:42:18.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:18.922+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:42:18.923+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6] from current transaction
2026-01-07T14:42:18.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .m.E.updateExpenseDetailActualPaidAmount : ==>  Preparing: UPDATE expense_detail_tb SET actual_paid_amount = ? WHERE expense_detail_id = ? AND company_id = ?
2026-01-07T14:42:18.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .m.E.updateExpenseDetailActualPaidAmount : ==> Parameters: 10000(Long), 44(Long), 1(Long)
2026-01-07T14:42:18.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .m.E.updateExpenseDetailActualPaidAmount : <==    Updates: 1
2026-01-07T14:42:18.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6] from current transaction
2026-01-07T14:42:18.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] i.b.m.E.updateExpenseDetailPaymentMethod : ==>  Preparing: UPDATE expense_detail_tb SET payment_method = ? WHERE expense_detail_id = ? AND company_id = ?
2026-01-07T14:42:18.962+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] i.b.m.E.updateExpenseDetailPaymentMethod : ==> Parameters: BANK_TRANSFER(String), 44(Long), 1(Long)
2026-01-07T14:42:18.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] i.b.m.E.updateExpenseDetailPaymentMethod : <==    Updates: 1
2026-01-07T14:42:18.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.971+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6] from current transaction
2026-01-07T14:42:18.971+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.E.updateExpenseReportStatusWithPayment : ==>  Preparing: UPDATE expense_report_tb SET status = ?, actual_paid_amount = ?, amount_difference_reason = ? WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:42:18.973+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.E.updateExpenseReportStatusWithPayment : ==> Parameters: PAID(String), 10000(Long), null, 33(Long), 1(Long)
2026-01-07T14:42:18.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.E.updateExpenseReportStatusWithPayment : <==    Updates: 1
2026-01-07T14:42:18.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.984+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e2a6]
2026-01-07T14:42:18.992+09:00  INFO 17088 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 지출결의서 상태 변경 완료 - expenseId: 33, status: PAID
2026-01-07T14:42:18.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:18.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태 변경 완료, data=null)]
2026-01-07T14:42:18.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:20.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:20.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T14:42:20.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:20.327+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:20.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:42:20.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-07T14:42:20.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-07T14:42:20.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:20.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-07T14:42:20.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T14:42:20.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:20.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:20.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:42:20.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-07T14:42:20.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T14:42:20.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T14:42:20.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:20.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:20.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:42:20.341+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-07T14:42:20.344+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T14:42:20.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:20.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:42:20.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.346+09:00  INFO 17088 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T14:42:20.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213109f7] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:42:20.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122dc7c2] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7212122d] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@904655263 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:20.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7decab57] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574384076 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:20.364+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7531d9c6] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:20.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:20.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@276803825 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:20.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-07T14:42:20.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:20.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-07T14:42:20.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@986395435 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:20.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840319137 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:20.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:42:20.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T14:42:20.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:20.387+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:20.388+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213109f7]
2026-01-07T14:42:20.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7350a5] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-07T14:42:20.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@836469802 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:42:20.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7212122d]
2026-01-07T14:42:20.403+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:20.403+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7531d9c6]
2026-01-07T14:42:20.403+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T14:42:20.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:20.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:20.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.412+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7decab57]
2026-01-07T14:42:20.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122dc7c2]
2026-01-07T14:42:20.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bbbaddd] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T14:42:20.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@970318366 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:20.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:20.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-07T14:42:20.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:42:20.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:20.423+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.424+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a7350a5]
2026-01-07T14:42:20.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.440+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:20.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T14:42:20.448+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15da7cb9] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:42:20.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:20.481+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T14:42:20.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bbbaddd]
2026-01-07T14:42:20.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:20.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@677397970 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T14:42:20.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:20.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:20.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T14:42:20.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@628140af] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:20.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872598631 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:20.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:20.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T14:42:20.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:42:20.506+09:00  INFO 17088 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T14:42:20.512+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:20.510+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4791f538] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.512+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157b85ad] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15da7cb9]
2026-01-07T14:42:20.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484880021 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:20.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518433097 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:20.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T14:42:20.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36683fec] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:20.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:20.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1662531976 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:20.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:42:20.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:20.528+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@628140af]
2026-01-07T14:42:20.529+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:20.529+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:20.531+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eaa7239] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4791f538]
2026-01-07T14:42:20.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918996347 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:20.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:20.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T14:42:20.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:42:20.538+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36683fec]
2026-01-07T14:42:20.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:20.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157b85ad]
2026-01-07T14:42:20.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.543+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.548+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:20.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T14:42:20.559+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:20.572+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:20.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T14:42:20.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:20.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:20.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T14:42:20.613+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:20.614+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:20.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T14:42:20.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:20.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:20.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T14:42:20.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T14:42:20.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:20.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T14:42:20.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:20.626+09:00  INFO 17088 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T14:42:20.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eaa7239]
2026-01-07T14:42:20.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682b822b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.641+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e91af0e] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f68290f] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488af49f] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@61310010 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@866593119 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:20.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1638914706 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:20.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:20.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327517748 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:20.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:20.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:20.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:20.652+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T14:42:20.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:20.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:20.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:20.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:20.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:20.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e91af0e]
2026-01-07T14:42:20.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682b822b]
2026-01-07T14:42:20.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.673+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.678+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:20.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:42:20.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T14:42:20.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:20.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f68290f]
2026-01-07T14:42:20.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488af49f]
2026-01-07T14:42:20.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b9c54e] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T14:42:20.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@887260345 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:20.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:20.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:20.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:42:20.773+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:42:20.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:42:20.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:20.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:42:20.806+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14b9c54e]
2026-01-07T14:42:20.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:42:20.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df68e3f] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d1e133] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@398438778 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:20.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973352215 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:20.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:42:20.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:20.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:42:20.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:20.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9d1e133]
2026-01-07T14:42:20.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df68e3f]
2026-01-07T14:42:20.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7e8ed5] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a003a54] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537221680 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590443493 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:20.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:42:20.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:20.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:20.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:42:20.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:20.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7e8ed5]
2026-01-07T14:42:20.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a003a54]
2026-01-07T14:42:20.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e876db6] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:20.853+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@925253781 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:42:20.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:20.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:42:20.871+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:20.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e876db6]
2026-01-07T14:42:20.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.874+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:20.874+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1362697a] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:20.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@917326973 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:20.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:42:20.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c73aec8] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1236140394 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:20.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:20.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:20.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T14:42:20.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1362697a]
2026-01-07T14:42:20.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356eaf0a] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902248804 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:20.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:20.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:20.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:20.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c73aec8]
2026-01-07T14:42:20.889+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.889+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6f749d] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.892+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330243589 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:20.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:20.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:20.895+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356eaf0a]
2026-01-07T14:42:20.895+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:20.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:42:20.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:20.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T14:42:20.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6f749d]
2026-01-07T14:42:20.901+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a03b88] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/33
2026-01-07T14:42:20.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122080701 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:20.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T14:42:20.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:20.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T14:42:20.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:20.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T14:42:20.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb217e6] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2018387048 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:20.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T14:42:20.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:20.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a03b88]
2026-01-07T14:42:20.922+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.926+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257b5718] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.927+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1885093625 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:20.927+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:20.928+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:20.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:20.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257b5718]
2026-01-07T14:42:20.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:20.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T14:42:20.938+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:20.939+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb217e6]
2026-01-07T14:42:20.941+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0e14fe] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@601829854 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:20.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T14:42:20.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T14:42:20.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0e14fe]
2026-01-07T14:42:20.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47702c59] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1222011309 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:20.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T14:42:20.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T14:42:20.971+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47702c59]
2026-01-07T14:42:20.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6170c83e] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665068205 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:20.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T14:42:20.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T14:42:20.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T14:42:20.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6170c83e]
2026-01-07T14:42:20.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:20.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21614f75] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:20.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@962236047 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:20.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:20.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:20.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:20.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21614f75]
2026-01-07T14:42:20.995+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:20.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T14:42:20.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:23.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:23.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:23.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T14:42:23.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:23.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T14:42:23.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:23.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T14:42:23.654+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:23.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:42:23.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:23.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T14:42:23.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:23.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T14:42:23.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:23.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T14:42:23.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:23.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T14:42:23.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:23.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T14:42:23.677+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f11c8b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.678+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:42:23.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fcf1411] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ee1ca4] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@65345885 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:23.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:23.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc03bc2] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:23.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1885388463 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:23.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160092708 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:23.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:23.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@880617462 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:23.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:23.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:23.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:23.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:23.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f11c8b]
2026-01-07T14:42:23.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:23.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fcf1411]
2026-01-07T14:42:23.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:23.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ee1ca4]
2026-01-07T14:42:23.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:23.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19283648] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bef431b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:23.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T14:42:23.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912589623 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:23.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@293676789 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:23.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:23.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dc03bc2]
2026-01-07T14:42:23.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3a895f] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:23.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@866892055 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:23.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:23.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:23.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bef431b]
2026-01-07T14:42:23.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19283648]
2026-01-07T14:42:23.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:23.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55545ca5] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bcd24f1] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1954687631 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:23.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b008c32] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:23.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3a895f]
2026-01-07T14:42:23.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1863219107 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:23.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:23.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:23.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3c55f8] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:23.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728792676 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:23.746+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1942309777 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:23.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:23.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:23.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:23.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:23.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:23.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T14:42:23.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55545ca5]
2026-01-07T14:42:23.753+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b008c32]
2026-01-07T14:42:23.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.755+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:23.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46038f2a] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T14:42:23.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:23.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@835011131 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:23.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3c55f8]
2026-01-07T14:42:23.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:23.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:23.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102ca491] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:23.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@220831948 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:23.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:23.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:23.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:23.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46038f2a]
2026-01-07T14:42:23.789+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:23.789+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bcd24f1]
2026-01-07T14:42:23.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:23.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:23.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102ca491]
2026-01-07T14:42:23.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:23.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48023086] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:23.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3359acae] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.803+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:23.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1471351573 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:23.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:23.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@668442742 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:23.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T14:42:23.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:23.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:23.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:23.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:23.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:23.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T14:42:23.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:23.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:23.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T14:42:23.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48023086]
2026-01-07T14:42:23.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3359acae]
2026-01-07T14:42:23.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:23.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T14:42:23.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16002a59] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:23.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T14:42:23.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e14e17] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492396631 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:23.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T14:42:23.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:23.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1000580825 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:23.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:23.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:23.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3efcd2] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:23.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:23.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1315443936 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:23.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:23.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:23.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:23.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:23.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16002a59]
2026-01-07T14:42:23.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e14e17]
2026-01-07T14:42:23.855+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d012d1c] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051309575 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:23.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c08bbf6] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909166980 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:23.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T14:42:23.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:23.870+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3efcd2]
2026-01-07T14:42:23.871+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:23.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d012d1c]
2026-01-07T14:42:23.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636f00b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948175381 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:23.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65edf29d] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:23.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23091953 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:23.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.889+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c08bbf6]
2026-01-07T14:42:23.890+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:23.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:23.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6999e672] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@280442812 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:23.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.904+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:23.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7636f00b]
2026-01-07T14:42:23.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65edf29d]
2026-01-07T14:42:23.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6999e672]
2026-01-07T14:42:23.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fcba9] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb10e41] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@834828976 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:23.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1100530951 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:23.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b771493] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:23.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2105263097 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:23.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T14:42:23.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:23.922+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.923+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:23.924+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T14:42:23.928+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bb10e41]
2026-01-07T14:42:23.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fcba9]
2026-01-07T14:42:23.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:23.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:23.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d42c15] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:23.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152605637 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:23.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:23.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:23.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b771493]
2026-01-07T14:42:23.949+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74af302] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:23.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1685761268 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:23.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:23.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:23.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:23.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:23.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d42c15]
2026-01-07T14:42:23.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:23.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:23.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.965+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T14:42:23.965+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:23.966+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85913d9] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:23.966+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:23.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74af302]
2026-01-07T14:42:23.970+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:23.971+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@669916223 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:23.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:23.977+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:42:23.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:23.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:23.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85913d9]
2026-01-07T14:42:23.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:23.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:23.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce55342] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1657184009 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:24.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:24.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:24.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T14:42:24.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:24.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:42:24.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce55342]
2026-01-07T14:42:24.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T14:42:24.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T14:42:24.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b941c53] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:42:24.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1296903456 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:24.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:24.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:24.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e34c07] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1839046458 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:24.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:24.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:24.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:24.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b941c53]
2026-01-07T14:42:24.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d39bc91] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:24.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@377771489 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:24.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e34c07]
2026-01-07T14:42:24.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:24.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:24.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa3d1fa] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@809448317 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:24.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:24.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:24.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:24.051+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d39bc91]
2026-01-07T14:42:24.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:24.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:24.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:24.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa3d1fa]
2026-01-07T14:42:24.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:24.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1c7659] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1266767073 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:24.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:24.131+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:24.225+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:24.230+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1c7659]
2026-01-07T14:42:24.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6327fe03] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2047926912 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:24.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:24.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:24.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:24.273+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6327fe03]
2026-01-07T14:42:24.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e9f7bc] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@73588036 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:24.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:24.290+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:24.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:24.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e9f7bc]
2026-01-07T14:42:24.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e508789] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1771293672 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:24.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:24.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:24.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:24.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e508789]
2026-01-07T14:42:24.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bef91c3] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561592824 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:24.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:24.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:24.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:24.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bef91c3]
2026-01-07T14:42:24.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606659b4] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1193324018 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:24.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:24.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:24.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:24.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606659b4]
2026-01-07T14:42:24.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:24.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aacb296] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:24.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953544078 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:24.371+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:24.371+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:24.373+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:24.376+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aacb296]
2026-01-07T14:42:24.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:24.378+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:42:24.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:31.009+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:31.011+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-07T14:42:31.011+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:31.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:31.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:31.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:42:31.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:31.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:31.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-07T14:42:31.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T14:42:31.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:31.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:31.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58df37f2] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T14:42:31.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-07T14:42:31.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:42:31.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:31.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-07T14:42:31.026+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:31.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-07T14:42:31.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T14:42:31.029+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58353908] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T14:42:31.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@263495162 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:31.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T14:42:31.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@526cddee] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T14:42:31.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:31.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:31.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T14:42:31.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@433772824 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:31.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T14:42:31.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@301819899 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:31.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T14:42:31.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T14:42:31.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:31.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T14:42:31.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:31.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T14:42:31.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:31.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58df37f2]
2026-01-07T14:42:31.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T14:42:31.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T14:42:31.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.065+09:00  WARN 17088 --- [http-nio-8080-exec-9] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T14:42:31.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58353908]
2026-01-07T14:42:31.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T14:42:31.065+09:00  WARN 17088 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T14:42:31.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5921b1b4] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T14:42:31.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2139710343 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:31.072+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac491d5] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T14:42:31.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616625449 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:31.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T14:42:31.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T14:42:31.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:31.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T14:42:31.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-07T14:42:31.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@526cddee]
2026-01-07T14:42:31.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T14:42:31.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.093+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T14:42:31.094+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T14:42:31.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:31.097+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac491d5]
2026-01-07T14:42:31.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-07T14:42:31.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T14:42:31.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:31.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T14:42:31.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50388b6c] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T14:42:31.108+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T14:42:31.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T14:42:31.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128409223 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:31.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T14:42:31.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T14:42:31.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:31.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T14:42:31.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5921b1b4]
2026-01-07T14:42:31.115+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T14:42:31.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:31.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T14:42:31.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.118+09:00  WARN 17088 --- [http-nio-8080-exec-5] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T14:42:31.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T14:42:31.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fadce32] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.122+09:00  WARN 17088 --- [http-nio-8080-exec-8] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T14:42:31.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2077587042 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:31.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T14:42:31.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.131+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:31.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T14:42:31.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T14:42:31.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:31.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T14:42:31.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T14:42:31.143+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:31.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T14:42:31.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50388b6c]
2026-01-07T14:42:31.154+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:31.155+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fadce32]
2026-01-07T14:42:31.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59da90b0] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.160+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.161+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1294799628 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:31.161+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c4e399] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.162+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@291073005 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:31.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59da90b0]
2026-01-07T14:42:31.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c4e399]
2026-01-07T14:42:31.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.171+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@384833da] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:31.178+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@899316595 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:31.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:31.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:31.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:31.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:31.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:31.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@384833da]
2026-01-07T14:42:31.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:31.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20813ae2] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:31.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1496189899 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:31.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:31.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:31.204+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:31.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:31.228+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e59661] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@184705384 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:31.234+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:31.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:31.246+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:31.246+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20813ae2]
2026-01-07T14:42:31.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a9b2173] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1407472360 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:31.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:31.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51e59661]
2026-01-07T14:42:31.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8cc2de] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388433776 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:31.269+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.269+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a9b2173]
2026-01-07T14:42:31.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.271+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.271+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d53c77] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@736498855 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:31.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:31.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:31.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8cc2de]
2026-01-07T14:42:31.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9fc436] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1359570793 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:31.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:31.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:31.285+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d53c77]
2026-01-07T14:42:31.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:31.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b10056a] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.289+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1787281147 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:31.290+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:31.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9fc436]
2026-01-07T14:42:31.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405c6460] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1665246761 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:31.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b10056a]
2026-01-07T14:42:31.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:42:31.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405c6460]
2026-01-07T14:42:31.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:31.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:31.309+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-07T14:42:31.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:31.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:42:31.318+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-07T14:42:31.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-07T14:42:31.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:42:31.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.326+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:31.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e624e] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:31.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:31.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:31.351+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:31.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598540110 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:31.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@222eeb45] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.361+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756667796 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:31.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:31.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:31.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e624e]
2026-01-07T14:42:31.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:31.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d1d89c] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@222eeb45]
2026-01-07T14:42:31.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1286668505 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:31.413+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@413b979] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1362239101 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:31.417+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d1d89c]
2026-01-07T14:42:31.439+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.443+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7691655b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.444+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.445+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1062032941 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:31.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@413b979]
2026-01-07T14:42:31.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:31.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:31.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f70006] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@775340016 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:31.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:31.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:31.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:31.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7691655b]
2026-01-07T14:42:31.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.494+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0f369c] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@281624027 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:31.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:31.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f70006]
2026-01-07T14:42:31.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7be3d5e5] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947930031 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:31.511+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d0f369c]
2026-01-07T14:42:31.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7be3d5e5]
2026-01-07T14:42:31.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f223b2e] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.523+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:31.528+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1535991680 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:31.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:31.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:31.535+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:31.538+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:31.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f223b2e]
2026-01-07T14:42:31.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403f6d35] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513463639 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:31.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:31.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:31.561+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:31.562+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403f6d35]
2026-01-07T14:42:31.564+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42148f36] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@989114127 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:31.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.569+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42148f36]
2026-01-07T14:42:31.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de07ebb] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199962894 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:31.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:31.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:31.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:31.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6de07ebb]
2026-01-07T14:42:31.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:31.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@474dac89] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:31.583+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699799421 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:31.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:31.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:31.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:31.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@474dac89]
2026-01-07T14:42:31.588+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:31.589+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:42:31.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:32.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-07T14:42:32.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-07T14:42:32.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-07T14:42:32.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:32.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-07T14:42:32.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-07T14:42:32.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-07T14:42:32.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-07T14:42:32.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-07T14:42:32.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-07T14:42:32.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:32.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-07T14:42:32.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:42:32.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-07T14:42:32.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-07T14:42:32.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-07T14:42:32.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:32.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-07T14:42:32.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-07T14:42:32.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-07T14:42:32.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-07T14:42:32.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-07T14:42:32.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:32.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-07T14:42:32.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T14:42:32.637+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:42:32.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-07T14:42:32.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-07T14:42:32.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-07T14:42:32.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:32.637+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:32.641+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:32.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:32.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:32.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:32.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b946f63] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:32.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ce05a77] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:32.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:32.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883076672 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:32.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3835e031] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f762b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:32.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4851eaef] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1009196153 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:32.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737e4c69] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@695258690 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:32.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@273982256 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:32.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:32.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:32.677+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-07T14:42:32.678+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-07T14:42:32.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:32.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-07T14:42:32.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-07T14:42:32.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720883959 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:32.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-07T14:42:32.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@285286639 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:42:32.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:32.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:32.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-07T14:42:32.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-07T14:42:32.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b946f63]
2026-01-07T14:42:32.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ce05a77]
2026-01-07T14:42:32.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-07T14:42:32.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-07T14:42:32.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-07T14:42:32.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bd0663] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34362143] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f762b]
2026-01-07T14:42:32.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3835e031]
2026-01-07T14:42:32.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 3
2026-01-07T14:42:32.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1204862902 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:32.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355732924 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:32.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-07T14:42:32.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:32.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4851eaef]
2026-01-07T14:42:32.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:32.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:32.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:32.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737e4c69]
2026-01-07T14:42:32.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-07T14:42:32.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:32.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:32.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-07T14:42:32.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:32.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:32.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:32.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=14, totalAmo (truncated)...]
2026-01-07T14:42:32.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1977783, totalCo (truncated)...]
2026-01-07T14:42:32.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:32.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:32.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:32.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:32.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:32.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48bd0663]
2026-01-07T14:42:32.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34362143]
2026-01-07T14:42:32.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8896cb8] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@618ce501] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@673705428 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:32.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:32.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:32.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:32.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8896cb8]
2026-01-07T14:42:32.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1388432251 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:32.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:32.768+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@178270d4] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:32.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1420636720 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:32.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:32.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:32.773+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:42:32.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:32.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@618ce501]
2026-01-07T14:42:32.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@178270d4]
2026-01-07T14:42:32.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:32.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0b9fe2] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:32.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296253089 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:32.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:32.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:32.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:32.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:32.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0b9fe2]
2026-01-07T14:42:32.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185c92d0] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@506395318 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:32.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:32.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:42:32.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:42:32.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185c92d0]
2026-01-07T14:42:32.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@765a0fc1] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@183290312 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:32.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:32.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:32.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:42:32.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@765a0fc1]
2026-01-07T14:42:32.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238abb50] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@92839143 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:32.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:32.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:32.803+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:32.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238abb50]
2026-01-07T14:42:32.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e3be67] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@264620592 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:32.806+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:32.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:42:32.811+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:42:32.811+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79e3be67]
2026-01-07T14:42:32.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:32.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1249784e] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:32.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992158438 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:32.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:32.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:32.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:32.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1249784e]
2026-01-07T14:42:32.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:32.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:42:32.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:40.561+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-07T14:42:40.561+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-07T14:42:40.562+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-07T14:42:40.564+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-07T14:42:40.562+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-07T14:42:40.562+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:40.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-07T14:42:40.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-07T14:42:40.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-07T14:42:40.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-07T14:42:40.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-07T14:42:40.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-07T14:42:40.569+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:40.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:40.572+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:42:40.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-07T14:42:40.575+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-07T14:42:40.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-07T14:42:40.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-07T14:42:40.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-07T14:42:40.579+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:40.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T14:42:40.588+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-07T14:42:40.589+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-07T14:42:40.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:40.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-07T14:42:40.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:40.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:42:40.601+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-07T14:42:40.601+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-07T14:42:40.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:40.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:40.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c9d6d2] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:40.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-07T14:42:40.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:40.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.630+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504fb99b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:40.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d09b97d] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc216b6] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.629+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:40.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T14:42:40.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2100983973 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:40.637+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.638+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1624907699 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:40.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@487401507 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:40.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@285358541 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:40.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-07T14:42:40.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8434f42] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:40.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-07T14:42:40.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:40.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf529ec] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-07T14:42:40.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:40.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-07T14:42:40.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@336866974 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:40.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:40.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-07T14:42:40.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-07T14:42:40.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@534909763 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:42:40.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 3
2026-01-07T14:42:40.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:40.654+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:40.654+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-07T14:42:40.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504fb99b]
2026-01-07T14:42:40.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-07T14:42:40.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34c9d6d2]
2026-01-07T14:42:40.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d09b97d]
2026-01-07T14:42:40.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc216b6]
2026-01-07T14:42:40.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:40.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-07T14:42:40.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:40.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a9764b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-07T14:42:40.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-07T14:42:40.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=14, totalAmo (truncated)...]
2026-01-07T14:42:40.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184221073 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:40.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51bf5174] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8434f42]
2026-01-07T14:42:40.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:40.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:40.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:40.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1932609739 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:40.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:40.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-07T14:42:40.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1977783, totalCo (truncated)...]
2026-01-07T14:42:40.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:40.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:40.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:40.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cf529ec]
2026-01-07T14:42:40.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:40.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:40.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-07T14:42:40.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:40.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:40.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:40.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51bf5174]
2026-01-07T14:42:40.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a9764b]
2026-01-07T14:42:40.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f758a9] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ddccb8] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1214808402 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:40.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@571340006 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:40.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:40.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:40.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:40.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:40.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:42:40.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:40.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f758a9]
2026-01-07T14:42:40.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69ddccb8]
2026-01-07T14:42:40.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5f0eda] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1966356968 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:40.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f502190] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:40.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678396110 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:40.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:40.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:40.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:40.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:40.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:40.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5f0eda]
2026-01-07T14:42:40.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f502190]
2026-01-07T14:42:40.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:40.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f461e6d] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:40.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725345921 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:40.746+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:40.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:40.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:42:40.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:42:40.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f461e6d]
2026-01-07T14:42:40.753+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.753+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5445a8b4] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465527079 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:40.755+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:40.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:40.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:42:40.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5445a8b4]
2026-01-07T14:42:40.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3307d879] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1249826469 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:40.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:40.768+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:40.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:40.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3307d879]
2026-01-07T14:42:40.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61be0395] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1819794379 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:40.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:40.773+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:42:40.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:42:40.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61be0395]
2026-01-07T14:42:40.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:40.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b47c51a] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:40.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@712297292 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:40.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:40.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:40.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:40.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b47c51a]
2026-01-07T14:42:40.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:40.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:42:40.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:50.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:50.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T14:42:50.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:50.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T14:42:50.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:42:50.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:50.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:50.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T14:42:50.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T14:42:50.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:50.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:50.025+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T14:42:50.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:42:50.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T14:42:50.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:50.029+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:50.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T14:42:50.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:50.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f44ada9] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T14:42:50.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dce83c] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c3b9af] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41710179] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1455814575 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:50.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1735010174 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:42:50.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:50.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23105343 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:50.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@511222230 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:50.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:50.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:50.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:50.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:50.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:50.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:50.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dce83c]
2026-01-07T14:42:50.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f44ada9]
2026-01-07T14:42:50.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:50.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@466efe4a] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:50.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T14:42:50.072+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@247483550 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:50.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c3b9af]
2026-01-07T14:42:50.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41710179]
2026-01-07T14:42:50.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:50.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.086+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eafa06f] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.086+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:50.086+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55315de4] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1515772601 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:50.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:50.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973239200 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:50.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:50.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:50.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@466efe4a]
2026-01-07T14:42:50.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c612dd] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12b53e02] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588783280 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:50.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:50.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eafa06f]
2026-01-07T14:42:50.145+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:50.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55315de4]
2026-01-07T14:42:50.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2826500f] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@516369543 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:50.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@187249084 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:50.149+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:50.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2212aea7] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:50.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:50.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2106788220 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:50.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:50.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T14:42:50.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:50.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12b53e02]
2026-01-07T14:42:50.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:50.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d81feb] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.154+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856405116 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:50.154+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.154+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:50.155+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.155+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c612dd]
2026-01-07T14:42:50.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.159+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:50.160+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T14:42:50.160+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.160+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2826500f]
2026-01-07T14:42:50.161+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfbeb40] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009557208 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:50.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:50.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:42:50.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2212aea7]
2026-01-07T14:42:50.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d8afd95] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.176+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:42:50.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052723989 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:50.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:42:50.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfbeb40]
2026-01-07T14:42:50.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d81feb]
2026-01-07T14:42:50.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:42:50.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:42:50.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T14:42:50.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2220bc48] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932370592 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:50.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:50.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T14:42:50.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f94e27] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.211+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:50.214+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1967212898 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:42:50.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T14:42:50.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d8afd95]
2026-01-07T14:42:50.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:42:50.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T14:42:50.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:42:50.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T14:42:50.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:50.221+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T14:42:50.223+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.228+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:50.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:50.241+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@90eab99] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.243+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2220bc48]
2026-01-07T14:42:50.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:50.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1407455829 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:50.249+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:50.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:50.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27fb0455] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:42:50.259+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:50.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:50.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1977886 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:50.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:50.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f94e27]
2026-01-07T14:42:50.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:50.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:42:50.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:50.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5818efaa] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T14:42:50.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1767343039 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:42:50.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@90eab99]
2026-01-07T14:42:50.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.289+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:50.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53563601] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:50.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@804785553 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:50.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:50.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27fb0455]
2026-01-07T14:42:50.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be5977d] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682174456 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:50.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53563601]
2026-01-07T14:42:50.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:50.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5818efaa]
2026-01-07T14:42:50.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3794a399] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1435532628 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:50.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dfa46d] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:50.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@480603651 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:42:50.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T14:42:50.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be5977d]
2026-01-07T14:42:50.333+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715b35e7] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1186077390 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:50.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T14:42:50.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:50.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3794a399]
2026-01-07T14:42:50.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:50.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dfa46d]
2026-01-07T14:42:50.343+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@800e4e2] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:50.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@437917200 wrapping com.mysql.cj.jdbc.ConnectionImpl@7fc9b2b6] will not be managed by Spring
2026-01-07T14:42:50.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28159ebc] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715b35e7]
2026-01-07T14:42:50.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1452784415 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:42:50.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:50.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a43940c] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:50.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1646224558 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:42:50.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.351+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@800e4e2]
2026-01-07T14:42:50.351+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:50.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T14:42:50.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28159ebc]
2026-01-07T14:42:50.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a360201] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.361+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2127729541 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:42:50.361+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a43940c]
2026-01-07T14:42:50.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.364+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:42:50.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T14:42:50.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a360201]
2026-01-07T14:42:50.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:42:50.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:50.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T14:42:50.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T14:42:50.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:42:50.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:42:50.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:42:50.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.422+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:42:50.426+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3512a736] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:42:50.428+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:42:50.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc0f046] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@715825073 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:50.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:42:50.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:42:50.444+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908858339 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:50.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:42:50.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc0f046]
2026-01-07T14:42:50.481+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2122123c] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3512a736]
2026-01-07T14:42:50.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164136094 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:50.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e01c8a1] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@568670034 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:50.494+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.496+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2122123c]
2026-01-07T14:42:50.511+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.512+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.512+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11773cf9] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e01c8a1]
2026-01-07T14:42:50.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544571161 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:50.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:50.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e79fc4e] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:42:50.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@247298528 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:50.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:50.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:42:50.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:50.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11773cf9]
2026-01-07T14:42:50.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14646a8b] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1012665354 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:42:50.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:50.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e79fc4e]
2026-01-07T14:42:50.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75c56722] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@882863704 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:50.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14646a8b]
2026-01-07T14:42:50.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75c56722]
2026-01-07T14:42:50.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:42:50.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3368521] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:42:50.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1561599506 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:50.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:50.638+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:50.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:50.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3368521]
2026-01-07T14:42:50.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b625a1] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@933144347 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:50.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:42:50.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:42:50.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:42:50.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b625a1]
2026-01-07T14:42:50.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a233004] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1535740876 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:50.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.678+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a233004]
2026-01-07T14:42:50.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d457dfb] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513131335 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:50.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:42:50.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:42:50.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:42:50.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d457dfb]
2026-01-07T14:42:50.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:42:50.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a85cfd0] was not registered for synchronization because synchronization is not active
2026-01-07T14:42:50.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1013567454 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:42:50.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:42:50.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:42:50.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:42:50.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a85cfd0]
2026-01-07T14:42:50.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:42:50.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:42:50.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:44:41.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T14:44:41.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:44:41.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:44:41.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T14:44:41.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:44:41.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T14:44:41.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:44:41.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:44:41.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T14:44:41.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T14:44:41.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:44:41.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:44:41.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:44:41.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cdfb0c7] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:44:41.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:44:41.746+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:44:41.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4071bb] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T14:44:41.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T14:44:41.760+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T14:44:41.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:44:41.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ddb6732] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26446c6a] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090299567 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:44:41.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@210429776 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:44:41.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775394814 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:44:41.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@381420349 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:44:41.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:44:41.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:44:41.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:44:41.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:44:41.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:44:41.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:44:41.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:44:41.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:44:41.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:44:41.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:44:41.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:44:41.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a4071bb]
2026-01-07T14:44:41.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T14:44:41.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cdfb0c7]
2026-01-07T14:44:41.806+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26446c6a]
2026-01-07T14:44:41.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:44:41.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ddb6732]
2026-01-07T14:44:41.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:44:41.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c384b51] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3330fe37] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56cd9058] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:44:41.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991996094 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:44:41.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1220598964 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:44:41.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146008395 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:44:41.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:44:41.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:44:41.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:44:41.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:44:41.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:44:41.826+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:44:41.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:44:41.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:44:41.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:44:41.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56cd9058]
2026-01-07T14:44:41.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c384b51]
2026-01-07T14:44:41.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3330fe37]
2026-01-07T14:44:41.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355393a0] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@687a8c64] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12b8a547] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262572546 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:44:41.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@642588769 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:44:41.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1453732089 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:44:41.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:44:41.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:44:41.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:44:41.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T14:44:41.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:44:41.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:44:41.845+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T14:44:41.845+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:44:41.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:44:41.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355393a0]
2026-01-07T14:44:41.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@687a8c64]
2026-01-07T14:44:41.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12b8a547]
2026-01-07T14:44:41.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6310cfb6] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393fc7ad] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@690e6626] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1249353447 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:44:41.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@85615938 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:44:41.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1045132509 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:44:41.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:44:41.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:44:41.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:44:41.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:44:41.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:44:41.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:44:41.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:44:41.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:44:41.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393fc7ad]
2026-01-07T14:44:41.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6310cfb6]
2026-01-07T14:44:41.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:44:41.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:44:41.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:44:41.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T14:44:41.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:44:41.901+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:44:41.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:44:41.926+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@690e6626]
2026-01-07T14:44:41.927+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.928+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2adc2b69] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813258562 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:44:41.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:44:41.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:44:41.940+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:44:41.942+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2adc2b69]
2026-01-07T14:44:41.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:41.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74303712] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:41.994+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1073536414 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:44:41.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:44:42.011+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T14:44:42.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T14:44:42.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74303712]
2026-01-07T14:44:42.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:42.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e8f790] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:42.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1821760280 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:44:42.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:44:42.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:44:42.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:44:42.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e8f790]
2026-01-07T14:44:42.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:42.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a85b588] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:42.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76516671 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:44:42.042+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:44:42.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T14:44:42.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T14:44:42.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a85b588]
2026-01-07T14:44:42.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:44:42.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d76577] was not registered for synchronization because synchronization is not active
2026-01-07T14:44:42.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1661582224 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:44:42.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:44:42.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:44:42.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:44:42.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d76577]
2026-01-07T14:44:42.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:44:42.060+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:44:42.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:45:13.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:45:13.225+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:45:13.230+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:45:13.234+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T14:45:13.246+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:45:13.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:45:13.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d73f058] was not registered for synchronization because synchronization is not active
2026-01-07T14:45:13.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1849259801 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:45:13.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:45:13.311+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:45:13.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:45:13.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d73f058]
2026-01-07T14:45:13.341+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:45:13.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d337a61] was not registered for synchronization because synchronization is not active
2026-01-07T14:45:13.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1922549966 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:45:13.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:45:13.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:45:13.351+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:45:13.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d337a61]
2026-01-07T14:45:13.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:45:13.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d3e9f95] was not registered for synchronization because synchronization is not active
2026-01-07T14:45:13.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1536695841 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:45:13.364+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:45:13.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:45:13.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:45:13.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d3e9f95]
2026-01-07T14:45:13.405+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:45:13.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbfb4c6] was not registered for synchronization because synchronization is not active
2026-01-07T14:45:13.411+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@907303571 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:45:13.411+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:45:13.413+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:45:13.425+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:45:13.428+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbfb4c6]
2026-01-07T14:45:13.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:45:13.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11be8ea2] was not registered for synchronization because synchronization is not active
2026-01-07T14:45:13.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@864354775 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:45:13.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:45:13.447+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:45:13.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:45:13.496+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11be8ea2]
2026-01-07T14:45:13.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:45:13.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b30ff79] was not registered for synchronization because synchronization is not active
2026-01-07T14:45:13.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1587457315 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:45:13.524+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:45:13.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:45:13.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:45:13.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b30ff79]
2026-01-07T14:45:13.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:45:13.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5fd77c] was not registered for synchronization because synchronization is not active
2026-01-07T14:45:13.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1445475961 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:45:13.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:45:13.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:45:13.641+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:45:13.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5fd77c]
2026-01-07T14:45:13.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:45:13.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cef2f7e] was not registered for synchronization because synchronization is not active
2026-01-07T14:45:13.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1478489512 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:45:13.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:45:13.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:45:13.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:45:13.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cef2f7e]
2026-01-07T14:45:13.765+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:45:13.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@114839da] was not registered for synchronization because synchronization is not active
2026-01-07T14:45:13.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@619278418 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:45:13.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:45:13.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:45:13.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:45:13.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@114839da]
2026-01-07T14:45:13.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:45:13.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:45:13.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:09.235+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:50:09.238+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:50:09.243+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:50:09.243+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T14:50:09.246+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:50:09.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:09.249+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653263cd] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:09.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1998770955 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:09.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:09.257+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:09.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:09.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653263cd]
2026-01-07T14:50:09.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:09.269+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d75be63] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:09.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772075686 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:09.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:09.271+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:09.291+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:09.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d75be63]
2026-01-07T14:50:09.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:09.307+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdad241] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:09.308+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@799861119 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:09.309+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:50:09.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:50:09.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:50:09.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fdad241]
2026-01-07T14:50:09.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:09.318+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17aae1f3] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:09.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@518742429 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:09.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:09.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:09.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:09.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17aae1f3]
2026-01-07T14:50:09.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:09.324+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c79155c] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:09.324+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1008518745 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:09.324+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:50:09.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:50:09.327+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:50:09.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c79155c]
2026-01-07T14:50:09.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:09.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba92133] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:09.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1070470895 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:09.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:50:09.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:50:09.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:50:09.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba92133]
2026-01-07T14:50:09.340+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:09.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f632f7] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:09.343+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@731133507 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:09.343+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:09.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:09.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:09.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f632f7]
2026-01-07T14:50:09.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:09.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5026215c] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:09.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@136302629 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:09.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:50:09.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:50:09.364+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:50:09.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5026215c]
2026-01-07T14:50:09.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:09.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7741ea09] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:09.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378276220 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:09.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:09.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:09.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:09.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7741ea09]
2026-01-07T14:50:09.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:09.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:50:09.373+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:11.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:50:11.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:50:11.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:50:11.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T14:50:11.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:50:11.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:11.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce6f158] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:11.307+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1205955262 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:11.308+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:11.309+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:11.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:11.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce6f158]
2026-01-07T14:50:11.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:11.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1a6dc9] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:11.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@78209180 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:11.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:11.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:11.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:11.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1a6dc9]
2026-01-07T14:50:11.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:11.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47609d28] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:11.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1502270504 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:11.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:50:11.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:50:11.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:50:11.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47609d28]
2026-01-07T14:50:11.333+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:11.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548af6c3] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:11.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@398506151 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:11.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:11.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:11.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:11.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548af6c3]
2026-01-07T14:50:11.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:11.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@494d2420] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:11.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1257439012 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:11.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:50:11.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:50:11.341+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:50:11.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@494d2420]
2026-01-07T14:50:11.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:11.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6016aebf] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:11.343+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1079704249 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:11.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:50:11.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:50:11.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:50:11.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6016aebf]
2026-01-07T14:50:11.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:11.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e00513e] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:11.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@993421591 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:11.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:11.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:11.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:11.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e00513e]
2026-01-07T14:50:11.357+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:11.357+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ec1658] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:11.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1007232218 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:11.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:50:11.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:50:11.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:50:11.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ec1658]
2026-01-07T14:50:11.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:11.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e94a8fb] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:11.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585065383 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:11.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:11.371+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:11.373+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:11.375+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e94a8fb]
2026-01-07T14:50:11.376+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:11.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:50:11.378+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:13.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:50:13.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:50:13.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:50:13.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T14:50:13.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:50:13.171+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:13.171+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@351ebba4] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:13.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608000889 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:13.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:13.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:13.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:13.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@351ebba4]
2026-01-07T14:50:13.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:13.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@638294ed] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:13.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1240726448 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:13.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:13.189+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:13.192+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:13.192+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@638294ed]
2026-01-07T14:50:13.193+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:13.193+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a320b75] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:13.199+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1575016226 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:13.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:50:13.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:50:13.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:50:13.209+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a320b75]
2026-01-07T14:50:13.209+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:13.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5023dff5] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:13.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794117415 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:13.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:13.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:13.221+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:13.222+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5023dff5]
2026-01-07T14:50:13.224+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:13.225+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6fe9d6] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:13.225+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813522329 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:13.226+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:50:13.227+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:50:13.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:50:13.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6fe9d6]
2026-01-07T14:50:13.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:13.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fad1425] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:13.238+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2114810719 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:13.239+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:50:13.245+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:50:13.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:50:13.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fad1425]
2026-01-07T14:50:13.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:13.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b40b577] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:13.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@475389541 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:13.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:13.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:13.258+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:13.259+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b40b577]
2026-01-07T14:50:13.259+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:13.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5289f54e] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:13.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1550584165 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:13.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:50:13.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:50:13.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:50:13.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5289f54e]
2026-01-07T14:50:13.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:13.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc102e4] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:13.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847229399 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:13.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:13.269+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:13.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:13.271+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc102e4]
2026-01-07T14:50:13.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:13.273+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:50:13.274+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:15.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:50:15.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T14:50:15.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T14:50:15.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T14:50:15.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T14:50:15.422+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:15.422+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477165f3] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:15.424+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410289098 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:15.424+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:15.425+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:15.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:15.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477165f3]
2026-01-07T14:50:15.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:15.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed8fa4e] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:15.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1471587726 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:15.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:15.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:15.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:15.437+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed8fa4e]
2026-01-07T14:50:15.439+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:15.439+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59aba106] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:15.440+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@551041783 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:15.440+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:50:15.441+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:50:15.448+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:50:15.448+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59aba106]
2026-01-07T14:50:15.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:15.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7573a6e7] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:15.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1901365982 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:15.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:15.453+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:15.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:15.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7573a6e7]
2026-01-07T14:50:15.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:15.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51d67fe8] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:15.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@972730283 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:15.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:50:15.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:50:15.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:50:15.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51d67fe8]
2026-01-07T14:50:15.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:15.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9bba35] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:15.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1313909105 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:15.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T14:50:15.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T14:50:15.471+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T14:50:15.471+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9bba35]
2026-01-07T14:50:15.472+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:15.473+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@201538c0] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:15.473+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370387685 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:15.473+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:15.474+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:15.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:15.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@201538c0]
2026-01-07T14:50:15.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:15.481+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@663e83c0] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:15.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877243135 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:15.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:50:15.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T14:50:15.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T14:50:15.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@663e83c0]
2026-01-07T14:50:15.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:15.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25fdbbc7] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:15.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@936320059 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:15.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:15.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:15.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:15.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25fdbbc7]
2026-01-07T14:50:15.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:15.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T14:50:15.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:21.051+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T14:50:21.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T14:50:21.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T14:50:21.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T14:50:21.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T14:50:21.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T14:50:21.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers/active
2026-01-07T14:50:21.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T14:50:21.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T14:50:21.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T14:50:21.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T14:50:21.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers/active
2026-01-07T14:50:21.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:21.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers/active
2026-01-07T14:50:21.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:21.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a22933c] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:21.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers/active", parameters={}
2026-01-07T14:50:21.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5065d27a] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:21.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-07T14:50:21.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912564751 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:50:21.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T14:50:21.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T14:50:21.072+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874279649 wrapping com.mysql.cj.jdbc.ConnectionImpl@4cda58bd] will not be managed by Spring
2026-01-07T14:50:21.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:50:21.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T14:50:21.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T14:50:21.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T14:50:21.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:21.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440dee5a] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:21.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T14:50:21.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a22933c]
2026-01-07T14:50:21.093+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T14:50:21.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:21.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5065d27a]
2026-01-07T14:50:21.101+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4e120] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:21.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:21.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1929928599 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:21.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1855577279 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:50:21.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T14:50:21.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-07T14:50:21.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:21.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:21.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:50:21.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:21.108+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:21.108+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 2
2026-01-07T14:50:21.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@440dee5a]
2026-01-07T14:50:21.108+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4e120]
2026-01-07T14:50:21.115+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:21.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:21.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23cf0a91] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:21.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68489769 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:50:21.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=5, username=test_user4, password=null, (truncated)...]
2026-01-07T14:50:21.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T14:50:21.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T14:50:21.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:21.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T14:50:21.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers/active
2026-01-07T14:50:21.140+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23cf0a91]
2026-01-07T14:50:21.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers/active
2026-01-07T14:50:21.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:21.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers/active
2026-01-07T14:50:21.154+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2210633c] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:21.155+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers/active", parameters={}
2026-01-07T14:50:21.158+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2043702893 wrapping com.mysql.cj.jdbc.ConnectionImpl@16b59d77] will not be managed by Spring
2026-01-07T14:50:21.159+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-07T14:50:21.159+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T14:50:21.159+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T14:50:21.160+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T14:50:21.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T14:50:21.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:21.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e469de8] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:21.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@854385167 wrapping com.mysql.cj.jdbc.ConnectionImpl@18d5acb2] will not be managed by Spring
2026-01-07T14:50:21.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T14:50:21.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-07T14:50:21.176+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2210633c]
2026-01-07T14:50:21.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 4(Long), 1(Long)
2026-01-07T14:50:21.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:21.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T14:50:21.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:21.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 2
2026-01-07T14:50:21.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e469de8]
2026-01-07T14:50:21.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:21.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=5, username=test_user4, password=null, (truncated)...]
2026-01-07T14:50:21.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:22.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-07T14:50:22.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-07T14:50:22.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-07T14:50:22.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-07T14:50:22.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-07T14:50:22.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-07T14:50:22.673+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-07T14:50:22.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-07T14:50:22.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-07T14:50:22.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-07T14:50:22.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-07T14:50:22.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:22.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-07T14:50:22.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T14:50:22.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@637387db] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:22.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c0109a6] was not registered for synchronization because synchronization is not active
2026-01-07T14:50:22.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1918475157 wrapping com.mysql.cj.jdbc.ConnectionImpl@a2d5ce] will not be managed by Spring
2026-01-07T14:50:22.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@661864321 wrapping com.mysql.cj.jdbc.ConnectionImpl@7714c027] will not be managed by Spring
2026-01-07T14:50:22.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-07T14:50:22.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-07T14:50:22.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 4(Long)
2026-01-07T14:50:22.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-07T14:50:22.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-07T14:50:22.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.U.findActiveByUserId             : <==      Total: 0
2026-01-07T14:50:22.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@637387db]
2026-01-07T14:50:22.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c0109a6]
2026-01-07T14:50:22.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:22.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T14:50:22.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[])]
2026-01-07T14:50:22.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-07T14:50:22.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T14:50:22.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:25:04.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-07T15:25:04.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-07T15:25:04.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:25:04.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:32:54.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-07T15:32:54.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-07T15:32:54.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:32:54.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:38:58.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-07T15:38:58.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-07T15:38:58.221+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:38:58.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:39:21.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-07T15:39:21.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-07T15:39:21.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:39:21.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:54:46.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:54:46.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:54:46.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:54:46.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:54:52.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-07T15:54:52.235+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-07T15:54:52.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:54:52.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-07T15:54:52.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-07T15:54:52.239+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-07T15:54:52.245+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user1, password=1234)]
2026-01-07T15:54:52.246+09:00  INFO 17088 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user1
2026-01-07T15:54:52.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:52.249+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5523163] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:52.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572704986 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:52.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-07T15:54:52.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user1(String)
2026-01-07T15:54:52.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-07T15:54:52.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5523163]
2026-01-07T15:54:52.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:52.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106c8e89] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:52.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@874185254 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:52.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-07T15:54:52.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-07T15:54:52.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-07T15:54:52.494+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106c8e89]
2026-01-07T15:54:52.521+09:00  INFO 17088 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 로그인 성공 - userId: 2, role: USER, companyId: 1
2026-01-07T15:54:52.523+09:00  INFO 17088 --- [http-nio-8080-exec-10] SECURITY                                 : LOGIN_SUCCESS userId=2 username=test_user1 role=USER
2026-01-07T15:54:52.524+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:52.525+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=2, username=test_user1, password (truncated)...]
2026-01-07T15:54:52.526+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:52.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-07T15:54:52.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-07T15:54:52.910+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/companies
2026-01-07T15:54:52.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-07T15:54:52.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-07T15:54:52.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-07T15:54:52.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:52.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713d45a8] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:52.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823071573 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:52.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-07T15:54:52.925+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-07T15:54:52.935+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-07T15:54:52.935+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713d45a8]
2026-01-07T15:54:52.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:52.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-07T15:54:52.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-07T15:54:52.969+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:52.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/revision-requests
2026-01-07T15:54:52.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-07T15:54:52.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-07T15:54:52.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-07T15:54:52.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-07T15:54:52.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-07T15:54:52.975+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-07T15:54:52.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-07T15:54:52.979+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-07T15:54:52.990+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:54:52.992+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:54:52.993+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-07T15:54:52.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T15:54:53.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-07T15:54:53.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-07T15:54:52.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T15:54:52.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:54:53.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:54:53.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/subscriptions/current
2026-01-07T15:54:53.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-07T15:54:53.008+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/credits/total
2026-01-07T15:54:53.009+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:54:53.010+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:54:53.010+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T15:54:53.011+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:54:53.011+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T15:54:53.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:54:53.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:54:53.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T15:54:53.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T15:54:53.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:54:53.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:54:53.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T15:54:53.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@673069a4] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T15:54:53.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T15:54:53.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428373481 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T15:54:53.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db30b34] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b917f6] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:54:53.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:54:53.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@228191553 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1721446441 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:53.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:54:53.029+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:54:53.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:54:53.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:54:53.030+09:00  WARN 17088 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:54:53.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.031+09:00  WARN 17088 --- [http-nio-8080-exec-1] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:54:53.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-07T15:54:53.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:54:53.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@673069a4]
2026-01-07T15:54:53.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:54:53.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:54:53.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:54:53.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e85f36] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:54:53.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:54:53.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1089564486 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.045+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:54:53.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T15:54:53.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.051+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T15:54:53.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/subscriptions/current
2026-01-07T15:54:53.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T15:54:53.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T15:54:53.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/credits/total
2026-01-07T15:54:53.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T15:54:53.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T15:54:53.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T15:54:53.060+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T15:54:53.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:54:53.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:54:53.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e85f36]
2026-01-07T15:54:53.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T15:54:53.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:54:53.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db30b34]
2026-01-07T15:54:53.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T15:54:53.067+09:00  WARN 17088 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:54:53.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6507b683] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:54:53.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:54:53.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@57693434 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:54:53.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:54:53.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:54:53.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:53.076+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:53.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18b917f6]
2026-01-07T15:54:53.078+09:00  WARN 17088 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:54:53.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:54:53.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:54:53.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T15:54:53.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:53.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.086+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:54:53.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:54:53.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e6524f] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:54:53.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/subscriptions/current
2026-01-07T15:54:53.096+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T15:54:53.094+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:54:53.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490064526 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:53.096+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:54:53.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T15:54:53.101+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T15:54:53.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:54:53.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:54:53.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T15:54:53.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/credits/total
2026-01-07T15:54:53.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:54:53.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T15:54:53.108+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T15:54:53.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f92b9d2] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:54:53.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T15:54:53.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@990755874 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:54:53.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T15:54:53.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T15:54:53.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:54:53.117+09:00  WARN 17088 --- [http-nio-8080-exec-10] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:54:53.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:54:53.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.126+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-07T15:54:53.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:54:53.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e6524f]
2026-01-07T15:54:53.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:54:53.136+09:00  WARN 17088 --- [http-nio-8080-exec-5] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:54:53.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:54:53.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:54:53.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@786ada45] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f92b9d2]
2026-01-07T15:54:53.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:54:53.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:54:53.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862900525 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:53.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:54:53.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:54:53.159+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:53.162+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:54:53.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:54:53.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:54:53.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@786ada45]
2026-01-07T15:54:53.178+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b377e79] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428237224 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:53.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:53.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6507b683]
2026-01-07T15:54:53.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a3562b1] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308180698 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b377e79]
2026-01-07T15:54:53.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:54:53.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.189+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:53.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a3562b1]
2026-01-07T15:54:53.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ff069eb] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1043441742 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:54:53.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:53.204+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:54:53.209+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:54:53.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:54:53.211+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:54:53.214+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67f09ec] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.217+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2091674902 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.217+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:53.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:54:53.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ff069eb]
2026-01-07T15:54:53.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:54:53.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d5d92a3] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.235+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1363025362 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:53.244+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:53.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:54:53.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:53.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67f09ec]
2026-01-07T15:54:53.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d5d92a3]
2026-01-07T15:54:53.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f7d0f46] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093882156 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a51d689] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@460884970 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.269+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.271+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f7d0f46]
2026-01-07T15:54:53.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a51d689]
2026-01-07T15:54:53.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4c5abe] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@144468270 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d837b5c] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1494353403 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:54:53.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:53.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:54:53.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4c5abe]
2026-01-07T15:54:53.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:53.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d837b5c]
2026-01-07T15:54:53.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0fdfd6] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1923872035 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b9c0ea] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1154882682 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0fdfd6]
2026-01-07T15:54:53.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b9c0ea]
2026-01-07T15:54:53.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:54:53.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:54:53.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:53.308+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:53.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:54:53.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-07T15:54:53.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-07T15:54:53.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:54:53.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-07T15:54:53.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:54:53.344+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:54:53.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:54:53.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-07T15:54:53.394+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a132328] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:54:53.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@606266454 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:54:53.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c516c4] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:54:53.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1793396372 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.403+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:54:53.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a132328]
2026-01-07T15:54:53.405+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.412+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.413+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c516c4]
2026-01-07T15:54:53.413+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d41523e] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.447+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.448+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1860707037 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.448+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ef79d4f] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.448+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093387619 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.463+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d41523e]
2026-01-07T15:54:53.463+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ef79d4f]
2026-01-07T15:54:53.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58a9592f] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee5dc20] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@532553894 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554654550 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:53.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:54:53.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:53.472+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:54:53.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58a9592f]
2026-01-07T15:54:53.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36eaf922] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.481+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@613986033 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.481+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:53.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36eaf922]
2026-01-07T15:54:53.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee5dc20]
2026-01-07T15:54:53.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:54:53.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71a8265] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:53.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658393722 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:54:53.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:54:53.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71a8265]
2026-01-07T15:54:53.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:54:53.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:54:53.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46716b6e] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:54:53.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355188847 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7252702e] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:53.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1559028179 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:54:53.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:53.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:54:53.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46716b6e]
2026-01-07T15:54:53.535+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca6fcd] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.544+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1026379937 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:53.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:54:53.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:53.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7252702e]
2026-01-07T15:54:53.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.561+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34df3091] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441658148 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:53.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ca6fcd]
2026-01-07T15:54:53.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.569+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2d1655] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@213557370 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34df3091]
2026-01-07T15:54:53.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a48cd2a] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.579+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1465793866 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2d1655]
2026-01-07T15:54:53.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.583+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb5f5f0] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.583+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:54:53.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@476962669 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:53.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:54:53.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a48cd2a]
2026-01-07T15:54:53.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f8c23b] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:53.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2080729747 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb5f5f0]
2026-01-07T15:54:53.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b1b1ae] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1080023229 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:53.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.601+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f8c23b]
2026-01-07T15:54:53.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:54:53.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b1b1ae]
2026-01-07T15:54:53.605+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:53.605+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:54:53.613+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:53.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-07T15:54:53.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-07T15:54:53.625+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&drafterName=test_user1
2026-01-07T15:54:53.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&drafterName=test_user1", parameters={masked}
2026-01-07T15:54:53.630+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:54:53.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0b8148] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@581126143 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0b8148]
2026-01-07T15:54:53.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119aa08d] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1617584695 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119aa08d]
2026-01-07T15:54:53.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.652+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b076b59] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868380284 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.654+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:53.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:53.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:53.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b076b59]
2026-01-07T15:54:53.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761a271f] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1717028646 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@761a271f]
2026-01-07T15:54:53.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1089637f] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931962030 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:53.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:53.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1089637f]
2026-01-07T15:54:53.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7303f6ec] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@684384616 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:53.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:53.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:53.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7303f6ec]
2026-01-07T15:54:53.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44e9bbb0] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@682725719 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44e9bbb0]
2026-01-07T15:54:53.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f8e7ea3] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@649295065 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:53.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:53.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:53.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f8e7ea3]
2026-01-07T15:54:53.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:53.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a2f6d08] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:53.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1980265864 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:53.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:53.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:53.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:53.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a2f6d08]
2026-01-07T15:54:53.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:53.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:54:53.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-07T15:54:57.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-07T15:54:57.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-07T15:54:57.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-07T15:54:57.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:54:57.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:54:57.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:54:57.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:54:57.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:54:57.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:54:57.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-07T15:54:57.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:54:57.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:54:57.101+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:54:57.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:54:57.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:54:57.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:54:57.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:54:57.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:54:57.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:54:57.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:54:57.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:54:57.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:54:57.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:54:57.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cda3b0] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600c1fd3] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d06aec] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ed1300] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958579951 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:57.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@240335103 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:54:57.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:54:57.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@43808200 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693791701 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:54:57.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:54:57.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-07T15:54:57.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:54:57.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:54:57.131+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:54:57.131+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:54:57.131+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600c1fd3]
2026-01-07T15:54:57.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cda3b0]
2026-01-07T15:54:57.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:54:57.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d06aec]
2026-01-07T15:54:57.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a53111] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1008255020 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:57.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21fb9e07] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:54:57.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.145+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1469895437 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:54:57.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 2
2026-01-07T15:54:57.149+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:54:57.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ed1300]
2026-01-07T15:54:57.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:54:57.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:54:57.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d488ff9] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1559322374 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:54:57.160+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.162+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61597161] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.162+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.162+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a53111]
2026-01-07T15:54:57.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1784136265 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.164+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:54:57.164+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21fb9e07]
2026-01-07T15:54:57.164+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f5b7d4] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.165+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-07T15:54:57.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@481308130 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:57.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e457dc3] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:57.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d488ff9]
2026-01-07T15:54:57.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53731242 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:54:57.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:54:57.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:57.171+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61597161]
2026-01-07T15:54:57.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dabbf3b] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:57.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:54:57.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1151713328 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:54:57.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74f5b7d4]
2026-01-07T15:54:57.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:54:57.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:57.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long)
2026-01-07T15:54:57.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66965050] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:54:57.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1057226817 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:57.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.192+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:54:57.193+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:54:57.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:54:57.199+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:54:57.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:54:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dabbf3b]
2026-01-07T15:54:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a7e9ec3] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2070471081 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66965050]
2026-01-07T15:54:57.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fa6df40] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:54:57.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@534048232 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:54:57.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.204+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-07T15:54:57.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:54:57.209+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.211+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:57.217+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:54:57.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e457dc3]
2026-01-07T15:54:57.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:54:57.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a7e9ec3]
2026-01-07T15:54:57.225+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:54:57.226+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fa6df40]
2026-01-07T15:54:57.226+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a710fef] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.226+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.226+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:54:57.226+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.227+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@797957639 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.227+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:54:57.230+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:54:57.230+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-07T15:54:57.230+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:54:57.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.244+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee75ac] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.235+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:54:57.244+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a710fef]
2026-01-07T15:54:57.246+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2059281630 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:54:57.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d83942] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:54:57.249+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:54:57.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1101285025 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:54:57.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:57.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:54:57.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:57.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:54:57.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:54:57.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee75ac]
2026-01-07T15:54:57.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3484fc] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624099041 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:57.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7938c28a] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:54:57.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:57.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810467604 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:54:57.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d83942]
2026-01-07T15:54:57.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46565db4] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@884370965 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:57.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.271+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 2
2026-01-07T15:54:57.277+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:57.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7938c28a]
2026-01-07T15:54:57.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3484fc]
2026-01-07T15:54:57.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@175fe640] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cb3b187] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285002035 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:57.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@60819465 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:57.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:57.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:54:57.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46565db4]
2026-01-07T15:54:57.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.285+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@175fe640]
2026-01-07T15:54:57.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11337b87] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:54:57.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1702641640 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cb3b187]
2026-01-07T15:54:57.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48881a51] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.289+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@537762022 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:57.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a96d75] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:57.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@859293998 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long)
2026-01-07T15:54:57.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11337b87]
2026-01-07T15:54:57.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:54:57.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10308768] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48881a51]
2026-01-07T15:54:57.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@441788842 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a96d75]
2026-01-07T15:54:57.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b25b76e] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:57.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@595028681 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:54:57.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:57.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:54:57.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.311+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:57.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10308768]
2026-01-07T15:54:57.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:54:57.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1578f7ba] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.318+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:54:57.318+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.318+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@31926714 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:54:57.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b25b76e]
2026-01-07T15:54:57.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:54:57.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:54:57.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-07T15:54:57.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fde0c8f] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120956208 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.378+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:54:57.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:54:57.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1578f7ba]
2026-01-07T15:54:57.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:54:57.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:54:57.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fde0c8f]
2026-01-07T15:54:57.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.437+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:54:57.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3544f6cf] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.463+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172048028 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.463+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-07T15:54:57.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:54:57.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:54:57.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:54:57.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.471+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e0b57d] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.474+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@811911598 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.480+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3544f6cf]
2026-01-07T15:54:57.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e0b57d]
2026-01-07T15:54:57.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab0b8f1] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.499+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1481694694 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a6603a9] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:57.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136478917 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:54:57.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:54:57.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a6603a9]
2026-01-07T15:54:57.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab0b8f1]
2026-01-07T15:54:57.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23aad1a4] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.552+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43bf791d] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@434890035 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@210187947 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:54:57.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:57.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.580+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:57.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.598+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43bf791d]
2026-01-07T15:54:57.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:57.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23aad1a4]
2026-01-07T15:54:57.614+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:54:57.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:54:57.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c14d58] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@110331253 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73c14d58]
2026-01-07T15:54:57.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376d2380] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312752568 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:57.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:57.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:57.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376d2380]
2026-01-07T15:54:57.652+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.652+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da4b73f] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938550824 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:54:57.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:54:57.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:54:57.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da4b73f]
2026-01-07T15:54:57.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d434401] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976961497 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d434401]
2026-01-07T15:54:57.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ab5fe8] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53439536 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:54:57.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:54:57.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:54:57.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ab5fe8]
2026-01-07T15:54:57.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:54:57.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab1d71d] was not registered for synchronization because synchronization is not active
2026-01-07T15:54:57.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@609980348 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:54:57.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:54:57.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:54:57.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:54:57.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ab1d71d]
2026-01-07T15:54:57.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:54:57.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:54:57.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:00.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-07T15:55:00.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/33
2026-01-07T15:55:00.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:00.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-07T15:55:00.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/33
2026-01-07T15:55:00.197+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:00.199+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:00.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:55:00.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T15:55:00.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:00.204+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:00.211+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:55:00.212+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:00.213+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/33
2026-01-07T15:55:00.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T15:55:00.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T15:55:00.213+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:00.214+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:55:00.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:00.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:55:00.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:00.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:55:00.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:00.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.221+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.228+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d0ca99] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.228+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:55:00.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e04fdb] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305f538] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.235+09:00  INFO 17088 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-07T15:55:00.245+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327752392 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:00.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23005da9] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.249+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:00.249+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1628060839 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.249+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1946719455 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:00.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:55:00.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1025578792 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:00.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:55:00.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:00.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:55:00.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T15:55:00.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-07T15:55:00.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:55:00.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:55:00.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58d0ca99]
2026-01-07T15:55:00.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:55:00.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305f538]
2026-01-07T15:55:00.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58ab7697] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:00.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1419761804 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:00.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e04fdb]
2026-01-07T15:55:00.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480d80c4] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:00.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:00.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-07T15:55:00.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180650443 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:00.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:00.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23005da9]
2026-01-07T15:55:00.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:55:00.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:00.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:00.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:00.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T15:55:00.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-07T15:55:00.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58ab7697]
2026-01-07T15:55:00.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:00.269+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.274+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@665415c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.275+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T15:55:00.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:55:00.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@100237513 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:00.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480d80c4]
2026-01-07T15:55:00.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:00.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:55:00.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b01efe] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:55:00.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@304067404 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:55:00.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:55:00.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:55:00.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T15:55:00.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:55:00.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:55:00.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@665415c]
2026-01-07T15:55:00.284+09:00  INFO 17088 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 2, companyId: 1
2026-01-07T15:55:00.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.285+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7efe6e91] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c03b90f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1379778483 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:00.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:00.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@80500739 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:00.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T15:55:00.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:00.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:55:00.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36b01efe]
2026-01-07T15:55:00.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:55:00.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:00.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d588c59] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7efe6e91]
2026-01-07T15:55:00.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1806253794 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:00.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:55:00.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:55:00.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-01-07T15:55:00.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T15:55:00.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:00.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c03b90f]
2026-01-07T15:55:00.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:00.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=3, userId=2, si (truncated)...]
2026-01-07T15:55:00.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:00.311+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:55:00.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d588c59]
2026-01-07T15:55:00.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654954c7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2087331443 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:00.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:00.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:00.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654954c7]
2026-01-07T15:55:00.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:00.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T15:55:00.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:00.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/33
2026-01-07T15:55:00.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/33
2026-01-07T15:55:00.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/33
2026-01-07T15:55:00.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/33", parameters={}
2026-01-07T15:55:00.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:55:00.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be2a776] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@536842280 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:55:00.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 33(Long), 1(Long)
2026-01-07T15:55:00.333+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:55:00.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be2a776]
2026-01-07T15:55:00.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5236957a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1290879325 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:55:00.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 33(Long), 1(Long)
2026-01-07T15:55:00.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T15:55:00.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5236957a]
2026-01-07T15:55:00.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4674f828] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@546257113 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.351+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:55:00.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 33(Long), 1(Long)
2026-01-07T15:55:00.379+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T15:55:00.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4674f828]
2026-01-07T15:55:00.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ea791ef] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1332971947 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:55:00.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 33(Long), 1(Long)
2026-01-07T15:55:00.388+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:55:00.388+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ea791ef]
2026-01-07T15:55:00.394+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:00.394+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63557612] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:00.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1911536510 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:00.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:00.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:00.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:00.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63557612]
2026-01-07T15:55:00.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:00.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=33, drafterId=2, r (truncated)...]
2026-01-07T15:55:00.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:05.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:05.258+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:55:05.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:05.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:55:05.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:05.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:05.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-07T15:55:05.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:05.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:05.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:55:05.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:55:05.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:05.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:05.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:55:05.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:55:05.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:05.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:55:05.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:05.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23536dd7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecf7b83] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:55:05.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32514eca] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.271+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.275+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50206a89] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.277+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1337287226 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:05.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:05.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:55:05.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@539363863 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:05.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@340220635 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@50846266 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:05.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:05.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:05.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-07T15:55:05.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:55:05.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:55:05.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23536dd7]
2026-01-07T15:55:05.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5d6d86] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@896179499 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:05.290+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.291+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:05.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ecf7b83]
2026-01-07T15:55:05.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32514eca]
2026-01-07T15:55:05.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef4a42b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:05.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@62212297 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:05.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:05.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:05.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:05.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.311+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:05.311+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5d6d86]
2026-01-07T15:55:05.311+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719a76d5] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:05.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176241213 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:05.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:05.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:55:05.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@450b4492] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1722851488 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:05.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:05.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-07T15:55:05.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:55:05.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:05.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 2
2026-01-07T15:55:05.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719a76d5]
2026-01-07T15:55:05.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@450b4492]
2026-01-07T15:55:05.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50206a89]
2026-01-07T15:55:05.324+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef4a42b]
2026-01-07T15:55:05.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8dd345] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.326+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b9711c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.326+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:05.326+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1324516706 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.327+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4406a8ff] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.327+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@12031808 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:05.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2145950120 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:05.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:05.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.333+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:05.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.343+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:05.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:05.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:05.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:05.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:05.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b9c31c7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@518137300 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:05.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:05.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 2(Long)
2026-01-07T15:55:05.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22b9711c]
2026-01-07T15:55:05.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:55:05.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.360+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.360+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8dd345]
2026-01-07T15:55:05.361+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599cbbf7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@156978298 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:05.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long)
2026-01-07T15:55:05.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:05.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:05.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:05.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b9c31c7]
2026-01-07T15:55:05.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:05.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:55:05.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:05.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599cbbf7]
2026-01-07T15:55:05.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:05.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:05.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe61e9f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f5f0a5] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1670989207 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2054328876 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:05.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:05.371+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:55:05.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:55:05.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe61e9f]
2026-01-07T15:55:05.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f5f0a5]
2026-01-07T15:55:05.378+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.379+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.379+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-07T15:55:05.381+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d65488] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518271663 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:05.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.387+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:55:05.387+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.392+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d65488]
2026-01-07T15:55:05.393+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.393+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a07e08c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.394+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@717591888 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:05.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:05.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:55:05.394+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:55:05.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:55:05.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:55:05.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:55:05.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e5a8b3] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1896855649 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:05.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:05.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:55:05.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:55:05.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:55:05.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 2
2026-01-07T15:55:05.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e5a8b3]
2026-01-07T15:55:05.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4406a8ff]
2026-01-07T15:55:05.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a07e08c]
2026-01-07T15:55:05.411+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.413+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e656d4c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c826929] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c1a4bf5] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@54059523 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:05.417+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1832020758 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:05.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@163372410 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:05.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.428+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.428+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e656d4c]
2026-01-07T15:55:05.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c826929]
2026-01-07T15:55:05.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c1a4bf5]
2026-01-07T15:55:05.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f5c8ab] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13770b1d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:55:05.437+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1647303700 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:05.442+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@473162619 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:05.444+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:05.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:05.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:05.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 8(Long)
2026-01-07T15:55:05.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:05.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:05.463+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:05.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:05.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:05.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:55:05.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41621cdd] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f5c8ab]
2026-01-07T15:55:05.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856149338 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:05.480+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d05adf3] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:55:05.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-07T15:55:05.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1957466216 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:05.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13770b1d]
2026-01-07T15:55:05.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506fa537] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2079028164 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:05.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:05.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-07T15:55:05.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:05.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41621cdd]
2026-01-07T15:55:05.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe563c2] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2117076503 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.526+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d05adf3]
2026-01-07T15:55:05.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterI (truncated)...]
2026-01-07T15:55:05.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe563c2]
2026-01-07T15:55:05.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:55:05.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@506fa537]
2026-01-07T15:55:05.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749e0f60] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1893828930 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20360f10] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:05.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232607804 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:05.547+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 3(Long), 2(Long)
2026-01-07T15:55:05.547+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.547+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.549+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-07T15:55:05.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749e0f60]
2026-01-07T15:55:05.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18ed7ace] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@478970812 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.552+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20360f10]
2026-01-07T15:55:05.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564c6aff] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184018857 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:05.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:05.564+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:05.555+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18ed7ace]
2026-01-07T15:55:05.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=3, drafterId=2 (truncated)...]
2026-01-07T15:55:05.580+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.583+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:55:05.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564c6aff]
2026-01-07T15:55:05.589+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff70635] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052691622 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:05.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.597+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff70635]
2026-01-07T15:55:05.598+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:05.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:05.601+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:55:05.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-07T15:55:05.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:55:05.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:55:05.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:05.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d25bf4c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1695066396 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.613+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d25bf4c]
2026-01-07T15:55:05.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59d39605] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1502387628 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59d39605]
2026-01-07T15:55:05.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e76ee7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.625+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396810112 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:05.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:05.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:55:05.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e76ee7]
2026-01-07T15:55:05.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7392776d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588576174 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7392776d]
2026-01-07T15:55:05.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b870b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1733468554 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:05.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:05.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:55:05.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b870b]
2026-01-07T15:55:05.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@263f4e57] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.654+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2110203460 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:05.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:05.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:55:05.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@263f4e57]
2026-01-07T15:55:05.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52958c53] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@243543456 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52958c53]
2026-01-07T15:55:05.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1939b74d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739609901 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:05.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:05.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:55:05.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1939b74d]
2026-01-07T15:55:05.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:05.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cde1525] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:05.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022263852 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:05.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:05.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:05.789+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:05.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cde1525]
2026-01-07T15:55:05.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:05.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:05.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:16.245+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=2&size=10
2026-01-07T15:55:16.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=2&size=10
2026-01-07T15:55:16.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-07T15:55:16.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=2&size=10
2026-01-07T15:55:16.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=2&size=10", parameters={masked}
2026-01-07T15:55:16.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:16.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:16.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4dcba9] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:16.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2007709209 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:16.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:16.257+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:16.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:16.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4dcba9]
2026-01-07T15:55:16.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:16.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a32f1f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:16.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1253001580 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:16.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:16.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:16.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:16.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a32f1f]
2026-01-07T15:55:16.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:16.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31892fc] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:16.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@762154583 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:16.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:16.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:16.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:55:16.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31892fc]
2026-01-07T15:55:16.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:16.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3c2483] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:16.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1811205258 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:16.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:16.280+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:16.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:16.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3c2483]
2026-01-07T15:55:16.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:16.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7df15fc1] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:16.285+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@816080064 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:16.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:16.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:16.292+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:55:16.292+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7df15fc1]
2026-01-07T15:55:16.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:16.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea5fa8] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:16.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2006058787 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:16.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:16.295+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:16.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:55:16.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea5fa8]
2026-01-07T15:55:16.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:16.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523a1249] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:16.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@8323257 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:16.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:16.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:16.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:16.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523a1249]
2026-01-07T15:55:16.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:16.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c30175e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:16.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513472203 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:16.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:16.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:16.308+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:55:16.308+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c30175e]
2026-01-07T15:55:16.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:16.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c75a8c4] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:16.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14927603 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:16.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:16.311+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:16.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:16.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c75a8c4]
2026-01-07T15:55:16.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:16.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:16.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:17.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:55:17.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/expenses
2026-01-07T15:55:17.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:55:17.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:55:17.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:17.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:17.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7357b698] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:17.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@641630697 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:17.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:17.443+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:17.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:17.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7357b698]
2026-01-07T15:55:17.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:17.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ccfea75] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:17.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1315033971 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:17.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:17.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:17.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:17.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ccfea75]
2026-01-07T15:55:17.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:17.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8f0683] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:17.461+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1052824837 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:17.461+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:17.463+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:17.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:55:17.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8f0683]
2026-01-07T15:55:17.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:17.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e1a06f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:17.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716456334 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:17.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:17.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:17.474+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:17.474+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e1a06f]
2026-01-07T15:55:17.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:17.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7357b7d2] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:17.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@231441167 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:17.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:17.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:17.480+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:55:17.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7357b7d2]
2026-01-07T15:55:17.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:17.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ee88ee] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:17.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2143895590 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:17.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:17.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), test_user1(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:17.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 12
2026-01-07T15:55:17.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ee88ee]
2026-01-07T15:55:17.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:17.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@afb0453] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:17.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1326924826 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:17.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:17.494+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:17.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:17.496+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@afb0453]
2026-01-07T15:55:17.496+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:17.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d37e7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:17.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1575379909 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:17.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:17.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 24(Long), 8(Long), 7(Long), 6(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:17.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 12
2026-01-07T15:55:17.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d37e7]
2026-01-07T15:55:17.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:17.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ce1cd8] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:17.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1677382025 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:17.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:17.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-07T15:55:17.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:17.508+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ce1cd8]
2026-01-07T15:55:17.509+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:17.510+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:17.511+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:23.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-07T15:55:23.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-07T15:55:23.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: USER, companyId: 1, uri: /api/logout
2026-01-07T15:55:23.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-07T15:55:23.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-07T15:55:23.125+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-07T15:55:23.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIyIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-07T15:55:23.140+09:00  INFO 17088 --- [http-nio-8080-exec-1] SECURITY                                 : LOGOUT userId=2
2026-01-07T15:55:23.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:23.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-07T15:55:23.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:27.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-07T15:55:27.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T15:55:27.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-07T15:55:27.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-07T15:55:27.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-07T15:55:27.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user3, password=1234)]
2026-01-07T15:55:27.816+09:00  INFO 17088 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user3
2026-01-07T15:55:27.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:27.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14443a46] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:27.823+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@96979424 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:27.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-07T15:55:27.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user3(String)
2026-01-07T15:55:27.826+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-07T15:55:27.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14443a46]
2026-01-07T15:55:27.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:27.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a3420a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:27.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@79431624 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:27.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-07T15:55:27.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-07T15:55:27.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-07T15:55:27.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12a3420a]
2026-01-07T15:55:27.913+09:00  INFO 17088 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 로그인 성공 - userId: 4, role: ACCOUNTANT, companyId: 1
2026-01-07T15:55:27.914+09:00  INFO 17088 --- [http-nio-8080-exec-3] SECURITY                                 : LOGIN_SUCCESS userId=4 username=test_user3 role=ACCOUNTANT
2026-01-07T15:55:27.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:27.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=4, username=test_user3, password (truncated)...]
2026-01-07T15:55:27.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.226+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-07T15:55:28.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-07T15:55:28.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-07T15:55:28.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-07T15:55:28.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-07T15:55:28.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-07T15:55:28.364+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:28.364+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:28.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:28.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T15:55:28.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T15:55:28.376+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-07T15:55:28.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-07T15:55:28.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5617b470] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:28.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:28.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:28.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:28.387+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:28.378+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-07T15:55:28.379+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T15:55:28.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-07T15:55:28.391+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a56a35e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:28.391+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:28.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T15:55:28.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T15:55:28.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@7445645 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-07T15:55:28.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:28.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T15:55:28.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T15:55:28.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:28.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-07T15:55:28.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T15:55:28.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@100797467 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T15:55:28.411+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:28.411+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:28.411+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611545fa] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.412+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T15:55:28.412+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-07T15:55:28.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:28.412+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:55:28.413+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:55:28.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266653815 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:28.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-07T15:55:28.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a56a35e]
2026-01-07T15:55:28.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:55:28.417+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7752f775] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.425+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1843061329 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:55:28.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:28.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.419+09:00  WARN 17088 --- [http-nio-8080-exec-10] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:55:28.426+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.426+09:00  WARN 17088 --- [http-nio-8080-exec-7] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:55:28.426+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-07T15:55:28.428+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:28.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:28.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:55:28.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5617b470]
2026-01-07T15:55:28.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:55:28.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:55:28.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:55:28.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.443+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T15:55:28.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:28.447+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:55:28.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7752f775]
2026-01-07T15:55:28.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-07T15:55:28.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611545fa]
2026-01-07T15:55:28.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@726f28e5] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.453+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1065522539 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:28.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:55:28.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-07T15:55:28.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.461+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T15:55:28.461+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36497fde] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.463+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T15:55:28.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1447087933 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T15:55:28.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T15:55:28.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T15:55:28.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-07T15:55:28.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:55:28.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T15:55:28.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T15:55:28.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T15:55:28.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:28.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:55:28.498+09:00  WARN 17088 --- [http-nio-8080-exec-1] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:55:28.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T15:55:28.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:28.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:55:28.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:55:28.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:28.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:55:28.509+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:55:28.509+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:28.509+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:55:28.510+09:00  WARN 17088 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:55:28.511+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:28.512+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T15:55:28.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:55:28.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@177cef8b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36497fde]
2026-01-07T15:55:28.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@726f28e5]
2026-01-07T15:55:28.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-07T15:55:28.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:55:28.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1689570464 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T15:55:28.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:55:28.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:28.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4331a88d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9a4cac] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.524+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1345941306 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:28.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T15:55:28.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T15:55:28.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:28.523+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056671930 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.524+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.525+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T15:55:28.525+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:28.526+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:28.526+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-07T15:55:28.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T15:55:28.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:28.528+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:28.528+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T15:55:28.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@177cef8b]
2026-01-07T15:55:28.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:55:28.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:28.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T15:55:28.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:55:28.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b9a4cac]
2026-01-07T15:55:28.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T15:55:28.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:28.533+09:00  WARN 17088 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:55:28.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.535+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e993c5] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T15:55:28.535+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.535+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@10441080 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:28.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T15:55:28.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:55:28.543+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.544+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T15:55:28.544+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:55:28.545+09:00  WARN 17088 --- [http-nio-8080-exec-8] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T15:55:28.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:55:28.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.549+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T15:55:28.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:28.552+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4331a88d]
2026-01-07T15:55:28.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T15:55:28.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e993c5]
2026-01-07T15:55:28.552+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T15:55:28.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11618774] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1599746069 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.556+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:28.557+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.558+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.558+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.561+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:28.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:28.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11618774]
2026-01-07T15:55:28.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:28.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:28.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4765baaa] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:28.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1512234773 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8171cc] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1543751472 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:28.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:28.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:28.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:28.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4765baaa]
2026-01-07T15:55:28.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f13df73] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:28.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@894013137 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d8171cc]
2026-01-07T15:55:28.579+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:28.579+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3910f8da] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:28.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1601827109 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3910f8da]
2026-01-07T15:55:28.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:28.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157053ae] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f13df73]
2026-01-07T15:55:28.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@731430898 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ff1c8b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:28.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1490460800 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:28.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157053ae]
2026-01-07T15:55:28.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ff1c8b]
2026-01-07T15:55:28.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a55d7d0] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034882071 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21679490] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075695475 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:28.597+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.597+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a55d7d0]
2026-01-07T15:55:28.598+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:28.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:28.601+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21679490]
2026-01-07T15:55:28.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:28.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@885d843] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.606+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:28.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358293207 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:28.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:28.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:28.613+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.614+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3196751] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992594230 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:28.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@885d843]
2026-01-07T15:55:28.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:28.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:28.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:28.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-07T15:55:28.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3196751]
2026-01-07T15:55:28.630+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:28.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-07T15:55:28.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d765b48] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1704821336 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-07T15:55:28.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:28.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cdf886f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@84959425 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d765b48]
2026-01-07T15:55:28.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f7a6470] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355401932 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:28.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cdf886f]
2026-01-07T15:55:28.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a5d0c9] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@70888642 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:28.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f7a6470]
2026-01-07T15:55:28.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@797a8308] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1698640307 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:28.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a5d0c9]
2026-01-07T15:55:28.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37cd25a3] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@491034635 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:28.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:28.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@797a8308]
2026-01-07T15:55:28.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:28.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:28.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:28.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:28.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:28.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37cd25a3]
2026-01-07T15:55:28.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:28.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:28.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18a0ee19] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176383635 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421530cc] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@251598975 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:28.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:28.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:28.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18a0ee19]
2026-01-07T15:55:28.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3870f722] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:28.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@666834451 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421530cc]
2026-01-07T15:55:28.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:28.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757764f9] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@504347083 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:28.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:28.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3870f722]
2026-01-07T15:55:28.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74b151f2] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757764f9]
2026-01-07T15:55:28.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1262969249 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:28.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ef0a7f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:28.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1492251895 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:28.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:28.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:28.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ef0a7f]
2026-01-07T15:55:28.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:28.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74b151f2]
2026-01-07T15:55:28.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7861e7f2] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@380876403 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:28.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@158237c1] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1807927874 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@158237c1]
2026-01-07T15:55:28.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7861e7f2]
2026-01-07T15:55:28.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308e7390] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:28.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@884369023 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:28.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:28.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@308e7390]
2026-01-07T15:55:28.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155808dc] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1451883284 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@155808dc]
2026-01-07T15:55:28.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.753+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:28.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:28.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-07T15:55:28.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:28.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-07T15:55:28.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-07T15:55:28.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:28.765+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.765+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7bee5b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@381705356 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.768+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7bee5b]
2026-01-07T15:55:28.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37df4f0f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989637785 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.777+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37df4f0f]
2026-01-07T15:55:28.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2499d737] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1777554332 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:28.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:28.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:28.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2499d737]
2026-01-07T15:55:28.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de44f45] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@397283233 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de44f45]
2026-01-07T15:55:28.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e792793] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1907936126 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:28.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:28.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e792793]
2026-01-07T15:55:28.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c7a35c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@65357288 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:28.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:28.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:28.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c7a35c]
2026-01-07T15:55:28.811+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.811+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42c4e1c1] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465598342 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42c4e1c1]
2026-01-07T15:55:28.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac4f793] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1869338083 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:28.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:28.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:28.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac4f793]
2026-01-07T15:55:28.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:28.826+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@585b351e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:28.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963866601 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:28.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:28.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:28.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:28.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@585b351e]
2026-01-07T15:55:28.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:28.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:28.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.392+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:30.393+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:30.393+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:30.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:30.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:30.403+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:30.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:55:30.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:55:30.403+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:30.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:55:30.403+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:30.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:30.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:30.411+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:55:30.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:30.424+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:30.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:30.426+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:55:30.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:55:30.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:55:30.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:30.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:30.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:30.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac6672a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:55:30.442+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.443+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a3874f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:30.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.447+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cba411d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:55:30.447+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c54d344] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1755455329 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@972702677 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:30.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1834976932 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:30.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:30.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:30.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@50889317 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:30.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:30.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3e53bf] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:30.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:30.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621689414 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:30.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:30.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cba411d]
2026-01-07T15:55:30.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:30.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T15:55:30.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac6672a]
2026-01-07T15:55:30.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c54d344]
2026-01-07T15:55:30.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a3874f]
2026-01-07T15:55:30.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@724f17ff] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea93944] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969069115 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:30.475+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.475+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.473+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:30.473+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557fe92f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.474+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@136606997 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.475+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.475+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3e53bf]
2026-01-07T15:55:30.475+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1619916008 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.481+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:30.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3062c001] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@609205150 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:30.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:30.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@724f17ff]
2026-01-07T15:55:30.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea93944]
2026-01-07T15:55:30.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@557fe92f]
2026-01-07T15:55:30.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:30.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:30.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@705fea18] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb10cb7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e656c5c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:30.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2049305347 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:30.494+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.494+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1818586524 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@888784942 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.496+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.496+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:30.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3062c001]
2026-01-07T15:55:30.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643adc3c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:30.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:30.499+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T15:55:30.499+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@328460606 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.499+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54149987] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:30.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:30.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1917860300 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:30.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T15:55:30.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:30.508+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb10cb7]
2026-01-07T15:55:30.509+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:30.509+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e656c5c]
2026-01-07T15:55:30.510+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:30.510+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:30.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:30.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@705fea18]
2026-01-07T15:55:30.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f08480c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b981d7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643adc3c]
2026-01-07T15:55:30.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@747583470 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938494160 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35041c04] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973356950 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:30.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:30.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.524+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:30.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.528+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:30.529+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b981d7]
2026-01-07T15:55:30.529+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f08480c]
2026-01-07T15:55:30.529+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35041c04]
2026-01-07T15:55:30.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:30.530+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.531+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.531+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.531+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:30.531+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:30.531+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T15:55:30.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:30.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2e0627] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54149987]
2026-01-07T15:55:30.532+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:30.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@434102170 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:30.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.535+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:30.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4719ad6d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4193dac6] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.544+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:55:30.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:30.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:30.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@926010536 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:30.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@349709504 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:30.547+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:55:30.547+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.548+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:30.548+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:30.549+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:55:30.549+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:30.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:30.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:30.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:55:30.552+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.552+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2e0627]
2026-01-07T15:55:30.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:55:30.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce23cad] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.560+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.561+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1292895210 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.561+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4719ad6d]
2026-01-07T15:55:30.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:30.562+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8abb05f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212c7f96] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:30.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.564+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4193dac6]
2026-01-07T15:55:30.564+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959301203 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:30.564+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1365036175 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38408274] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:30.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:30.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:30.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@842543828 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:30.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:30.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:30.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:30.580+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce23cad]
2026-01-07T15:55:30.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:30.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:30.583+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c03582] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@161119459 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:30.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:30.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8abb05f]
2026-01-07T15:55:30.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38408274]
2026-01-07T15:55:30.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748aaaed] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T15:55:30.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc31ac3] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@569820523 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:30.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@212c7f96]
2026-01-07T15:55:30.598+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147517091 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:30.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:30.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66707932] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c03582]
2026-01-07T15:55:30.601+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:30.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@618818213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@748aaaed]
2026-01-07T15:55:30.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20bf8008] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e4552a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963380152 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176000249 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:30.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:30.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc31ac3]
2026-01-07T15:55:30.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:30.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:30.625+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368f0ed] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66707932]
2026-01-07T15:55:30.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1777410942 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:30.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e11fa3c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@458073381 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:30.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T15:55:30.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20bf8008]
2026-01-07T15:55:30.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a77756b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:30.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e4552a]
2026-01-07T15:55:30.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T15:55:30.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1981026285 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368f0ed]
2026-01-07T15:55:30.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e11fa3c]
2026-01-07T15:55:30.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b3631b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504cd9c2] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0e017d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1631268770 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:30.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561842669 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@178618313 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:30.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a77756b]
2026-01-07T15:55:30.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:30.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b3631b]
2026-01-07T15:55:30.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:30.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:30.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:30.678+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504cd9c2]
2026-01-07T15:55:30.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0e017d]
2026-01-07T15:55:30.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:30.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:55:30.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:30.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T15:55:30.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba4a610] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.693+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:30.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:30.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@362762224 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:30.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:30.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:55:30.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:30.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:55:30.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:30.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f88195] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba4a610]
2026-01-07T15:55:30.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@894038353 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2751d533] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:30.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:30.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1857809121 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:30.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:30.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:30.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:30.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:30.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2751d533]
2026-01-07T15:55:30.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:55:30.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f88195]
2026-01-07T15:55:30.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:30.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8960be] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17952b0] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@307806897 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c8e4a52] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@126586659 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2120725699 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17952b0]
2026-01-07T15:55:30.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8960be]
2026-01-07T15:55:30.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c8e4a52]
2026-01-07T15:55:30.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.746+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63503bd9] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c614fe] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5f9b32] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678889937 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1085939400 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@306022449 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:30.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:30.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:30.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:30.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5f9b32]
2026-01-07T15:55:30.765+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63503bd9]
2026-01-07T15:55:30.765+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:30.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b6a53e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c614fe]
2026-01-07T15:55:30.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1faf9f0f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.768+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2019568913 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.768+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.768+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2109993424 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:30.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:30.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195c775f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.777+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:30.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@431874414 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:30.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1faf9f0f]
2026-01-07T15:55:30.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@195c775f]
2026-01-07T15:55:30.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28b6a53e]
2026-01-07T15:55:30.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@547faf6] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:30.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cb66c6] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2145092494 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902412724 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:30.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:30.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cb66c6]
2026-01-07T15:55:30.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@547faf6]
2026-01-07T15:55:30.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583f363c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffad5fe] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.806+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@724666027 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902831805 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:30.811+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:30.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:30.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:30.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583f363c]
2026-01-07T15:55:30.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:30.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ffad5fe]
2026-01-07T15:55:30.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fec636a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2118328445 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a782dd] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.826+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:30.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@464251474 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:30.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:30.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a782dd]
2026-01-07T15:55:30.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fec636a]
2026-01-07T15:55:30.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6661ce02] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19db842d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1512703639 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1737772193 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:30.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6661ce02]
2026-01-07T15:55:30.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@631db9f3] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@191134284 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:30.862+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:30.862+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19db842d]
2026-01-07T15:55:30.862+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:30.863+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5436f528] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:30.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294250863 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:30.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@631db9f3]
2026-01-07T15:55:30.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:30.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508740fd] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:30.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1591454015 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:30.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:30.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5436f528]
2026-01-07T15:55:30.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:30.871+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:30.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:30.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508740fd]
2026-01-07T15:55:30.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:30.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:30.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:30.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:33.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:33.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:33.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/25
2026-01-07T15:55:33.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/25
2026-01-07T15:55:33.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:55:33.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:33.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:33.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:55:33.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/25
2026-01-07T15:55:33.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:33.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:33.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:33.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:55:33.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/25
2026-01-07T15:55:33.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:33.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:33.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:33.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:55:33.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/25
2026-01-07T15:55:33.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:33.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a974de1] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:33.923+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:55:33.924+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/25", parameters={}
2026-01-07T15:55:33.925+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:33.927+09:00  INFO 17088 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T15:55:33.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:55:33.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7658f435] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:33.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227336279 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:33.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:33.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:33.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:33.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@910fc45] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:33.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f0abffc] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:33.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:33.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1664746361 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:33.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:33.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:33.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1884818190 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:33.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@719135025 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:33.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:33.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a974de1]
2026-01-07T15:55:33.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:55:33.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:55:33.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:33.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:33.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 25(Long), 1(Long)
2026-01-07T15:55:33.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbbdc0c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:33.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:33.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658080650 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:33.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7658f435]
2026-01-07T15:55:33.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:33.958+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:33.960+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:33.960+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:33.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:33.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:55:33.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:33.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f0abffc]
2026-01-07T15:55:33.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bbbdc0c]
2026-01-07T15:55:33.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:33.969+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:33.969+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7918fdf8] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:33.969+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63bdebb1] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:33.970+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1656811742 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:33.970+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1178796150 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:33.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:33.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:55:33.977+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:33.977+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 25(Long), 1(Long)
2026-01-07T15:55:33.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T15:55:33.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-07T15:55:33.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:33.984+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@910fc45]
2026-01-07T15:55:33.984+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7918fdf8]
2026-01-07T15:55:33.984+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63bdebb1]
2026-01-07T15:55:33.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:33.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:33.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:33.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T15:55:33.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c0a482] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:33.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39a0f2de] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:33.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:33.992+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638156127 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:33.993+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902587960 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:33.994+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:55:33.995+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:33.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 25(Long), 1(Long)
2026-01-07T15:55:33.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:33.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:55:34.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:34.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:55:34.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39a0f2de]
2026-01-07T15:55:34.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:55:34.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:34.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:55:34.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:34.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:55:34.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:34.009+09:00  INFO 17088 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T15:55:34.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:34.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e3f6d6] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:34.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-07T15:55:34.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18c0a482]
2026-01-07T15:55:34.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:34.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e68194a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:34.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1125208753 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:34.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1165388300 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:34.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:55:34.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:55:34.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 25(Long), 1(Long)
2026-01-07T15:55:34.026+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:34.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:55:34.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e68194a]
2026-01-07T15:55:34.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T15:55:34.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:34.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24e3f6d6]
2026-01-07T15:55:34.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cddd6a5] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:34.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:34.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585181757 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:34.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T15:55:34.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:34.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:34.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:34.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:34.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cddd6a5]
2026-01-07T15:55:34.042+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:34.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=25, drafterId=4, r (truncated)...]
2026-01-07T15:55:34.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:34.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/25
2026-01-07T15:55:34.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/25
2026-01-07T15:55:34.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/25
2026-01-07T15:55:34.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/25", parameters={}
2026-01-07T15:55:34.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:55:34.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:34.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c64eff0] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:34.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1400942530 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:34.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:55:34.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 25(Long), 1(Long)
2026-01-07T15:55:34.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:55:34.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c64eff0]
2026-01-07T15:55:34.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:34.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1598e642] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:34.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1581809774 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:34.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:55:34.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 25(Long), 1(Long)
2026-01-07T15:55:34.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-07T15:55:34.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1598e642]
2026-01-07T15:55:34.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:34.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701434cf] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:34.086+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585918073 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:34.086+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:55:34.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 25(Long), 1(Long)
2026-01-07T15:55:34.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 3
2026-01-07T15:55:34.097+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701434cf]
2026-01-07T15:55:34.097+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:34.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3605f26d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:34.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1734744622 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:34.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:55:34.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 25(Long), 1(Long)
2026-01-07T15:55:34.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:55:34.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3605f26d]
2026-01-07T15:55:34.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:34.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@705e1a79] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:34.115+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1766918277 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:34.115+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:34.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:34.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:34.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@705e1a79]
2026-01-07T15:55:34.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:34.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=25, drafterId=4, r (truncated)...]
2026-01-07T15:55:34.131+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:36.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:36.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:36.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:55:36.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:36.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:36.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:36.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:55:36.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:36.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:36.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:36.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:36.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:55:36.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:36.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:55:36.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:36.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:36.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:55:36.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:55:36.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:55:36.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:36.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:36.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:36.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:55:36.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e2ed4c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:36.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bd5e9b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac00805] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:55:36.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@716abbe0] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323181965 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:36.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@67274816 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:36.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171c16ea] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:36.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1071113011 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:36.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1077788456 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:36.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@403787158 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:36.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:36.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.746+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:36.746+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:36.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:36.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:36.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:36.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bd5e9b]
2026-01-07T15:55:36.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39e2ed4c]
2026-01-07T15:55:36.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f8598ca] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d24472] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.758+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac00805]
2026-01-07T15:55:36.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@567764872 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:36.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:36.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946300845 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:36.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23e10b44] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.760+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@716abbe0]
2026-01-07T15:55:36.760+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@705401699 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:36.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:36.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:36.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T15:55:36.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.765+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f8598ca]
2026-01-07T15:55:36.765+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:36.765+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@171c16ea]
2026-01-07T15:55:36.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d24472]
2026-01-07T15:55:36.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:36.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.768+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23e10b44]
2026-01-07T15:55:36.768+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12360a54] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e27b940] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306cc03c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@827753232 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:36.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:36.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@661904629 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:36.773+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@916186007 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:36.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e589f40] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:36.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:36.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:36.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@88607460 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:36.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:36.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:36.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:36.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:36.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:36.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:36.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:36.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:36.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12360a54]
2026-01-07T15:55:36.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e27b940]
2026-01-07T15:55:36.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@306cc03c]
2026-01-07T15:55:36.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a1dadb] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2008378883 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:36.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:36.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c39cc52] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391c869d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a322d7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@441636167 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:36.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:36.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e589f40]
2026-01-07T15:55:36.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@788468523 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:36.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989700575 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:36.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:36.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:36.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T15:55:36.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@707332c9] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:36.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@440074520 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:36.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a1dadb]
2026-01-07T15:55:36.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:36.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T15:55:36.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:36.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@391c869d]
2026-01-07T15:55:36.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a322d7]
2026-01-07T15:55:36.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c39cc52]
2026-01-07T15:55:36.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:36.803+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2625ac] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:36.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:36.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@601062555 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:36.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@707332c9]
2026-01-07T15:55:36.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:36.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3acec4f5] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc1a6e1] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:36.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:36.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2027406498 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:36.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:36.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:36.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902636234 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:36.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:36.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:36.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:36.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:36.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:36.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:36.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:36.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:36.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:36.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2625ac]
2026-01-07T15:55:36.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:36.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ed5b56] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ea211c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:36.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:36.842+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@58170871 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:36.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@392302845 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:36.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T15:55:36.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:36.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3acec4f5]
2026-01-07T15:55:36.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:36.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:36.845+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc1a6e1]
2026-01-07T15:55:36.845+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.845+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:36.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:36.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:55:36.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:36.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27857b90] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2137aa63] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:55:36.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1797319417 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:36.853+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1880159754 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:36.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:55:36.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:36.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:36.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:55:36.863+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:36.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:36.862+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:36.863+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:36.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ea211c]
2026-01-07T15:55:36.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:36.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:55:36.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ed5b56]
2026-01-07T15:55:36.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:36.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:36.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:36.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:36.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c04e602] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.870+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f8410e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.870+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2137aa63]
2026-01-07T15:55:36.870+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27857b90]
2026-01-07T15:55:36.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1849583577 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:36.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1044810572 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:36.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:36.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0fdb0e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd4a3b7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:36.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@569838206 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:36.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@805377606 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:36.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T15:55:36.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c04e602]
2026-01-07T15:55:36.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37f8410e]
2026-01-07T15:55:36.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd4a3b7]
2026-01-07T15:55:36.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.895+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@578a4c6c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d011c7f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4982c3ac] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0fdb0e]
2026-01-07T15:55:36.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1007098787 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:36.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1314559025 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:36.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1454298923 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:36.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:36.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:36.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ac5959] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:36.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:36.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@54017513 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:36.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:36.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:36.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:36.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:36.904+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4982c3ac]
2026-01-07T15:55:36.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@578a4c6c]
2026-01-07T15:55:36.910+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d011c7f]
2026-01-07T15:55:36.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e728791] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:36.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78691d70] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26bc991f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1630714960 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:36.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ac5959]
2026-01-07T15:55:36.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2105923389 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:36.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1662753619 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:36.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:36.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb4ffce] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T15:55:36.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852834192 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:36.927+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.927+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.928+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T15:55:36.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78691d70]
2026-01-07T15:55:36.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:36.935+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26bc991f]
2026-01-07T15:55:36.935+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e728791]
2026-01-07T15:55:36.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:36.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb4ffce]
2026-01-07T15:55:36.938+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:36.942+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:36.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:36.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:36.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@135b924b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:36.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:36.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:36.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:36.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1374524766 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:36.949+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:36.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:36.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:36.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:36.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:36.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:55:36.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:36.993+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:36.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:36.979+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:36.995+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:36.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:36.994+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:55:36.995+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:36.995+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:55:36.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:36.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:36.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:55:37.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:37.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b94d0e7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1528403006 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:37.009+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.011+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62eee62c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.012+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262867fe] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.012+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2107464628 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:37.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@710088418 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:37.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:37.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:37.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@135b924b]
2026-01-07T15:55:37.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:37.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@262867fe]
2026-01-07T15:55:37.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T15:55:37.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b02746] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:37.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918732121 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:37.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:37.045+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b94d0e7]
2026-01-07T15:55:37.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62eee62c]
2026-01-07T15:55:37.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56b1931a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a2b4bce] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.051+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1132187750 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:37.051+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2001052036 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:37.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b02746]
2026-01-07T15:55:37.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277bcd62] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973638364 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:37.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:37.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:37.076+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a2b4bce]
2026-01-07T15:55:37.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56b1931a]
2026-01-07T15:55:37.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37873fa9] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d849c0b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1730308012 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:37.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2012738530 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:37.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:37.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:37.092+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:37.092+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:37.094+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:37.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277bcd62]
2026-01-07T15:55:37.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.101+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7051a385] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.101+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@163078192 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:37.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:37.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:37.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d849c0b]
2026-01-07T15:55:37.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37873fa9]
2026-01-07T15:55:37.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef1941e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d131ddd] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@366622 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:37.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417586352 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:37.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.115+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.126+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7051a385]
2026-01-07T15:55:37.126+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7056e9d6] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@233185746 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:37.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:37.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:37.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d131ddd]
2026-01-07T15:55:37.145+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef1941e]
2026-01-07T15:55:37.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:37.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:37.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f5eebe] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:37.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176945498 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:37.162+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:37.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:37.164+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:37.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7056e9d6]
2026-01-07T15:55:37.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b4188b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1886081010 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:37.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:37.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:37.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:37.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44f5eebe]
2026-01-07T15:55:37.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.176+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a24a82c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.176+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@30358472 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:37.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:37.178+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:37.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:37.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b4188b]
2026-01-07T15:55:37.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@200bc03c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@929883382 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:37.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:37.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a24a82c]
2026-01-07T15:55:37.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606a4446] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@792786351 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:37.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@200bc03c]
2026-01-07T15:55:37.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.193+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299d29f8] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.195+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1466504919 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:37.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:37.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:37.199+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:37.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@606a4446]
2026-01-07T15:55:37.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@299d29f8]
2026-01-07T15:55:37.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e66627d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b6501d9] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@211569027 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:37.207+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1274489764 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:37.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:37.214+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:37.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:37.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.230+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e66627d]
2026-01-07T15:55:37.230+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b6501d9]
2026-01-07T15:55:37.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:37.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:37.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f3c6877] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:37.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:37.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@851742823 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:37.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:37.235+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:37.244+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:37.249+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:37.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f3c6877]
2026-01-07T15:55:37.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:37.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:37.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:40.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/20
2026-01-07T15:55:40.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/20
2026-01-07T15:55:40.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:40.149+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:40.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:55:40.199+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:40.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:40.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:40.199+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:40.207+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:40.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:55:40.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:40.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:40.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:55:40.211+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.211+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:40.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:55:40.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/20
2026-01-07T15:55:40.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/20
2026-01-07T15:55:40.273+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e663959] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.274+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:55:40.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/20
2026-01-07T15:55:40.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198f6e1e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.302+09:00  INFO 17088 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T15:55:40.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/20", parameters={}
2026-01-07T15:55:40.307+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.308+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:55:40.308+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8db8a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d499577] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052224231 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:40.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1100875922 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:40.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:40.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:40.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:40.318+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:40.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459436582 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:40.324+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:55:40.327+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@419082323 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:40.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:40.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:55:40.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:40.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:40.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 20(Long), 1(Long)
2026-01-07T15:55:40.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198f6e1e]
2026-01-07T15:55:40.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e663959]
2026-01-07T15:55:40.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:40.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.340+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T15:55:40.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:40.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@453360e5] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8db8a]
2026-01-07T15:55:40.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:40.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669575494 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:40.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:40.347+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:40.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T15:55:40.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:55:40.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:40.351+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:40.351+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d499577]
2026-01-07T15:55:40.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbd257] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:40.360+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:55:40.361+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082145400 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:40.361+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@453360e5]
2026-01-07T15:55:40.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:55:40.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:55:40.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 20(Long), 1(Long)
2026-01-07T15:55:40.364+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:55:40.364+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19938b32] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:55:40.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1199170733 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:40.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:55:40.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-07T15:55:40.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:40.366+09:00  INFO 17088 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T15:55:40.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dbd257]
2026-01-07T15:55:40.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:40.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de03fda] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.374+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68eeda9b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.375+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:40.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2117199035 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:40.378+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19938b32]
2026-01-07T15:55:40.379+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:55:40.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 20(Long), 1(Long)
2026-01-07T15:55:40.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8a6d85] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@692431165 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:40.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1058805648 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:40.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:40.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:55:40.393+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:40.394+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:40.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:40.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8a6d85]
2026-01-07T15:55:40.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:40.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:40.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T15:55:40.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:40.403+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de03fda]
2026-01-07T15:55:40.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:40.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T15:55:40.412+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:40.413+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T15:55:40.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68eeda9b]
2026-01-07T15:55:40.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199c254f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@121114341 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:40.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:55:40.430+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 20(Long), 1(Long)
2026-01-07T15:55:40.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T15:55:40.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199c254f]
2026-01-07T15:55:40.437+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.444+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@447cb480] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1018316573 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:40.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:40.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:40.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:40.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@447cb480]
2026-01-07T15:55:40.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:40.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=20, drafterId=4, r (truncated)...]
2026-01-07T15:55:40.453+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:40.463+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/20
2026-01-07T15:55:40.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/20
2026-01-07T15:55:40.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/20
2026-01-07T15:55:40.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/20", parameters={}
2026-01-07T15:55:40.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:55:40.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611d3f0a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@614804225 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:40.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:55:40.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 20(Long), 1(Long)
2026-01-07T15:55:40.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:55:40.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@611d3f0a]
2026-01-07T15:55:40.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.597+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6845e243] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.598+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621648686 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:40.598+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:55:40.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 20(Long), 1(Long)
2026-01-07T15:55:40.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-07T15:55:40.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6845e243]
2026-01-07T15:55:40.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.625+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1278bfeb] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1432883229 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:40.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:55:40.629+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 20(Long), 1(Long)
2026-01-07T15:55:40.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T15:55:40.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1278bfeb]
2026-01-07T15:55:40.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e829f34] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164820200 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:40.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:55:40.634+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 20(Long), 1(Long)
2026-01-07T15:55:40.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-07T15:55:40.638+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e829f34]
2026-01-07T15:55:40.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:40.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb38eef] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:40.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1954733362 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:40.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:40.641+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:40.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:40.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb38eef]
2026-01-07T15:55:40.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:40.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=20, drafterId=4, r (truncated)...]
2026-01-07T15:55:40.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:45.597+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:45.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:55:45.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:45.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:45.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:55:45.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:45.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:45.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:45.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:45.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:55:45.606+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:45.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:55:45.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:45.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:45.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:55:45.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:45.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:55:45.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:45.613+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:45.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:45.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:55:45.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:55:45.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:45.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:55:45.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:45.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.629+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f93ef58] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ce747e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@310f2cf8] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.629+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75b66565] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.630+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e102b23] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862753384 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:45.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@316564408 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:45.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@50176331 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:45.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071820036 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:45.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:45.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969570661 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:45.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:45.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:45.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:45.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:45.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:45.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:45.652+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f93ef58]
2026-01-07T15:55:45.652+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@310f2cf8]
2026-01-07T15:55:45.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T15:55:45.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ce747e]
2026-01-07T15:55:45.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:45.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75b66565]
2026-01-07T15:55:45.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3937d024] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e102b23]
2026-01-07T15:55:45.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:45.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c47f672] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1106184218 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:45.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507f0b96] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:45.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@443019163 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:45.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc18a5c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064592710 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:45.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@799131508 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.693+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.693+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:45.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:45.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:45.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:45.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507f0b96]
2026-01-07T15:55:45.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c47f672]
2026-01-07T15:55:45.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3937d024]
2026-01-07T15:55:45.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:45.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc18a5c]
2026-01-07T15:55:45.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c85af4] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f34177] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ffb8fdc] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4800ab8b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@214160960 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:45.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ceafbfc] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620022173 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:45.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026555127 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:45.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689637525 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:45.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:45.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@470359895 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:45.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:45.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:45.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T15:55:45.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:45.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:45.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:45.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:45.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:45.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:45.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T15:55:45.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:45.758+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f34177]
2026-01-07T15:55:45.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24c85af4]
2026-01-07T15:55:45.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ffb8fdc]
2026-01-07T15:55:45.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:45.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:45.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56beaeb6] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23fad944] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.777+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed8585f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4800ab8b]
2026-01-07T15:55:45.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ceafbfc]
2026-01-07T15:55:45.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@453752303 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:45.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1157838901 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:45.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1308540727 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:45.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:45.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:45.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b787d5a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:45.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1895193298 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:55:45.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:55:45.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:55:45.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23fad944]
2026-01-07T15:55:45.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:55:45.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:45.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56beaeb6]
2026-01-07T15:55:45.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:55:45.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T15:55:45.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed8585f]
2026-01-07T15:55:45.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b787d5a]
2026-01-07T15:55:45.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:45.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:45.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.811+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:55:45.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:45.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf18ccf] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a44a96] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:55:45.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec771ba] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.826+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:45.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@350761585 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:45.828+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1796401309 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:45.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:55:45.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@115171221 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:55:45.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:45.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:55:45.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:45.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:45.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:55:45.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:45.842+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:55:45.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:45.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:45.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:45.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aed06b3] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:45.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@347580316 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:45.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:45.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:45.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:45.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:55:45.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:45.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:45.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ccd1a4] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec771ba]
2026-01-07T15:55:45.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bf18ccf]
2026-01-07T15:55:45.862+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a44a96]
2026-01-07T15:55:45.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59a24786] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1161146633 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:45.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:45.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1018644190 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:45.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:45.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68431d0d] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:55:45.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:45.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:45.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:45.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572662046 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:45.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:45.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:45.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:45.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68431d0d]
2026-01-07T15:55:45.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:45.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64ccd1a4]
2026-01-07T15:55:45.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8dd30b6] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022109141 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41cb185e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:45.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1133031474 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:45.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59a24786]
2026-01-07T15:55:45.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c229184] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@938964977 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:45.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.892+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T15:55:45.892+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aed06b3]
2026-01-07T15:55:45.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c97257c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312646339 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:45.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c229184]
2026-01-07T15:55:45.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8dd30b6]
2026-01-07T15:55:45.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19fbcc33] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a27ae3e] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1899872313 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:45.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@463370572 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:45.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:45.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:45.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:45.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41cb185e]
2026-01-07T15:55:45.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c4beca1] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1440421022 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:45.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:45.901+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:45.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:45.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:45.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c4beca1]
2026-01-07T15:55:45.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19fbcc33]
2026-01-07T15:55:45.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1728e19a] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e095bb6] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76884282 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:55:45.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164924432 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:55:45.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:45.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c97257c]
2026-01-07T15:55:45.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a27ae3e]
2026-01-07T15:55:45.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56fe96e7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568d76f7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1405609345 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:45.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@295461958 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:45.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T15:55:45.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:45.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e095bb6]
2026-01-07T15:55:45.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T15:55:45.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568d76f7]
2026-01-07T15:55:45.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1728e19a]
2026-01-07T15:55:45.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56fe96e7]
2026-01-07T15:55:45.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:45.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:45.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:45.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:45.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:45.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:45.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c725e0f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:45.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:45.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1318692040 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:45.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:45.935+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:55:45.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:45.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:45.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:55:45.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:55:45.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:45.960+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.962+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df76f2f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@504945583 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:45.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.965+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:45.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:55:45.967+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:55:45.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:55:45.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:55:45.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:45.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f14481b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:45.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@907718130 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:45.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:45.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.009+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:55:46.011+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:55:46.012+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:55:46.012+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:55:46.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:55:46.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.025+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.025+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c725e0f]
2026-01-07T15:55:46.026+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df76f2f]
2026-01-07T15:55:46.026+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c85e5d9] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:46.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f93f6f] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.045+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1637109553 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:46.045+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T15:55:46.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1058123112 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:46.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:55:46.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:46.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:55:46.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f14481b]
2026-01-07T15:55:46.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:55:46.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77bd14d8] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59f93f6f]
2026-01-07T15:55:46.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c85e5d9]
2026-01-07T15:55:46.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794428580 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:46.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9dfdfb7] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.076+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@341884cf] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.076+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@424516516 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:46.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@934286520 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:46.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:46.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:46.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77bd14d8]
2026-01-07T15:55:46.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56393752] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228792473 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:46.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.094+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:46.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:46.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@341884cf]
2026-01-07T15:55:46.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:46.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9dfdfb7]
2026-01-07T15:55:46.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3100f111] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.108+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6c8e02] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095644418 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:46.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572462239 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:46.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:46.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:55:46.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:55:46.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:46.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6c8e02]
2026-01-07T15:55:46.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3100f111]
2026-01-07T15:55:46.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56393752]
2026-01-07T15:55:46.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba2c97b] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7332c1da] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18560c4c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1701863059 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:46.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1166814932 wrapping com.mysql.cj.jdbc.ConnectionImpl@254debc4] will not be managed by Spring
2026-01-07T15:55:46.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@130694067 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:46.125+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:46.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:46.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:46.176+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7332c1da]
2026-01-07T15:55:46.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba2c97b]
2026-01-07T15:55:46.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:46.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18560c4c]
2026-01-07T15:55:46.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:55:46.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cc4c20] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:46.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20935f01] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@77112179 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:46.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@143594291 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:46.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:46.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:46.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:46.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:46.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:46.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:55:46.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20935f01]
2026-01-07T15:55:46.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cc4c20]
2026-01-07T15:55:46.195+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.195+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.195+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5644dfe2] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.195+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@641e8657] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1813379452 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:46.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1063807928 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:46.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:55:46.197+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:55:46.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:55:46.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@641e8657]
2026-01-07T15:55:46.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5644dfe2]
2026-01-07T15:55:46.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e07424] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3727a3cc] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1381789201 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:46.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1198313733 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:46.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:46.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.209+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:55:46.209+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.211+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:55:46.211+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3727a3cc]
2026-01-07T15:55:46.211+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e07424]
2026-01-07T15:55:46.212+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.212+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.213+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f6e1c] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b7c9aa] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159159418 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:46.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1203231756 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:55:46.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:55:46.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.217+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:55:46.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:55:46.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f6e1c]
2026-01-07T15:55:46.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b7c9aa]
2026-01-07T15:55:46.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:55:46.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:46.233+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b07e45] was not registered for synchronization because synchronization is not active
2026-01-07T15:55:46.234+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:46.234+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1559747393 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:55:46.235+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:55:46.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:55:46.241+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:55:46.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:55:46.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b07e45]
2026-01-07T15:55:46.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:55:46.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:55:46.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:39.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:58:39.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:58:39.989+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:58:39.995+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:58:39.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:58:39.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:40.008+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189facca] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:40.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1700748304 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:40.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:40.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:40.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:40.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189facca]
2026-01-07T15:58:40.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:40.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57d185b0] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:40.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697514033 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:40.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:40.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:40.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:40.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57d185b0]
2026-01-07T15:58:40.025+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:40.025+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68964db8] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:40.026+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@867281183 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:40.026+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:40.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:40.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:58:40.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68964db8]
2026-01-07T15:58:40.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:40.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3abe6b] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:40.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973145017 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:40.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:40.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:40.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:40.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3abe6b]
2026-01-07T15:58:40.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:40.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f943da] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:40.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@684357128 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:40.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:40.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:58:40.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:58:40.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f943da]
2026-01-07T15:58:40.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:40.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b395dd0] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:40.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@868629758 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:40.093+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:40.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:40.097+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-07T15:58:40.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b395dd0]
2026-01-07T15:58:40.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:40.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776a05e5] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:40.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@383521029 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:40.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:40.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:40.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:40.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776a05e5]
2026-01-07T15:58:40.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:40.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@677eb87d] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:40.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084017754 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:40.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:40.108+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 27(Long)
2026-01-07T15:58:40.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-07T15:58:40.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@677eb87d]
2026-01-07T15:58:40.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:40.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5d29c0] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:40.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1341316934 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:40.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:40.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:40.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:40.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d5d29c0]
2026-01-07T15:58:40.115+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:40.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:58:40.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:42.556+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/27
2026-01-07T15:58:42.559+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/27
2026-01-07T15:58:42.560+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:58:42.560+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:58:42.561+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:58:42.562+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:58:42.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:58:42.572+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:58:42.572+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:58:42.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/27
2026-01-07T15:58:42.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:58:42.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:58:42.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/27
2026-01-07T15:58:42.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:58:42.573+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:58:42.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:58:42.575+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/27
2026-01-07T15:58:42.575+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:58:42.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:58:42.579+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/27", parameters={}
2026-01-07T15:58:42.579+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:58:42.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa0e222] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.581+09:00  INFO 17088 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T15:58:42.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:58:42.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dde1b0] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c13f0db] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a3a5364] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@707418837 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:42.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:58:42.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1439200635 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:42.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@284626909 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:42.598+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:58:42.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@149224810 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:42.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:58:42.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:58:42.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:58:42.605+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:42.606+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:42.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:42.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:58:42.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa0e222]
2026-01-07T15:58:42.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:42.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:58:42.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:58:42.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T15:58:42.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:58:42.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a3a5364]
2026-01-07T15:58:42.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dde1b0]
2026-01-07T15:58:42.612+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c13f0db]
2026-01-07T15:58:42.613+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.613+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:42.613+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.614+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:42.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b24c73] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319cf4de] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T15:58:42.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2144126954 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:42.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74030538 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:42.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:42.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:58:42.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:42.625+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:58:42.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:42.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:42.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:58:42.630+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:58:42.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:58:42.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:42.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T15:58:42.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:58:42.641+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319cf4de]
2026-01-07T15:58:42.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b24c73]
2026-01-07T15:58:42.643+09:00  INFO 17088 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T15:58:42.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1524ff49] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1738a687] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f0e33c] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1128842039 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:42.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1980277191 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:42.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@614520959 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:42.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:42.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:58:42.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:58:42.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:58:42.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:42.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:42.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T15:58:42.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:58:42.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T15:58:42.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1738a687]
2026-01-07T15:58:42.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1524ff49]
2026-01-07T15:58:42.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f0e33c]
2026-01-07T15:58:42.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:42.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6bb699] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60bf484f] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T15:58:42.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246759181 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:42.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1381186982 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:42.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:58:42.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:42.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:42.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:42.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:42.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:58:42.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:42.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c6bb699]
2026-01-07T15:58:42.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60bf484f]
2026-01-07T15:58:42.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:42.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c08c5d] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:58:42.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1167992098 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:42.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:42.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:42.677+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:42.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:42.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c08c5d]
2026-01-07T15:58:42.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:42.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=27, drafterId=2, r (truncated)...]
2026-01-07T15:58:42.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:42.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/27
2026-01-07T15:58:42.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/27
2026-01-07T15:58:42.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/27
2026-01-07T15:58:42.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/27", parameters={}
2026-01-07T15:58:42.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:58:42.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.693+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf8c146] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@730651538 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:42.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:58:42.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:42.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:58:42.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf8c146]
2026-01-07T15:58:42.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3238b80f] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@259505663 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:42.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:58:42.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:42.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T15:58:42.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3238b80f]
2026-01-07T15:58:42.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b27f05e] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546178037 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:42.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:58:42.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:42.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T15:58:42.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b27f05e]
2026-01-07T15:58:42.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85516b5] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459842823 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:42.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:58:42.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:42.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:58:42.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85516b5]
2026-01-07T15:58:42.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:42.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2931e55c] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:42.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@158445169 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:42.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:42.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:42.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:42.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2931e55c]
2026-01-07T15:58:42.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:42.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=27, drafterId=2, r (truncated)...]
2026-01-07T15:58:42.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:47.307+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/27/status
2026-01-07T15:58:47.311+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing PUT /api/expenses/27/status
2026-01-07T15:58:47.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/27/status
2026-01-07T15:58:47.312+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured PUT /api/expenses/27/status
2026-01-07T15:58:47.313+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/api/expenses/27/status", parameters={}
2026-01-07T15:58:47.314+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#updateExpenseStatus(Long, StatusUpdateRequest)
2026-01-07T15:58:47.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseController.StatusUpdateRequest(status=PAID, actualPaidAmount=60000, amountDifferenceReason=nu (truncated)...]
2026-01-07T15:58:47.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.updateExpenseStatus(java.lang.Long,com.innersignature.backend.controller.ExpenseController$StatusUpdateRequest); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T15:58:47.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.updateExpenseStatus(java.lang.Long,com.innersignature.backend.controller.ExpenseController$StatusUpdateRequest); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T15:58:47.321+09:00  INFO 17088 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 지출결의서 상태 변경 요청 - expenseId: 27, userId: 4, status: PAID, actualPaidAmount: 60000
2026-01-07T15:58:47.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:47.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136950700 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will be managed by Spring
2026-01-07T15:58:47.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:58:47.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:47.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:58:47.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205] from current transaction
2026-01-07T15:58:47.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-07T15:58:47.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-07T15:58:47.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-07T15:58:47.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.345+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205] from current transaction
2026-01-07T15:58:47.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:58:47.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:47.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:58:47.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205] from current transaction
2026-01-07T15:58:47.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:58:47.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:47.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T15:58:47.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205] from current transaction
2026-01-07T15:58:47.357+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .m.E.updateExpenseDetailActualPaidAmount : ==>  Preparing: UPDATE expense_detail_tb SET actual_paid_amount = ? WHERE expense_detail_id = ? AND company_id = ?
2026-01-07T15:58:47.357+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .m.E.updateExpenseDetailActualPaidAmount : ==> Parameters: 60000(Long), 36(Long), 1(Long)
2026-01-07T15:58:47.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .m.E.updateExpenseDetailActualPaidAmount : <==    Updates: 1
2026-01-07T15:58:47.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205] from current transaction
2026-01-07T15:58:47.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] i.b.m.E.updateExpenseDetailPaymentMethod : ==>  Preparing: UPDATE expense_detail_tb SET payment_method = ? WHERE expense_detail_id = ? AND company_id = ?
2026-01-07T15:58:47.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] i.b.m.E.updateExpenseDetailPaymentMethod : ==> Parameters: CARD(String), 36(Long), 1(Long)
2026-01-07T15:58:47.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] i.b.m.E.updateExpenseDetailPaymentMethod : <==    Updates: 1
2026-01-07T15:58:47.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205] from current transaction
2026-01-07T15:58:47.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.E.updateExpenseReportStatusWithPayment : ==>  Preparing: UPDATE expense_report_tb SET status = ?, actual_paid_amount = ?, amount_difference_reason = ? WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:58:47.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.E.updateExpenseReportStatusWithPayment : ==> Parameters: PAID(String), 60000(Long), null, 27(Long), 1(Long)
2026-01-07T15:58:47.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.E.updateExpenseReportStatusWithPayment : <==    Updates: 1
2026-01-07T15:58:47.373+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.373+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.373+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.374+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ebbf205]
2026-01-07T15:58:47.379+09:00  INFO 17088 --- [http-nio-8080-exec-2] c.i.b.controller.ExpenseController       : 지출결의서 상태 변경 완료 - expenseId: 27, status: PAID
2026-01-07T15:58:47.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:47.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태 변경 완료, data=null)]
2026-01-07T15:58:47.381+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:48.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:58:48.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:58:48.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/27
2026-01-07T15:58:48.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:58:48.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:58:48.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-07T15:58:48.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:58:48.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:58:48.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/27
2026-01-07T15:58:48.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:58:48.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-07T15:58:48.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:58:48.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:58:48.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:58:48.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/27
2026-01-07T15:58:48.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:58:48.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-07T15:58:48.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:58:48.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/27", parameters={}
2026-01-07T15:58:48.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:58:48.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-07T15:58:48.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:58:48.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c5a16a] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:58:48.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:58:48.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-07T15:58:48.755+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.760+09:00  INFO 17088 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T15:58:48.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ec7533] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720b6c93] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22adabba] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.777+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65358565] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.777+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@633533520 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:48.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:58:48.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@655987366 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:48.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@906029752 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:48.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:58:48.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:48.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:58:48.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:58:48.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:48.811+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1418161087 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:48.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@656545331 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:48.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:58:48.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:58:48.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:58:48.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-07T15:58:48.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720b6c93]
2026-01-07T15:58:48.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c5a16a]
2026-01-07T15:58:48.823+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:48.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-07T15:58:48.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c6eeef] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e17da36] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.828+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:58:48.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@374557490 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:48.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728729237 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:48.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-07T15:58:48.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ec7533]
2026-01-07T15:58:48.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:58:48.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:48.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22adabba]
2026-01-07T15:58:48.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:48.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:48.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:48.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T15:58:48.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:48.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:58:48.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65358565]
2026-01-07T15:58:48.845+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T15:58:48.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-07T15:58:48.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:48.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:48.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:48.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25c6eeef]
2026-01-07T15:58:48.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:48.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e17da36]
2026-01-07T15:58:48.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T15:58:48.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:48.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:58:48.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729b6cf6] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19873329] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1622689244 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:48.863+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:58:48.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:58:48.862+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1764858949 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:48.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:48.864+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:58:48.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:48.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:58:48.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:58:48.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:58:48.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:58:48.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:58:48.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T15:58:48.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:58:48.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729b6cf6]
2026-01-07T15:58:48.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60bdd350] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:58:48.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:58:48.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052719160 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:48.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:58:48.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19873329]
2026-01-07T15:58:48.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32eb09de] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:58:48.880+09:00  INFO 17088 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T15:58:48.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465452969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:48.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:58:48.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bcb97b4] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:58:48.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ac0ae89] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1811278751 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:48.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:48.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@438465512 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:48.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:48.892+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:58:48.892+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:48.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:48.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:58:48.895+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60bdd350]
2026-01-07T15:58:48.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:58:48.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:48.901+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:58:48.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32eb09de]
2026-01-07T15:58:48.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:48.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T15:58:48.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:48.904+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ed6f3c] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.904+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bcb97b4]
2026-01-07T15:58:48.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1268922150 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:48.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ac0ae89]
2026-01-07T15:58:48.910+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:58:48.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:48.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:48.911+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:48.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:58:48.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:48.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T15:58:48.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:58:48.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:48.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:48.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:58:48.925+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:58:48.928+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:58:48.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:48.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:58:48.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T15:58:48.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66ca7c51] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ed6f3c]
2026-01-07T15:58:48.935+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:58:48.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T15:58:48.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1068615735 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:48.938+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:48.938+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:58:48.938+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T15:58:48.939+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:58:48.942+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=27, drafterId=2, r (truncated)...]
2026-01-07T15:58:48.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:58:48.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:48.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T15:58:48.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T15:58:48.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:58:48.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:58:48.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/27
2026-01-07T15:58:48.961+09:00  INFO 17088 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T15:58:48.965+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.973+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/27
2026-01-07T15:58:48.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63be9d04] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.975+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/27
2026-01-07T15:58:48.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/27", parameters={}
2026-01-07T15:58:48.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:58:48.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:48.979+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad6ad2] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.979+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997942106 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:48.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:58:48.995+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:48.975+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4971f233] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:48.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@951727742 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:48.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T15:58:48.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1580823882 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:49.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:49.011+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:58:49.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66ca7c51]
2026-01-07T15:58:49.012+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:58:49.012+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:58:49.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:49.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T15:58:49.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad6ad2]
2026-01-07T15:58:49.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:49.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:58:49.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4971f233]
2026-01-07T15:58:49.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:49.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:49.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:58:49.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c153e3f] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T15:58:49.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63be9d04]
2026-01-07T15:58:49.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327229589 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:49.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:49.025+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:58:49.025+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5474d31a] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.026+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:49.026+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1127555629 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:49.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:49.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:49.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T15:58:49.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c153e3f]
2026-01-07T15:58:49.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:49.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5474d31a]
2026-01-07T15:58:49.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1308fe8] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417784631 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:49.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e2bb11] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:58:49.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@612126420 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:49.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:49.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:49.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:58:49.042+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:58:49.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T15:58:49.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e2bb11]
2026-01-07T15:58:49.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1308fe8]
2026-01-07T15:58:49.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aad372] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ff8619] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1196677829 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:49.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@214026245 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:49.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:49.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:58:49.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:49.045+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:49.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:58:49.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:49.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ff8619]
2026-01-07T15:58:49.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aad372]
2026-01-07T15:58:49.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3267e0ab] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:49.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2028103600 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:49.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:58:49.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:49.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:49.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:49.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:58:49.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:49.076+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:58:49.076+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3267e0ab]
2026-01-07T15:58:49.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:58:49.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:49.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:58:49.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=27, drafterId=2, r (truncated)...]
2026-01-07T15:58:49.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:58:49.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:49.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/27
2026-01-07T15:58:49.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac1c792] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/27
2026-01-07T15:58:49.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898849487 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:49.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/27
2026-01-07T15:58:49.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:58:49.092+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/27", parameters={}
2026-01-07T15:58:49.093+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:49.093+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-07T15:58:49.096+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.096+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2777aa0a] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.097+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:58:49.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@632686277 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:49.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac1c792]
2026-01-07T15:58:49.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-07T15:58:49.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15d9184a] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:49.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822124596 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:49.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:49.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:49.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:49.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-07T15:58:49.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15d9184a]
2026-01-07T15:58:49.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2777aa0a]
2026-01-07T15:58:49.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@266b2aa5] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@515f6f12] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066578794 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:49.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1273145545 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:49.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:49.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-07T15:58:49.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:58:49.115+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:49.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-07T15:58:49.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:58:49.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@515f6f12]
2026-01-07T15:58:49.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@266b2aa5]
2026-01-07T15:58:49.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efe7e6c] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b51628] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@619947870 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:49.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2029271673 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:49.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-07T15:58:49.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:49.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:49.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:49.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:49.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-07T15:58:49.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b51628]
2026-01-07T15:58:49.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@efe7e6c]
2026-01-07T15:58:49.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:49.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:58:49.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce29a09] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:49.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1628605159 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:49.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-07T15:58:49.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 27(Long), 1(Long)
2026-01-07T15:58:49.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-07T15:58:49.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ce29a09]
2026-01-07T15:58:49.140+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.140+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106b8c0f] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1476903590 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:49.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:49.143+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:49.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:49.145+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106b8c0f]
2026-01-07T15:58:49.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:49.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=27, drafterId=2, r (truncated)...]
2026-01-07T15:58:49.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:49.941+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:58:49.941+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:58:49.941+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:58:49.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:58:49.942+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:58:49.942+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:58:49.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:58:49.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:58:49.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:58:49.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:58:49.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:58:49.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:58:49.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:58:49.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:58:49.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:58:49.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:58:49.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:58:49.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:58:49.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:58:49.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:58:49.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:58:49.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:58:49.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:58:49.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2adf40] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:58:49.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:58:49.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.958+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f092f34] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.958+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:49.960+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d28c2db] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e3e2d9] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2053251964 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:49.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@580a50f4] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:49.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:58:49.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:49.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@201705159 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:49.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@767535240 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:49.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997655938 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:49.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:58:49.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:49.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:49.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:58:50.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.010+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1135257789 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:50.011+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:58:50.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:50.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:58:50.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:58:50.029+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f092f34]
2026-01-07T15:58:50.029+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d28c2db]
2026-01-07T15:58:50.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e3e2d9]
2026-01-07T15:58:50.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e2adf40]
2026-01-07T15:58:50.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:58:50.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3177bbe0] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622a417c] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eaf82d7] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@527569866 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:50.042+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266588738 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:50.042+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1944388116 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.045+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.045+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.045+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:58:50.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:58:50.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622a417c]
2026-01-07T15:58:50.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3177bbe0]
2026-01-07T15:58:50.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:58:50.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T15:58:50.060+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eaf82d7]
2026-01-07T15:58:50.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:58:50.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@580a50f4]
2026-01-07T15:58:50.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47198621] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1225a8af] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:58:50.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1256b5e4] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1997016607 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:50.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@511818160 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:50.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115a5d07] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1345135683 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:50.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:50.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1463838169 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:50.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699c1181] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:50.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:50.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:50.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@800753387 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:58:50.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:58:50.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T15:58:50.092+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:58:50.092+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47198621]
2026-01-07T15:58:50.093+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:58:50.094+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:58:50.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1225a8af]
2026-01-07T15:58:50.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3fc15d] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:58:50.096+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115a5d07]
2026-01-07T15:58:50.097+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1256b5e4]
2026-01-07T15:58:50.097+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699c1181]
2026-01-07T15:58:50.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1956407317 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:50.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f739ea0] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:50.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330dedf0] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee7b759] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1613505841 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:50.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:58:50.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:50.110+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1895574771 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:50.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154783476 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.109+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:50.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T15:58:50.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T15:58:50.125+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T15:58:50.125+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.126+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.126+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3fc15d]
2026-01-07T15:58:50.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f739ea0]
2026-01-07T15:58:50.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T15:58:50.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee7b759]
2026-01-07T15:58:50.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T15:58:50.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T15:58:50.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T15:58:50.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72bf4267] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330dedf0]
2026-01-07T15:58:50.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T15:58:50.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:58:50.131+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838485006 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:50.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T15:58:50.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.143+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:58:50.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:58:50.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:50.143+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bf6fa6c] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ed371de] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.145+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:58:50.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:58:50.145+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:58:50.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:58:50.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2001268879 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:50.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@212867125 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:58:50.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:58:50.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T15:58:50.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:58:50.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:58:50.154+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.158+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T15:58:50.158+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.159+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:58:50.161+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@642f79b4] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.164+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258567503 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bdc86fb] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1723023763 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:50.178+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:58:50.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:58:50.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T15:58:50.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bf6fa6c]
2026-01-07T15:58:50.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:50.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72bf4267]
2026-01-07T15:58:50.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ed371de]
2026-01-07T15:58:50.189+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.192+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.192+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T15:58:50.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5981cebb] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.204+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T15:58:50.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361380246 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:50.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.212+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:50.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T15:58:50.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:58:50.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:50.222+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T15:58:50.222+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bdc86fb]
2026-01-07T15:58:50.223+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@642f79b4]
2026-01-07T15:58:50.224+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T15:58:50.225+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.225+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.225+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T15:58:50.228+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f5e9eba] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.229+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd77405] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1940538098 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.239+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.230+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T15:58:50.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891247348 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:50.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:58:50.240+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.240+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.241+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.243+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5981cebb]
2026-01-07T15:58:50.243+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789cabe] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.244+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.244+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.245+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7570d8e4] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.244+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1271801268 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:50.246+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@575874279 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:50.246+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:58:50.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:50.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T15:58:50.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7570d8e4]
2026-01-07T15:58:50.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f5e9eba]
2026-01-07T15:58:50.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789cabe]
2026-01-07T15:58:50.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd77405]
2026-01-07T15:58:50.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae097c1] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@834692457 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:50.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee6a6c5] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7a2822] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:50.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c1cd2c7] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.307+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099439621 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:50.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1131401193 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:50.357+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:50.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@196932125 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:50.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.360+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:50.360+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:58:50.361+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:58:50.391+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T15:58:50.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae097c1]
2026-01-07T15:58:50.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:58:50.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7a2822]
2026-01-07T15:58:50.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ee6a6c5]
2026-01-07T15:58:50.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56267093] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1757854473 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:50.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213f41e] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cbae5] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:50.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1509160774 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:50.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@998765731 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T15:58:50.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:50.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:50.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.412+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T15:58:50.412+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:58:50.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T15:58:50.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T15:58:50.417+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c1cd2c7]
2026-01-07T15:58:50.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56267093]
2026-01-07T15:58:50.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cbae5]
2026-01-07T15:58:50.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@213f41e]
2026-01-07T15:58:50.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:58:50.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46de8e0c] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.422+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096035578 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T15:58:50.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2829d531] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.422+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.426+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.426+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@889681710 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T15:58:50.426+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T15:58:50.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:58:50.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T15:58:50.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T15:58:50.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:58:50.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2829d531]
2026-01-07T15:58:50.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46de8e0c]
2026-01-07T15:58:50.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@83a6136] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.629+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@57894834 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T15:58:50.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:58:50.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T15:58:50.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T15:58:50.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T15:58:50.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@83a6136]
2026-01-07T15:58:50.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T15:58:50.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T15:58:50.711+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bae3522] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@13028528 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb0a9c6] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@111780264 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T15:58:50.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T15:58:50.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bae3522]
2026-01-07T15:58:50.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T15:58:50.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c115188] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb0a9c6]
2026-01-07T15:58:50.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@113010189 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:50.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f43e3b] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:50.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669354586 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:58:50.777+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69f43e3b]
2026-01-07T15:58:50.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c115188]
2026-01-07T15:58:50.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a20e794] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1659703565 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:50.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b0dadd3] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T15:58:50.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@230040619 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T15:58:50.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a20e794]
2026-01-07T15:58:50.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.842+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b0dadd3]
2026-01-07T15:58:50.842+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53faba9d] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.842+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2118904625 wrapping com.mysql.cj.jdbc.ConnectionImpl@21d3270a] will not be managed by Spring
2026-01-07T15:58:50.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c3e31a] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1390851940 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.853+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:50.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:58:50.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53faba9d]
2026-01-07T15:58:50.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:50.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:58:50.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T15:58:50.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c3e31a]
2026-01-07T15:58:50.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:50.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3bff7f] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.890+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1894451249 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.891+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:50.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:50.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T15:58:50.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3bff7f]
2026-01-07T15:58:50.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132b9e64] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@936336249 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.914+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132b9e64]
2026-01-07T15:58:50.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e37733] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.922+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1232339253 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.923+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T15:58:50.925+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T15:58:50.929+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T15:58:50.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e37733]
2026-01-07T15:58:50.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:50.938+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ad04ba] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:50.941+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835712371 wrapping com.mysql.cj.jdbc.ConnectionImpl@61adebd7] will not be managed by Spring
2026-01-07T15:58:50.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:50.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:50.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:50.995+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ad04ba]
2026-01-07T15:58:50.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:51.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T15:58:51.029+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T15:58:51.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:58:51.428+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T15:58:51.428+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T15:58:51.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T15:58:51.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T15:58:51.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:51.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60035028] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:51.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987854527 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:51.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:51.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:51.440+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:51.441+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60035028]
2026-01-07T15:58:51.441+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:51.441+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504849e1] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:51.442+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@195483140 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:51.442+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T15:58:51.442+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T15:58:51.445+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T15:58:51.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@504849e1]
2026-01-07T15:58:51.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:51.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3323e727] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:51.447+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@565618659 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:51.447+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:51.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:51.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T15:58:51.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3323e727]
2026-01-07T15:58:51.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T15:58:51.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba2166d] was not registered for synchronization because synchronization is not active
2026-01-07T15:58:51.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2006243553 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T15:58:51.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T15:58:51.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T15:58:51.471+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T15:58:51.472+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba2166d]
2026-01-07T15:58:51.472+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T15:58:51.473+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T15:58:51.474+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:07.308+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:07.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:01:07.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:01:07.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:07.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:07.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:07.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:07.324+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:07.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:01:07.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:01:07.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:07.327+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:07.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:07.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:07.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:07.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:01:07.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:07.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:01:07.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:07.333+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:07.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.340+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@220cf4d] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c44a32b] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:01:07.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:01:07.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:01:07.340+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6419bcb3] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.360+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:07.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157b8362] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624677381 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.375+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.374+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.376+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:07.376+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751ba650] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.379+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@214942778 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:07.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291667971 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.394+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:07.405+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702892005 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:07.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@595911688 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:07.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:07.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.417+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@220cf4d]
2026-01-07T16:01:07.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:07.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:07.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c44a32b]
2026-01-07T16:01:07.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6419bcb3]
2026-01-07T16:01:07.423+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:07.424+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.424+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.426+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72524800] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11de6dbd] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@566464029 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756522311 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:07.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.435+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.439+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.440+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:07.442+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751ba650]
2026-01-07T16:01:07.442+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72524800]
2026-01-07T16:01:07.443+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11de6dbd]
2026-01-07T16:01:07.443+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.444+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4fc71c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.444+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:07.447+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.448+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@788778b9] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1799195709 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:07.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:07.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd1e3fb] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1401108065 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:07.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:07.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:07.461+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@494979641 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:07.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:07.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:07.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29412445] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.474+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:01:07.475+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283881750 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:07.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157b8362]
2026-01-07T16:01:07.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:07.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd1e3fb]
2026-01-07T16:01:07.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@788778b9]
2026-01-07T16:01:07.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4fc71c]
2026-01-07T16:01:07.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:07.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2b470c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b04758] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73703f0a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@791538812 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:07.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12146856] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:07.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014225294 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:07.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@821154669 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:07.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1737894447 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29412445]
2026-01-07T16:01:07.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:07.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:07.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:07.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.507+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.509+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2b470c]
2026-01-07T16:01:07.508+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:07.510+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@293e8696] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:07.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212987290 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:07.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:07.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:07.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:01:07.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12146856]
2026-01-07T16:01:07.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:07.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b04758]
2026-01-07T16:01:07.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:07.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73703f0a]
2026-01-07T16:01:07.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c13ccf0] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@494159868 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.523+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2053cfa4] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.523+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:07.525+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.555+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.556+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@865986952 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.556+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:01:07.556+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1913b7] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.557+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.558+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:07.558+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.558+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@293e8696]
2026-01-07T16:01:07.559+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@216267537 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:07.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:07.569+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:07.569+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:07.573+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:07.573+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c42789f] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:07.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:07.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@295001527 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:07.583+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:07.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c13ccf0]
2026-01-07T16:01:07.583+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:07.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.588+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.589+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4354cff9] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1905454895 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.589+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:07.589+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:07.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:07.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:07.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2053cfa4]
2026-01-07T16:01:07.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1913b7]
2026-01-07T16:01:07.605+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:07.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d3bc5a2] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:07.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c42789f]
2026-01-07T16:01:07.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1747127386 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:01:07.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:07.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4354cff9]
2026-01-07T16:01:07.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:01:07.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.625+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.625+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:07.638+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:07.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:07.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:07.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:07.641+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:07.627+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:07.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b6f510c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1310816415 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb29322] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@518829347 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:07.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:01:07.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:07.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:07.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:01:07.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:01:07.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:07.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:07.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:01:07.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e42d3e3] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:01:07.673+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@215913673 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:07.673+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:01:07.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d6dd9d] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.677+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855725698 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:07.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:07.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:07.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b6f510c]
2026-01-07T16:01:07.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d3bc5a2]
2026-01-07T16:01:07.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:07.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56de299d] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52708a1a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e42d3e3]
2026-01-07T16:01:07.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb29322]
2026-01-07T16:01:07.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@124319099 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@555041571 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:01:07.693+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613ff0d0] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72d6dd9d]
2026-01-07T16:01:07.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:07.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:07.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1238035167 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:07.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9b6bbf] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:07.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1004891108 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:07.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52708a1a]
2026-01-07T16:01:07.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56de299d]
2026-01-07T16:01:07.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436e1060] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613ff0d0]
2026-01-07T16:01:07.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a43ce26] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@362312269 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@762743858 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f213ce] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:07.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1339408464 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:07.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:07.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:07.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9b6bbf]
2026-01-07T16:01:07.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436e1060]
2026-01-07T16:01:07.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:07.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a43ce26]
2026-01-07T16:01:07.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42702fe5] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1712484999 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:07.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6998a620] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:01:07.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1522947683 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:07.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:01:07.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f213ce]
2026-01-07T16:01:07.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:01:07.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c1e761] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1944911508 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:07.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:07.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:07.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:01:07.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:07.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:01:07.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42702fe5]
2026-01-07T16:01:07.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6998a620]
2026-01-07T16:01:07.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:07.755+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:01:07.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c1e761]
2026-01-07T16:01:07.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:07.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38656d1e] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.758+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:07.758+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:01:07.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2074702576 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:07.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@307958c9] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:07.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@280637839 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:07.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.777+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:07.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:07.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:07.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dbd62cb] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389901475 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:07.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38656d1e]
2026-01-07T16:01:07.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@307958c9]
2026-01-07T16:01:07.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:07.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:01:07.789+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5218eab5] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@677203759 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:07.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dbd62cb]
2026-01-07T16:01:07.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5adbca36] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5218eab5]
2026-01-07T16:01:07.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@746999964 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:07.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b310f1c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323895693 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:07.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:07.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5adbca36]
2026-01-07T16:01:07.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f77dea1] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:07.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534670083 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:07.811+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b310f1c]
2026-01-07T16:01:07.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:07.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3432200e] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739096187 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:07.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f77dea1]
2026-01-07T16:01:07.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca4996] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3432200e]
2026-01-07T16:01:07.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1730743608 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:07.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ea825a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813560505 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.823+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.823+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:07.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca4996]
2026-01-07T16:01:07.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.826+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:07.826+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:07.826+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ea825a]
2026-01-07T16:01:07.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280697d1] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1765751001 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:07.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:07.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:07.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:07.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:07.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:07.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:07.842+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.842+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b3127d3] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:07.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@94495230 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.843+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280697d1]
2026-01-07T16:01:07.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:07.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:07.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7a1786] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@299807207 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:07.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b3127d3]
2026-01-07T16:01:07.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d7a1786]
2026-01-07T16:01:07.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b112af8] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.853+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967609334 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.853+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f516b1] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@770636046 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.855+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:07.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b112af8]
2026-01-07T16:01:07.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e5293e7] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:07.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@202784319 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f516b1]
2026-01-07T16:01:07.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:07.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.861+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:07.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7507cf11] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@765398942 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:07.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:07.871+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.871+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e5293e7]
2026-01-07T16:01:07.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:07.874+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@235bbf38] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:07.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957140255 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:07.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:07.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.877+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:07.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7507cf11]
2026-01-07T16:01:07.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:01:07.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:07.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:07.907+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@235bbf38]
2026-01-07T16:01:07.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:07.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:07.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:19.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:01:19.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:01:19.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:19.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-07T16:01:19.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:19.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-07T16:01:19.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:19.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:19.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:19.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:01:19.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:19.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-07T16:01:19.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:19.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:19.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:01:19.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:01:19.189+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:19.176+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:01:19.176+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:01:19.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-07T16:01:19.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:19.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:19.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:01:19.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:19.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-07T16:01:19.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.242+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:19.243+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31661d1f] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.284+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:01:19.290+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.290+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.291+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1641d48a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.292+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@795d66ba] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b5e687e] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f20ef6] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbffe25] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@622608584 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1352016470 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:19.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@861644082 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:19.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.311+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:19.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@801524053 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:19.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1198034512 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-07T16:01:19.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.325+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31661d1f]
2026-01-07T16:01:19.326+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-07T16:01:19.326+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:19.326+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.327+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d55cd4b] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.327+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1721183047 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.333+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:19.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:19.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@795d66ba]
2026-01-07T16:01:19.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1641d48a]
2026-01-07T16:01:19.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@648039744 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:19.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3483e28] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.343+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:19.344+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20405bf8] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@346411210 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:19.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23f20ef6]
2026-01-07T16:01:19.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533098423 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.351+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-07T16:01:19.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:01:19.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:19.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b5e687e]
2026-01-07T16:01:19.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bbffe25]
2026-01-07T16:01:19.357+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.357+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-07T16:01:19.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34405788] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.360+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@43244517 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.371+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.373+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d55cd4b]
2026-01-07T16:01:19.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3483e28]
2026-01-07T16:01:19.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:19.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34405788]
2026-01-07T16:01:19.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20405bf8]
2026-01-07T16:01:19.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5847b732] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e41ac2] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.387+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.387+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.388+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:19.389+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465245924 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:19.390+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@824169448 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:19.390+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb6c4a0] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.390+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20595227] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.391+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:19.391+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:19.392+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:19.392+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@494680649 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.393+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40129103 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:19.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:19.405+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:19.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:19.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2f38a6] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:01:19.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:19.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@800173984 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:19.437+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:19.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:19.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:01:19.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:19.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:19.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:19.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e41ac2]
2026-01-07T16:01:19.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb6c4a0]
2026-01-07T16:01:19.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2f38a6]
2026-01-07T16:01:19.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5847b732]
2026-01-07T16:01:19.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20595227]
2026-01-07T16:01:19.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7891876f] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54d7253b] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:19.475+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b9419b] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.475+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ed3509e] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@737194165 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:19.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230596293 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.477+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361223193 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:19.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693573897 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:19.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.493+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:19.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.506+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:19.507+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:19.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:19.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c04e892] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.524+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:19.525+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.526+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.526+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54d7253b]
2026-01-07T16:01:19.535+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:01:19.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1213629565 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:19.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7891876f]
2026-01-07T16:01:19.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ed3509e]
2026-01-07T16:01:19.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b9419b]
2026-01-07T16:01:19.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.541+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13f9f4e] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.543+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:19.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:01:19.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:19.573+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2138354539 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:19.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.575+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:19.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:19.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:01:19.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:01:19.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:19.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:19.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:19.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:01:19.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:19.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:19.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:01:19.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:19.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:01:19.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:01:19.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:19.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:19.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@670e9a47] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:19.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:19.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:19.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750431984 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c04e892]
2026-01-07T16:01:19.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13f9f4e]
2026-01-07T16:01:19.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4586f3af] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@952025534 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:19.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:19.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c38f4a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eafb926] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:19.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1813991509 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:19.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:19.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@717505472 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:19.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:19.693+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:19.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c38f4a]
2026-01-07T16:01:19.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4586f3af]
2026-01-07T16:01:19.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:01:19.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd18c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:19.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@670e9a47]
2026-01-07T16:01:19.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@245937946 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:19.710+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410d13da] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:19.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eafb926]
2026-01-07T16:01:19.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589b0ddd] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:19.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@870620127 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:19.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13281368] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@722397537 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:19.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@15171560 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.725+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd18c]
2026-01-07T16:01:19.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@696c1b27] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410d13da]
2026-01-07T16:01:19.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971317611 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:19.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf36f66] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41bf903c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973312549 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:19.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589b0ddd]
2026-01-07T16:01:19.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1753602066 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:19.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:19.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:19.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:19.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:19.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13281368]
2026-01-07T16:01:19.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:19.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d4585c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:19.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.765+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621185662 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@696c1b27]
2026-01-07T16:01:19.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65fbb091] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:19.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@916147221 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.773+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:19.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:19.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:19.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:19.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41bf903c]
2026-01-07T16:01:19.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:01:19.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.789+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4afd9c18] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:19.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2013190923 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:19.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf36f66]
2026-01-07T16:01:19.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:19.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@387bd992] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:19.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:01:19.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:19.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@685971876 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:19.819+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d4585c]
2026-01-07T16:01:19.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65fbb091]
2026-01-07T16:01:19.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:19.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:19.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@686f9240] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:19.823+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:19.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c88e693] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1344850148 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.826+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1054623718 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b4441a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18591266 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:19.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:19.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4afd9c18]
2026-01-07T16:01:19.853+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:19.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:19.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:01:19.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b4441a]
2026-01-07T16:01:19.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@686f9240]
2026-01-07T16:01:19.868+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@387bd992]
2026-01-07T16:01:19.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c88e693]
2026-01-07T16:01:19.870+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.870+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:19.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:01:19.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:01:19.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:19.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.876+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:01:19.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:19.888+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:19.890+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:01:19.891+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:01:19.892+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:19.889+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:19.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:19.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:19.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f5b682] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:19.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1030139738 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73109d33] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1733522543 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.907+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:19.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:19.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f5b682]
2026-01-07T16:01:19.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5776104c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@709557638 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.922+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.926+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:19.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73109d33]
2026-01-07T16:01:19.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7194b0fc] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5776104c]
2026-01-07T16:01:19.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102388472 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.935+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42feb0bd] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@636300510 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.938+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:19.942+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:19.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7194b0fc]
2026-01-07T16:01:19.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f13b33f] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726990705 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:19.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:19.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42feb0bd]
2026-01-07T16:01:19.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:19.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e61820f] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.959+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@959291430 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.965+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:19.966+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.967+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f13b33f]
2026-01-07T16:01:19.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.970+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a6f0a6] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1389246406 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:19.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:19.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e61820f]
2026-01-07T16:01:19.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:19.973+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.973+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f2fd297] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492587655 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.975+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:19.975+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:19.975+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a6f0a6]
2026-01-07T16:01:19.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:19.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:19.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:19.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:19.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:19.990+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:19.991+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f2fd297]
2026-01-07T16:01:19.992+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:19.992+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:19.992+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6c6e47] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:19.993+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:19.993+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171352791 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:19.993+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:19.994+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:19.994+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:20.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:20.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c35f6d8] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.005+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678144206 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:20.008+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:20.009+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:20.026+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6c6e47]
2026-01-07T16:01:20.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba7ea63] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322023686 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:20.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:20.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:20.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:20.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:20.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:20.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba7ea63]
2026-01-07T16:01:20.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c35f6d8]
2026-01-07T16:01:20.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@575fefa5] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f237c2e] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930425311 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:20.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1817430564 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:20.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:20.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:20.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:20.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:20.060+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:20.060+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:20.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f237c2e]
2026-01-07T16:01:20.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@575fefa5]
2026-01-07T16:01:20.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1938b247] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3513dad0] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503213890 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:20.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@488192272 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:20.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:20.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:20.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:20.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:20.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:20.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:20.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3513dad0]
2026-01-07T16:01:20.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1938b247]
2026-01-07T16:01:20.076+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:20.076+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f50f598] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:01:20.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1940308159 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:20.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:20.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:20.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:20.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:20.092+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f50f598]
2026-01-07T16:01:20.093+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:20.095+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:20.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:20.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:20.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:20.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:20.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:20.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:20.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@459e6cf3] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2120567978 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:20.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:20.108+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:20.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:20.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@459e6cf3]
2026-01-07T16:01:20.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d7ee7b8] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@464650000 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:20.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:20.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:20.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:20.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d7ee7b8]
2026-01-07T16:01:20.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3a34b9] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1965249985 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:20.140+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:20.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:20.143+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:20.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3a34b9]
2026-01-07T16:01:20.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:20.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd7285] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:20.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140930559 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:20.149+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:20.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:20.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:20.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd7285]
2026-01-07T16:01:20.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:20.158+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:20.158+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:31.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:01:31.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:01:31.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:31.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-07T16:01:31.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:31.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:31.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:31.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:31.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:31.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:01:31.126+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:01:31.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-07T16:01:31.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-07T16:01:31.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:01:31.125+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:31.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:31.125+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.125+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:01:31.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:01:31.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-07T16:01:31.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:31.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:31.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:31.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:01:31.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:01:31.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-07T16:01:31.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e6959c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.140+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:31.143+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.140+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:31.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55bd0bf1] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.149+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0b6f53] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72217f63] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f109f37] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479c12f2] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856598016 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:31.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890682160 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1454312218 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756522824 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:31.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883829558 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:01:31.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1219022395 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:31.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:31.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:31.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-07T16:01:31.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:31.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e6959c]
2026-01-07T16:01:31.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:01:31.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-07T16:01:31.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:31.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:31.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72217f63]
2026-01-07T16:01:31.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55bd0bf1]
2026-01-07T16:01:31.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153c3ab5] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.189+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0b6f53]
2026-01-07T16:01:31.189+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.189+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-07T16:01:31.189+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.189+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1888279037 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:31.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@479c12f2]
2026-01-07T16:01:31.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f109f37]
2026-01-07T16:01:31.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b873a3b] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77c1cc86] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:31.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.192+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.192+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1839081992 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.192+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657092267 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.193+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.193+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f305e] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.199+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-07T16:01:31.199+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027408667 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:01:31.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:31.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.234+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.224+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.235+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:31.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:31.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.238+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5b3558] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1233117173 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:31.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.253+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f305e]
2026-01-07T16:01:31.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77c1cc86]
2026-01-07T16:01:31.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153c3ab5]
2026-01-07T16:01:31.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b873a3b]
2026-01-07T16:01:31.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c34e83] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:31.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.258+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969748642 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.258+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee95dd7] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.258+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3677601a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.259+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8043d1] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@26939284 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:01:31.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1336623022 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1755130726 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:31.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:01:31.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:31.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:31.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:31.276+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:31.277+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:31.277+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5b3558]
2026-01-07T16:01:31.281+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:01:31.282+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:31.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.283+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c34e83]
2026-01-07T16:01:31.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:31.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:31.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3677601a]
2026-01-07T16:01:31.288+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d5fa90e] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.290+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.291+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.292+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@821382512 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.292+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:31.293+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28542107] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:31.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8043d1]
2026-01-07T16:01:31.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@632222631 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:31.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fedc192] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:31.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@837648757 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:31.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:31.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.306+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2eae63] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.307+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:31.308+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.309+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:31.309+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d5fa90e]
2026-01-07T16:01:31.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@289416876 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:31.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ee95dd7]
2026-01-07T16:01:31.310+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28542107]
2026-01-07T16:01:31.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:31.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:01:31.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:31.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d15efd] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:31.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fedc192]
2026-01-07T16:01:31.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@929217717 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:01:31.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.337+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:01:31.340+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.341+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.343+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:01:31.346+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:31.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:31.403+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:31.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:31.393+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:31.393+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:01:31.405+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:01:31.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:31.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2eae63]
2026-01-07T16:01:31.405+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:31.405+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d15efd]
2026-01-07T16:01:31.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:01:31.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:31.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:01:31.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6537c607] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:01:31.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:31.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:01:31.413+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1821919978 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:01:31.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f81560] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2faf7a8] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:31.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:31.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@774691858 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:31.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761203240 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:31.422+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.423+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.423+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23d09216] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.424+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.424+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:31.424+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:31.425+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:31.426+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@238539685 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.428+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:31.429+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6537c607]
2026-01-07T16:01:31.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:31.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:31.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:01:31.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.434+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2faf7a8]
2026-01-07T16:01:31.437+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.437+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11997901] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f81560]
2026-01-07T16:01:31.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477b709f] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1149999917 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@109a437c] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.439+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@472351113 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:01:31.439+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.439+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1046650831 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:31.440+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23d09216]
2026-01-07T16:01:31.441+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d5a95a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.441+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:31.441+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.442+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.442+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.443+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1363209685 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:31.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:31.448+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:31.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d9e3e9b] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1257853212 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:31.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11997901]
2026-01-07T16:01:31.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:31.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@109a437c]
2026-01-07T16:01:31.453+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.453+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477b709f]
2026-01-07T16:01:31.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38c39444] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:31.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1657320236 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d5a95a]
2026-01-07T16:01:31.458+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@127d4e79] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.459+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236858145 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:01:31.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.461+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d9e3e9b]
2026-01-07T16:01:31.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:31.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2025fe09] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.471+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aef9af5] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:01:31.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436214830 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:31.472+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@639177173 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.472+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:01:31.473+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.473+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:31.474+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:01:31.476+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:01:31.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:31.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:01:31.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:31.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@127d4e79]
2026-01-07T16:01:31.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38c39444]
2026-01-07T16:01:31.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bdcc0ea] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1287315260 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:31.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e6c8b22] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c7c3a4] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:31.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:01:31.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1444550160 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:01:31.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@377618444 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aef9af5]
2026-01-07T16:01:31.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2025fe09]
2026-01-07T16:01:31.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:01:31.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.494+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:31.496+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44a10b9a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:01:31.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763b7bad] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@48171465 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bdcc0ea]
2026-01-07T16:01:31.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:31.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2044790485 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:01:31.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:31.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:31.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c7c3a4]
2026-01-07T16:01:31.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e6c8b22]
2026-01-07T16:01:31.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:01:31.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.506+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.506+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.507+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.507+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:01:31.507+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:31.508+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2972e59f] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.510+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44a10b9a]
2026-01-07T16:01:31.512+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1670209032 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:01:31.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:01:31.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.524+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:31.525+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@763b7bad]
2026-01-07T16:01:31.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:01:31.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.527+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:31.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:31.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:31.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2972e59f]
2026-01-07T16:01:31.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:31.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.572+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:01:31.573+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.572+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39781a3b] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.575+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1774179267 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.588+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:31.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:01:31.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:01:31.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:01:31.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:01:31.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:01:31.603+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aa97927] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@66858348 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:31.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39781a3b]
2026-01-07T16:01:31.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613da43b] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@409850853 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.625+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.637+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613da43b]
2026-01-07T16:01:31.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a5bf97] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aa97927]
2026-01-07T16:01:31.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750111684 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154030c9] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:31.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1424032519 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.649+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.654+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:31.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@154030c9]
2026-01-07T16:01:31.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20a5bf97]
2026-01-07T16:01:31.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@99d5e3a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c6b7ad0] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@500163000 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@29304269 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:01:31.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:31.660+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:31.666+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:31.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c6b7ad0]
2026-01-07T16:01:31.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@99d5e3a]
2026-01-07T16:01:31.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:31.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5173a2a9] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855394867 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:31.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:31.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:31.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5173a2a9]
2026-01-07T16:01:31.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:31.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a7860b] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@202183260 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:31.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:31.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cfb3d05] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1306233945 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:31.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:31.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:31.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a7860b]
2026-01-07T16:01:31.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69665340] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@353175481 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:01:31.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:01:31.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:31.758+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cfb3d05]
2026-01-07T16:01:31.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.760+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f9c175] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658491706 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:31.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:01:31.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69665340]
2026-01-07T16:01:31.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb87b38] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973404156 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.871+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.871+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb87b38]
2026-01-07T16:01:31.874+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f9c175]
2026-01-07T16:01:31.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aa35a4d] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b02906] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665819546 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.888+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@419346060 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:31.889+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.890+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.892+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:01:31.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:31.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:31.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:01:31.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b02906]
2026-01-07T16:01:31.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aa35a4d]
2026-01-07T16:01:31.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e4f636a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@357e92e5] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.907+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1796381628 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:01:31.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1709164341 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:01:31.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.908+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.909+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.910+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e4f636a]
2026-01-07T16:01:31.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@357e92e5]
2026-01-07T16:01:31.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:31.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:31.922+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:01:31.923+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.925+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:01:31.926+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:01:31.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:01:31.940+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:01:31.940+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:01:31.941+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:01:31.942+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.942+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71f64b7a] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1046789777 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:31.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:01:31.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:01:31.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:01:31.973+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71f64b7a]
2026-01-07T16:01:31.973+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.973+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ca8f7e] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@35955110 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:31.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:31.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:31.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:31.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ca8f7e]
2026-01-07T16:01:31.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd962f5] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:31.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@788380559 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:31.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:01:31.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:01:31.990+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:01:31.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd962f5]
2026-01-07T16:01:31.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:01:31.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68873d33] was not registered for synchronization because synchronization is not active
2026-01-07T16:01:32.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@406402076 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:01:32.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:01:32.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:01:32.005+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:01:32.005+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68873d33]
2026-01-07T16:01:32.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:01:32.007+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:01:32.008+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:50.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:02:50.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:02:50.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-07T16:02:50.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T16:02:50.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T16:02:50.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:02:50.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:02:50.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:02:50.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-07T16:02:50.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-07T16:02:50.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:02:50.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:02:50.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-07T16:02:50.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T16:02:50.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T16:02:50.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:02:50.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:02:50.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:02:50.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-07T16:02:50.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:02:50.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T16:02:50.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:50.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T16:02:50.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:50.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:02:50.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T16:02:50.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33bb0b8f] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:50.880+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T16:02:50.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57891944] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:50.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:50.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T16:02:50.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T16:02:50.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49fec4b8] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:50.888+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T16:02:50.889+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T16:02:50.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T16:02:50.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T16:02:50.899+09:00  WARN 17088 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T16:02:50.900+09:00  WARN 17088 --- [http-nio-8080-exec-7] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T16:02:50.901+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:50.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:50.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T16:02:50.907+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T16:02:50.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T16:02:50.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T16:02:50.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T16:02:50.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T16:02:51.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1768872383 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:51.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53412250 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:51.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022344723 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:51.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-07T16:02:51.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-07T16:02:51.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:51.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:02:51.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:51.155+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/credits/total
2026-01-07T16:02:51.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/subscriptions/current
2026-01-07T16:02:51.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:51.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:02:51.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:51.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-07T16:02:51.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-07T16:02:51.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-07T16:02:51.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-07T16:02:51.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:51.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-07T16:02:51.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:02:51.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:02:51.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57891944]
2026-01-07T16:02:51.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.803+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@559c917f] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329684719 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:51.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:51.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-07T16:02:51.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33bb0b8f]
2026-01-07T16:02:51.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-07T16:02:51.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49fec4b8]
2026-01-07T16:02:51.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:51.806+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-07T16:02:51.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T16:02:51.806+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@266ff89e and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-07T16:02:51.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:51.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T16:02:51.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e392a] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-07T16:02:51.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:02:51.815+09:00  WARN 17088 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T16:02:51.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803594138 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:51.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:51.816+09:00  WARN 17088 --- [http-nio-8080-exec-10] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-07T16:02:51.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:51.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:51.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:51.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:51.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:51.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T16:02:51.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-07T16:02:51.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:51.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@559c917f]
2026-01-07T16:02:51.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T16:02:51.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-07T16:02:51.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e392a]
2026-01-07T16:02:51.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e38df88] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T16:02:51.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-07T16:02:51.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@530494553 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:51.865+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9452cb5] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:51.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2079331294 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:51.870+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:02:51.871+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:51.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:51.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:02:51.881+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e38df88]
2026-01-07T16:02:51.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57d4eb9] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:02:51.882+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1842414849 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:51.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9452cb5]
2026-01-07T16:02:51.883+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:51.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:51.884+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8a21b] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.885+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@541591091 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:51.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:51.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:51.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:51.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57d4eb9]
2026-01-07T16:02:51.888+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:51.888+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:51.889+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:02:51.890+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c8a21b]
2026-01-07T16:02:51.890+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:51.891+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b453d8e] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@517506183 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:51.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:51.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:02:51.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:02:51.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:02:51.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:02:51.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:02:51.913+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:02:51.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.916+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:02:51.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ccad3b2] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b453d8e]
2026-01-07T16:02:51.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.925+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d3fd99] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.927+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@998768736 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:51.928+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@807885518 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:51.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:51.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:51.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:51.940+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:51.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:02:51.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d3fd99]
2026-01-07T16:02:51.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149d7506] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123319097 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:51.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:51.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:02:51.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:51.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ccad3b2]
2026-01-07T16:02:51.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.966+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d42aba9] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.967+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1968693767 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:51.967+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:51.967+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:51.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149d7506]
2026-01-07T16:02:51.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:51.969+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.970+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a00f91a] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1439337497 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:51.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:51.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:51.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d42aba9]
2026-01-07T16:02:51.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:02:51.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5842dd6] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@766759212 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:51.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:51.987+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:02:51.990+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:02:51.991+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a00f91a]
2026-01-07T16:02:51.992+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2adc0a6b] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:51.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@121236995 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:51.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:02:51.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:51.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5842dd6]
2026-01-07T16:02:51.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:51.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:51.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b6bc96] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1568199915 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:52.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:52.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:52.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:52.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2adc0a6b]
2026-01-07T16:02:52.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:52.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:52.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79b6bc96]
2026-01-07T16:02:52.005+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:02:52.005+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:52.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:02:52.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:52.008+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:52.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:02:52.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-07T16:02:52.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:02:52.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:02:52.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-07T16:02:52.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:02:52.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-07T16:02:52.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:02:52.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:02:52.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:02:52.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c83f2dc] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fff666a] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1077073165 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:52.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:52.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:52.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1760248114 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:52.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:52.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:52.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:02:52.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c83f2dc]
2026-01-07T16:02:52.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:52.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fff666a]
2026-01-07T16:02:52.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671dd4e1] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947979724 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:52.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22bb76c0] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:52.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@986454806 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:52.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:52.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:52.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:52.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:52.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:52.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671dd4e1]
2026-01-07T16:02:52.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22bb76c0]
2026-01-07T16:02:52.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5010d223] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12372355] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1503903260 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:52.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1799572133 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:52.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:52.072+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:52.072+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:02:52.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:52.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:02:52.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:02:52.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5010d223]
2026-01-07T16:02:52.080+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12372355]
2026-01-07T16:02:52.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e919fc7] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5885d0b2] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@952551932 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:52.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1937997180 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:52.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:52.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:52.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:52.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:52.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:52.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:52.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5885d0b2]
2026-01-07T16:02:52.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e919fc7]
2026-01-07T16:02:52.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:52.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf4319f] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:02:52.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@713194227 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:52.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:52.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:52.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:02:52.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:02:52.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf4319f]
2026-01-07T16:02:52.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@607a8786] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503261919 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:52.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:52.113+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:52.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:02:52.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@607a8786]
2026-01-07T16:02:52.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7215d03b] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1181167432 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:52.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:52.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:52.127+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:52.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7215d03b]
2026-01-07T16:02:52.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af23eab] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1186636230 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:52.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:52.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:02:52.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:02:52.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af23eab]
2026-01-07T16:02:52.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:52.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e60690] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:52.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1114271329 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:52.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:52.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:52.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:52.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e60690]
2026-01-07T16:02:52.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:52.143+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:02:52.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:53.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-07T16:02:53.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-07T16:02:53.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-07T16:02:53.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-07T16:02:53.641+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:02:53.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:02:53.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:02:53.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:02:53.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-07T16:02:53.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-07T16:02:53.648+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-07T16:02:53.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:02:53.653+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:02:53.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me
2026-01-07T16:02:53.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/companies
2026-01-07T16:02:53.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:02:53.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/companies/pending
2026-01-07T16:02:53.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:02:53.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-07T16:02:53.664+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-07T16:02:53.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:02:53.668+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-07T16:02:53.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:02:53.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-07T16:02:53.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-07T16:02:53.670+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-07T16:02:53.671+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-07T16:02:53.672+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-07T16:02:53.673+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a6e33a] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.673+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-07T16:02:53.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6d0f22] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.674+09:00  INFO 17088 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 4, companyId: 1
2026-01-07T16:02:53.677+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.678+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.680+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b90cc31] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1402590207 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:53.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@831944957 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:53.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd7fd50] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3508909] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:53.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:02:53.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@6134180 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:53.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@743098447 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:53.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@26538637 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:53.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:53.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:02:53.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-07T16:02:53.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-07T16:02:53.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:53.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:02:53.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 4(Long), PENDING(String)
2026-01-07T16:02:53.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:02:53.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-07T16:02:53.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:53.692+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b6d0f22]
2026-01-07T16:02:53.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a6e33a]
2026-01-07T16:02:53.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:53.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:02:53.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273a0f4] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-07T16:02:53.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-07T16:02:53.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:53.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1313460328 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:53.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b90cc31]
2026-01-07T16:02:53.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd7fd50]
2026-01-07T16:02:53.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:53.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:53.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:53.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:53.704+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3508909]
2026-01-07T16:02:53.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:53.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-07T16:02:53.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=4, userId=4, companyId=1 (truncated)...]
2026-01-07T16:02:53.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:53.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100af6f4] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1943983915 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:53.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:53.709+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:53.712+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-07T16:02:53.713+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273a0f4]
2026-01-07T16:02:53.715+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-07T16:02:53.716+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.717+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bc31397] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948805659 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:53.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-07T16:02:53.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:53.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@100af6f4]
2026-01-07T16:02:53.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:02:53.721+09:00  INFO 17088 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 4, companyId: 1, role: ACCOUNTANT
2026-01-07T16:02:53.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:53.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:02:53.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=4, username=test_user3, passw (truncated)...]
2026-01-07T16:02:53.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bc31397]
2026-01-07T16:02:53.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:53.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d79dd3] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1140551669 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:53.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:53.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:53.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-07T16:02:53.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me
2026-01-07T16:02:53.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-07T16:02:53.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-07T16:02:53.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-07T16:02:53.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:53.740+09:00  INFO 17088 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 4, companyId: 1
2026-01-07T16:02:53.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d79dd3]
2026-01-07T16:02:53.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:53.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e33b30f] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:02:53.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:53.753+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1175492395 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:53.755+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:53.755+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:53.768+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:53.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e33b30f]
2026-01-07T16:02:53.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:53.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e653d62] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:53.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585127547 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:53.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-07T16:02:53.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-07T16:02:53.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-07T16:02:53.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e653d62]
2026-01-07T16:02:53.780+09:00  INFO 17088 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 4, companyId: 1, role: ACCOUNTANT
2026-01-07T16:02:53.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:53.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=4, username=test_user3, passw (truncated)...]
2026-01-07T16:02:53.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:54.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:02:54.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:02:54.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:02:54.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:02:54.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:02:54.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:02:54.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:02:54.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:02:54.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:02:54.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:02:54.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:02:54.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:02:54.949+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:02:54.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:02:54.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:02:54.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:02:54.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:02:54.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:02:54.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:02:54.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:02:54.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:02:54.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:02:54.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:02:54.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:02:54.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:54.962+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2f1f49] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:54.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:02:54.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:54.959+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:54.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:54.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:54.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8ab075] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:54.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8ba841] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:54.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12848051] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:54.966+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5be937f0] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:54.969+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573249365 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:54.971+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:54.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:54.979+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1754554807 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:54.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371274577 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:54.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369758144 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:54.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258109964 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:54.984+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:54.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:54.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:54.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:54.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:02:54.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:54.991+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:02:54.987+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:54.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:54.990+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2f1f49]
2026-01-07T16:02:54.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:54.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bc70fe] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:54.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1478153480 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:54.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:54.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:02:54.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:54.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:54.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:02:54.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8ab075]
2026-01-07T16:02:55.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12848051]
2026-01-07T16:02:55.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:02:55.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8ba841]
2026-01-07T16:02:55.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5be937f0]
2026-01-07T16:02:55.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae39dd9] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71398a9e] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:02:55.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569fe311] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1635057713 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@101608837 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:55.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2032217437 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:55.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:02:55.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36bc70fe]
2026-01-07T16:02:55.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:02:55.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c89ad32] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:02:55.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@434577373 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:55.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:02:55.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:55.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:02:55.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:55.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218df89b] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2119011176 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:02:55.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:02:55.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae39dd9]
2026-01-07T16:02:55.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71398a9e]
2026-01-07T16:02:55.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42bbf01b] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39c6cd1b] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146172840 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:55.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803046063 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569fe311]
2026-01-07T16:02:55.027+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:55.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:55.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:55.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:02:55.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6beff70d] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1119950346 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:55.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:55.032+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:02:55.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:02:55.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:02:55.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218df89b]
2026-01-07T16:02:55.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c89ad32]
2026-01-07T16:02:55.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:02:55.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac2e70] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@105771914 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:55.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:55.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:55.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:02:55.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:02:55.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6beff70d]
2026-01-07T16:02:55.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:02:55.051+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3531b426] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.051+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:02:55.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:02:55.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561146386 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:55.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:02:55.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39c6cd1b]
2026-01-07T16:02:55.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:02:55.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:02:55.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42bbf01b]
2026-01-07T16:02:55.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26651e9d] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@994253154 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:55.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@352378a8] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35f53ae9] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.059+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973264130 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1993775563 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:02:55.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:02:55.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:02:55.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:02:55.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac2e70]
2026-01-07T16:02:55.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@352378a8]
2026-01-07T16:02:55.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35f53ae9]
2026-01-07T16:02:55.072+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.072+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3531b426]
2026-01-07T16:02:55.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26651e9d]
2026-01-07T16:02:55.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:02:55.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.077+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:02:55.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:02:55.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:02:55.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77598b99] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.086+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:02:55.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:02:55.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2034692633 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:55.101+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:55.097+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:02:55.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:02:55.101+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:02:55.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:02:55.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:02:55.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:02:55.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:02:55.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:02:55.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:02:55.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:02:55.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:02:55.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:02:55.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:02:55.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:02:55.131+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11403cdd] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bea3941] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@502596131 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4709be] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:02:55.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:55.144+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:55.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@690349202 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77598b99]
2026-01-07T16:02:55.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1811678816 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:55.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:55.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:55.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c16e545] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.154+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1462283805 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:55.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:02:55.158+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:55.161+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11403cdd]
2026-01-07T16:02:55.213+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:55.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.285+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c4709be]
2026-01-07T16:02:55.296+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54e5ba84] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1146339857 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a929e0c] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780958233 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.300+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.330+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:02:55.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a929e0c]
2026-01-07T16:02:55.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54e5ba84]
2026-01-07T16:02:55.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c16e545]
2026-01-07T16:02:55.335+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.336+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:02:55.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15a2a31d] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.338+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb16c17] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bea3941]
2026-01-07T16:02:55.339+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@288e681b] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.340+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1005464923 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.340+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1207550175 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.340+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.341+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1936297090 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:55.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:55.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:55.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe22351] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.351+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.352+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:55.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:02:55.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1598717405 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:55.358+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:02:55.367+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:02:55.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb16c17]
2026-01-07T16:02:55.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15a2a31d]
2026-01-07T16:02:55.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d27d151] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5ea06] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.374+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212402486 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.375+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116329354 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.379+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.379+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:55.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe22351]
2026-01-07T16:02:55.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@288e681b]
2026-01-07T16:02:55.387+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.390+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:55.390+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.390+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604665fd] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4ef6db] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585461775 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:55.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@559650617 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:55.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:55.402+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:55.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:02:55.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.406+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:02:55.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:02:55.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d27d151]
2026-01-07T16:02:55.414+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5ea06]
2026-01-07T16:02:55.416+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.417+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:02:55.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:02:55.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.421+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:02:55.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:02:55.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:02:55.441+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:02:55.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604665fd]
2026-01-07T16:02:55.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a4ef6db]
2026-01-07T16:02:55.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:02:55.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.453+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:02:55.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73fdd1af] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d2fb49] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:02:55.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@549927840 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:02:55.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856446918 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:02:55.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501f31f5] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1620015542 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.473+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:55.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:55.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73fdd1af]
2026-01-07T16:02:55.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.506+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.507+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:02:55.512+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63d2fb49]
2026-01-07T16:02:55.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:02:55.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501f31f5]
2026-01-07T16:02:55.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:02:55.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:02:55.523+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45f58f99] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:02:55.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1816956491 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:02:55.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:02:55.538+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.538+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:02:55.560+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8a9d76] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.579+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@864938876 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.580+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.580+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.588+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.599+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45f58f99]
2026-01-07T16:02:55.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d499c24] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1411994963 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:55.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:02:55.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8a9d76]
2026-01-07T16:02:55.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:02:55.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d499c24]
2026-01-07T16:02:55.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4aa56e] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@394460924 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3908c95] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1917421695 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:55.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.691+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4aa56e]
2026-01-07T16:02:55.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ec64f4] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3908c95]
2026-01-07T16:02:55.746+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1214694450 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:55.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:55.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:02:55.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:55.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:55.800+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:02:55.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ec64f4]
2026-01-07T16:02:55.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421ad55c] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@34718255 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:55.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421ad55c]
2026-01-07T16:02:55.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d8bd14] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1031548230 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:55.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:02:55.863+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:02:55.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29d8bd14]
2026-01-07T16:02:55.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.874+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b6aafc0] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.874+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1731625892 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.886+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:02:55.889+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:02:55.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:02:55.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b6aafc0]
2026-01-07T16:02:55.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:55.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3a106a] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:55.938+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1349565122 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:55.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:55.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:55.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:56.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3a106a]
2026-01-07T16:02:56.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:56.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0b38ef] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:56.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@49076804 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:56.078+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:56.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:02:56.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:02:56.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c0b38ef]
2026-01-07T16:02:56.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:56.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15936229] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:56.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282786868 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:56.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:56.217+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:56.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:56.269+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15936229]
2026-01-07T16:02:56.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:56.273+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:02:56.274+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:57.112+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:02:57.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:02:57.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T16:02:57.115+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:02:57.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:02:57.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T16:02:57.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:02:57.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:02:57.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T16:02:57.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:02:57.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:02:57.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T16:02:57.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:02:57.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:02:57.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T16:02:57.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:57.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:57.122+09:00  INFO 17088 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T16:02:57.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@693bc220] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:57.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd353c8] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:57.122+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:57.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ed6de7] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:57.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@505280342 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:02:57.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1715129600 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:57.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:02:57.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:02:57.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:02:57.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1443493857 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:02:57.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:57.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T16:02:57.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:57.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:02:57.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:02:57.155+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd353c8]
2026-01-07T16:02:57.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@693bc220]
2026-01-07T16:02:57.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T16:02:57.157+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:57.158+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:57.158+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ed6de7]
2026-01-07T16:02:57.158+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:02:57.159+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eb6ff3c] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:57.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:57.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:57.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1155069509 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:57.164+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T16:02:57.165+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:57.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:57.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:57.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T16:02:57.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T16:02:57.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T16:02:57.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T16:02:57.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:57.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T16:02:57.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eb6ff3c]
2026-01-07T16:02:57.184+09:00  INFO 17088 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T16:02:57.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:57.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:57.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45f7d1bd] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:57.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eba34c] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:57.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@743541024 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:57.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:02:57.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:02:57.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@818745122 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:02:57.194+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T16:02:57.195+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:57.197+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:02:57.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45f7d1bd]
2026-01-07T16:02:57.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:57.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T16:02:57.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ade62c] was not registered for synchronization because synchronization is not active
2026-01-07T16:02:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eba34c]
2026-01-07T16:02:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1932305597 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:02:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:02:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:57.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:02:57.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=7, userId=4, si (truncated)...]
2026-01-07T16:02:57.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:57.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:02:57.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8ade62c]
2026-01-07T16:02:57.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:57.207+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:02:57.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:02:59.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures/6/set-default
2026-01-07T16:02:59.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing PUT /api/users/me/signatures/6/set-default
2026-01-07T16:02:59.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures/6/set-default
2026-01-07T16:02:59.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured PUT /api/users/me/signatures/6/set-default
2026-01-07T16:02:59.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/api/users/me/signatures/6/set-default", parameters={}
2026-01-07T16:02:59.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#setDefaultSignature(Long)
2026-01-07T16:02:59.786+09:00  INFO 17088 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 기본 서명/도장 설정 요청 - signatureId: 6, userId: 4
2026-01-07T16:02:59.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:02:59.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e]
2026-01-07T16:02:59.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1411543133 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will be managed by Spring
2026-01-07T16:02:59.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserSignatureMapper.findById     : ==>  Preparing: SELECT * FROM user_signature_tb WHERE signature_id = ? AND company_id = ? LIMIT 1
2026-01-07T16:02:59.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserSignatureMapper.findById     : ==> Parameters: 6(Long), 1(Long)
2026-01-07T16:02:59.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserSignatureMapper.findById     : <==      Total: 1
2026-01-07T16:02:59.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e]
2026-01-07T16:02:59.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e] from current transaction
2026-01-07T16:02:59.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.clearDefaultByUserId           : ==>  Preparing: UPDATE user_signature_tb SET is_default = 0, updated_at = NOW() WHERE user_id = ? AND company_id = ? AND is_default = 1
2026-01-07T16:02:59.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.clearDefaultByUserId           : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:02:59.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.clearDefaultByUserId           : <==    Updates: 1
2026-01-07T16:02:59.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e]
2026-01-07T16:02:59.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e] from current transaction
2026-01-07T16:02:59.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserSignatureMapper.update  : ==>  Preparing: UPDATE user_signature_tb SET signature_name = ?, signature_type = ?, signature_data = ?, is_default = ?, updated_at = NOW() WHERE signature_id = ? AND company_id = ?
2026-01-07T16:02:59.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserSignatureMapper.update  : ==> Parameters: 기본 서명(String), SIGNATURE(String), data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAADICAYAAADFjnuPAAAQAElEQVR4AeydPYgexR+AF4sgaGXECCEY0dTBSrDQgEkKCwsRC0GrgJ2giVW0ioqiVdIGBBULS9tYqIgggmIpaSLhkHQWKcI1/7/P5n7v7b33fr/7NTOPOLezs7Mz83vmeN7J7N7dA7u7u/8zycDvAb8H/B4Y3/fAA5X/SUACEpDAKAko6FFOi4OSgASWEiiggoIuYJINUQISSJOAgk5z3hy1BCRQAAEFXcAkG2KJBIw5BwIKOodZNAYJSCBLAgo6y2k1KAlIIAcCCjqHWTSGdQlYXwJJEFDQSUyTg5SABEokoKBLnHVjloAEkiCgoJOYpn4HaW8SkMA4CCjoccyDo5CABCRwiICCPoTEAglIQALjIKCg150H60tAAhLoiYCC7gm03UhAAhJYl4CCXpeY9SUgAQn0RKBlQfc0aruRgAQkUAABBV3AJBuiBCSQJgEFnea8OWoJSKBlAmNsTkGPcVYckwQkIIH/CCjo/yD4vwQkIIExElDQY5wVxySBsRFwPIMQUNCDYLdTCUhAAssJKOjljKwhAQlIYBACCnoQ7HaaFwGjkUA3BBR0N1xtVQISkMDWBBT01ghtQAISkEA3BBR0N1xtdZ+AOQlIYEMCCnpDcN4mAQlIoGsCCrprwrYvAQlIYEMCCnpDcG3dZjsSkIAE5hFQ0PPIWC4BCUhgYAIKeuAJsHsJSEAC8wiMW9DzRm25BCQggQIIKOgCJtkQJSCBNAko6DTnzVFLQALjJtDK6BR0KxhtRAISkED7BBR0+0xtUQISkEArBBR0KxhtRAISWIeAdVcjoKBX42QtCUhAAr0TUNC9I7dDCUhAAqsRUNCrcbKWBPojYE8S2COgoPdAeJCABCQwNgIKemwz4ngkIAEJ7BFQ0HsgPKRCwHFKoBwCCrqcuTZSCUggMQIKOrEJc7gSkEA5BBR0XnNtNBKQQEYEFHRGk2koEpBAXgQUdF7zaTQSkEBGBIoSdEbzZigSkEABBBR0AZNsiBKQQJoEFHSa8+aoJSCBAgjsC7qAYA1xn8Dly5erEydOVEeOHKlOnTpVXbhwoU6XLl2qrly5UufPnTtXkbhG2Y8//rjfgDkJSKBzAgq6c8Tj6gDJIt3PPvusunPnTj24v//+u/ryyy/rdPXq1VrQnFOXRB5Bcx9CJ8899c1+kYAEOiOgoDtDO76GWQkjWaS7zegQNKtu2lLU25D03pYIZNuMgs52ag8GhpxZCR8sraqjR49OF03On3jiiSrSpLCRQfSIGmEr6gYYsxJoiYCCbgnkmJtBntNyfuGFF6obN25U//zzT7W7u1vdvHmzTj/88EN9bJbFNeq/+eabtbSb8SJoPgDop1luXgIS2I6Agt6OXxJ3T8sZySJbJB0BxEr5ueeeOyRg6nCd+tevX68FzpEyrpFiNf3WW29Vihoi40mOJF0CCjrduVt55N98882Busj1QMEGJ0j++++/rzg2b//iiy/qN0AQdrPcvAQksD4BBb0+s+TuuHfv3mTMjz766CS/bYYVNLJnNX7s2LFJc8iZB4jTK/dJBTMSkMBKBBT0SpjSrcR2w87OziSAhx56aJJvK8PWx+3bt+s9baQd7bIvPXpJx2A9SmCEBBT0CCelzSE1hdlmu7PaQtQ8UGRVHf3yAJEPiVn1LZOABBYTUNCL+WRxNWRJMMiSRL6rxL40ifbp6+OPPyZrkoAE1iSgoNcElmL1kydPbjjszW/74IMPqqeeeqpugAeHiLo+8YsEJLAyAQW9Mqp0Kz7//PMHBs9DvAMFHZ28/vrrk5bZ6picmJGABFYioKBXwpR2pWlBf/XVV70ExCo6tld4WOgquhfsdpIRAQW9+WQmcycP70KUDJoVdF+yRNL0SXIVDQWTBFYnoKBXZ5V0zaYoCYQVLceuEw8L48OBPvv6YOg6LtuXQB8EFHQflEfQR1OUDOenn37i0EtiBR8dsXqPvEcJSGAxgc4Evbhbrw5BAElHv4iyr9XsG2+8Ed1WfX4wTDo1I4FECSjoRCduk2GzzXH8+PFNbt3qnuZrfnwwbNWYN0ugIAIKuqDJJtQhXn1jD5pE/6zaSeRNEhgngfGMSkGPZy56Gcn58+cn/fS5mm3uQ08GYEYCElhIQEEvxJPfRUQ5xGo2+oTorVu3OJgkIIElBBT0EkA5XkbSERevvkW+y2NT0L///nuXXdl2twRsvUcCCrpH2GPpqvmThX29VfH0009Pwr979+4kb0YCEphPQEHPZ5PtFV63ixUt+9B9PLRrvj3SR3/ZTp6BFUVAQRc13fvBDrHNsd97vjkjk0CbBBR0mzQTamvIHx6J1XtCuByqBAYhoKAHwT58p6ygQ5R9bHP45sbwc+4I0iOgoNObs9ZGjKSjsa7f5qgfRu511nxIuVfkQQISmEFAQc+AUkpRn9scIWhW7c0PhlJYG6cENiGgoDehlsk9iBJhEk7X2xy0Tz8mCUhgdQIKenVWHdccpnleuYueu5Jo87W6Zn/Rr0cJSGA2AQU9m0sxpfyGu1hFd/WnsJrij76KAWygEtiCgILeAl4ut7LVQSyItLnapayN1GzTFXQbRG2jFAKpCLqU+RgkzubDQiTd1SBcPXdF1nZzJaCgc53ZNeJiBR3yjLct1rh9adV4ha/5i/uX3mQFCUigUtB+E9QEYuuh7RU02xskOvH9ZyiYiiOwRcAKegt4Od0agkambUs6OCnoIOFRAqsRUNCrccq+FlscbHUQaJvbHLG9QbvRPnmTBCSwnICCXs6omBqxwm1Kddvgoy0+ALZty/tzJGBMiwgo6EV0CrsWgmabg7Rt+LRBop3YQiFvkoAEViOgoFfjVEQttiBipRsr320Cb7bBD8Rs05b3SqBEAgq6xFlfEDOS5nIb+9AhaFfPEN0oeVPhBBR04d8A0+HHNgdvcsT2xHSdVc6vXr1axf3NH4RZ5V7rSEAC9wko6Psc/LpHgNVubHMg6b3itQ/Xrl2r7zl9+nQVq/K6wC9LCcQH29KKVsiegILOforXD/DkyZP1TZv+8iQEQ6KRl19+mUMnKeVG+fB78sknq8cee6w6ceJEderUqUm6cOHC5F8fKcfo2LcnoKC3Z5hdC7ElgURCtOsEefbs2bo6K3EfDtYoJl/gee7cuYq0s7NT/fvvv9WdO3dqIXONBHfS5CYzxRJQ0MVO/fzAm1sS64qC+kiG1tku4Wi6TwA2rJQ53i85/JUPNbiRDl+1pDQCCjrXGd8iLiRBool13+bgn+fcR1IyULifkDKr5vtnB78+/PDD1Y0bN6rd3d3q5s2b1fXr1w9W8KxYAgq62KlfHHjIlVflYkW8+I6qunLlSv1PdeqxtRGS57zkBL95cobzH3/84YPUkr9BFsSuoBfAKflSvG4HA1Z/HBclJISgow7iiXzJR7iwrTHNgA8vVs2slslPX/dcAhAoVNCEblpEgH3oEAeSWVSXa6y0OZJcPUOhqn755ZfqzJkz908aX+HKVgaMG8VmJXCIgII+hMSCIBCrYOS7SNJci9Uz8kHQ0UaJx+CBnHlTo8kAKSPnZpl5CcwjoKDnkbG8im0OhHPr1q25RHwwuI+GDzNeM4wPrLiCmNnSIEWZRwksIzBL0Mvu8XohBJAKK2LCnfdDK4go9qipW+rqmQ8xHgTyYUUeZqRjx45V7733Xv2WBjwpM0lgVQIKelVShdZbts2BoAMND7wiX8oRGcOAB4HxQRWx82F1+/bt6qOPPooijxJYi4CCXgtXeZVjm4PIp7c5EBPlJGRU2gqR+BEzRxhE4l8S7DPDJMo89kQgs24UdGYT2nY4SBfh0G5zmyNWjpRzvSQZsc985MiR+r1v4o8UHJAz+Sj3KIFNCSjoTckVdN+sbY6LFy9OCMT1SUGmGbYwWDGzzzwdIh9QiJnj9DXPJbApAQW9KbmC7mtucyAp0nfffVcTePzxx6vcpcS/FngASCJfB773hdj5EW2Oe0UjPji01Ago6NRmbIDxNrc5+N0cH3744WQU58+fn+RzyyBjpMyqmQ+liI/tC4SsmIOIx64IKOiuyGbWbmxjsP/alFWOb24gZrYxnnnmmaoZa4jZrYzMvrlHHI6CHvHkjGlozW2OGFdIO84TP9a/6Akxs2Lmg+ju3bt1SKyWkTKJfF3oFwn0QEBB9wA5hy7Y5njwwQcPhJLL6pkVc2xlIGaCjNVybGNwTrlJAn0SUNB90k64L8R17969SQSvvPLKJJ9qhphYLZNiKwMR88HjajnVWc1r3Ao6r/nsLBr+6d9s/KWXXmqeJpXnB0uQMjGxembwiJnfk4GYc9u6IT5TmgQUdJrz1uuoEdp0h80fWpm+NtbzWDETzywxs40z1rE7rjIJKOgy532tqBFa3HD06NE6y5ZASK4uGPEXxr9oxayYRzx5hQ9NQbfxDZBxG8itGd6nn35asR1AGZLmONbE2BEzx/gwYeyxx6yYxzpzjisIKOgg4XEmAeQWF5Ab+7MhtjFucyBixjxLzOwvk4ghYvIogTETUNBjnp2Bx8ZDtOYQ4h3gOLKCRojNOkPlGccsMSNjpEziA2ao8dmvBDYh0IOgNxmW94yBwLfffjsZBnJDdhSQJ5HnwRvHoRJi5oMkVsyMg7HxIYKU2c7gnHKTBFIjoKBTm7GexstqtPne8/QvnQ9Z//nnnz2NaL8bpMwHA1ImkecqIg4xc+SccpMEUiWgoFOduY7HjaCbXbz22mvN0/o32B0/frzit9ohzAMXOzqhH8aFlFk1c46EkTGrZRL5jrq32QIJDB2ygh56BkbYP/JrDottguZ55F988cU6y150nenoC1KOH8UmTzc8qETGIWVETblJAjkRUNA5zWYLsSDb2DKgOUQY2xmcN1P8AqUu3uZgDJcvX67iL5fw57YYC1Lm92PwU3/km+MxL4HcCCjo3GZ0y3iav+uZpt5//30OM1OsWpE62w0zK61YyP1ImRUyUmYVz3lImZWyUl4RZl/V7KdzAgq6c8TpdIBoSTFi5EiK8+kj15qSnr4+7xwZkxBwCDn2lTmnXbZVfv7550opz6NoeQkEFHQJs7xijNOrZyS57FZkSp3pbQ4ETEK4pNhDZnWMjEmskrmG5GmHLYvYvmBbhXLaNkmgVAIKutSZnxF3c/W8qiBjH5p7X3311QrpIt9ICJjEdYSNiEnImMTWBSm/lfIMwBZJYE0CCnpNYLlWZ7uhGRvybJ5P55Et4m2unHnljna4hoSRPO0gXyQcq2POKSe5Sp4m67kE9gko6H0WRef4Y7BNALPEiXyRcnN1zMq4eR9/RDZEzBYJEkbWs9pr3mdeAhI4TEBBH2ZSZAmr3gj82Wefrf9YKjJm7/iRRx6pX3dj+4KyqIt0ETCrY/Lc/9dff9X3kl+QvCQBCaxAQEGvAKm0Kr/++muFmJExK+T446lwQMRImVUyYiZPGatlriNvRE7eJAEJbEdAQW/HL5u75/0JK7Yn3n777QoBN6U8HTj12HOmXElDLijfHAAAA9dJREFUwSSB7Qko6O0Ztt7CEA2+88471SeffFIhWVbFPMhDyBw///zzunzZuLgv6rBfzUoaWUeZRwlIYD0CCno9XlnXfvfdd+uVMqJlRbxusGx1IPS4D0mfOXOmunr1ahR5lIAE1iCgoNeAZdXlBBA7go+aOzs71aVLlyr2s11NBxWPEliNQHqCXi0uaw1IAEE3V9IMBUHH63k8gLx48aJvewDGJIEFBBT0Ajhe2pwAK+mvv/76UAOsonkz5Nq1a/WbIkibvWq2Q7h26AYLJFAwAQVd8OR3HTq/5J9X8XjwOK8vpIyckfTZs2frHxWfV9dyCSROYO3hK+i1kXnDOgR4cMgreoiaI+n06dMzmwhZsx0ys4KFEiiMgIIubMKHChdRs5Im/fbbbxXCJnHOdkhzXPELmJpl5iVQIgEFXeKsjyBmhE1iRc0DRWTNw0XOp4U9guE6hB4I2MVhAgr6MBNLBiCArBE0K+oBurdLCYySgIIe5bQ4KAlIQAJVpaD9LpBACgQcY5EEFHSR027QEpBACgQUdAqz5BglIIEiCSjoIqc9t6CNRwJ5ElDQec6rUUlAAhkQUNAZTKIhSEACeRJQ0HnOazMq8xKQQKIEFHSiE+ewJSCB/Ako6Pzn2AglIIFECRQv6ETnzWFLQAIFEFDQBUyyIUpAAmkSUNBpzpujloAECiCwWNAFADBECUhAAmMloKDHOjOOSwISKJ6Agi7+W0AAEsiSQBZBKegsptEgJCCBHAko6Bxn1ZgkIIEsCCjoLKbRICSwHgFrp0FAQacxT45SAhIokICCLnDSDVkCEkiDgIJOY54cZZ8E7EsCIyGgoEcyEQ5DAhKQwDQBBT1NxHMJSEACIyGgoEcyEekMw5FKQAJ9EVDQfZG2HwlIQAJrElDQawKzugQkIIG+CCjodknbmgQkIIHWCCjo1lDakAQkIIF2CSjodnnamgQkIIHWCPQq6NZGbUMSkIAECiCgoAuYZEOUgATSJKCg05w3Ry0BCfRKYJjOFPQw3O1VAhKQwFICCnopIitIQAISGIaAgh6Gu71KICcCxtIRAQXdEViblYAEJLAtAQW9LUHvl4AEJNARAQXdEViblUAQ8CiBTQko6E3JeZ8EJCCBjgko6I4B27wEJCCBTQko6E3JeV87BGxFAhKYS0BBz0XjBQlIQALDElDQw/K3dwlIQAJzCSjouWjGcMExSEACJRNQ0CXPvrFLQAKjJqCgRz09Dk4CEiiZQMqCLnnejF0CEiiAgIIuYJINUQISSJOAgk5z3hy1BCSQMoEVx66gVwRlNQlIQAJ9E/g/AAAA//9sqt2yAAAABklEQVQDAAsAAH7W3rBUAAAAAElFTkSuQmCC(String), true(Boolean), 6(Long), 1(Long)
2026-01-07T16:02:59.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserSignatureMapper.update  : <==    Updates: 1
2026-01-07T16:02:59.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e]
2026-01-07T16:02:59.836+09:00  INFO 17088 --- [http-nio-8080-exec-5] c.i.b.service.UserSignatureService       : 기본 서명/도장 설정 완료 - signatureId: 6
2026-01-07T16:02:59.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e] from current transaction
2026-01-07T16:02:59.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserSignatureMapper.findById     : ==>  Preparing: SELECT * FROM user_signature_tb WHERE signature_id = ? AND company_id = ? LIMIT 1
2026-01-07T16:02:59.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserSignatureMapper.findById     : ==> Parameters: 6(Long), 1(Long)
2026-01-07T16:02:59.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserSignatureMapper.findById     : <==      Total: 1
2026-01-07T16:02:59.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e]
2026-01-07T16:02:59.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e]
2026-01-07T16:02:59.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e]
2026-01-07T16:02:59.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d5e531e]
2026-01-07T16:02:59.852+09:00  INFO 17088 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 기본 서명/도장 설정 완료 - signatureId: 6
2026-01-07T16:02:59.853+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:02:59.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=기본 서명/도장이 설정되었습니다., data=UserSignatureDto(signatureId=6, userId=4, (truncated)...]
2026-01-07T16:02:59.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:00.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T16:03:00.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/me/signatures
2026-01-07T16:03:00.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-07T16:03:00.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-07T16:03:00.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-07T16:03:00.956+09:00  INFO 17088 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 4, companyId: 1
2026-01-07T16:03:00.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:00.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6df63623] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:00.958+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1763237123 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:00.959+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-07T16:03:00.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:00.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 2
2026-01-07T16:03:00.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6df63623]
2026-01-07T16:03:00.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:00.969+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=6, userId=4, si (truncated)...]
2026-01-07T16:03:00.970+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:03.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:03.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:03.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:03:03.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:03:03.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:03.480+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:03.481+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:03.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:03.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:03:03.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:03.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:03.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:03.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:03.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:03.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d500f96] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:03:03.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:03:03.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:03.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:03.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:03:03.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:03:03.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:03.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:03:03.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:03.498+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:03:03.499+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.499+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:03.499+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4597986d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d05462e] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.501+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee97e15] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189eb14c] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947706838 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:03.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:03.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343246996 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:03.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1712686559 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:03.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@210566560 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:03.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@826040472 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:03.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:03.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:03.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:03.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:03.523+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.533+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.535+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:03.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:03.538+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d500f96]
2026-01-07T16:03:03.538+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.538+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:03.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:03.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d05462e]
2026-01-07T16:03:03.539+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4597986d]
2026-01-07T16:03:03.540+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:03.541+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.541+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:03:03.541+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.541+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@189eb14c]
2026-01-07T16:03:03.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:03.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee97e15]
2026-01-07T16:03:03.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:03.547+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1697f20b] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.548+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dca9fb] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.548+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.552+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:03.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170805449 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:03.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@537301446 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:03.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61c6fadb] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6df5d142] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:03.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.555+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1767707551 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:03.556+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2043660992 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:03.557+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:03.557+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.557+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.558+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.559+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:03.564+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.564+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.565+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b96cc] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.569+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1710372607 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:03.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:03.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:03.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.572+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6df5d142]
2026-01-07T16:03:03.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dca9fb]
2026-01-07T16:03:03.577+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1697f20b]
2026-01-07T16:03:03.579+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61c6fadb]
2026-01-07T16:03:03.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:03.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.583+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b96cc]
2026-01-07T16:03:03.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b10a2aa] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53653e29] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.585+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74d45779] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ebedd4] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:03.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@682365259 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:03.589+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2119947983 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:03.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1568339010 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:03.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@556646864 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:03.590+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:03.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:03.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:03.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:03.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:03.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:03.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:03:03.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:03.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:03.597+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:03.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:03.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:03.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:03.614+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:03:03.614+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:03.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:03.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b10a2aa]
2026-01-07T16:03:03.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53653e29]
2026-01-07T16:03:03.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:03.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7fe2ac] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:03.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.618+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef85c26] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:03.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1150359356 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:03.619+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ebedd4]
2026-01-07T16:03:03.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d036882] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1075031713 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:03.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74d45779]
2026-01-07T16:03:03.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1526232456 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:03.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.623+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e13f1af] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:03.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d44e569] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.629+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@910047988 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:03.629+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:03.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2080182311 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:03.631+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:03.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.633+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:03.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7fe2ac]
2026-01-07T16:03:03.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:03.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.637+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:03.637+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef85c26]
2026-01-07T16:03:03.638+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d036882]
2026-01-07T16:03:03.638+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:03.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:03.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:03.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:03.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e13f1af]
2026-01-07T16:03:03.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:03:03.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:03.641+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:03.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:03.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:03:03.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:03.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d44e569]
2026-01-07T16:03:03.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:03.646+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:03.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:03.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:03.650+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:03:03.652+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:03.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:03.655+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d5958] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.656+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:03:03.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:03.662+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:03.663+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@183012237 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:03.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:03:03.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:03.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:03.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:03.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:03:03.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:03:03.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.684+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:03.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:03:03.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:03.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ac56f9d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.688+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b9a91ad] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@430674125 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:03.694+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd81af8] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:03.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@285888349 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:03.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:03.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:03.708+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:03.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199562302 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:03.714+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:03.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:03.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ac56f9d]
2026-01-07T16:03:03.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d5958]
2026-01-07T16:03:03.746+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11bfaed2] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26952d5d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.750+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064806436 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:03.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1465714581 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:03.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:03.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:03:03.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:03.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cd81af8]
2026-01-07T16:03:03.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b9a91ad]
2026-01-07T16:03:03.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f073da] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c669041] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682157030 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:03.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2030231023 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:03.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:03.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26952d5d]
2026-01-07T16:03:03.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11bfaed2]
2026-01-07T16:03:03.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b772e2] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1833391148 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:03.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@123efb6c] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:03.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2115706567 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:03.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:03.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.803+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c669041]
2026-01-07T16:03:03.803+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f073da]
2026-01-07T16:03:03.803+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a48004d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.812+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ce985c] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1108632541 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:03.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803244348 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:03.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:03.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:03.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:03.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:03.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:03.890+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:03:03.891+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b772e2]
2026-01-07T16:03:03.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@123efb6c]
2026-01-07T16:03:03.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e52fa26] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:03.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623d01fe] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:03.900+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@925611372 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:03.901+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@129856334 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:03.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:03.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:03:03.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:03.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a48004d]
2026-01-07T16:03:03.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ce985c]
2026-01-07T16:03:03.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:03.997+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:04.007+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.008+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ce7f2f] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.012+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:04.012+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9289a8] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.014+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1921387986 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:04.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1717739551 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:04.015+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:04.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:04.016+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:04.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:04.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:04.021+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e52fa26]
2026-01-07T16:03:04.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623d01fe]
2026-01-07T16:03:04.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:04.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:04.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36ce7f2f]
2026-01-07T16:03:04.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9289a8]
2026-01-07T16:03:04.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:04.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31950f44] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:04.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:04.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:04.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@992856697 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.045+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:03:04.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:03:04.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:04.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:04.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:04.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:04.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:04.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:04.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:04.111+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:04.116+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:04.117+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ad2684] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@669946306 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:04.125+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:04.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31950f44]
2026-01-07T16:03:04.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:04.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:04.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:03:04.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:04.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:03:04.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:04.142+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ad2684]
2026-01-07T16:03:04.140+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:04.145+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:03:04.146+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@351af9d9] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:03:04.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790196472 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:04.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:04.151+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:04.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:04.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66094dcd] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.154+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056741942 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.155+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:04.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:04.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.157+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@351af9d9]
2026-01-07T16:03:04.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67601378] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@97970812 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:04.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:04.175+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:04.176+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66094dcd]
2026-01-07T16:03:04.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3116b9c] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@794437910 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:04.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:04.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67601378]
2026-01-07T16:03:04.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:04.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490c84b7] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@772846909 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:04.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:04.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:04.219+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.230+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3116b9c]
2026-01-07T16:03:04.232+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5774985a] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605457059 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.238+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.239+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:04.240+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@490c84b7]
2026-01-07T16:03:04.245+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:04.246+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:04.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:04.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:04.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:04.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5774985a]
2026-01-07T16:03:04.273+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.274+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d339133] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.274+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1316382855 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.278+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:04.279+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:04.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.298+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d339133]
2026-01-07T16:03:04.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5483550e] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1972956324 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.317+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:04.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:04.348+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:04.349+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5483550e]
2026-01-07T16:03:04.350+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8fe265] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693120799 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.354+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:04.356+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:04.373+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:04.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8fe265]
2026-01-07T16:03:04.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62400f7e] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@923354521 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:04.387+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:04.389+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62400f7e]
2026-01-07T16:03:04.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2769b] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@507231622 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:04.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:04.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:04.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ce2769b]
2026-01-07T16:03:04.514+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:04.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24bfd10f] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:04.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1267088813 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:04.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:04.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:04.528+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:04.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24bfd10f]
2026-01-07T16:03:04.534+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:04.536+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:03:04.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:07.924+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-07T16:03:07.924+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-01-07T16:03:07.927+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:07.927+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:07.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-07T16:03:07.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:07.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:07.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:07.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:07.938+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:07.939+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:07.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-07T16:03:07.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-07T16:03:07.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:07.940+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:07.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5ace78] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:07.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-07T16:03:07.949+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-07T16:03:07.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:07.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d70f178] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:07.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:07.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:07.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368c27ee] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:07.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1998862522 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:07.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@32937203 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:08.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-07T16:03:08.007+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:08.007+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-07T16:03:08.010+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:08.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883067269 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:08.072+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:08.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:08.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:08.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5ace78]
2026-01-07T16:03:08.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:08.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cfc1801] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:08.086+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1538436217 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:08.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-07T16:03:08.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:08.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d70f178]
2026-01-07T16:03:08.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:08.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:08.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-07T16:03:08.106+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:08.120+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:08.125+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368c27ee]
2026-01-07T16:03:08.128+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:08.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-07T16:03:08.129+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:08.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-07T16:03:08.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:08.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-07T16:03:08.133+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:08.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-07T16:03:08.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cfc1801]
2026-01-07T16:03:08.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:08.140+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f974fb] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:08.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-07T16:03:08.147+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@263804565 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:08.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:08.148+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:08.157+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:08.160+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b9dbe2a] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:08.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538675982 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:08.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:08.171+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-07T16:03:08.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f974fb]
2026-01-07T16:03:08.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-07T16:03:08.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:08.174+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18fe81c1] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:08.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538468489 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:08.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-07T16:03:08.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:08.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b9dbe2a]
2026-01-07T16:03:08.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:08.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:08.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-07T16:03:08.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:08.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:08.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18fe81c1]
2026-01-07T16:03:08.200+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:08.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:08.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:09.053+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/user
2026-01-07T16:03:09.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-07T16:03:09.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-07T16:03:09.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-07T16:03:09.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-07T16:03:09.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-07T16:03:09.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c6bf8d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253431987 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:09.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-07T16:03:09.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 4(Long)
2026-01-07T16:03:09.075+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.U.findActiveByUserId             : <==      Total: 0
2026-01-07T16:03:09.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c6bf8d]
2026-01-07T16:03:09.085+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:09.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[])]
2026-01-07T16:03:09.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:09.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:09.897+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:09.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:03:09.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:09.899+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:09.901+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:09.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:03:09.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:09.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:09.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:09.907+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.912+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba89037] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:09.915+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:09.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:09.904+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:03:09.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:03:09.917+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:09.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:03:09.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:03:09.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:09.919+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:09.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:03:09.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b8902f] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490632300 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:09.925+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:09.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:09.921+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:03:09.922+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@314decdf] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.930+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:09.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:03:09.931+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:09.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3548271d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.936+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2073aab1] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.939+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396980540 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:09.939+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006818079 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:09.939+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:09.940+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:09.940+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:09.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ba89037]
2026-01-07T16:03:09.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:09.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:09.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67365d22] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@905872835 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:09.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@75927502 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:09.949+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:09.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:09.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:09.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925514955 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:09.950+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:09.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:09.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:09.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@314decdf]
2026-01-07T16:03:09.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:09.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b8902f]
2026-01-07T16:03:09.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.956+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:09.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:09.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64cbe2e8] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.958+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:09.958+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:03:09.958+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:09.975+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:09.975+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620481659 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:09.977+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67365d22]
2026-01-07T16:03:09.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3548271d]
2026-01-07T16:03:09.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2073aab1]
2026-01-07T16:03:09.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:09.979+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:09.979+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:09.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:09.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612e7bb3] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d4cdb6] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.984+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36084f3f] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.984+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:09.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@874833401 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:09.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637395238 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:09.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:09.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@43438170 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:09.987+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:09.987+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:09.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:09.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:09.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:09.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:09.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:09.989+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:09.989+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64cbe2e8]
2026-01-07T16:03:09.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:09.991+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:09.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42eaef87] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:09.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:09.999+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2030934416 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:10.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16d4cdb6]
2026-01-07T16:03:10.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c15c3a9] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:10.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:10.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7475df3e] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.002+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1645778908 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:10.005+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36084f3f]
2026-01-07T16:03:10.005+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@612e7bb3]
2026-01-07T16:03:10.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1148978555 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:10.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:10.007+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.017+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:10.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:10.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:10.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@496b99ee] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46dbc7ab] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:03:10.020+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42eaef87]
2026-01-07T16:03:10.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1030637131 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:10.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1413140256 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:10.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.028+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:10.029+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@563f769a] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:10.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1136409869 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:10.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.036+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:10.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:03:10.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c15c3a9]
2026-01-07T16:03:10.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7475df3e]
2026-01-07T16:03:10.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:10.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46dbc7ab]
2026-01-07T16:03:10.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@496b99ee]
2026-01-07T16:03:10.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:10.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34583bc1] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.047+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@563f769a]
2026-01-07T16:03:10.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:10.049+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1854840411 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:10.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e828d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.051+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.052+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2a340a] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1058003661 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:10.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:10.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:10.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@793747 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:10.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:10.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:10.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:10.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:10.064+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:10.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:10.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:10.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:10.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34583bc1]
2026-01-07T16:03:10.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:10.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:10.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:10.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.079+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18aa709f] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.070+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:10.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:10.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:03:10.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e828d]
2026-01-07T16:03:10.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1393a43e] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.088+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.090+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.097+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:03:10.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2131742468 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:10.098+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:10.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:10.114+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:10.118+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:03:10.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:10.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2a340a]
2026-01-07T16:03:10.140+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648386291 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:10.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:10.152+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:03:10.176+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:03:10.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:10.178+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:10.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:03:10.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:10.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:10.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1393a43e]
2026-01-07T16:03:10.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dfe17a4] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:03:10.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ec7b13] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:10.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327141632 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:10.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1933770353 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:10.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:03:10.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191bacc0] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:10.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.190+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.191+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1078863098 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.195+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:10.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:10.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2667b2f0] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.196+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18aa709f]
2026-01-07T16:03:10.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1662354964 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:10.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.198+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:10.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:10.204+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.204+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:10.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:10.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dfe17a4]
2026-01-07T16:03:10.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ec7b13]
2026-01-07T16:03:10.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.207+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.208+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.212+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191bacc0]
2026-01-07T16:03:10.215+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:03:10.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fd6024] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d742a81] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.217+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2667b2f0]
2026-01-07T16:03:10.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1681070472 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:10.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@219215583 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:10.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e6d094] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.221+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.221+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:10.221+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.223+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@106891684 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.223+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930439] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.223+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:10.224+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.224+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.225+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1400430569 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:10.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.234+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:10.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.238+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d742a81]
2026-01-07T16:03:10.239+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69fd6024]
2026-01-07T16:03:10.239+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42e6d094]
2026-01-07T16:03:10.240+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.241+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.245+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930439]
2026-01-07T16:03:10.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e94078d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5144d91f] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19783933] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.247+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1380454652 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:10.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396342611 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:10.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835935992 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.248+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@420ab428] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.249+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:10.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.250+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:10.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@317248156 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:10.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:10.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:10.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:10.257+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:03:10.259+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:10.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:10.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5144d91f]
2026-01-07T16:03:10.263+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e94078d]
2026-01-07T16:03:10.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19783933]
2026-01-07T16:03:10.264+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.265+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:10.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1830110] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:03:10.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18adb455] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.270+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.271+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@254133954 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:10.271+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@420ab428]
2026-01-07T16:03:10.272+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1086633938 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.274+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.287+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:10.291+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.294+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:10.297+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d570182] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.299+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:10.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:10.301+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@443244532 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:10.302+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:10.303+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.304+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:10.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.305+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:10.315+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.316+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:10.318+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f35c39c] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d570182]
2026-01-07T16:03:10.319+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1830110]
2026-01-07T16:03:10.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18adb455]
2026-01-07T16:03:10.320+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2120674932 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:10.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.321+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:03:10.322+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:10.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:03:10.324+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:03:10.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:10.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.341+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.355+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:03:10.369+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:10.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:10.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f35c39c]
2026-01-07T16:03:10.375+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.376+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf83cf9] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.377+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291859417 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:10.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:03:10.378+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:03:10.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:10.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae3d8cf] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.388+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@143218353 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.388+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf83cf9]
2026-01-07T16:03:10.398+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.404+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.408+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@452e8bc8] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.418+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@418146400 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:10.419+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:10.420+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:10.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.436+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:10.449+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae3d8cf]
2026-01-07T16:03:10.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@452e8bc8]
2026-01-07T16:03:10.450+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c43f2f2] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330f2be4] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@940736021 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@38700678 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:10.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.457+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.496+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330f2be4]
2026-01-07T16:03:10.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c43f2f2]
2026-01-07T16:03:10.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:10.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1837f3e0] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:10.506+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1269847670 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:10.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:10.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:10.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1837f3e0]
2026-01-07T16:03:10.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.580+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e509bff] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.581+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1507839782 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.583+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.651+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e509bff]
2026-01-07T16:03:10.669+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b19673f] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.681+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097637056 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:10.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:10.707+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:10.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b19673f]
2026-01-07T16:03:10.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4d013d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790476148 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:10.724+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:10.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:10.760+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4d013d]
2026-01-07T16:03:10.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ecec4] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@894268247 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.789+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ecec4]
2026-01-07T16:03:10.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6822b24d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@471730531 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:10.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:10.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:10.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6822b24d]
2026-01-07T16:03:10.828+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:10.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba33d9f] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:10.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116279420 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:10.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:10.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:10.874+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:10.896+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba33d9f]
2026-01-07T16:03:10.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:10.922+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:03:10.923+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:12.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/4/approvers
2026-01-07T16:03:12.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/4/approvers
2026-01-07T16:03:12.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:12.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:12.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:12.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:12.845+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:12.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers
2026-01-07T16:03:12.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:12.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:12.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:12.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers
2026-01-07T16:03:12.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:12.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:12.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b044773] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:12.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers
2026-01-07T16:03:12.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:12.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers", parameters={}
2026-01-07T16:03:12.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:12.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-07T16:03:12.898+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@350807973 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:12.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:12.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:12.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4080004a] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:12.953+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T16:03:12.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T16:03:12.981+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:12.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f9aa91] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:12.991+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1105695123 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:12.991+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:12.991+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:12.993+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:12.993+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b044773]
2026-01-07T16:03:12.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:12.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298d35a9] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:12.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2015319498 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:13.000+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1858223860 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:13.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:13.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-07T16:03:13.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:13.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:13.007+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:13.008+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4080004a]
2026-01-07T16:03:13.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:13.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:13.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298d35a9]
2026-01-07T16:03:13.030+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-01-07T16:03:13.031+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:13.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:13.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757413a3] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:13.035+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19f9aa91]
2026-01-07T16:03:13.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:13.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@890519769 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:13.039+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:13.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:13.042+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=7, userId=4, approve (truncated)...]
2026-01-07T16:03:13.046+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:13.048+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:13.054+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-01-07T16:03:13.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers
2026-01-07T16:03:13.057+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:13.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers
2026-01-07T16:03:13.061+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-07T16:03:13.062+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757413a3]
2026-01-07T16:03:13.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/approvers
2026-01-07T16:03:13.063+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers
2026-01-07T16:03:13.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:13.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-07T16:03:13.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56daa0ab] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:13.073+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers", parameters={}
2026-01-07T16:03:13.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-07T16:03:13.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@65423576 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:13.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:13.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-01-07T16:03:13.082+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-07T16:03:13.083+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:13.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T16:03:13.084+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:13.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T16:03:13.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f29e63] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:13.087+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:13.089+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6ddc58] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:13.091+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:13.092+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1481790164 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:13.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56daa0ab]
2026-01-07T16:03:13.099+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-07T16:03:13.100+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:13.101+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-07T16:03:13.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1792535421 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:13.102+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:13.103+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-01-07T16:03:13.104+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:13.105+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:13.108+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-07T16:03:13.115+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f29e63]
2026-01-07T16:03:13.118+09:00  INFO 17088 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-07T16:03:13.121+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:13.123+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 2
2026-01-07T16:03:13.124+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-07T16:03:13.130+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6ddc58]
2026-01-07T16:03:13.131+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:13.134+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:13.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=7, userId=4, approve (truncated)...]
2026-01-07T16:03:13.141+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:13.155+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-07T16:03:13.161+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/approvers
2026-01-07T16:03:13.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-07T16:03:13.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-07T16:03:13.165+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-07T16:03:13.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:13.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf3725d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:13.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375988780 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:13.170+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-07T16:03:13.177+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 1(Long)
2026-01-07T16:03:13.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-07T16:03:13.183+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf3725d]
2026-01-07T16:03:13.183+09:00  INFO 17088 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 1, count: 3
2026-01-07T16:03:13.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:13.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=4, username=test_user3, passwor (truncated)...]
2026-01-07T16:03:13.185+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:15.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:15.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:15.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:03:15.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:03:15.686+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:15.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:15.689+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:15.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:15.690+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:03:15.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:15.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:15.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:15.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:03:15.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:03:15.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:15.696+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:15.697+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:15.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:03:15.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:03:15.698+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:15.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:03:15.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:15.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:15.699+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:03:15.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fbe1902] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.701+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:15.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.702+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1009c313] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e0b250] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.703+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27df3458] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.705+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfc7061] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.718+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108875976 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:15.719+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@84012998 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:15.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:15.721+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:15.722+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:15.723+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:15.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@989143825 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:15.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1937108191 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:15.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.735+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:15.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:15.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1517184708 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:15.736+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:15.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:15.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1009c313]
2026-01-07T16:03:15.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:15.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad1258b] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.746+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:15.749+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1526677890 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:15.753+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fbe1902]
2026-01-07T16:03:15.753+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:15.755+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:15.755+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:15.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:15.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:15.760+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55e0b250]
2026-01-07T16:03:15.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:03:15.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:15.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfc7061]
2026-01-07T16:03:15.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c1aa74] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27df3458]
2026-01-07T16:03:15.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1879188895 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:15.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@427dff9b] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:15.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.763+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25965eb8] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1100088023 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:15.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:15.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:15.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:15.770+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@924549844 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:15.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.771+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad1258b]
2026-01-07T16:03:15.779+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@117b76ed] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.772+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:15.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.774+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:15.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@302375988 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:15.781+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:15.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:15.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:15.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:15.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:15.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:15.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:15.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@427dff9b]
2026-01-07T16:03:15.788+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f065f42] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48c1aa74]
2026-01-07T16:03:15.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@721176555 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:15.793+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45cac2f1] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:15.796+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64506369] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1759935732 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:15.797+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:15.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@554166173 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:15.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:15.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:15.802+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:15.804+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:15.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25965eb8]
2026-01-07T16:03:15.807+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:15.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:15.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:15.816+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:15.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@117b76ed]
2026-01-07T16:03:15.817+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e77a0bc] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f065f42]
2026-01-07T16:03:15.818+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45cac2f1]
2026-01-07T16:03:15.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@696474196 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:15.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:15.823+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41453b61] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:15.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:15.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:15.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4983b4f8] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@197386682 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:15.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64506369]
2026-01-07T16:03:15.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:03:15.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:15.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1523395187 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:15.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:03:15.848+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:15.850+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:15.851+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:03:15.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:03:15.852+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405d4896] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:15.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e77a0bc]
2026-01-07T16:03:15.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:03:15.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@661725407 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:15.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:03:15.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de14041] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:15.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:03:15.869+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:15.870+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235954945 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d58da2e] will not be managed by Spring
2026-01-07T16:03:15.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41453b61]
2026-01-07T16:03:15.872+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.873+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:15.878+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.879+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:15.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c59a09f] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.887+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4983b4f8]
2026-01-07T16:03:15.888+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:15.889+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:15.901+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:15.902+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:15.903+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:03:15.905+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:15.918+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:15.920+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:15.924+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:15.932+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@405d4896]
2026-01-07T16:03:15.933+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:15.934+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:15.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:15.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:03:15.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399b309e] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:15.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:03:15.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@321443523 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:15.954+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:15.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:15.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:15.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:15.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773111799 wrapping com.mysql.cj.jdbc.ConnectionImpl@59de4e36] will not be managed by Spring
2026-01-07T16:03:15.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:15.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.957+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:15.958+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de14041]
2026-01-07T16:03:15.963+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:03:15.966+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:03:15.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76c45fef] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.964+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dac1b44] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:15.965+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:15.966+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186555955 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:15.967+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066783602 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:15.968+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:03:15.969+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:15.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:15.973+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:15.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:15.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.022+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:03:16.023+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:03:16.024+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:16.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c59a09f]
2026-01-07T16:03:16.041+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:16.050+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:03:16.051+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:16.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:03:16.040+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@399b309e]
2026-01-07T16:03:16.058+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.065+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b9b5b4] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:03:16.066+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1145470589 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:16.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:03:16.067+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:16.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:03:16.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:16.069+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bda0d63] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.071+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@209514463 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dac1b44]
2026-01-07T16:03:16.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.135+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eff9f2] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.081+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:16.107+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:16.119+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:16.136+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@733258832 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:16.137+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76c45fef]
2026-01-07T16:03:16.138+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24b9b5b4]
2026-01-07T16:03:16.139+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:16.149+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.150+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.153+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6fea20] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.154+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2717fb1b] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@419495749 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:16.156+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1315634776 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:16.162+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:03:16.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bda0d63]
2026-01-07T16:03:16.164+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.164+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eff9f2]
2026-01-07T16:03:16.164+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.165+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.165+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c97b9e0] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327422ec] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.166+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@121441796 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1269660985 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:16.167+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2717fb1b]
2026-01-07T16:03:16.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d6fea20]
2026-01-07T16:03:16.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.168+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:16.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.169+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.171+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:16.171+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@416a0f55] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.171+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@228f4bfd] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1497234240 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:16.173+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277060454 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:16.178+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:16.179+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:16.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.180+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:16.181+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:16.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:16.182+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c97b9e0]
2026-01-07T16:03:16.184+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327422ec]
2026-01-07T16:03:16.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.186+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a358ab] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.187+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12484b68] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.188+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1088075206 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20473999 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:16.201+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:16.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:16.202+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:03:16.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:16.203+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:16.204+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:16.205+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@416a0f55]
2026-01-07T16:03:16.206+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@228f4bfd]
2026-01-07T16:03:16.207+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.209+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.209+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc8714c] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.209+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bb1aed] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@776585543 wrapping com.mysql.cj.jdbc.ConnectionImpl@6bdffcd7] will not be managed by Spring
2026-01-07T16:03:16.210+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@808678564 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:03:16.212+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.212+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:03:16.212+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:03:16.213+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.213+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.213+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a358ab]
2026-01-07T16:03:16.213+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12484b68]
2026-01-07T16:03:16.214+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.214+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:16.216+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63b90570] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.217+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:03:16.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@413433772 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:16.218+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.220+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.221+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.229+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc8714c]
2026-01-07T16:03:16.231+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.234+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:16.235+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bb1aed]
2026-01-07T16:03:16.236+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:03:16.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:16.238+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:16.238+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:16.240+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:16.241+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.254+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63b90570]
2026-01-07T16:03:16.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:16.251+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:03:16.252+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:03:16.255+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:03:16.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:03:16.259+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:03:16.260+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:03:16.256+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:03:16.257+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:16.261+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:03:16.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.266+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3af1c8d8] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1051453996 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.267+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.268+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.262+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:03:16.269+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:03:16.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:03:16.286+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.318+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.323+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1833bfc9] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.328+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3af1c8d8]
2026-01-07T16:03:16.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973555138 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:16.329+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:03:16.331+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@244d8548] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.332+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:03:16.333+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@281947665 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.359+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:03:16.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@244d8548]
2026-01-07T16:03:16.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1833bfc9]
2026-01-07T16:03:16.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.362+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a22e29] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.363+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a674461] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.365+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2131593808 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1865376531 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:16.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:16.366+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:16.368+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.370+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.371+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a674461]
2026-01-07T16:03:16.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.373+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:16.375+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7920a436] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.376+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37a22e29]
2026-01-07T16:03:16.379+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699704127 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:16.380+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.382+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:16.383+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4539025e] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:03:16.384+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1674358710 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.385+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.386+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.390+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:03:16.390+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.393+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7920a436]
2026-01-07T16:03:16.394+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4539025e]
2026-01-07T16:03:16.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.395+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d7678d] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.396+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab06f2e] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.397+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2125099765 wrapping com.mysql.cj.jdbc.ConnectionImpl@3644f91] will not be managed by Spring
2026-01-07T16:03:16.399+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2006362580 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.400+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:16.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.401+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:16.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:16.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d7678d]
2026-01-07T16:03:16.407+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab06f2e]
2026-01-07T16:03:16.409+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:16.410+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.411+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:03:16.413+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e26d60] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.415+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:03:16.431+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2136128397 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:03:16.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:03:16.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:03:16.451+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e26d60]
2026-01-07T16:03:16.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44dc6eed] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1363182203 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.455+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44dc6eed]
2026-01-07T16:03:16.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bf9266] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1655908154 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.471+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:03:16.472+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:03:16.474+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:03:16.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bf9266]
2026-01-07T16:03:16.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:03:16.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa4150b] was not registered for synchronization because synchronization is not active
2026-01-07T16:03:16.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@330403483 wrapping com.mysql.cj.jdbc.ConnectionImpl@4b193b4a] will not be managed by Spring
2026-01-07T16:03:16.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:03:16.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:03:16.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:03:16.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa4150b]
2026-01-07T16:03:16.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:03:16.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:03:16.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:25:05.937+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/export/journal
2026-01-07T16:25:05.941+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/export/journal
2026-01-07T16:25:05.943+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/export/journal
2026-01-07T16:25:05.944+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/export/journal
2026-01-07T16:25:05.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/export/journal", parameters={}
2026-01-07T16:25:05.945+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#exportJournalEntries(String, String)
2026-01-07T16:25:05.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.exportJournalEntries(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T16:25:05.947+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseController.exportJournalEntries(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-07T16:25:05.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:05.948+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a3f5c2] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:05.951+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@913489614 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:25:05.952+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? , ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:25:05.955+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), PAID(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:25:05.971+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 15
2026-01-07T16:25:05.971+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a3f5c2]
2026-01-07T16:25:05.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:05.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488ec32e] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:05.979+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1268397854 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:25:05.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:25:05.980+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:25:05.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:25:05.982+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488ec32e]
2026-01-07T16:25:05.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:05.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c9b4d96] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:05.984+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924296856 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:25:05.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:25:05.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-07T16:25:05.989+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-07T16:25:05.989+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c9b4d96]
2026-01-07T16:25:05.994+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:05.995+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c218af8] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:05.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@542074952 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:25:05.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:25:05.996+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 1(Long), 6(Long), 8(Long), 13(Long), 14(Long), 16(Long), 17(Long), 18(Long), 19(Long), 20(Long), 27(Long), 31(Long), 32(Long), 24(Long), 33(Long)
2026-01-07T16:25:05.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-07T16:25:05.998+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c218af8]
2026-01-07T16:25:07.152+09:00  INFO 17088 --- [http-nio-8080-exec-3] c.i.backend.service.ExpenseService       : 전표 엑셀 파일 생성 완료 - 파일명: journal_entry_10209170190173011004.xlsx, 건수: 15
2026-01-07T16:25:07.160+09:00  INFO 17088 --- [http-nio-8080-exec-3] c.i.b.controller.ExpenseController       : 전표 다운로드 요청 - userId: 4, startDate: null, endDate: null
2026-01-07T16:25:07.163+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Found 'Content-Type:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' in response
2026-01-07T16:25:07.172+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [file [C:\Users\owner\AppData\Local\Temp\journal_entry_10209170190173011004.xlsx]]
2026-01-07T16:25:07.187+09:00  WARN 17088 --- [http-nio-8080-exec-3] o.apache.coyote.http11.Http11Processor   : The HTTP response header [Content-Disposition] with value [attachment; filename="전표_전체_전체.xlsx"] has been removed from the response because it is invalid

java.lang.IllegalArgumentException: The Unicode character [전] at code point [51,204] cannot be encoded as it is outside the permitted range of 0 to 255
	at org.apache.tomcat.util.buf.MessageBytes.toBytesSimple(MessageBytes.java:306) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.buf.MessageBytes.toBytes(MessageBytes.java:279) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.write(Http11OutputBuffer.java:400) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11OutputBuffer.sendHeader(Http11OutputBuffer.java:379) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.writeHeaders(Http11Processor.java:1067) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1054) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:377) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.Response.action(Response.java:201) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.Response.commit(Response.java:454) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:284) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:264) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:130) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.security.web.util.OnCommittedResponseWrapper$SaveContextServletOutputStream.flush(OnCommittedResponseWrapper.java:524) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.context.request.async.StandardServletAsyncWebRequest$LifecycleServletOutputStream.flush(StandardServletAsyncWebRequest.java:415) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeContent(ResourceHttpMessageConverter.java:161) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeInternal(ResourceHttpMessageConverter.java:115) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.ResourceHttpMessageConverter.writeInternal(ResourceHttpMessageConverter.java:46) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:235) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:344) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:263) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ResponseEntityReturnValueHandler.handleReturnValue(ResponseEntityReturnValueHandler.java:79) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:79) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at com.innersignature.backend.security.RateLimitFilter.doFilterInternal(RateLimitFilter.java:87) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.7.jar:6.5.7]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2026-01-07T16:25:07.237+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:25:08.427+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/4/approvers/active
2026-01-07T16:25:08.428+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/4/approvers/active
2026-01-07T16:25:08.432+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:25:08.433+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:25:08.438+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:25:08.443+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:25:08.443+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:25:08.445+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:25:08.445+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:25:08.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:25:08.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:25:08.446+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:08.448+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@227b54d2] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:08.447+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:25:08.452+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:08.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers/active
2026-01-07T16:25:08.454+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a989b2] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:08.456+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers/active
2026-01-07T16:25:08.460+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers/active
2026-01-07T16:25:08.461+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160126993 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:25:08.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers/active", parameters={}
2026-01-07T16:25:08.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:25:08.462+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-07T16:25:08.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:25:08.464+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T16:25:08.465+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@683151495 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:25:08.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T16:25:08.466+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:25:08.467+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:25:08.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:08.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:25:08.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@227b54d2]
2026-01-07T16:25:08.468+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab39f31] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:08.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:08.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451976708 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:25:08.469+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a3720] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:08.470+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-07T16:25:08.478+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:25:08.480+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:25:08.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a989b2]
2026-01-07T16:25:08.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:25:08.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:25:08.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1539975873 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:25:08.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:25:08.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:25:08.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 2
2026-01-07T16:25:08.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:25:08.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab39f31]
2026-01-07T16:25:08.496+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:25:08.497+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=5, username=test_user4, password=null, (truncated)...]
2026-01-07T16:25:08.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:25:08.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:25:08.500+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a3720]
2026-01-07T16:25:08.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/4/approvers/active
2026-01-07T16:25:08.502+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:08.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df68966] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:08.503+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/users/4/approvers/active
2026-01-07T16:25:08.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761729555 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:25:08.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/4/approvers/active
2026-01-07T16:25:08.504+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:25:08.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/4/approvers/active", parameters={}
2026-01-07T16:25:08.505+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:25:08.508+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getActiveApprovers(Long)
2026-01-07T16:25:08.511+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T16:25:08.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getActiveApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-01-07T16:25:08.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:08.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e6a5e0] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:08.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1181884583 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:25:08.517+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:25:08.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY uam.priority ASC, u.korean_name ASC
2026-01-07T16:25:08.518+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5df68966]
2026-01-07T16:25:08.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:25:08.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:08.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35073890] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:08.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1548954351 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:25:08.520+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:25:08.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.U.findActiveApproversByUserId    : <==      Total: 2
2026-01-07T16:25:08.523+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75e6a5e0]
2026-01-07T16:25:08.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:25:08.535+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:25:08.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=5, username=test_user4, password=null, (truncated)...]
2026-01-07T16:25:08.547+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:25:08.549+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:25:08.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35073890]
2026-01-07T16:25:08.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:25:08.551+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:25:08.552+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:25:09.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/user
2026-01-07T16:25:09.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-01-07T16:25:09.809+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/user
2026-01-07T16:25:09.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/cards/company
2026-01-07T16:25:09.811+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/user
2026-01-07T16:25:09.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-01-07T16:25:09.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/user", parameters={}
2026-01-07T16:25:09.813+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-01-07T16:25:09.815+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-01-07T16:25:09.820+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:09.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab69969] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:09.814+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getUserCards()
2026-01-07T16:25:09.824+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:25:09.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54fa4fb1] was not registered for synchronization because synchronization is not active
2026-01-07T16:25:09.831+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@640384781 wrapping com.mysql.cj.jdbc.ConnectionImpl@fa3662b] will not be managed by Spring
2026-01-07T16:25:09.832+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-01-07T16:25:09.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-07T16:25:09.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1578866494 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:25:09.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveByUserId             : ==>  Preparing: SELECT uc.*, u.korean_name AS user_name FROM user_card_tb uc LEFT JOIN user_tb u ON uc.user_id = u.user_id WHERE uc.user_id = ? AND uc.is_active = 1 ORDER BY uc.is_default DESC, uc.created_at DESC
2026-01-07T16:25:09.835+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveByUserId             : ==> Parameters: 4(Long)
2026-01-07T16:25:09.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 2
2026-01-07T16:25:09.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab69969]
2026-01-07T16:25:09.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.U.findActiveByUserId             : <==      Total: 0
2026-01-07T16:25:09.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:25:09.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54fa4fb1]
2026-01-07T16:25:09.839+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=1, cardNa (truncated)...]
2026-01-07T16:25:09.844+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:25:09.845+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:25:09.846+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=개인 카드 목록 조회 성공, data=[])]
2026-01-07T16:25:09.847+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:41:35.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:41:35.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:41:35.479+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:41:35.480+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:41:35.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:41:35.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:41:35.482+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:41:35.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:41:35.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:41:35.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:41:35.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:41:35.483+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:41:35.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:41:35.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:41:35.484+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:41:35.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:41:35.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:41:35.485+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:41:35.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:41:35.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:41:35.486+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:41:35.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:41:35.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:41:35.487+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:41:35.488+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372c70ac] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.489+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2c6665] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.490+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.491+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63648577] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.492+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cf26c0] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.495+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76dff130] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.508+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@730168734 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.508+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898270695 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.513+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1032444944 wrapping com.mysql.cj.jdbc.ConnectionImpl@2aeab96b] will not be managed by Spring
2026-01-07T16:41:35.515+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296786140 wrapping com.mysql.cj.jdbc.ConnectionImpl@b928b99] will not be managed by Spring
2026-01-07T16:41:35.516+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@483114700 wrapping com.mysql.cj.jdbc.ConnectionImpl@79c976ee] will not be managed by Spring
2026-01-07T16:41:35.519+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:41:35.521+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:41:35.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.522+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:41:35.523+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:41:35.524+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:41:35.525+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.528+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:41:35.537+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.540+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2c6665]
2026-01-07T16:41:35.541+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.542+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f281d4d] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.543+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2075452728 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.543+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:41:35.543+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.544+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.544+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372c70ac]
2026-01-07T16:41:35.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76dff130]
2026-01-07T16:41:35.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:41:35.545+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.546+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.548+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.548+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cf26c0]
2026-01-07T16:41:35.549+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:41:35.549+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4de993] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.549+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:41:35.550+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.553+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@320628160 wrapping com.mysql.cj.jdbc.ConnectionImpl@b928b99] will not be managed by Spring
2026-01-07T16:41:35.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5a0e36] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.554+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63648577]
2026-01-07T16:41:35.557+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:41:35.557+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.558+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477868437 wrapping com.mysql.cj.jdbc.ConnectionImpl@79c976ee] will not be managed by Spring
2026-01-07T16:41:35.558+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.559+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:41:35.560+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.560+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.562+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.562+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8b76e2] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.563+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:41:35.566+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f281d4d]
2026-01-07T16:41:35.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.567+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@903196473 wrapping com.mysql.cj.jdbc.ConnectionImpl@2aeab96b] will not be managed by Spring
2026-01-07T16:41:35.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:41:35.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.568+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.569+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:41:35.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4de993]
2026-01-07T16:41:35.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4994e0c7] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.570+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.571+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.572+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@641294029 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5a0e36]
2026-01-07T16:41:35.574+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7308caf6] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.575+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63181e96] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.575+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:41:35.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1472429430 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.576+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@8020503 wrapping com.mysql.cj.jdbc.ConnectionImpl@b928b99] will not be managed by Spring
2026-01-07T16:41:35.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a22c1e1] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:41:35.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:41:35.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8b76e2]
2026-01-07T16:41:35.578+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:41:35.579+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1085492013 wrapping com.mysql.cj.jdbc.ConnectionImpl@79c976ee] will not be managed by Spring
2026-01-07T16:41:35.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:41:35.582+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.584+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:41:35.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:41:35.586+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3176ab0c] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.587+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:41:35.588+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@551282598 wrapping com.mysql.cj.jdbc.ConnectionImpl@2aeab96b] will not be managed by Spring
2026-01-07T16:41:35.589+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:41:35.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:41:35.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:41:35.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:41:35.591+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:41:35.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7308caf6]
2026-01-07T16:41:35.592+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a22c1e1]
2026-01-07T16:41:35.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4994e0c7]
2026-01-07T16:41:35.593+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:41:35.594+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694434e3] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.595+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66298231] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.596+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@121136084 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.600+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@183003868 wrapping com.mysql.cj.jdbc.ConnectionImpl@79c976ee] will not be managed by Spring
2026-01-07T16:41:35.601+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T16:41:35.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:41:35.602+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:41:35.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.604+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63181e96]
2026-01-07T16:41:35.605+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3176ab0c]
2026-01-07T16:41:35.605+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.605+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/revision-requests
2026-01-07T16:41:35.605+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.606+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/revision-requests
2026-01-07T16:41:35.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df2cdfc] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.607+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c72d5] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/revision-requests", parameters={}
2026-01-07T16:41:35.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@694434e3]
2026-01-07T16:41:35.608+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@784174714 wrapping com.mysql.cj.jdbc.ConnectionImpl@b928b99] will not be managed by Spring
2026-01-07T16:41:35.609+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@106334045 wrapping com.mysql.cj.jdbc.ConnectionImpl@2aeab96b] will not be managed by Spring
2026-01-07T16:41:35.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxRevisionRequestsForDrafter()
2026-01-07T16:41:35.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66298231]
2026-01-07T16:41:35.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:41:35.610+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.611+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564eb5e6] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:41:35.615+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f94d293] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.616+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:41:35.617+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@509960416 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1070128638 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:41:35.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.620+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.drafter_id = ? AND r.tax_revision_requested = 1 ORDER BY r.expense_report_id DESC
2026-01-07T16:41:35.621+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:41:35.622+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : ==> Parameters: 1(Long), 4(Long)
2026-01-07T16:41:35.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:41:35.624+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:41:35.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c72d5]
2026-01-07T16:41:35.626+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] b.m.E.selectTaxRevisionRequestsByDrafter : <==      Total: 0
2026-01-07T16:41:35.628+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:41:35.629+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df2cdfc]
2026-01-07T16:41:35.632+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:41:35.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f94d293]
2026-01-07T16:41:35.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:41:35.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@564eb5e6]
2026-01-07T16:41:35.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.635+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:41:35.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.636+09:00 DEBUG 17088 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.637+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:41:35.637+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:41:35.638+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무 수정 요청 목록 조회 성공, data=[])]
2026-01-07T16:41:35.638+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d7d8a79] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.639+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-07T16:41:35.640+09:00 DEBUG 17088 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:41:35.642+09:00 DEBUG 17088 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.643+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:41:35.644+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312814005 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:41:35.645+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/my-approvals
2026-01-07T16:41:35.647+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:41:35.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:41:35.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-07T16:41:35.665+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-07T16:41:35.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-07T16:41:35.659+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199879c3] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.661+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=APPROVED
2026-01-07T16:41:35.667+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.673+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1535786745 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.673+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=APPROVED", parameters={masked}
2026-01-07T16:41:35.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@744db796] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1293901213 wrapping com.mysql.cj.jdbc.ConnectionImpl@2aeab96b] will not be managed by Spring
2026-01-07T16:41:35.685+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:41:35.674+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:41:35.675+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:41:35.687+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:41:35.693+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:41:35.695+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.720+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:41:35.726+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76f9013f] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.727+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d7d8a79]
2026-01-07T16:41:35.728+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2088722086 wrapping com.mysql.cj.jdbc.ConnectionImpl@79c976ee] will not be managed by Spring
2026-01-07T16:41:35.729+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 16
2026-01-07T16:41:35.730+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.731+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@744db796]
2026-01-07T16:41:35.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d381ffa] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.732+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.733+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@471294054 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.734+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e7045ff] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.737+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.738+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1469622944 wrapping com.mysql.cj.jdbc.ConnectionImpl@2aeab96b] will not be managed by Spring
2026-01-07T16:41:35.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.739+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:41:35.740+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199879c3]
2026-01-07T16:41:35.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.741+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.742+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76f9013f]
2026-01-07T16:41:35.743+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@141a203c] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.744+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1310070045 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.745+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c03e651] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.747+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.748+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@852356631 wrapping com.mysql.cj.jdbc.ConnectionImpl@79c976ee] will not be managed by Spring
2026-01-07T16:41:35.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.751+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.752+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.753+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d381ffa]
2026-01-07T16:41:35.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.754+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.755+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e7045ff]
2026-01-07T16:41:35.758+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@141a203c]
2026-01-07T16:41:35.756+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11974830] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.757+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c03e651]
2026-01-07T16:41:35.758+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd6d64a] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.759+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a354b0] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.760+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1275937335 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.760+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@835009458 wrapping com.mysql.cj.jdbc.ConnectionImpl@2aeab96b] will not be managed by Spring
2026-01-07T16:41:35.761+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1719507768 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:41:35.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@793e4a18] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:41:35.762+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:41:35.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:41:35.764+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1780222464 wrapping com.mysql.cj.jdbc.ConnectionImpl@79c976ee] will not be managed by Spring
2026-01-07T16:41:35.766+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 6(Long), 1(Long)
2026-01-07T16:41:35.767+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:41:35.769+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:41:35.775+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:41:35.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:41:35.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:41:35.776+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-07T16:41:35.777+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a354b0]
2026-01-07T16:41:35.777+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11974830]
2026-01-07T16:41:35.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd6d64a]
2026-01-07T16:41:35.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.778+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.780+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.782+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50aa0fd7] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62638c37] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.783+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f29fb6] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:41:35.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1763035046 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1226743427 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.784+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868397028 wrapping com.mysql.cj.jdbc.ConnectionImpl@2aeab96b] will not be managed by Spring
2026-01-07T16:41:35.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@793e4a18]
2026-01-07T16:41:35.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.785+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.786+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.787+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be57347] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.790+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@8427177 wrapping com.mysql.cj.jdbc.ConnectionImpl@79c976ee] will not be managed by Spring
2026-01-07T16:41:35.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.791+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:41:35.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62638c37]
2026-01-07T16:41:35.792+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50aa0fd7]
2026-01-07T16:41:35.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-07T16:41:35.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24f29fb6]
2026-01-07T16:41:35.794+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.795+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.798+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:41:35.799+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:41:35.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=33, drafterI (truncated)...]
2026-01-07T16:41:35.801+09:00 DEBUG 17088 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.805+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-07T16:41:35.808+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T16:41:35.810+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-07T16:41:35.821+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-07T16:41:35.822+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-07T16:41:35.823+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@be57347]
2026-01-07T16:41:35.823+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-07T16:41:35.825+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-07T16:41:35.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-07T16:41:35.829+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String, String)
2026-01-07T16:41:35.830+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.827+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-07T16:41:35.828+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-07T16:41:35.833+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39772a92] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-07T16:41:35.834+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.836+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@685605196 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.838+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.837+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf28c56] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.840+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1494791236 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.841+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-07T16:41:35.849+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-07T16:41:35.854+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.856+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39772a92]
2026-01-07T16:41:35.857+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-07T16:41:35.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@705e8dd7] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.858+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf28c56]
2026-01-07T16:41:35.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1895635700 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.859+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dc1a7ae] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.860+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.866+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@623444092 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.867+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.874+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.875+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@705e8dd7]
2026-01-07T16:41:35.891+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dc1a7ae]
2026-01-07T16:41:35.891+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.892+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.893+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31923922] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e522d4e] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.894+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@891693810 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.895+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@519966717 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.895+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:41:35.895+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:41:35.906+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:41:35.907+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 7(Long), 5(Long), 4(Long), 3(Long), 2(Long)
2026-01-07T16:41:35.925+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 7
2026-01-07T16:41:35.946+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e522d4e]
2026-01-07T16:41:35.958+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.959+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3326f5a2] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.959+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:41:35.959+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1824622293 wrapping com.mysql.cj.jdbc.ConnectionImpl@592dadd6] will not be managed by Spring
2026-01-07T16:41:35.960+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31923922]
2026-01-07T16:41:35.960+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.960+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682dc7fe] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.961+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1213642992 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.972+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:35.974+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:35.976+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.978+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3326f5a2]
2026-01-07T16:41:35.979+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:35.983+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:35.984+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-07T16:41:35.985+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682dc7fe]
2026-01-07T16:41:35.986+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T16:41:35.987+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:35.988+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445ffb52] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:35.989+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1112262160 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:35.991+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:41:35.992+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:41:36.001+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:41:36.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445ffb52]
2026-01-07T16:41:36.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:36.003+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68866c2d] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:36.004+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396215556 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:36.006+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-07T16:41:36.008+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-07T16:41:36.013+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-07T16:41:36.018+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68866c2d]
2026-01-07T16:41:36.019+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:36.033+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b40c5a0] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:36.034+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@284966881 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:36.037+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:36.038+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:36.042+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:36.043+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b40c5a0]
2026-01-07T16:41:36.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:36.044+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3507cc95] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:36.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2024235600 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:36.055+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-07T16:41:36.056+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-07T16:41:36.068+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-07T16:41:36.074+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3507cc95]
2026-01-07T16:41:36.132+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-07T16:41:36.217+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b50b97] was not registered for synchronization because synchronization is not active
2026-01-07T16:41:36.334+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1541215856 wrapping com.mysql.cj.jdbc.ConnectionImpl@4a85d675] will not be managed by Spring
2026-01-07T16:41:36.342+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-07T16:41:36.353+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-07T16:41:36.372+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-07T16:41:36.374+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b50b97]
2026-01-07T16:41:36.375+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-07T16:41:36.375+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-07T16:41:36.376+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-07T17:08:35.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-07T17:08:35.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/revision-requests
2026-01-07T17:08:35.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/26
2026-01-07T17:08:35.657+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T17:08:35.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T17:08:35.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T17:08:35.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T17:08:35.658+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T17:08:35.676+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/26
2026-01-07T17:08:35.679+09:00 DEBUG 17088 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T17:08:35.682+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-07T17:08:35.700+09:00 DEBUG 17088 --- [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-07T17:08:35.683+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/26
2026-01-07T17:08:35.706+09:00 DEBUG 17088 --- [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
